"use strict";(self.webpackChunk_logto_docs=self.webpackChunk_logto_docs||[]).push([[4107],{14426:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>u,frontMatter:()=>t,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"end-user-flows/sign-up-and-sign-in/error-pages","title":"Custom sign-in experience error pages","description":"During the sign-in flow, end users may sometimes see default error pages. Common scenarios include:","source":"@site/docs/end-user-flows/sign-up-and-sign-in/error-pages.mdx","sourceDirName":"end-user-flows/sign-up-and-sign-in","slug":"/end-user-flows/sign-up-and-sign-in/error-pages","permalink":"/ja/end-user-flows/sign-up-and-sign-in/error-pages","draft":false,"unlisted":false,"editUrl":"https://github.com/logto-io/docs/tree/master/docs/end-user-flows/sign-up-and-sign-in/error-pages.mdx","tags":[],"version":"current","sidebarPosition":7,"frontMatter":{"sidebar_position":7,"sidebar_label":"Error pages"},"sidebar":"docsSidebar","previous":{"title":"\u30e6\u30fc\u30b6\u30fc\u767b\u9332\u3092\u7121\u52b9\u306b\u3059\u308b","permalink":"/ja/end-user-flows/sign-up-and-sign-in/disable-user-registration"},"next":{"title":"\u30a8\u30f3\u30bf\u30fc\u30d7\u30e9\u30a4\u30ba\u30b7\u30f3\u30b0\u30eb\u30b5\u30a4\u30f3\u30aa\u30f3 (SSO)","permalink":"/ja/end-user-flows/enterprise-sso/"}}');var o=s(25105),r=s(79621);const t={sidebar_position:7,sidebar_label:"Error pages"},a="Custom sign-in experience error pages",l={},c=[{value:"Unknown session redirect URL",id:"unknown-session-redirect-url",level:2},{value:"Support contact info",id:"support-contact-info",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,r.R)(),...e.components},{CloudLink:s}=n;return s||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("CloudLink",!0),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"custom-sign-in-experience-error-pages",children:"Custom sign-in experience error pages"})}),"\n",(0,o.jsx)(n.p,{children:"During the sign-in flow, end users may sometimes see default error pages. Common scenarios include:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Expired sessions"}),": The user took too long to sign in, and the session timed out."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Directly visiting the sign-in URL"}),": The user opens a bookmark or shares ",(0,o.jsx)(n.code,{children:"/sign-in"})," URL (bypassing the normal sign-in button)."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Non-existent routes"}),": The user navigates to a path that doesn\u2019t exist in your auth flows."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Social sign-in callback issues"}),": The social session is not found in a social callback page."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Invalid magic links"}),": A ",(0,o.jsx)(n.a,{href:"/end-user-flows/one-time-token",children:"one-time token (magic link)"})," for things like organization invitation or passwordless sign-in has expired or consumed."]}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"By default, Logto will show a generic error page (e.g., a 404 \u201cunknown session\u201d page) in these scenarios. To improve the end-user experience when encountering errors, you need to set up the following parameters:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Unknown session redirect URL"}),": A fallback URL to send users to when their session is not found."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Support email & Support website"}),": Contact information shown on error pages."]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"unknown-session-redirect-url",children:"Unknown session redirect URL"}),"\n",(0,o.jsxs)(n.p,{children:["Logto uses the ",(0,o.jsx)(n.a,{href:"https://auth.wiki/openid-connect",children:"OpenID Connect (OIDC)"})," flow for authentication. A valid OIDC authorization flow must be initiated by your application, e.g, clicking your app\u2019s \u201cSign in\u201d button sends an OIDC authorization request to Logto, which then sets up a secure session (cookie)."]}),"\n",(0,o.jsxs)(n.p,{children:["However, if a user directly accesses ",(0,o.jsx)(n.code,{children:"/sign-in"}),', bypassing session validation, it causes "unknown session" 404 errors when:']}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Sessions expire"}),"\n",(0,o.jsx)(n.li,{children:"Users bookmark/share sign-in links"}),"\n",(0,o.jsx)(n.li,{children:"Authorization context is missing"}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:["To handle this, Logto introduced an ",(0,o.jsx)(n.code,{children:"unknownSessionRedirectUrl"})," setting. When you set this URL, Logto will automatically redirect users to the specified page to reinitiate a new sign-in flow instead of showing the 404 error."]}),"\n",(0,o.jsx)(n.p,{children:"How to set it up:"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["Go to ",(0,o.jsx)(s,{to:"/sign-in-experience/sign-up-and-sign-in",children:"Console > Sign-in experience > Sign-up and sign-in > Advanced settings"})]}),"\n",(0,o.jsxs)(n.li,{children:['Set the "Unknown session redirect URL" to your service address or product\u2019s homepage. E.g., Logto Cloud will set "',(0,o.jsx)(n.a,{href:"https://cloud.logto.io",children:"https://cloud.logto.io"}),'".']}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"support-contact-info",children:"Support contact info"}),"\n",(0,o.jsx)(n.p,{children:"If other errors occur (such as visiting an invalid path, a social callback with no session, or opening an expired magic link), Logto will show a default error page. To help users, you can display contact information on these unavoidable error pages."}),"\n",(0,o.jsx)("img",{src:"/img/assets/sign-in-error-pages.png",alt:"Authentication error pages with support contact info"}),"\n",(0,o.jsx)(n.p,{children:"How to set it up:"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["Go to ",(0,o.jsx)(s,{to:"/sign-in-experience/content",children:"Console > Sign-in experience > Content > Support"})]}),"\n",(0,o.jsx)(n.li,{children:"Set your support email address"}),"\n",(0,o.jsx)(n.li,{children:"Set your support or official website URL"}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"This ensures that even when something goes wrong, users have a clear way to get help."})]})}function u(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},79621:(e,n,s)=>{s.d(n,{R:()=>t,x:()=>a});var i=s(58101);const o={},r=i.createContext(o);function t(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:t(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);