"use strict";(self.webpackChunk_logto_docs=self.webpackChunk_logto_docs||[]).push([[6471],{91080:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>i,contentTitle:()=>c,default:()=>h,frontMatter:()=>a,metadata:()=>t,toc:()=>p});const t=JSON.parse('{"id":"developers/user-impersonation","title":"\uc0ac\uc6a9\uc790 \uac00\uc7a5 (User impersonation)","description":"TechCorp\uc758 \uc9c0\uc6d0 \uc5d4\uc9c0\ub2c8\uc5b4 Sarah\uac00 Alex\ub77c\ub294 \uace0\uac1d\uc73c\ub85c\ubd80\ud130 \uc911\uc694\ud55c \ub9ac\uc18c\uc2a4\uc5d0 \uc811\uadfc\ud560 \uc218 \uc5c6\ub2e4\ub294 \uae34\uae09 \ud2f0\ucf13\uc744 \ubc1b\uc558\ub2e4\uace0 \uc0c1\uc0c1\ud574 \ubcf4\uc138\uc694. \ubb38\uc81c\ub97c \ud6a8\uc728\uc801\uc73c\ub85c \uc9c4\ub2e8\ud558\uace0 \ud574\uacb0\ud558\uae30 \uc704\ud574 Sarah\ub294 \uc2dc\uc2a4\ud15c\uc5d0\uc11c Alex\uac00 \ubcf4\ub294 \uac83\uacfc \ub611\uac19\uc774 \ubcfc \ud544\uc694\uac00 \uc788\uc2b5\ub2c8\ub2e4. \uc774\ub7f4 \ub54c Logto\uc758 \uc0ac\uc6a9\uc790 \uac00\uc7a5 (User impersonation) \uae30\ub2a5\uc774 \uc720\uc6a9\ud558\uac8c \uc0ac\uc6a9\ub429\ub2c8\ub2e4.","source":"@site/i18n/ko/docusaurus-plugin-content-docs/current/developers/user-impersonation.mdx","sourceDirName":"developers","slug":"/developers/user-impersonation","permalink":"/ko/developers/user-impersonation","draft":false,"unlisted":false,"editUrl":"https://github.com/logto-io/docs/tree/master/i18n/ko/docusaurus-plugin-content-docs/current/developers/user-impersonation.mdx","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"id":"user-impersonation","title":"\uc0ac\uc6a9\uc790 \uac00\uc7a5 (User impersonation)","sidebar_label":"\uc0ac\uc6a9\uc790 \uac00\uc7a5 (User impersonation)","sidebar_position":3},"sidebar":"docsSidebar","previous":{"title":"\ucee4\uc2a4\ud140 \ud1a0\ud070 \ud074\ub808\uc784 \uc2a4\ud06c\ub9bd\ud2b8 \uc0dd\uc131\ud558\uae30","permalink":"/ko/developers/custom-token-claims/create-script"},"next":{"title":"\uc11c\uba85 \ud0a4","permalink":"/ko/developers/signing-keys"}}');var s=o(25105),r=o(79621);const a={id:"user-impersonation",title:"\uc0ac\uc6a9\uc790 \uac00\uc7a5 (User impersonation)",sidebar_label:"\uc0ac\uc6a9\uc790 \uac00\uc7a5 (User impersonation)",sidebar_position:3},c="\uc0ac\uc6a9\uc790 \uac00\uc7a5 (User impersonation)",i={},p=[{value:"\uc5b4\ub5bb\uac8c \ub3d9\uc791\ud558\ub098\uc694?",id:"how-it-works",level:2},{value:"1\ub2e8\uacc4: \uac00\uc7a5 (Impersonation) \uc694\uccad\ud558\uae30",id:"step-1-requesting-impersonation",level:3},{value:"2\ub2e8\uacc4: subject \ud1a0\ud070 \ud68d\ub4dd\ud558\uae30",id:"step-2-obtaining-a-subject-token",level:3},{value:"3\ub2e8\uacc4: subject \ud1a0\ud070\uc744 \uc561\uc138\uc2a4 \ud1a0\ud070\uc73c\ub85c \uad50\ud658\ud558\uae30",id:"step-3-exchanging-the-subject-token-for-an-access-token",level:3},{value:"\uc0ac\uc6a9 \uc608\uc2dc",id:"example-usage",level:2},{value:"<code>act</code> \ud074\ub808\uc784 (Claim)",id:"act-claim",level:2},{value:"\ud1a0\ud070 \ud074\ub808\uc784 (Claim) \ucee4\uc2a4\ud130\ub9c8\uc774\uc9d5",id:"customizing-token-claims",level:2},{value:"\uad00\ub828 \ub9ac\uc18c\uc2a4",id:"related-resources",level:2}];function l(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,r.R)(),...e.components},{Url:o}=n;return o||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Url",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"\uc0ac\uc6a9\uc790-\uac00\uc7a5-user-impersonation",children:"\uc0ac\uc6a9\uc790 \uac00\uc7a5 (User impersonation)"})}),"\n",(0,s.jsx)(n.p,{children:"TechCorp\uc758 \uc9c0\uc6d0 \uc5d4\uc9c0\ub2c8\uc5b4 Sarah\uac00 Alex\ub77c\ub294 \uace0\uac1d\uc73c\ub85c\ubd80\ud130 \uc911\uc694\ud55c \ub9ac\uc18c\uc2a4\uc5d0 \uc811\uadfc\ud560 \uc218 \uc5c6\ub2e4\ub294 \uae34\uae09 \ud2f0\ucf13\uc744 \ubc1b\uc558\ub2e4\uace0 \uc0c1\uc0c1\ud574 \ubcf4\uc138\uc694. \ubb38\uc81c\ub97c \ud6a8\uc728\uc801\uc73c\ub85c \uc9c4\ub2e8\ud558\uace0 \ud574\uacb0\ud558\uae30 \uc704\ud574 Sarah\ub294 \uc2dc\uc2a4\ud15c\uc5d0\uc11c Alex\uac00 \ubcf4\ub294 \uac83\uacfc \ub611\uac19\uc774 \ubcfc \ud544\uc694\uac00 \uc788\uc2b5\ub2c8\ub2e4. \uc774\ub7f4 \ub54c Logto\uc758 \uc0ac\uc6a9\uc790 \uac00\uc7a5 (User impersonation) \uae30\ub2a5\uc774 \uc720\uc6a9\ud558\uac8c \uc0ac\uc6a9\ub429\ub2c8\ub2e4."}),"\n",(0,s.jsx)(n.p,{children:"\uc0ac\uc6a9\uc790 \uac00\uc7a5 (User impersonation)\uc740 Sarah\uc640 \uac19\uc740 \uc778\uac00 (Authorization)\ub41c \uc0ac\uc6a9\uc790\uac00 \uc2dc\uc2a4\ud15c \ub0b4\uc5d0\uc11c Alex\uc640 \uac19\uc740 \ub2e4\ub978 \uc0ac\uc6a9\uc790\ub97c \ub300\uc2e0\ud558\uc5ec \uc784\uc2dc\ub85c \ud589\ub3d9\ud560 \uc218 \uc788\ub3c4\ub85d \ud574\uc90d\ub2c8\ub2e4. \uc774 \uac15\ub825\ud55c \uae30\ub2a5\uc740 \ubb38\uc81c \ud574\uacb0, \uace0\uac1d \uc9c0\uc6d0, \uad00\ub9ac \uc791\uc5c5 \uc218\ud589\uc5d0 \ub9e4\uc6b0 \uc720\uc6a9\ud569\ub2c8\ub2e4."}),"\n",(0,s.jsx)(n.h2,{id:"how-it-works",children:"\uc5b4\ub5bb\uac8c \ub3d9\uc791\ud558\ub098\uc694?"}),"\n",(0,s.jsx)(n.mermaid,{value:"sequenceDiagram\n    participant Sarah as Sarah\uc758 \uc571\n    participant TechCorp as TechCorp\uc758 \uc11c\ubc84\n    participant Logto as Logto Management API\n    participant LogtoToken as Logto \ud1a0\ud070 \uc5d4\ub4dc\ud3ec\uc778\ud2b8\n\n    Sarah->>TechCorp: POST /api/request-impersonation\n    Note over Sarah,TechCorp: Alex\ub97c \uac00\uc7a5 (Impersonate) \uc694\uccad\n\n    TechCorp->>Logto: POST /api/subject-tokens\n    Note over TechCorp,Logto: Alex\ub97c \uc704\ud55c subject \ud1a0\ud070 \uc694\uccad\n\n    Logto--\x3e>TechCorp: subject \ud1a0\ud070 \ubc18\ud658\n    TechCorp--\x3e>Sarah: subject \ud1a0\ud070 \ubc18\ud658\n\n    Sarah->>LogtoToken: POST /oidc/token\n    Note over Sarah,LogtoToken: subject \ud1a0\ud070\uc744 \uc561\uc138\uc2a4 \ud1a0\ud070\uc73c\ub85c \uad50\ud658\n\n    LogtoToken--\x3e>Sarah: \uc561\uc138\uc2a4 \ud1a0\ud070 \ubc18\ud658\n    Note over Sarah: \uc774\uc81c Sarah\ub294 Alex\ub85c\uc11c \ub9ac\uc18c\uc2a4\uc5d0 \uc811\uadfc \uac00\ub2a5"}),"\n",(0,s.jsx)(n.p,{children:"\uac00\uc7a5 (Impersonation) \ud504\ub85c\uc138\uc2a4\ub294 \uc138 \uac00\uc9c0 \uc8fc\uc694 \ub2e8\uacc4\ub85c \uc774\ub8e8\uc5b4\uc9d1\ub2c8\ub2e4:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Sarah\uac00 TechCorp\uc758 \ubc31\uc5d4\ub4dc \uc11c\ubc84\ub97c \ud1b5\ud574 \uac00\uc7a5 (Impersonation)\uc744 \uc694\uccad\ud569\ub2c8\ub2e4."}),"\n",(0,s.jsx)(n.li,{children:"TechCorp\uc758 \uc11c\ubc84\uac00 Logto\uc758 Management API\uc5d0\uc11c subject \ud1a0\ud070\uc744 \ud68d\ub4dd\ud569\ub2c8\ub2e4."}),"\n",(0,s.jsx)(n.li,{children:"Sarah\uc758 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc774 \uc774 subject \ud1a0\ud070\uc744 \uc561\uc138\uc2a4 \ud1a0\ud070\uc73c\ub85c \uad50\ud658\ud569\ub2c8\ub2e4."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Sarah\uac00 \uc774 \uae30\ub2a5\uc744 \uc0ac\uc6a9\ud558\uc5ec Alex\ub97c \ub3c4\uc6b8 \uc218 \uc788\ub294 \ubc29\ubc95\uc744 \uc0b4\ud3b4\ubcf4\uaca0\uc2b5\ub2c8\ub2e4."}),"\n",(0,s.jsx)(n.h3,{id:"step-1-requesting-impersonation",children:"1\ub2e8\uacc4: \uac00\uc7a5 (Impersonation) \uc694\uccad\ud558\uae30"}),"\n",(0,s.jsx)(n.p,{children:"\uba3c\uc800, Sarah\uc758 \uc9c0\uc6d0 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc774 TechCorp\uc758 \ubc31\uc5d4\ub4dc \uc11c\ubc84\uc5d0 \uac00\uc7a5 (Impersonation)\uc744 \uc694\uccad\ud574\uc57c \ud569\ub2c8\ub2e4."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\uc694\uccad (Sarah\uc758 \uc560\ud50c\ub9ac\ucf00\uc774\uc158 \u2192 TechCorp\uc758 \uc11c\ubc84)"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'POST /api/request-impersonation HTTP/1.1\nHost: api.techcorp.com\nAuthorization: Bearer <Sarah\'s_access_token>\nContent-Type: application/json\n\n{\n  "userId": "alex123",\n  "reason": "\ub9ac\uc18c\uc2a4 \uc811\uadfc \ubb38\uc81c \uc870\uc0ac",\n  "ticketId": "TECH-1234"\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:"\uc774 API\uc5d0\uc11c \ubc31\uc5d4\ub4dc\ub294 Sarah\uac00 Alex\ub97c \uac00\uc7a5\ud560 \uc218 \uc788\ub294 \uc801\uc808\ud55c \uad8c\ud55c (Permission)\uc774 \uc788\ub294\uc9c0 \uc778\uac00 (Authorization) \uac80\uc0ac\ub97c \uc218\ud589\ud574\uc57c \ud569\ub2c8\ub2e4."}),"\n",(0,s.jsx)(n.h3,{id:"step-2-obtaining-a-subject-token",children:"2\ub2e8\uacc4: subject \ud1a0\ud070 \ud68d\ub4dd\ud558\uae30"}),"\n",(0,s.jsxs)(n.p,{children:["Sarah\uc758 \uc694\uccad\uc744 \uac80\uc99d\ud55c \ud6c4, TechCorp\uc758 \uc11c\ubc84\ub294 Logto\uc758 ",(0,s.jsx)(n.a,{href:"/integrate-logto/interact-with-management-api",children:"Management API"}),"\uc5d0 subject \ud1a0\ud070\uc744 \uc694\uccad\ud569\ub2c8\ub2e4."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\uc694\uccad (TechCorp\uc758 \uc11c\ubc84 \u2192 Logto Management API)"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'POST /api/subject-tokens HTTP/1.1\nHost: techcorp.logto.app\nAuthorization: Bearer <TechCorp_m2m_access_token>\nContent-Type: application/json\n\n{\n  "userId": "alex123",\n  "context": {\n    "ticketId": "TECH-1234",\n    "reason": "\ub9ac\uc18c\uc2a4 \uc811\uadfc \ubb38\uc81c",\n    "supportEngineerId": "sarah789"\n  }\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\uc751\ub2f5 (Logto \u2192 TechCorp\uc758 \uc11c\ubc84)"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "subjectToken": "sub_7h32jf8sK3j2",\n  "expiresIn": 600\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:"TechCorp\uc758 \uc11c\ubc84\ub294 \uc774 subject \ud1a0\ud070\uc744 Sarah\uc758 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc5d0 \ubc18\ud658\ud574\uc57c \ud569\ub2c8\ub2e4."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\uc751\ub2f5 (TechCorp\uc758 \uc11c\ubc84 \u2192 Sarah\uc758 \uc560\ud50c\ub9ac\ucf00\uc774\uc158)"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "subjectToken": "sub_7h32jf8sK3j2",\n  "expiresIn": 600\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"step-3-exchanging-the-subject-token-for-an-access-token",children:"3\ub2e8\uacc4: subject \ud1a0\ud070\uc744 \uc561\uc138\uc2a4 \ud1a0\ud070\uc73c\ub85c \uad50\ud658\ud558\uae30"}),"\n",(0,s.jsx)(n.p,{children:"\uc774\uc81c Sarah\uc758 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc740 \uc774 subject \ud1a0\ud070\uc744 Alex\ub97c \ub300\ud45c\ud558\ub294 \uc561\uc138\uc2a4 \ud1a0\ud070\uc73c\ub85c \uad50\ud658\ud558\uba70, \ud1a0\ud070\uc774 \uc0ac\uc6a9\ub420 \ub9ac\uc18c\uc2a4\ub97c \uba85\uc2dc\ud569\ub2c8\ub2e4."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\uc694\uccad (Sarah\uc758 \uc560\ud50c\ub9ac\ucf00\uc774\uc158 \u2192 Logto \ud1a0\ud070 \uc5d4\ub4dc\ud3ec\uc778\ud2b8)"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"POST /oidc/token HTTP/1.1\nHost: techcorp.logto.app\nContent-Type: application/x-www-form-urlencoded\n\ngrant_type=urn:ietf:params:oauth:grant-type:token-exchange\n&client_id=techcorp_support_app\n&scope=resource:read\n&subject_token=alx_7h32jf8sK3j2\n&subject_token_type=urn:ietf:params:oauth:token-type:access_token\n&resource=https://api.techcorp.com/customer-data\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\uc751\ub2f5 (Logto \u2192 Sarah\uc758 \uc560\ud50c\ub9ac\ucf00\uc774\uc158)"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "access_token": "eyJhbG...<truncated>",\n  "issued_token_type": "urn:ietf:params:oauth:token-type:access_token",\n  "token_type": "Bearer",\n  "expires_in": 3600,\n  "scope": "resource:read"\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:["\ubc18\ud658\ub41c ",(0,s.jsx)(n.code,{children:"access_token"}),"\uc740 \uc9c0\uc815\ub41c \ub9ac\uc18c\uc2a4\uc5d0 \ubc14\uc778\ub529\ub418\uc5b4 \uc788\uc73c\ubbc0\ub85c TechCorp\uc758 \uace0\uac1d \ub370\uc774\ud130 API\uc5d0\uc11c\ub9cc \uc0ac\uc6a9\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\ucc38\uace0"}),": \uc804\ud1b5\uc801\uc778 \uc6f9 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc758 \uacbd\uc6b0, \ud1a0\ud070 \uc694\uccad \ud5e4\ub354\uc5d0 ",(0,s.jsx)(n.code,{children:"client_id"}),"\uc640 ",(0,s.jsx)(n.code,{children:"client_secret"}),"\uc744 \ud3ec\ud568\ud574\uc57c 401 invalid_client \uc624\ub958\ub97c \ubc29\uc9c0\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."]}),"\n",(0,s.jsx)(n.p,{children:"Node.js \uc608\uc2dc:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:"Authorization: `Basic ${Buffer.from(`${client_id}:${client_secret}`, 'utf8').toString('base64')}`\n"})}),"\n",(0,s.jsx)(n.h2,{id:"example-usage",children:"\uc0ac\uc6a9 \uc608\uc2dc"}),"\n",(0,s.jsx)(n.p,{children:"Sarah\uac00 Node.js \uc9c0\uc6d0 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc5d0\uc11c \uc774 \uae30\ub2a5\uc744 \uc0ac\uc6a9\ud558\ub294 \ubc29\ubc95\uc740 \ub2e4\uc74c\uacfc \uac19\uc2b5\ub2c8\ub2e4:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-jsx",children:"interface ImpersonationResponse {\n  subjectToken: string;\n  expiresIn: number;\n}\n\ninterface TokenExchangeResponse {\n  access_token: string;\n  issued_token_type: string;\n  token_type: string;\n  expires_in: number;\n  scope: string;\n}\n\nasync function impersonateUser(\n  userId: string,\n  clientId: string,\n  ticketId: string,\n  resource: string\n): Promise<string> {\n  try {\n    // 1, 2\ub2e8\uacc4: \uac00\uc7a5 (Impersonation) \uc694\uccad \ubc0f subject \ud1a0\ud070 \ud68d\ub4dd\n    const impersonationResponse = await fetch(\n      'https://api.techcorp.com/api/request-impersonation',\n      {\n        method: 'POST',\n        headers: {\n          Authorization: \"Bearer <Sarah's_access_token>\",\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          userId,\n          reason: '\ub9ac\uc18c\uc2a4 \uc811\uadfc \ubb38\uc81c \uc870\uc0ac',\n          ticketId,\n        }),\n      }\n    );\n\n    if (!impersonationResponse.ok) {\n      throw new Error(`HTTP \uc624\ub958 \ubc1c\uc0dd. \uc0c1\ud0dc: ${impersonationResponse.status}`);\n    }\n\n    const { subjectToken } = (await impersonationResponse.json()) as ImpersonationResponse;\n\n    // 3\ub2e8\uacc4: subject \ud1a0\ud070\uc744 \uc561\uc138\uc2a4 \ud1a0\ud070\uc73c\ub85c \uad50\ud658\n    const tokenExchangeBody = new URLSearchParams({\n      grant_type: 'urn:ietf:params:oauth:grant-type:token-exchange',\n      client_id: clientId,\n      scope: 'openid profile resource.read',\n      subject_token: subjectToken,\n      subject_token_type: 'urn:ietf:params:oauth:token-type:access_token',\n      resource: resource,\n    });\n\n    const tokenExchangeResponse = await fetch('https://techcorp.logto.app/oidc/token', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/x-www-form-urlencoded' },\n      body: tokenExchangeBody,\n    });\n\n    if (!tokenExchangeResponse.ok) {\n      throw new Error(`HTTP \uc624\ub958! \uc0c1\ud0dc: ${tokenExchangeResponse.status}`);\n    }\n\n    const tokenData = (await tokenExchangeResponse.json()) as TokenExchangeResponse;\n    return tokenData.access_token;\n  } catch (error) {\n    console.error('\uac00\uc7a5 (Impersonation) \uc2e4\ud328:', error);\n    throw error;\n  }\n}\n\n// Sarah\uac00 \uc774 \ud568\uc218\ub97c \uc0ac\uc6a9\ud574 Alex\ub97c \uac00\uc7a5\ud569\ub2c8\ub2e4\nasync function performImpersonation(): Promise<void> {\n  try {\n    const accessToken = await impersonateUser(\n      'alex123',\n      'techcorp_support_app',\n      'TECH-1234',\n      'https://api.techcorp.com/customer-data'\n    );\n    console.log('Alex\ub97c \uc704\ud55c \uac00\uc7a5 (Impersonation) \uc561\uc138\uc2a4 \ud1a0\ud070:', accessToken);\n  } catch (error) {\n    console.error('\uac00\uc7a5 (Impersonation) \uc218\ud589 \uc2e4\ud328:', error);\n  }\n}\n\n// \uac00\uc7a5 (Impersonation) \uc2e4\ud589\nvoid performImpersonation()\n"})}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"subject \ud1a0\ud070\uc740 \ub2e8\uae30 \uc720\ud6a8\ud558\uba70 1\ud68c\uc6a9\uc785\ub2c8\ub2e4."}),"\n",(0,s.jsxs)(n.li,{children:["\uac00\uc7a5 (Impersonation) \uc561\uc138\uc2a4 \ud1a0\ud070\uc5d0\ub294 ",(0,s.jsx)(n.a,{href:"https://auth.wiki/refresh-token",children:"\ub9ac\ud504\ub808\uc2dc \ud1a0\ud070 (Refresh token)"}),"\uc774 \ud3ec\ud568\ub418\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4. \ub9cc\uc57d \ud1a0\ud070\uc774 \ub9cc\ub8cc\ub418\uae30 \uc804\uc5d0 Alex\uc758 \ubb38\uc81c\uac00 \ud574\uacb0\ub418\uc9c0 \uc54a\uc558\ub2e4\uba74 Sarah\ub294 \uc774 \uacfc\uc815\uc744 \ubc18\ubcf5\ud574\uc57c \ud569\ub2c8\ub2e4."]}),"\n",(0,s.jsx)(n.li,{children:"TechCorp\uc758 \ubc31\uc5d4\ub4dc \uc11c\ubc84\ub294 Sarah\uc640 \uac19\uc740 \uc778\uac00 (Authorization)\ub41c \uc9c0\uc6d0 \uc778\ub825\ub9cc \uac00\uc7a5 (Impersonation)\uc744 \uc694\uccad\ud560 \uc218 \uc788\ub3c4\ub85d \uc801\uc808\ud55c \uc778\uac00 (Authorization) \uac80\uc0ac\ub97c \uad6c\ud604\ud574\uc57c \ud569\ub2c8\ub2e4."}),"\n"]})}),"\n",(0,s.jsxs)(n.h2,{id:"act-claim",children:[(0,s.jsx)(n.code,{children:"act"})," \ud074\ub808\uc784 (Claim)"]}),"\n",(0,s.jsxs)(n.p,{children:["\uac00\uc7a5 (Impersonation)\uc744 \uc704\ud55c \ud1a0\ud070 \uad50\ud658 \ud50c\ub85c\uc6b0\ub97c \uc0ac\uc6a9\ud560 \ub54c, \ubc1c\uae09\ub41c \uc561\uc138\uc2a4 \ud1a0\ud070\uc5d0\ub294 \ucd94\uac00\uc801\uc73c\ub85c ",(0,s.jsx)(n.code,{children:"act"}),' (actor) \ud074\ub808\uc784\uc774 \ud3ec\ud568\ub420 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \uc774 \ud074\ub808\uc784\uc740 "\ud589\ub3d9 \uc8fc\uccb4"\uc758 \uc544\uc774\ub374\ud2f0\ud2f0\ub97c \ub098\ud0c0\ub0c5\ub2c8\ub2e4. \uc989, \uc608\uc2dc\uc5d0\uc11c\ub294 Sarah\uac00 Alex\ub97c \ub300\uc2e0\ud574 \ud589\ub3d9\ud558\uace0 \uc788\uc74c\uc744 \uc758\ubbf8\ud569\ub2c8\ub2e4.']}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"act"})," \ud074\ub808\uc784\uc744 \ud3ec\ud568\ud558\ub824\uba74, Sarah\uc758 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc774 \ud1a0\ud070 \uad50\ud658 \uc694\uccad\uc5d0 ",(0,s.jsx)(n.code,{children:"actor_token"}),"\uc744 \uc81c\uacf5\ud574\uc57c \ud569\ub2c8\ub2e4. \uc774 \ud1a0\ud070\uc740 ",(0,s.jsx)(n.code,{children:"openid"})," \uc2a4\ucf54\ud504\uac00 \ud3ec\ud568\ub41c Sarah\uc758 \uc720\ud6a8\ud55c \uc561\uc138\uc2a4 \ud1a0\ud070\uc774\uc5b4\uc57c \ud569\ub2c8\ub2e4. \uc694\uccad \uc608\uc2dc\ub294 \ub2e4\uc74c\uacfc \uac19\uc2b5\ub2c8\ub2e4:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"POST /oidc/token HTTP/1.1\nHost: techcorp.logto.app\nContent-Type: application/x-www-form-urlencoded\n\ngrant_type=urn:ietf:params:oauth:grant-type:token-exchange\n&client_id=techcorp_support_app\n&scope=resource:read\n&subject_token=alx_7h32jf8sK3j2\n&subject_token_type=urn:ietf:params:oauth:token-type:access_token\n&actor_token=sarah_access_token\n&actor_token_type=urn:ietf:params:oauth:token-type:access_token\n&resource=https://api.techcorp.com/customer-data\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"actor_token"}),"\uc774 \uc81c\uacf5\ub418\uba74, \uacb0\uacfc \uc561\uc138\uc2a4 \ud1a0\ud070\uc5d0\ub294 \ub2e4\uc74c\uacfc \uac19\uc740 ",(0,s.jsx)(n.code,{children:"act"})," \ud074\ub808\uc784\uc774 \ud3ec\ud568\ub429\ub2c8\ub2e4:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "aud": "https://api.techcorp.com",\n  "iss": "https://techcorp.logto.app",\n  "exp": 1443904177,\n  "sub": "alex123",\n  "act": {\n    "sub": "sarah789"\n  }\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:["\uc774 ",(0,s.jsx)(n.code,{children:"act"})," \ud074\ub808\uc784\uc740 Sarah (sarah789)\uac00 Alex (alex123)\ub97c \ub300\uc2e0\ud574 \ud589\ub3d9\ud558\uace0 \uc788\uc74c\uc744 \uba85\ud655\ud788 \ub098\ud0c0\ub0c5\ub2c8\ub2e4. ",(0,s.jsx)(n.code,{children:"act"})," \ud074\ub808\uc784\uc740 \uac00\uc7a5 (Impersonation) \ud589\uc704\uc758 \uac10\uc0ac \ubc0f \ucd94\uc801\uc5d0 \uc720\uc6a9\ud569\ub2c8\ub2e4."]}),"\n",(0,s.jsx)(n.h2,{id:"customizing-token-claims",children:"\ud1a0\ud070 \ud074\ub808\uc784 (Claim) \ucee4\uc2a4\ud130\ub9c8\uc774\uc9d5"}),"\n",(0,s.jsxs)(n.p,{children:["Logto\ub294 \uac00\uc7a5 (Impersonation) \ud1a0\ud070\uc5d0 \ub300\ud574 ",(0,s.jsx)(n.a,{href:"/developers/custom-token-claims",children:"\ud1a0\ud070 \ud074\ub808\uc784 (Claim) \ucee4\uc2a4\ud130\ub9c8\uc774\uc9d5"}),"\uc744 \uc9c0\uc6d0\ud569\ub2c8\ub2e4. \uc774\ub97c \ud1b5\ud574 \uac00\uc7a5 (Impersonation) \uacfc\uc815\uc5d0 \ucd94\uac00\uc801\uc778 \ucee8\ud14d\uc2a4\ud2b8\ub098 \uba54\ud0c0\ub370\uc774\ud130(\uc608: \uac00\uc7a5 \uc0ac\uc720, \uc9c0\uc6d0 \ud2f0\ucf13 \ub4f1)\ub97c \ud3ec\ud568\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."]}),"\n",(0,s.jsxs)(n.p,{children:["TechCorp\uc758 \uc11c\ubc84\uac00 Logto Management API\uc5d0 subject \ud1a0\ud070\uc744 \uc694\uccad\ud560 \ub54c, ",(0,s.jsx)(n.code,{children:"context"})," \uac1d\uccb4\ub97c \ud3ec\ud568\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "userId": "alex123",\n  "context": {\n    "ticketId": "TECH-1234",\n    "reason": "\ub9ac\uc18c\uc2a4 \uc811\uadfc \ubb38\uc81c",\n    "supportEngineerId": "sarah789"\n  }\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:["\uc774 ",(0,s.jsx)(n.a,{href:"/developers/custom-token-claims/create-script#context-only-available-for-user-access-token",children:"context"}),"\ub294 ",(0,s.jsx)(n.code,{children:"getCustomJwtClaims()"})," \ud568\uc218\uc5d0\uc11c \ucd5c\uc885 \uc561\uc138\uc2a4 \ud1a0\ud070\uc5d0 \ud2b9\uc815 \ud074\ub808\uc784\uc744 \ucd94\uac00\ud558\ub294 \ub370 \uc0ac\uc6a9\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \uad6c\ud604 \uc608\uc2dc\ub294 \ub2e4\uc74c\uacfc \uac19\uc2b5\ub2c8\ub2e4:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"const getCustomJwtClaims = async ({ token, context, environmentVariables }) => {\n  if (context.grant?.type === 'urn:ietf:params:oauth:grant-type:token-exchange') {\n    const { ticketId, reason, supportEngineerId } = context.grant.subjectTokenContext;\n    return {\n      impersonation_context: {\n        ticket_id: ticketId,\n        reason: reason,\n        support_engineer: supportEngineerId,\n      },\n    };\n  }\n  return {};\n};\n"})}),"\n",(0,s.jsx)(n.p,{children:"Sarah\uac00 \ubc1b\ub294 \ucd5c\uc885 \uc561\uc138\uc2a4 \ud1a0\ud070\uc740 \ub2e4\uc74c\uacfc \uac19\uc774 \ubcf4\uc77c \uc218 \uc788\uc2b5\ub2c8\ub2e4:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "sub": "alex123",\n  "aud": "https://api.techcorp.com/customer-data",\n  "impersonation_context": {\n    "ticket_id": "TECH-1234",\n    "reason": "\ub9ac\uc18c\uc2a4 \uc811\uadfc \ubb38\uc81c",\n    "support_engineer": "sarah789"\n  }\n  // ... \uae30\ud0c0 \ud45c\uc900 \ud074\ub808\uc784\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:"\uc774\ucc98\ub7fc \uc561\uc138\uc2a4 \ud1a0\ud070\uc758 \ud074\ub808\uc784\uc744 \ucee4\uc2a4\ud130\ub9c8\uc774\uc9d5\ud558\uba74, TechCorp\ub294 \uac00\uc7a5 (Impersonation) \ucee8\ud14d\uc2a4\ud2b8\uc5d0 \ub300\ud55c \uc720\uc6a9\ud55c \uc815\ubcf4\ub97c \ud3ec\ud568\uc2dc\ucf1c \uc2dc\uc2a4\ud15c \ub0b4\uc5d0\uc11c \uac00\uc7a5 (Impersonation) \ud65c\ub3d9\uc744 \uac10\uc0ac\ud558\uace0 \uc774\ud574\ud558\uae30 \uc27d\uac8c \ub9cc\ub4e4 \uc218 \uc788\uc2b5\ub2c8\ub2e4."}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsx)(n.p,{children:"\ud1a0\ud070\uc5d0 \ucee4\uc2a4\ud140 \ud074\ub808\uc784\uc744 \ucd94\uac00\ud560 \ub54c\ub294 \uc8fc\uc758\ud558\uc138\uc694. \ud1a0\ud070\uc774 \ud0c8\ucde8\ub418\uac70\ub098 \uc720\ucd9c\ub420 \uacbd\uc6b0 \ubcf4\uc548 \uc704\ud5d8\uc774 \ub420 \uc218 \uc788\ub294 \ubbfc\uac10\ud55c \uc815\ubcf4\ub97c \ud3ec\ud568\ud558\uc9c0 \ub9c8\uc138\uc694. JWT\ub294 \uc11c\uba85\ub418\uc5b4 \uc788\uc9c0\ub9cc \uc554\ud638\ud654\ub418\uc5b4 \uc788\uc9c0 \uc54a\uc73c\ubbc0\ub85c, \ud1a0\ud070\uc5d0 \uc811\uadfc\ud560 \uc218 \uc788\ub294 \ub204\uad6c\ub098 \ud074\ub808\uc784\uc744 \ubcfc \uc218 \uc788\uc2b5\ub2c8\ub2e4."})}),"\n",(0,s.jsx)(n.h2,{id:"related-resources",children:"\uad00\ub828 \ub9ac\uc18c\uc2a4"}),"\n",(0,s.jsx)(o,{href:"https://blog.logto.io/impersonation",children:(0,s.jsx)(n.p,{children:"\uc0ac\uc774\ubc84\ubcf4\uc548 \ubc0f \uc544\uc774\ub374\ud2f0\ud2f0 \uad00\ub9ac\uc5d0\uc11c \uac00\uc7a5 (Impersonation)\uc774\ub780 \ubb34\uc5c7\uc778\uac00\uc694? AI \uc5d0\uc774\uc804\ud2b8\uac00 \uc774\ub97c \uc5b4\ub5bb\uac8c\n\uc0ac\uc6a9\ud560 \uc218 \uc788\ub098\uc694?"})})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},79621:(e,n,o)=>{o.d(n,{R:()=>a,x:()=>c});var t=o(58101);const s={},r=t.createContext(s);function a(e){const n=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);