"use strict";(self.webpackChunk_logto_docs=self.webpackChunk_logto_docs||[]).push([[2221],{85711:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>r,default:()=>p,frontMatter:()=>i,metadata:()=>o,toc:()=>l});const o=JSON.parse('{"id":"concepts/opaque-token","title":"\u4e0d\u900f\u660e\u6b0a\u6756 (Opaque token)","description":"\u5728\u9a57\u8b49 (Authentication) \u904e\u7a0b\u4e2d\uff0c\u5982\u679c\u672a\u6307\u5b9a\u8cc7\u6e90\uff0cLogto \u5c07\u7c3d\u767c\u4e0d\u900f\u660e\u5b58\u53d6\u6b0a\u6756 (Opaque token) \u800c\u975e JWT\u3002\u4e0d\u900f\u660e\u6b0a\u6756\u662f\u4e00\u500b\u96a8\u6a5f\u5b57\u4e32\uff0c\u6bd4 JWT \u77ed\u5f97\u591a\uff1a","source":"@site/i18n/zh-TW/docusaurus-plugin-content-docs/current/concepts/opaque-token.mdx","sourceDirName":"concepts","slug":"/concepts/opaque-token","permalink":"/zh-TW/concepts/opaque-token","draft":false,"unlisted":false,"editUrl":"https://github.com/logto-io/docs/tree/master/i18n/zh-TW/docusaurus-plugin-content-docs/current/concepts/opaque-token.mdx","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"sidebar_position":6},"sidebar":"docsSidebar","previous":{"title":"\u914d\u7f6e","permalink":"/zh-TW/concepts/core-service/configuration"},"next":{"title":"\u6982\u5ff5","permalink":"/zh-TW/concepts/"}}');var c=t(25105),s=t(79621);const i={sidebar_position:6},r="\u4e0d\u900f\u660e\u6b0a\u6756 (Opaque token)",d={},l=[];function a(e){const n={a:"a",code:"code",h1:"h1",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.header,{children:(0,c.jsx)(n.h1,{id:"\u4e0d\u900f\u660e\u6b0a\u6756-opaque-token",children:"\u4e0d\u900f\u660e\u6b0a\u6756 (Opaque token)"})}),"\n",(0,c.jsx)(n.p,{children:"\u5728\u9a57\u8b49 (Authentication) \u904e\u7a0b\u4e2d\uff0c\u5982\u679c\u672a\u6307\u5b9a\u8cc7\u6e90\uff0cLogto \u5c07\u7c3d\u767c\u4e0d\u900f\u660e\u5b58\u53d6\u6b0a\u6756 (Opaque token) \u800c\u975e JWT\u3002\u4e0d\u900f\u660e\u6b0a\u6756\u662f\u4e00\u500b\u96a8\u6a5f\u5b57\u4e32\uff0c\u6bd4 JWT \u77ed\u5f97\u591a\uff1a"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-json",children:'{\n  "access_token": "some-random-string", // \u4e0d\u900f\u660e\u6b0a\u6756 (Opaque token)\n  "expires_in": 3600,\n  "id_token": "eyJhbGc...aBc", // JWT\n  "scope": "openid profile email",\n  "token_type": "Bearer"\n}\n'})}),"\n",(0,c.jsxs)(n.p,{children:["\u4e0d\u900f\u660e\u6b0a\u6756\u53ef\u7528\u65bc\u547c\u53eb ",(0,c.jsx)(n.a,{href:"https://openid.net/specs/openid-connect-core-1_0.html#UserInfo",children:"userinfo endpoint"})," \u4e26\u5b58\u53d6\u9700\u8981\u9a57\u8b49\u7684\u53d7\u4fdd\u8b77\u8cc7\u6e90\u3002\u7531\u65bc\u5b83\u4e0d\u662f JWT\uff0c\u8cc7\u6e90\u4f3a\u670d\u5668\u5982\u4f55\u9a57\u8b49\u5b83\uff1f"]}),"\n",(0,c.jsxs)(n.p,{children:["Logto \u63d0\u4f9b\u4e86\u4e00\u500b ",(0,c.jsx)(n.a,{href:"https://www.rfc-editor.org/rfc/rfc7662.html",children:"introspection endpoint"})," \u53ef\u7528\u65bc\u9a57\u8b49\u4e0d\u900f\u660e\u6b0a\u6756\u3002\u9810\u8a2d\u60c5\u6cc1\u4e0b\uff0cintrospection endpoint \u662f ",(0,c.jsx)(n.code,{children:"/oidc/token/introspection"}),"\uff0c\u4e26\u63a5\u53d7 ",(0,c.jsx)(n.code,{children:"POST"})," \u8acb\u6c42\u3002\u4ee5\u4e0b\u53c3\u6578\u662f\u5fc5\u9700\u7684\uff1a"]}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"token"}),"\uff1a\u8981\u9a57\u8b49\u7684\u4e0d\u900f\u660e\u6b0a\u6756"]}),"\n"]}),"\n",(0,c.jsx)(n.p,{children:"\u6b64 endpoint \u4e5f\u9700\u8981\u5ba2\u6236\u7aef\u9a57\u8b49\u3002\u4f60\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u65b9\u6cd5\u4e4b\u4e00\uff1a"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["HTTP Basic \u9a57\u8b49\uff1a\u4f7f\u7528 ",(0,c.jsx)(n.code,{children:"Authorization"})," \u6a19\u982d\uff0c\u503c\u70ba ",(0,c.jsx)(n.code,{children:"Basic <base64-encoded-credentials>"}),"\u3002\u6191\u8b49\u5fc5\u9808\u662f\u5ba2\u6236\u7aef ID \u548c\u5ba2\u6236\u7aef\u5bc6\u9470\uff0c\u4ee5\u5192\u865f\uff08",(0,c.jsx)(n.code,{children:":"}),"\uff09\u5206\u9694\u4e26\u9032\u884c base64 \u7de8\u78bc\u3002"]}),"\n",(0,c.jsxs)(n.li,{children:["HTTP POST \u9a57\u8b49\uff1a\u4f7f\u7528 ",(0,c.jsx)(n.code,{children:"client_id"})," \u548c ",(0,c.jsx)(n.code,{children:"client_secret"})," \u53c3\u6578\uff1a","\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"client_id"}),"\uff1a\u8acb\u6c42\u6b0a\u6756\u7684\u61c9\u7528\u7a0b\u5f0f\u7684\u5ba2\u6236\u7aef ID"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"client_secret"}),"\uff1a\u8acb\u6c42\u6b0a\u6756\u7684\u61c9\u7528\u7a0b\u5f0f\u7684\u5ba2\u6236\u7aef\u5bc6\u9470"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,c.jsx)(n.p,{children:"\u5ba2\u6236\u7aef ID\uff08\u61c9\u7528\u7a0b\u5f0f ID\uff09\u548c\u5ba2\u6236\u7aef\u5bc6\u9470\uff08\u61c9\u7528\u7a0b\u5f0f\u5bc6\u9470\uff09\u53ef\u4ee5\u662f Logto \u4e2d\u4efb\u4f55\u300c\u50b3\u7d71\u7db2\u9801\u300d\u6216\u300c\u6a5f\u5668\u5c0d\u6a5f\u5668\u300d\u61c9\u7528\u7a0b\u5f0f\u7684\u61c9\u7528\u7a0b\u5f0f\u6191\u8b49\u3002\u5982\u679c\u6191\u8b49\u7121\u6548\uff0cintrospection endpoint \u5c07\u8fd4\u56de\u932f\u8aa4\u3002"}),"\n",(0,c.jsx)(n.p,{children:"introspection endpoint \u8fd4\u56de\u4e00\u500b\u5305\u542b\u6b0a\u6756\u5ba3\u544a\u7684 JSON \u7269\u4ef6\uff1a"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-json",children:'{\n  "active": true, // \u6b0a\u6756\u662f\u5426\u6709\u6548\n  "sub": "1234567890" // \u6b0a\u6756\u7684\u4e3b\u9ad4 (Subject)\uff08\u4f7f\u7528\u8005 ID\uff09\n}\n'})}),"\n",(0,c.jsxs)(n.p,{children:["\u5982\u679c\u6b0a\u6756\u7121\u6548\uff0c",(0,c.jsx)(n.code,{children:"active"})," \u6b04\u4f4d\u5c07\u70ba ",(0,c.jsx)(n.code,{children:"false"}),"\uff0c\u4e14 ",(0,c.jsx)(n.code,{children:"sub"})," \u6b04\u4f4d\u5c07\u88ab\u7701\u7565\u3002"]}),"\n",(0,c.jsx)(n.p,{children:"\u4ee5\u4e0b\u662f introspection \u8acb\u6c42\u7684\u975e\u898f\u7bc4\u6027\u7bc4\u4f8b\uff1a"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"curl --location \\\n  --request POST 'https://[tenant-id].logto.app/oidc/token/introspection' \\\n  --header 'Content-Type: application/x-www-form-urlencoded' \\\n  --data-urlencode 'token=some-random-string' \\\n  --data-urlencode 'client_id=1234567890' \\\n  --data-urlencode 'client_secret=1234567890'\n"})}),"\n",(0,c.jsxs)(n.p,{children:["\u8a18\u5f97\u5c07 ",(0,c.jsx)(n.code,{children:"[tenant-id]"})," \u66ff\u63db\u70ba\u4f60\u7684\u79df\u6236 ID\u3002"]})]})}function p(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,c.jsx)(n,{...e,children:(0,c.jsx)(a,{...e})}):a(e)}},79621:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>r});var o=t(58101);const c={},s=o.createContext(c);function i(e){const n=o.useContext(s);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:i(e.components),o.createElement(s.Provider,{value:n},e.children)}}}]);