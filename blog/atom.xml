<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://logto.qubitpi.org/blog</id>
    <title>Logto Docs Blog</title>
    <updated>2023-03-27T00:00:00.000Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://logto.qubitpi.org/blog"/>
    <subtitle>Logto Docs Blog</subtitle>
    <icon>https://logto.qubitpi.org/img/favicon.ico</icon>
    <entry>
        <title type="html"><![CDATA[Logto 2023 March Update]]></title>
        <id>https://logto.qubitpi.org/blog/releases/2023-mar</id>
        <link href="https://logto.qubitpi.org/blog/releases/2023-mar"/>
        <updated>2023-03-27T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Did you know?]]></summary>
        <content type="html"><![CDATA[<blockquote><p><strong><em>Did you know?</em></strong>
We have refreshed the Logto logo! We simplified the gradients but made our brand color stronger, resulting in improved recognizability.</p></blockquote><p>We are grateful for your participation in testing Logto OSS, and we're excited to announce our first general availability version. In this version, we have delivered numerous improvements to the sign-in experience, making it more delightful for your end-users. This new release also includes several new practical features.</p><blockquote><p><strong>Note</strong>
In case you missed it, please see the letter from Gao: <a href="https://docs.logto.io/blog/announcing-logto-cloud-preview" target="_blank" rel="noopener noreferrer">Announcing Logto Cloud (Preview) and OSS General Availability</a>.</p></blockquote><p>Let's take a look at what's new!</p><h2 class="anchor anchorWithStickyNavbar_E7Z_" id="-breaking-change-">üí• BREAKING CHANGE üí•<a href="#-breaking-change-" class="hash-link" aria-label="Direct link to üí• BREAKING CHANGE üí•" title="Direct link to üí• BREAKING CHANGE üí•">‚Äã</a></h2><p>Rename the <strong><code>/api/phrase</code></strong> API to <strong><code>/api/.well-known/phrases</code>.</strong></p><h2 class="anchor anchorWithStickyNavbar_E7Z_" id="new-features">New features<a href="#new-features" class="hash-link" aria-label="Direct link to New features" title="Direct link to New features">‚Äã</a></h2><h3 class="anchor anchorWithStickyNavbar_E7Z_" id="custom-css-editor">Custom CSS editor<a href="#custom-css-editor" class="hash-link" aria-label="Direct link to Custom CSS editor" title="Direct link to Custom CSS editor">‚Äã</a></h3><p>The console now has a custom CSS code editor in the ‚ÄúSign-in experience‚Äù tab that allows you to apply advanced UI customization to your application. You can preview your changes in real-time via the sign-in experience preview on the right side.</p><img loading="lazy" width="593" alt="image" src="https://user-images.githubusercontent.com/14722250/227727339-d8e284d0-30af-493e-957a-ebacd45e1c09.png" class="img_E_TW"><h3 class="anchor anchorWithStickyNavbar_E7Z_" id="image-uploader">Image uploader<a href="#image-uploader" class="hash-link" aria-label="Direct link to Image uploader" title="Direct link to Image uploader">‚Äã</a></h3><p>The console now supports a drag-and-drop image uploader for multiple scenarios. If a storage provider is configured in the system, you can upload images directly from your local file system. The first version of the uploader supports AWS S3 and Azure Blob Storage. For more information, please refer to the <strong><a href="https://docs.logto.io/docs/recipes/configure-storage-providers/" target="_blank" rel="noopener noreferrer">File storage provider</a></strong> documentation.</p><img loading="lazy" width="579" alt="image" src="https://user-images.githubusercontent.com/14722250/227727364-7b8e1c92-72e6-4383-b633-087581edfc4f.png" class="img_E_TW"><h3 class="anchor anchorWithStickyNavbar_E7Z_" id="console-profile-page">Console profile page<a href="#console-profile-page" class="hash-link" aria-label="Direct link to Console profile page" title="Direct link to Console profile page">‚Äã</a></h3><p>We have removed the previous profile component and moved it to the user profile page. You can access the page by clicking your user avatar in the top right corner. From there, you can also change your language or theme directly from the popover menu.</p><img loading="lazy" width="350" alt="image" src="https://user-images.githubusercontent.com/14722250/227727413-cf90c33f-84bf-4635-91ca-9703e95f8a0d.png" class="img_E_TW"><p>On the profile page, you can update your avatar, name, and username, as well as change your password. For cloud users, it is now possible to link your email address and social accounts (Google and GitHub at first launch).</p><h3 class="anchor anchorWithStickyNavbar_E7Z_" id="sign-in-experience">Sign-in experience<a href="#sign-in-experience" class="hash-link" aria-label="Direct link to Sign-in experience" title="Direct link to Sign-in experience">‚Äã</a></h3><p>Added "Powered by Logto" to the sign-in experience.</p><img loading="lazy" width="153" alt="image" src="https://user-images.githubusercontent.com/14722250/227727454-267509ba-d6fb-4dd2-927d-2dcbe1a7e81a.png" class="img_E_TW"><h2 class="anchor anchorWithStickyNavbar_E7Z_" id="cli">CLI<a href="#cli" class="hash-link" aria-label="Direct link to CLI" title="Direct link to CLI">‚Äã</a></h2><p>We have added a new CLI command <code>db system</code> that allows you to get/set the system table value for your database. Enter <code>logto db system --help</code> in your terminal for details.</p><h2 class="anchor anchorWithStickyNavbar_E7Z_" id="improvements">Improvements<a href="#improvements" class="hash-link" aria-label="Direct link to Improvements" title="Direct link to Improvements">‚Äã</a></h2><h3 class="anchor anchorWithStickyNavbar_E7Z_" id="add-parameter-to-specify-showing-sign-in-or-sign-up">Add parameter to specify showing sign-in or sign-up<a href="#add-parameter-to-specify-showing-sign-in-or-sign-up" class="hash-link" aria-label="Direct link to Add parameter to specify showing sign-in or sign-up" title="Direct link to Add parameter to specify showing sign-in or sign-up">‚Äã</a></h3><p>A new parameter have been added to our JavaScript SDKs which allows users to specify their desired user interaction experience. For instance, in our React SDK:</p><div class="language-tsx codeBlockContainer_dUHu theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_SC1B"><pre tabindex="0" class="prism-code language-tsx codeBlock_noRx thin-scrollbar"><code class="codeBlockLines_a94C"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> signIn </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useLogto</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Shows the sign-in page</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">signIn</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'https://some-callback-url'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Shows the sign-up page</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">signIn</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'https://some-callback-url'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'signUp'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_qENx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_ihXY" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_e8Rr"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_iX_b"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Other SDKs will be updated soon.</p><h3 class="anchor anchorWithStickyNavbar_E7Z_" id="country-code-selector">Country code selector<a href="#country-code-selector" class="hash-link" aria-label="Direct link to Country code selector" title="Direct link to Country code selector">‚Äã</a></h3><p>A new country code selector dropdown component with a search box has been added to sign-in experience, allowing users to quickly search for a country code by typing in the search box.</p><img loading="lazy" width="430" alt="image" src="https://user-images.githubusercontent.com/14722250/227727560-4da65476-a8f9-4534-84b1-0b6876584ccd.png" class="img_E_TW"><h3 class="anchor anchorWithStickyNavbar_E7Z_" id="custom-favicon">Custom favicon<a href="#custom-favicon" class="hash-link" aria-label="Direct link to Custom favicon" title="Direct link to Custom favicon">‚Äã</a></h3><p>Users can now upload their own favicon in the sign-in-experience branding settings. A local logto icon will be used as a fallback.</p><img loading="lazy" width="550" alt="image" src="https://user-images.githubusercontent.com/14722250/227727577-87fd8d13-e450-445d-9020-e26a00191b04.png" class="img_E_TW"><h3 class="anchor anchorWithStickyNavbar_E7Z_" id="dynamic-html-titles">Dynamic HTML titles<a href="#dynamic-html-titles" class="hash-link" aria-label="Direct link to Dynamic HTML titles" title="Direct link to Dynamic HTML titles">‚Äã</a></h3><p>Instead of showing ‚ÄúLogto‚Äù, now sign-in experience will change the page title based on the current context, for example, ‚ÄúCreate account‚Äù.</p><h3 class="anchor anchorWithStickyNavbar_E7Z_" id="enhanced-password-policy">Enhanced password policy<a href="#enhanced-password-policy" class="hash-link" aria-label="Direct link to Enhanced password policy" title="Direct link to Enhanced password policy">‚Äã</a></h3><p>The password policy has been updated to require a minimum of 8 characters and contain a mix of letters, numbers, and symbols. The allowed characters now include:</p><ul><li>Digits: <code>0-9</code></li><li>Letters: <code>a-z</code>, <code>A-Z</code></li><li>Symbols: <code>!"#$%&amp;'()*+,-./:;&lt;=&gt;?@[]^_`{|}~</code></li></ul><p>Users must now use at least two out of three types of characters.</p><p>Note the new password policy only applies to new users or new passwords. Existing users can continue to use their old password to sign in.</p><h3 class="anchor anchorWithStickyNavbar_E7Z_" id="implement-a-lite-version-of-set-password-form">Implement a lite version of set password form<a href="#implement-a-lite-version-of-set-password-form" class="hash-link" aria-label="Direct link to Implement a lite version of set password form" title="Direct link to Implement a lite version of set password form">‚Äã</a></h3><p>The new lite version only contains one field for the password and will be used only if the forgot-password feature is enabled (password can be reset either by email and phone). If you don't have any email or SMS service enabled, the old version of set password form containing two fields (password and confirm password) will still be used.</p><h3 class="anchor anchorWithStickyNavbar_E7Z_" id="support-privacy-policy-url">Support Privacy Policy URL<a href="#support-privacy-policy-url" class="hash-link" aria-label="Direct link to Support Privacy Policy URL" title="Direct link to Support Privacy Policy URL">‚Äã</a></h3><p>A new Privacy Policy URL field has been added to the sign-in-experience settings to support end-users' privacy declaration needs.</p><h3 class="anchor anchorWithStickyNavbar_E7Z_" id="simplify-the-terms-of-use-and-privacy-policy-manual-agreement-for-the-sign-in-flow">Simplify the Terms of Use and Privacy Policy manual agreement for the sign-in flow<a href="#simplify-the-terms-of-use-and-privacy-policy-manual-agreement-for-the-sign-in-flow" class="hash-link" aria-label="Direct link to Simplify the Terms of Use and Privacy Policy manual agreement for the sign-in flow" title="Direct link to Simplify the Terms of Use and Privacy Policy manual agreement for the sign-in flow">‚Äã</a></h3><p>The Terms of Use and Privacy Policy manual agreement steps have been removed from the sign-in flow. The agreement checkbox in sign-in pages has been replaced with links to the Terms of Use and Privacy Policy.</p><p>Users can still read the agreements before signing in. However, the manual agreement is still mandatory for the sign-up flow, including sign-up with new social identities.</p><h2 class="anchor anchorWithStickyNavbar_E7Z_" id="new-contributors">New Contributors<a href="#new-contributors" class="hash-link" aria-label="Direct link to New Contributors" title="Direct link to New Contributors">‚Äã</a></h2><ul><li>@Eengineer1 made their first contribution in <a href="https://github.com/logto-io/logto/pull/3431" target="_blank" rel="noopener noreferrer">https://github.com/logto-io/logto/pull/3431</a></li></ul>]]></content>
        <author>
            <name>Gao</name>
            <uri>https://github.com/gao-sun</uri>
        </author>
        <category label="release" term="release"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Announcing Logto Cloud (Preview) and OSS General Availability]]></title>
        <id>https://logto.qubitpi.org/blog/announcing-logto-cloud-preview</id>
        <link href="https://logto.qubitpi.org/blog/announcing-logto-cloud-preview"/>
        <updated>2023-03-20T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Logto Cloud (Preview) has launched on Product Hunt. Come and support us!]]></summary>
        <content type="html"><![CDATA[<div class="theme-admonition theme-admonition-info alert alert--info admonition_zpDR"><div class="admonitionHeading_iYwg"><span class="admonitionIcon_GPu2"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_AHia"><p>Logto Cloud (Preview) has launched on <a href="https://www.producthunt.com/posts/logto-cloud-preview" target="_blank" rel="noopener noreferrer">Product Hunt</a>. Come and support us!</p></div></div><p>Hi there,</p><p>I‚Äôm Gao, one of the creators of Logto. I remember feeling nervous last July - that‚Äôs the date we launched the first beta version of Logto OSS.</p><p>To our surprise, we had some deep conversations with the community from the outset. We talked about the terrible developer experience of building authentication, even with existing products, and the dramatic costs of current industry leaders. As developers ourselves, we feel you and that's why we started building Logto.</p><p>These conversations drove us towards a brighter future. I want to say a big thank you to everyone we connected with during our beta! Only with your help, we can shape the future of identity development together.</p><p>Today, we're excited to announce that we've made a significant step forward with Logto: we're officially launching Logto Cloud (Preview) to the public!</p><p>I know that most of you got started with Logto through the online demo (huge credit to GitPod) or the docker-compose file. With Logto Cloud (Preview), you can even forget all the operational overheads when developing with Logto. Simply sign in and a new Logto instance will be ready for you. If you're developing locally, the only thing you need to change in your code is the Logto endpoint.</p><p>Assuming you are familiar with cloud products, here are some quick answers to frequently asked questions:</p><h3 class="anchor anchorWithStickyNavbar_E7Z_" id="what-is-the-pricing-model">What is the pricing model?<a href="#what-is-the-pricing-model" class="hash-link" aria-label="Direct link to What is the pricing model?" title="Direct link to What is the pricing model?">‚Äã</a></h3><p>We are still finalizing our pricing model, but rest assured that we are working hard to make our product much more affordable than similar offerings currently on the market. We believe it should be more usage-based, rather than charging per seat for a customer-facing scenario.</p><p>Logto Cloud will remain free while in preview. We would love to explore the appropriate and sustainable pricing model with you. Feel free to send us an email or schedule a meeting with us.</p><h3 class="anchor anchorWithStickyNavbar_E7Z_" id="how-will-you-process-data">How will you process data?<a href="#how-will-you-process-data" class="hash-link" aria-label="Direct link to How will you process data?" title="Direct link to How will you process data?">‚Äã</a></h3><p>We have a strong belief in building trust and maintaining transparency. During the preview period, all Logto data will stay in the Azure West Europe region. See our Privacy Policy for more details if you are interested.</p><h3 class="anchor anchorWithStickyNavbar_E7Z_" id="will-you-keep-data-when-the-preview-ends">Will you keep data when the preview ends?<a href="#will-you-keep-data-when-the-preview-ends" class="hash-link" aria-label="Direct link to Will you keep data when the preview ends?" title="Direct link to Will you keep data when the preview ends?">‚Äã</a></h3><p>Yes. Your tenant will seamlessly transition to Logto Cloud once the preview period ends. You can also request to have your data physically removed at any time if needed. See our Terms of Use for more details.</p><h3 class="anchor anchorWithStickyNavbar_E7Z_" id="will-you-stop-open-source">Will you stop open-source?<a href="#will-you-stop-open-source" class="hash-link" aria-label="Direct link to Will you stop open-source?" title="Direct link to Will you stop open-source?">‚Äã</a></h3><p>No! Open-source is the core of our product and we believe it always will be. We will try our best to align between OSS and Cloud, and make sure you have full confidence that Logto OSS is backing you up.</p><div class="theme-admonition theme-admonition-tip alert alert--success admonition_zpDR"><div class="admonitionHeading_iYwg"><span class="admonitionIcon_GPu2"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Invitation</div><div class="admonitionContent_AHia"><p>With gratitude, we invite you to enter Logto Cloud via <a href="https://cloud.logto.io/" target="_blank" rel="noopener noreferrer">this link</a>. You can find more details about Logto Cloud (Preview) <a href="https://docs.logto.io/about/cloud-preview/" target="_blank" rel="noopener noreferrer">here</a>.</p></div></div><p>The other role today is the General Availability version of <a href="https://github.com/logto-io/logto/" target="_blank" rel="noopener noreferrer">Logto OSS</a>. After multiple rounds of beta versions and release candidates, we are happy to announce the first release version of Logto OSS. Let‚Äôs quickly go through the major updates since last July:</p><ul><li>A brand new end-user Sign-In Experience with superior customizability on sign-in and sign-up flows.</li><li>10+ new connectors, including multiple open-standard connectors, such as OAuth 2.0 and SAML.</li><li>Role-Based Access Control that conforms to the NIST model.</li><li>Fully customizable translations with 8 languages built-in.</li><li>Machine-to-Machine apps and Web Hooks for building programmatic connections between Logto and your services.</li></ul><p>We received valuable feedback from our community and have incorporated it into our recent priorities:</p><ul><li>Add Single Sign-On (SSO) support to solidly bridge your product with your customers' identities.</li><li>Implement Multi-Factor Authentication (MFA) for enhanced security requirements.</li><li>Introduce Dynamic Organizations, which unlocks much more business potential for your product while keeping all your customers' identities in a single source of truth.</li></ul><p>If you notice anything missing, please do not hesitate to reach out to us by sending an email or joining our Discord server.</p><p>We could not have made it this far without the support of our community. Although this is a meaningful milestone for Logto, we believe our journey is just beginning.</p><p>Building an identity product is a serious task, so leave the headache to us. We hope you enjoy using Logto, and let's meet on the cloud!</p><p>Gao</p>]]></content>
        <author>
            <name>Gao</name>
            <uri>https://github.com/gao-sun</uri>
        </author>
        <category label="announcement" term="announcement"/>
        <category label="product" term="product"/>
        <category label="auth" term="auth"/>
        <category label="dev" term="dev"/>
        <category label="authentication" term="authentication"/>
        <category label="authorization" term="authorization"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Logto 2023 February Update (Extended)]]></title>
        <id>https://logto.qubitpi.org/blog/releases/2023-feb-extended</id>
        <link href="https://logto.qubitpi.org/blog/releases/2023-feb-extended"/>
        <updated>2023-02-26T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[While Logto Cloud is still under construction, we would like to introduce some new features to our foundation, Logto OSS. This will be the last version before general availability.]]></summary>
        <content type="html"><![CDATA[<div class="theme-admonition theme-admonition-info alert alert--info admonition_zpDR"><div class="admonitionHeading_iYwg"><span class="admonitionIcon_GPu2"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_AHia"><p>While Logto Cloud is still under construction, we would like to introduce some new features to our foundation, Logto OSS. This will be the last version before general availability.</p></div></div><p>Notable updates include:</p><ul><li>Refactored infrastructure and enhanced security</li><li>Smart Input and Customize CSS added to Sign-in Experience</li><li>Open standard connectors (SAML, OIDC, and OAuth 2.0)</li><li>New language support</li></ul><p>Let's take a look at what's inside!</p><h2 class="anchor anchorWithStickyNavbar_E7Z_" id="-breaking-changes-">üí• BREAKING CHANGES üí•<a href="#-breaking-changes-" class="hash-link" aria-label="Direct link to üí• BREAKING CHANGES üí•" title="Direct link to üí• BREAKING CHANGES üí•">‚Äã</a></h2><h3 class="anchor anchorWithStickyNavbar_E7Z_" id="decouple-normal-users-and-admins">Decouple normal users and admins<a href="#decouple-normal-users-and-admins" class="hash-link" aria-label="Direct link to Decouple normal users and admins" title="Direct link to Decouple normal users and admins">‚Äã</a></h3><p>Logto was using a single port to serve both normal users and admins, as well as the web console. While we continuously maintain a high level of security, it‚Äôll still be great to decouple these components into two separate parts to keep data isolated and provide a flexible infrastructure.</p><img loading="lazy" width="737" alt="image" src="https://user-images.githubusercontent.com/14722250/221365507-6f20a804-1059-4933-9b88-df1244ab900b.png" class="img_E_TW"><p>From this version, Logto now listens to two ports by default, one for normal users (<code>3001</code>), and one for admins (<code>3002</code>).</p><details class="details_tgU4 alert alert--info details_uAGx" data-collapsed="true"><summary><b>‚ÄºÔ∏è Click to expand details</b></summary><div><div class="collapsibleContent_QcPY"><p></p><ul><li>Nothing changed for normal users. No adaption is needed.</li><li>For admin users:<ul><li>The default Admin Console URL has been changed to <code>http://localhost:3002/console</code>.</li><li>To change the admin port, set the environment variable <code>ADMIN_PORT</code>. For instance, <code>ADMIN_PORT=3456</code>.</li><li>You can specify a custom endpoint for admins by setting the environment variable <code>ADMIN_ENDPOINT</code>. For example, <code>ADMIN_ENDPOINT=https://admin.your-domain.com</code>.</li><li>You can now completely disable admin endpoints by setting <code>ADMIN_DISABLE_LOCALHOST=1</code> and leaving <code>ADMIN_ENDPOINT</code> unset.</li><li>Admin Console and admin user data are not accessible via normal user endpoints, including <code>localhost</code> and <code>ENDPOINT</code> from the environment.</li><li>Admin Console no longer displays audit logs of admin users. However, these logs still exist in the database, and Logto still inserts admin user logs. There is just no convenient interface to inspect them.</li><li>Due to the data isolation, the numbers on the dashboard may slightly decrease (admins are excluded).</li></ul></li><li>Resource Indicator for Logto Management API changed from <code>https://[your-tenant-id].logto.app/api</code> to <code>https://default.logto.app/api</code>.</li></ul><p></p></div></div></details><p>If you are upgrading from a previous version, simply run the <a href="https://docs.logto.io/docs/tutorials/using-cli/database-alteration" target="_blank" rel="noopener noreferrer">database alteration command</a> as usual, and we'll take care of the rest.</p><div class="theme-admonition theme-admonition-success alert alert--success admonition_zpDR"><div class="admonitionHeading_iYwg"><span class="admonitionIcon_GPu2"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span><mdxadmonitiontitle><strong><em>DID YOU KNOW?</em></strong></mdxadmonitiontitle></div><div class="admonitionContent_AHia"><p>Under the hood, we use the powerful Postgres feature Row-Level Security to isolate admin and user data.</p></div></div><h3 class="anchor anchorWithStickyNavbar_E7Z_" id="cors-policy">CORS policy<a href="#cors-policy" class="hash-link" aria-label="Direct link to CORS policy" title="Direct link to CORS policy">‚Äã</a></h3><ul><li>If <code>ADMIN_ENDPOINT</code> is not specified, <code>localhost:[admin-port]</code> will be allowed to perform Cross-Origin Resource Sharing (CORS) in Logto.</li><li>If <code>ADMIN_ENDPOINT</code> is specified, only requests from the origin of <code>ADMIN_ENDPOINT</code> will be allowed.</li></ul><h2 class="anchor anchorWithStickyNavbar_E7Z_" id="-security-update">üîê Security update<a href="#-security-update" class="hash-link" aria-label="Direct link to üîê Security update" title="Direct link to üîê Security update">‚Äã</a></h2><p>In previous versions, when registering or changing passwords, all new passwords were stored in plain text in the Audit Logs before being encrypted and inserted into the database.</p><p>In this version, we have updated the process to fully mask password fields before inserting them into the Audit Logs.</p><div class="theme-admonition theme-admonition-caution alert alert--warning admonition_zpDR"><div class="admonitionHeading_iYwg"><span class="admonitionIcon_GPu2"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_AHia"><p>For enhanced security and compliance, we strongly recommend removing all passwords from the Audit Logs or deleting all logs that include passwords.</p></div></div><p>If you have any questions regarding this issue or the removal of data, please do not hesitate to contact us via email or Discord.</p><h2 class="anchor anchorWithStickyNavbar_E7Z_" id="-feature-update">üßë‚ÄçüöÄ Feature update<a href="#-feature-update" class="hash-link" aria-label="Direct link to üßë‚ÄçüöÄ Feature update" title="Direct link to üßë‚ÄçüöÄ Feature update">‚Äã</a></h2><h3 class="anchor anchorWithStickyNavbar_E7Z_" id="-smart-input-for-sign-in-experience">üí° Smart Input for Sign-in Experience<a href="#-smart-input-for-sign-in-experience" class="hash-link" aria-label="Direct link to üí° Smart Input for Sign-in Experience" title="Direct link to üí° Smart Input for Sign-in Experience">‚Äã</a></h3><p>We have integrated the traditional input fields for username, phone number, and email into a single intelligent input box:</p><p><video src="https://user-images.githubusercontent.com/14722250/221401902-cc9bcd91-160c-4058-91ce-1e8a7bdfc842.mov"></video></p><p>This advanced input box automatically identifies the type of characters you‚Äôre entering, such as an <code>@</code> sign or consecutive numbers, and provides relevant error feedback.</p><p>By streamlining the sign-in process, users no longer need to waste time figuring out which button to click to switch their desired login method. This reduces the risk of errors and ensures a smoother sign-in experience.</p><h3 class="anchor anchorWithStickyNavbar_E7Z_" id="-customize-css-in-sign-in-experience">üé® Customize CSS in Sign-in Experience<a href="#-customize-css-in-sign-in-experience" class="hash-link" aria-label="Direct link to üé® Customize CSS in Sign-in Experience" title="Direct link to üé® Customize CSS in Sign-in Experience">‚Äã</a></h3><p>We have put a lot of effort into improving the user sign-in experience and have provided a brand color option for the UI. However, we know that fine-tuning UI requirements can be unpredictable. While Logto is still exploring the best options for customization, we want to provide a programmatic method to unblock your development.</p><p>You can now use the Management API <code>PATCH /api/sign-in-exp</code> with body <code>{ "customCss": "arbitrary string" }</code> to set customized CSS for the sign-in experience. You should see the value of <code>customCss</code> attached after <code>&lt;title&gt;</code> of the page. If the style has a higher priority, it should be able to override.</p><p>For instance, if you want to give your sign-in page a feel of the <strong><em>Night City</em></strong>, try this CSS:</p><details class="details_tgU4 alert alert--info details_uAGx" data-collapsed="true"><summary><b>Click to expand CSS and preview</b></summary><div><div class="collapsibleContent_QcPY"><p></p><div class="language-css codeBlockContainer_dUHu theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_SC1B"><pre tabindex="0" class="prism-code language-css codeBlock_noRx thin-scrollbar"><code class="codeBlockLines_a94C"><span class="token-line" style="color:#393A34"><span class="token atrule rule" style="color:#00a4db">@font-face</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">font-family</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'Rock Salt'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">font-style</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> normal</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">font-weight</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">400</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">font-display</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> swap</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">src</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token url function" style="color:#d73a49">url</span><span class="token url punctuation" style="color:#393A34">(</span><span class="token url" style="color:#36acaa">https://fonts.gstatic.com/s/rocksalt/v18/MwQ0bhv11fWD6QsAVOZrt0M6p7NGrQ.woff2</span><span class="token url punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">format</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'woff2'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">unicode-range</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> U+</span><span class="token number" style="color:#36acaa">0000</span><span class="token number" style="color:#36acaa">-00</span><span class="token plain">FF</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> U+</span><span class="token number" style="color:#36acaa">0131</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> U+</span><span class="token number" style="color:#36acaa">0152</span><span class="token number" style="color:#36acaa">-0153</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> U+</span><span class="token number" style="color:#36acaa">02</span><span class="token plain">BB-02BC</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> U+</span><span class="token number" style="color:#36acaa">02</span><span class="token plain">C6</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> U+</span><span class="token number" style="color:#36acaa">02</span><span class="token plain">DA</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> U+</span><span class="token number" style="color:#36acaa">02</span><span class="token plain">DC</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> U+</span><span class="token number" style="color:#36acaa">2000</span><span class="token number" style="color:#36acaa">-206</span><span class="token plain">F</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> U+</span><span class="token number" style="color:#36acaa">2074</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> U+</span><span class="token number" style="color:#36acaa">20</span><span class="token plain">AC</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> U+</span><span class="token number" style="color:#36acaa">2122</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> U+</span><span class="token number" style="color:#36acaa">2191</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> U+</span><span class="token number" style="color:#36acaa">2193</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> U+</span><span class="token number" style="color:#36acaa">2212</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> U+</span><span class="token number" style="color:#36acaa">2215</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> U+FEFF</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> U+FFFD</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token atrule rule" style="color:#00a4db">@font-face</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">font-family</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'Share Tech'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">font-style</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> normal</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">font-weight</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">400</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">font-display</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> swap</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">src</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token url function" style="color:#d73a49">url</span><span class="token url punctuation" style="color:#393A34">(</span><span class="token url" style="color:#36acaa">https://fonts.gstatic.com/s/sharetech/v17/7cHtv4Uyi5K0OeZ7bohU8H0JmBUhfrE.woff2</span><span class="token url punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">format</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'woff2'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">unicode-range</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> U+</span><span class="token number" style="color:#36acaa">0000</span><span class="token number" style="color:#36acaa">-00</span><span class="token plain">FF</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> U+</span><span class="token number" style="color:#36acaa">0131</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> U+</span><span class="token number" style="color:#36acaa">0152</span><span class="token number" style="color:#36acaa">-0153</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> U+</span><span class="token number" style="color:#36acaa">02</span><span class="token plain">BB-02BC</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> U+</span><span class="token number" style="color:#36acaa">02</span><span class="token plain">C6</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> U+</span><span class="token number" style="color:#36acaa">02</span><span class="token plain">DA</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> U+</span><span class="token number" style="color:#36acaa">02</span><span class="token plain">DC</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> U+</span><span class="token number" style="color:#36acaa">2000</span><span class="token number" style="color:#36acaa">-206</span><span class="token plain">F</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> U+</span><span class="token number" style="color:#36acaa">2074</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> U+</span><span class="token number" style="color:#36acaa">20</span><span class="token plain">AC</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> U+</span><span class="token number" style="color:#36acaa">2122</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> U+</span><span class="token number" style="color:#36acaa">2191</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> U+</span><span class="token number" style="color:#36acaa">2193</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> U+</span><span class="token number" style="color:#36acaa">2212</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> U+</span><span class="token number" style="color:#36acaa">2215</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> U+FEFF</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> U+FFFD</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token selector id" style="color:#00009f">#app</span><span class="token selector" style="color:#00009f"> *</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">font-family</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'Share Tech'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">letter-spacing</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.5</span><span class="token unit">px</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token selector id" style="color:#00009f">#app</span><span class="token selector" style="color:#00009f"> </span><span class="token selector combinator" style="color:#00009f">&gt;</span><span class="token selector" style="color:#00009f"> div</span><span class="token selector attribute punctuation" style="color:#393A34">[</span><span class="token selector attribute attr-name" style="color:#00a4db">class</span><span class="token selector attribute operator" style="color:#393A34">$=</span><span class="token selector attribute attr-value" style="color:#e3116c">viewBox</span><span class="token selector attribute punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">background-image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token url function" style="color:#d73a49">url</span><span class="token url punctuation" style="color:#393A34">(</span><span class="token url" style="color:#36acaa">https://silverhand.io/assets/v-in-nc.jpg</span><span class="token url punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">background-size</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> cover</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token selector id" style="color:#00009f">#app</span><span class="token selector" style="color:#00009f"> main</span><span class="token selector attribute punctuation" style="color:#393A34">[</span><span class="token selector attribute attr-name" style="color:#00a4db">class</span><span class="token selector attribute operator" style="color:#393A34">$=</span><span class="token selector attribute attr-value" style="color:#e3116c">main</span><span class="token selector attribute punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">background-image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token url function" style="color:#d73a49">url</span><span class="token url punctuation" style="color:#393A34">(</span><span class="token url" style="color:#36acaa">https://silverhand.io/assets/gentle-universe.png</span><span class="token url punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">background-size</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> cover</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">opacity</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.98</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">min-height</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> initial</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">padding</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">24</span><span class="token unit">px</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">padding-bottom</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">72</span><span class="token unit">px</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">border-radius</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">12</span><span class="token unit">px</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token selector id" style="color:#00009f">#app</span><span class="token selector" style="color:#00009f"> main</span><span class="token selector attribute punctuation" style="color:#393A34">[</span><span class="token selector attribute attr-name" style="color:#00a4db">class</span><span class="token selector attribute operator" style="color:#393A34">$=</span><span class="token selector attribute attr-value" style="color:#e3116c">main</span><span class="token selector attribute punctuation" style="color:#393A34">]</span><span class="token selector" style="color:#00009f"> img</span><span class="token selector attribute punctuation" style="color:#393A34">[</span><span class="token selector attribute attr-name" style="color:#00a4db">class</span><span class="token selector attribute operator" style="color:#393A34">$=</span><span class="token selector attribute attr-value" style="color:#e3116c">logo</span><span class="token selector attribute punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">content</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token url function" style="color:#d73a49">url</span><span class="token url punctuation" style="color:#393A34">(</span><span class="token url" style="color:#36acaa">https://silverhand.io/assets/cyberpunk-2077.png</span><span class="token url punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">margin</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">-20</span><span class="token unit">px</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">-12</span><span class="token unit">px</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">height</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">160</span><span class="token unit">px</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token selector id" style="color:#00009f">#app</span><span class="token selector" style="color:#00009f"> main</span><span class="token selector attribute punctuation" style="color:#393A34">[</span><span class="token selector attribute attr-name" style="color:#00a4db">class</span><span class="token selector attribute operator" style="color:#393A34">$=</span><span class="token selector attribute attr-value" style="color:#e3116c">main</span><span class="token selector attribute punctuation" style="color:#393A34">]</span><span class="token selector" style="color:#00009f"> div</span><span class="token selector attribute punctuation" style="color:#393A34">[</span><span class="token selector attribute attr-name" style="color:#00a4db">class</span><span class="token selector attribute operator" style="color:#393A34">$=</span><span class="token selector attribute attr-value" style="color:#e3116c">headline</span><span class="token selector attribute punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">visibility</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> hidden</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">height</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">60</span><span class="token unit">px</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token selector id" style="color:#00009f">#app</span><span class="token selector" style="color:#00009f"> main</span><span class="token selector attribute punctuation" style="color:#393A34">[</span><span class="token selector attribute attr-name" style="color:#00a4db">class</span><span class="token selector attribute operator" style="color:#393A34">$=</span><span class="token selector attribute attr-value" style="color:#e3116c">main</span><span class="token selector attribute punctuation" style="color:#393A34">]</span><span class="token selector" style="color:#00009f"> div</span><span class="token selector attribute punctuation" style="color:#393A34">[</span><span class="token selector attribute attr-name" style="color:#00a4db">class</span><span class="token selector attribute operator" style="color:#393A34">$=</span><span class="token selector attribute attr-value" style="color:#e3116c">headline</span><span class="token selector attribute punctuation" style="color:#393A34">]</span><span class="token selector pseudo-element" style="color:#00009f">:before</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">content</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'Welcome to Night City'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">visibility</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> visible</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">display</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> block</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">font-family</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'Rock Salt'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">font-style</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> italic</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">line-height</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">60</span><span class="token unit">px</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">font-size</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">20</span><span class="token unit">px</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">color</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token color function" style="color:#d73a49">rgba</span><span class="token color punctuation" style="color:#393A34">(</span><span class="token color number" style="color:#36acaa">245</span><span class="token color punctuation" style="color:#393A34">,</span><span class="token color number" style="color:#36acaa">250</span><span class="token color punctuation" style="color:#393A34">,</span><span class="token color number" style="color:#36acaa">255</span><span class="token color punctuation" style="color:#393A34">,</span><span class="token color number" style="color:#36acaa">0.6</span><span class="token color punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">padding</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">20</span><span class="token unit">px</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token selector id" style="color:#00009f">#app</span><span class="token selector" style="color:#00009f"> form div</span><span class="token selector attribute punctuation" style="color:#393A34">[</span><span class="token selector attribute attr-name" style="color:#00a4db">class</span><span class="token selector attribute operator" style="color:#393A34">$=</span><span class="token selector attribute attr-value" style="color:#e3116c">inputField</span><span class="token selector attribute punctuation" style="color:#393A34">]</span><span class="token selector" style="color:#00009f"> </span><span class="token selector combinator" style="color:#00009f">&gt;</span><span class="token selector" style="color:#00009f"> div</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">outline</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> none</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">border</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> none</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">border-radius</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token unit">px</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token selector id" style="color:#00009f">#app</span><span class="token selector" style="color:#00009f"> form div</span><span class="token selector attribute punctuation" style="color:#393A34">[</span><span class="token selector attribute attr-name" style="color:#00a4db">class</span><span class="token selector attribute operator" style="color:#393A34">$=</span><span class="token selector attribute attr-value" style="color:#e3116c">inputField</span><span class="token selector attribute punctuation" style="color:#393A34">]</span><span class="token selector" style="color:#00009f"> </span><span class="token selector combinator" style="color:#00009f">&gt;</span><span class="token selector" style="color:#00009f"> div </span><span class="token selector combinator" style="color:#00009f">&gt;</span><span class="token selector" style="color:#00009f"> input</span><span class="token selector punctuation" style="color:#393A34">,</span><span class="token selector" style="color:#00009f"> </span><span class="token selector id" style="color:#00009f">#app</span><span class="token selector" style="color:#00009f"> form div</span><span class="token selector attribute punctuation" style="color:#393A34">[</span><span class="token selector attribute attr-name" style="color:#00a4db">class</span><span class="token selector attribute operator" style="color:#393A34">$=</span><span class="token selector attribute attr-value" style="color:#e3116c">inputField</span><span class="token selector attribute punctuation" style="color:#393A34">]</span><span class="token selector" style="color:#00009f"> div</span><span class="token selector attribute punctuation" style="color:#393A34">[</span><span class="token selector attribute attr-name" style="color:#00a4db">class</span><span class="token selector attribute operator" style="color:#393A34">$=</span><span class="token selector attribute attr-value" style="color:#e3116c">countryCodeSelector</span><span class="token selector attribute punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">background</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> initial</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">background-color</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token hexcode color">#453f67</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">font-family</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'Share Tech'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">letter-spacing</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.5</span><span class="token unit">px</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">font-size</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">16</span><span class="token unit">px</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">font-weight</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">600</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token selector id" style="color:#00009f">#app</span><span class="token selector" style="color:#00009f"> button</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">font-weight</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">600</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">font-size</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">16</span><span class="token unit">px</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">border-radius</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token unit">px</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token selector id" style="color:#00009f">#app</span><span class="token selector" style="color:#00009f"> button</span><span class="token selector attribute punctuation" style="color:#393A34">[</span><span class="token selector attribute attr-name" style="color:#00a4db">type</span><span class="token selector attribute operator" style="color:#393A34">=</span><span class="token selector attribute attr-value" style="color:#e3116c">submit</span><span class="token selector attribute punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">background</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">linear-gradient</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">270.84</span><span class="token unit">deg</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token hexcode color">#2FD6FB</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">-24.55</span><span class="token unit">%</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token hexcode color">#6369FC</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">44.33</span><span class="token unit">%</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token hexcode color">#A741EB</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">119.2</span><span class="token unit">%</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token hexcode color">#5D34F2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_qENx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_ihXY" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_e8Rr"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_iX_b"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" src="https://user-images.githubusercontent.com/14722250/221394786-4ae77638-8f35-4791-afae-8ab6a314dbf8.jpg" alt="custom-css-preview" class="img_E_TW"></p><p><em>"We have a city to burn!"</em></p></div></div></details><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_zpDR"><div class="admonitionHeading_iYwg"><span class="admonitionIcon_GPu2"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_AHia"><p>Since Logto uses CSS Modules, you may see a hash value in the <code>class</code> property of DOM elements (e.g. a <code>&lt;div&gt;</code> with <code>vUugRG_container</code>).</p><p>To override these, you can use the <code>$=</code> CSS selector to match elements that end with a specified value. In this case, it should be <code>div[class$=container]</code>.</p></div></div><h3 class="anchor anchorWithStickyNavbar_E7Z_" id="-open-standard-connectors-with-better-config-interface">üîó Open standard connectors with better config interface<a href="#-open-standard-connectors-with-better-config-interface" class="hash-link" aria-label="Direct link to üîó Open standard connectors with better config interface" title="Direct link to üîó Open standard connectors with better config interface">‚Äã</a></h3><p>Logto now supports standard protocols (SAML, OIDC, and OAuth 2.0) for creating social connectors to integrate external identity providers. Each protocol can create multiple social connectors, giving you more control over your access needs.</p><p>Plus, we optimized the config interface for SAML connectors. Try it and let us know your feeling!</p><h3 class="anchor anchorWithStickyNavbar_E7Z_" id="-new-language">üìÑ New language<a href="#-new-language" class="hash-link" aria-label="Direct link to üìÑ New language" title="Direct link to üìÑ New language">‚Äã</a></h3><p>Added Russian translation. (credit <a href="https://github.com/evist0" target="_blank" rel="noopener noreferrer">@evist0</a>)</p><h2 class="anchor anchorWithStickyNavbar_E7Z_" id="-new-contributors">üéâ New Contributors<a href="#-new-contributors" class="hash-link" aria-label="Direct link to üéâ New Contributors" title="Direct link to üéâ New Contributors">‚Äã</a></h2><ul><li><a href="https://github.com/Alanimdeo" target="_blank" rel="noopener noreferrer">@Alanimdeo</a> made their first contribution in <a href="https://github.com/logto-io/logto/pull/3064" target="_blank" rel="noopener noreferrer">#3064</a></li><li><a href="https://github.com/gadkins" target="_blank" rel="noopener noreferrer">@gadkins</a> made their first contribution in <a href="https://github.com/logto-io/logto/pull/3032" target="_blank" rel="noopener noreferrer">#3032</a></li><li><a href="https://github.com/evist0" target="_blank" rel="noopener noreferrer">@evist0</a> made their first contribution in <a href="https://github.com/logto-io/logto/pull/3158" target="_blank" rel="noopener noreferrer">#3158</a></li><li><a href="https://github.com/muratgozel" target="_blank" rel="noopener noreferrer">@muratgozel</a> made their first contribution in <a href="https://github.com/logto-io/logto/pull/3203" target="_blank" rel="noopener noreferrer">#3203</a></li></ul><p>Thank you!</p>]]></content>
        <author>
            <name>Gao</name>
            <uri>https://github.com/gao-sun</uri>
        </author>
        <category label="release" term="release"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Do you need to build your own auth for apps?]]></title>
        <id>https://logto.qubitpi.org/blog/do-you-need-to-build-auth</id>
        <link href="https://logto.qubitpi.org/blog/do-you-need-to-build-auth"/>
        <updated>2023-02-16T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Although article is inspired from personal dev experience and I tried my best to keep things objective, it's still non-negligible that I'm one of the creators of Logto (an auth product).]]></summary>
        <content type="html"><![CDATA[<div class="theme-admonition theme-admonition-note alert alert--secondary admonition_zpDR"><div class="admonitionHeading_iYwg"><span class="admonitionIcon_GPu2"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Prologue</div><div class="admonitionContent_AHia"><p>Although article is inspired from personal dev experience and I tried my best to keep things objective, it's still non-negligible that I'm one of the creators of Logto (an auth product).</p><p>I would like to point out this first for a better reading experience.</p></div></div><p>I‚Äôve seen a lot of developers asking questions like ‚ÄúShould I build my own auth for my app?‚Äù. While the answer cannot be a simple "Yes" or "No", I‚Äôd like to write an article to breakdown the implementation and demonstrate the pros and cons to help you decide.</p><blockquote><p><strong>TL;DR</strong> If you're still learning, auth will be a good challenge. If you want full control, it's worth building your own auth system. Otherwise, it's necessary to find an existing solution that fits your needs.</p></blockquote><h2 class="anchor anchorWithStickyNavbar_E7Z_" id="intro">Intro<a href="#intro" class="hash-link" aria-label="Direct link to Intro" title="Direct link to Intro">‚Äã</a></h2><p>As a developer, I have built many applications during my career. Regardless of the programming language, there is a common foundation I always need to construct: user auth.</p><p>It was a negligible part since everything was straightforward going back to 20 years ago:</p><ul><li>Implement a registration and sign-in system with username and password.</li><li>Create a mechanism to maintain a user's session.</li><li>About security? MD5 is the answer.</li></ul><p>That‚Äôs it. Then I could focus on ‚Äúthe real business‚Äù. Didn't hear about MD5? You missed out on the "good times" of software development. Nowadays, developers face more challenges when building sign-in/up.</p><p>It sounds alarmist, but let me go through with an example.</p><h2 class="anchor anchorWithStickyNavbar_E7Z_" id="example-an-online-bookstore">Example: An online bookstore<a href="#example-an-online-bookstore" class="hash-link" aria-label="Direct link to Example: An online bookstore" title="Direct link to Example: An online bookstore">‚Äã</a></h2><p>Let‚Äôs say you are trying to build an online bookstore with an API service and a web frontend app.</p><p>First, the scope of ‚Äúauth‚Äù should be defined. Auth can be explained as authentication and authorization, and they have totally different definitions and use cases:</p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_zpDR"><div class="admonitionHeading_iYwg"><span class="admonitionIcon_GPu2"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>ü§î About Auth</div><div class="admonitionContent_AHia"><ul><li>Authentication (AuthN) answers the question ‚ÄúWhich identity do you own?‚Äù</li><li>Authorization (AuthZ) answers the question ‚ÄúWhat can you do?‚Äù</li></ul></div></div><p>I wrote an article <a href="/blog/ciam-101-intro-authn-sso/">CIAM 101: Authentication, Identity, SSO</a> to discuss these concepts in detail.</p><h3 class="anchor anchorWithStickyNavbar_E7Z_" id="choose-authentication-methods">Choose authentication methods<a href="#choose-authentication-methods" class="hash-link" aria-label="Direct link to Choose authentication methods" title="Direct link to Choose authentication methods">‚Äã</a></h3><p>Let‚Äôs start with ‚Äúauthentication‚Äù, which is user sign-in in our example. Besides the username-and-password method, here are some trending methods people are adopting for a better user conversion and security:</p><ul><li>Passwordless, i.e. dynamic verification code (via email or sms)</li><li>Social sign-in (Google, Facebook, etc.)</li></ul><p>The choice of method depends on the business decision, while we can take a look on the tech effort:</p><ul><li>For passwordless, you need to find a vendor to send verification codes via email or sms; then integrate with your API service (new APIs may needed).</li><li>For social sign-in, you must adhere to the integration guidelines of the social identity provider(s) you wish to use. Additionally, you must create a mapping between your bookstore's user IDs and the identity provider's.<ul><li>For example, when a user signs in with a Gmail account <code>foo@gmail.com</code>, you can link this email address to the user <code>foo</code> in the bookstore. This process helps you to build a unified identity system and allows the user to modify or unlink their social identity in the future.</li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_E7Z_" id="design-and-implement-sign-in-experience">Design and implement sign-in experience<a href="#design-and-implement-sign-in-experience" class="hash-link" aria-label="Direct link to Design and implement sign-in experience" title="Direct link to Design and implement sign-in experience">‚Äã</a></h3><p>After you decide authentication methods, a graceful and smooth sign-in experience for your end-users is the next target. The conversion here is fundamental but crucial to the business since it's a natural way to leave the persisted customer data.</p><p>When I was working for Airbnb, there was a whole team dedicated to optimize the sign-in experience for multiple platforms. They conducted numerous A/B tests to determine which combination had the highest conversion rate.</p><p>It‚Äôs not practical to do so when a business is getting started. But we still need to try our best to make every piece right. Which platforms would you like to run the bookstore? You may start with mobile, web, or both. The exact design will depend on the authentication methods you choose:</p><ul><li>Username and password: The easiest one, just several input boxes and buttons.</li><li>Passwordless: Enter phone / email, then send and verify a dynamic code.</li><li>Social sign-in: Read the docs from the chosen social identity provider, follow the visual guideline, handle the redirect logic, and finally link the social identity with the bookstore identity.</li></ul><p>More things to consider to make it better:</p><ul><li>Do you need to combine the sign-in and registration process for a specific method?</li><li>Do you need a ‚Äúforgot password‚Äù flow to allow customers to reset their passwords independently?</li></ul><p>If you opt for native development, the workload will almost double for one additional platform.</p><h3 class="anchor anchorWithStickyNavbar_E7Z_" id="security-and-token-exchange">Security and token exchange<a href="#security-and-token-exchange" class="hash-link" aria-label="Direct link to Security and token exchange" title="Direct link to Security and token exchange">‚Äã</a></h3><p>Security can be a hidden iceberg. It‚Äôll be great if you are familiar with OpenID Connect or OAuth 2.0, since they are widely used and battle-tested. OpenID Connect is relatively new but is designed for ‚Äúuser authentication‚Äù, which is a great fit for an online bookstore.</p><p>Without delving into the details of the standards, there are still some things to consider:</p><ul><li>Which encryption method should be used for passwords?</li><li>What is the process for standard authentication and authorization?</li><li>How does token exchange work (Access Token, Refresh Token, ID Token, etc.)?</li><li>How can signing keys be used in tokens and how can the signature be validated to protect resources?</li><li>How can client and server attacks be prevented?</li></ul><p>Finally, you can land a good sign-in experience and deliver it to your customers.</p><h3 class="anchor anchorWithStickyNavbar_E7Z_" id="authorization-model">Authorization model<a href="#authorization-model" class="hash-link" aria-label="Direct link to Authorization model" title="Direct link to Authorization model">‚Äã</a></h3><p>As a bookstore, you need to separate resources for customers and sellers. For example, customers can browse all books, while sellers can manage their on-sale books. It's OK to start with simple if-else checks; however, as the business grows, you may need to leverage a more flexible model such as Role-based Access Control (RBAC) or Attribute-based Access Control (ABAC).</p><p>I also wrote an article <a href="/blog/ciam-102-authz-and-rbac/">CIAM 102: Authorization &amp; Role-based Access Control</a> to demonstrate basic authorization concepts and the RBAC model.</p><h2 class="anchor anchorWithStickyNavbar_E7Z_" id="make-the-decision">Make the decision<a href="#make-the-decision" class="hash-link" aria-label="Direct link to Make the decision" title="Direct link to Make the decision">‚Äã</a></h2><p>You can see auth is not an ‚Äúall or nothing‚Äù problem, since it involves multiple technical components and you or your team may have different tech expertise in these areas. It's important to break it down into smaller parts to gain a better understanding of the status quo.</p><p>To make the decision, I'll ask myself the following questions:</p><ul><li>How urgent is the project?</li><li>How much effort do I expect to put into auth versus the business?</li><li>What‚Äôs the priority of user experience, security, and maintainability?</li><li>Which part(s) do I need full control of? How familiar should I become with them?</li><li>If I go with some frameworks / solutions, are they good enough for customization or extension?</li><li>If the business grows, will I need to introduce a new authentication model?</li><li>If I find a suitable vendor, is it safe enough to use? Do I need a withdrawal plan if anything happens to the vendor?</li></ul><div class="theme-admonition theme-admonition-info alert alert--info admonition_zpDR"><div class="admonitionHeading_iYwg"><span class="admonitionIcon_GPu2"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_AHia"><p>On the other hand, if you're still learning or honing your programming skills, auth can be a great stepping stone on the path to becoming a full-stack developer. It covers almost all components needed for an app.</p></div></div><p>With the questions in mind, I discovered two facts:</p><ul><li>Crafting a reliable authentication system is highly complex.</li><li>Existing vendors cannot meet all the necessary criteria.</li></ul><p>So I decided to start a dedicated project (Logto) for auth, and embrace the open-source community from day one.</p><p>Hope this article helps.</p>]]></content>
        <author>
            <name>Gao</name>
            <uri>https://github.com/gao-sun</uri>
        </author>
        <category label="auth" term="auth"/>
        <category label="dev" term="dev"/>
        <category label="authentication" term="authentication"/>
        <category label="authorization" term="authorization"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[CIAM 102: Authorization & Role-based Access Control]]></title>
        <id>https://logto.qubitpi.org/blog/ciam-102-authz-and-rbac</id>
        <link href="https://logto.qubitpi.org/blog/ciam-102-authz-and-rbac"/>
        <updated>2023-02-05T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Background]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_E7Z_" id="background">Background<a href="#background" class="hash-link" aria-label="Direct link to Background" title="Direct link to Background">‚Äã</a></h2><p>In the <a href="/blog/ciam-101-intro-authn-sso/">previous article</a>, we introduced the concept of authentication (AuthN) and authorization (AuthZ), along with some headachy terms: Identity, Organization, Tenant, etc.</p><p>Organization and Tenant are great for grouping Identities, but they lead to an absolute democracy: everyone can do anything in this system. While utopia is still a mystery, let‚Äôs take a look at the governance of access: Authorization (AuthZ).</p><h3 class="anchor anchorWithStickyNavbar_E7Z_" id="why-do-we-need-authorization">Why do we need authorization?<a href="#why-do-we-need-authorization" class="hash-link" aria-label="Direct link to Why do we need authorization?" title="Direct link to Why do we need authorization?">‚Äã</a></h3><div class="theme-admonition theme-admonition-info alert alert--info admonition_zpDR"><div class="admonitionHeading_iYwg"><span class="admonitionIcon_GPu2"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Recall</div><div class="admonitionContent_AHia"><p>Authorization (AuthZ) answers the question ‚ÄúWhat can you do?‚Äù</p></div></div><p>Notion is a great example. For each page you own, you can choose to keep it private, accessible only to you, or share it with friends, or even the public.</p><p>Or, for an online bookstore, you want everyone to be able to view all books, but customers to only view their own orders, and sellers to manage only the books in their stores.</p><p>AuthZ and AuthN are essential components of a complex business model. They often go hand-in-hand; AuthZ verifies a user's access, while AuthN authenticates identities. Both are necessary for a secure system.</p><h2 class="anchor anchorWithStickyNavbar_E7Z_" id="the-basic-authorization-model">The basic authorization model<a href="#the-basic-authorization-model" class="hash-link" aria-label="Direct link to The basic authorization model" title="Direct link to The basic authorization model">‚Äã</a></h2><p>Here‚Äôs one of the most common AuthZ models: If <strong>IDENTITY</strong> performs <strong>ACTION</strong> on <strong>RESOURCE</strong>, then <strong>ACCEPT</strong> or <strong>DENY</strong>.</p><p>In the Notion example, the model is <strong>PERSON</strong> performs <strong>VIEW</strong> on <strong>PAGE.</strong></p><p>If the page is private:</p><ul><li>You‚Äôll receive <strong>ACCEPT</strong> when performing <strong>VIEW</strong> on your <strong>PAGE</strong>.</li><li>Everyone else should receive <strong>DENY</strong> when performing <strong>VIEW</strong> on your <strong>PAGE</strong>.</li></ul><p>Based on consensus, the industry developed various authorization technologies, such as Role-based Access Control (RBAC), Attribute-based Access Control (ABAC). Today, we will focus on the <a href="https://csrc.nist.gov/CSRC/media/Publications/conference-paper/2000/07/26/the-nist-model-for-role-based-access-control-towards-a-unified-/documents/sandhu-ferraiolo-kuhn-00.pdf" target="_blank" rel="noopener noreferrer">NIST RBAC model</a> Level 1: Flat RBAC.</p><h2 class="anchor anchorWithStickyNavbar_E7Z_" id="role-based-access-control">Role-based Access Control<a href="#role-based-access-control" class="hash-link" aria-label="Direct link to Role-based Access Control" title="Direct link to Role-based Access Control">‚Äã</a></h2><div class="theme-admonition theme-admonition-info alert alert--info admonition_zpDR"><div class="admonitionHeading_iYwg"><span class="admonitionIcon_GPu2"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_AHia"><p>The NIST RBAC model left many things open to provide flexibility and adaptability for various scenarios. Logto now adopts the Level 1 definition with an additional concept "Resource" (i.e. API Resource).</p></div></div><p>Let's extend the bookstore example. Say we have many customers, but only one seller:</p><ul><li>Customers can view and order books, as well as view their own orders.</li><li>The seller can view, create, and delete books, and manage customer orders.</li></ul><h3 class="anchor anchorWithStickyNavbar_E7Z_" id="define-resources">Define resources<a href="#define-resources" class="hash-link" aria-label="Direct link to Define resources" title="Direct link to Define resources">‚Äã</a></h3><p>In Logto, a resource (i.e. API Resource) usually represents a set of entities or items, since it‚Äôs required to use a valid URL as the indicator. Hence we define two resources:</p><ul><li>Books: <code>https://api.bookstore.io/books</code></li><li>Orders: <code>https://api.bookstore.io/orders</code></li></ul><p>One of the advantages of enforcing the URL format is it can map to a real address of your API service, which improves the readability and recognizability when integrating with other components in the system.</p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_zpDR"><div class="admonitionHeading_iYwg"><span class="admonitionIcon_GPu2"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_AHia"><p>ü§î Resources should be divided according to the needs of the business. There is no one-size-fits-all approach; the decision should be made on a case-by-case basis. The example in this article that divides Books and Orders may be suitable for microservices, but not for a monolithic architecture.</p></div></div><h3 class="anchor anchorWithStickyNavbar_E7Z_" id="define-permissions">Define permissions<a href="#define-permissions" class="hash-link" aria-label="Direct link to Define permissions" title="Direct link to Define permissions">‚Äã</a></h3><p>Since we introduced the concept of resource, in Logto, we also enforce that permissions must belong to a resource, in reverse, resources can have permissions.</p><p>Let‚Äôs add some permissions the the resources:</p><ul><li>Books: <code>read</code>, <code>create</code>, <code>delete</code></li><li>Orders: <code>read</code>, <code>read:self</code>, <code>create:self</code>, <code>delete</code></li></ul><p>Although there‚Äôs no requirement of the name of a permission, we have the convention as below:</p><div class="codeBlockContainer_dUHu theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_SC1B"><pre tabindex="0" class="prism-code language-text codeBlock_noRx thin-scrollbar"><code class="codeBlockLines_a94C"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;action&gt;[:&lt;target&gt;]</span><br></span></code></pre><div class="buttonGroup_qENx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_ihXY" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_e8Rr"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_iX_b"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>While <code>&lt;action&gt;</code> is required to describe a permission, <code>:&lt;target&gt;</code> can be ignored to describe a general target, i.e. to all entities or items in the resource. For example:</p><ul><li>Permission <code>read</code> in resource Books means the action to read arbitrary books.</li><li>Permission <code>create:self</code> in resource Orders means the action to create orders that belong to the current user.</li></ul><h3 class="anchor anchorWithStickyNavbar_E7Z_" id="define-roles">Define roles<a href="#define-roles" class="hash-link" aria-label="Direct link to Define roles" title="Direct link to Define roles">‚Äã</a></h3><p>In short, a role is a group of permissions. Let‚Äôs create two roles <code>customer</code> and <code>seller</code> and assign permissions to them as below:</p><p>You may notice the permission-role assignment is many-to-many relations.</p><h3 class="anchor anchorWithStickyNavbar_E7Z_" id="assign-roles-to-users">Assign roles to users<a href="#assign-roles-to-users" class="hash-link" aria-label="Direct link to Assign roles to users" title="Direct link to Assign roles to users">‚Äã</a></h3><p>Just like role-permission assignment, user-role assignment is also a many-to-many relationship. Therefore, you can assign multiple roles to a single user, and a single role can be assigned to multiple users.</p><h3 class="anchor anchorWithStickyNavbar_E7Z_" id="connect-to-dots">Connect to dots<a href="#connect-to-dots" class="hash-link" aria-label="Direct link to Connect to dots" title="Direct link to Connect to dots">‚Äã</a></h3><p>Here‚Äôs a complete relationship diagram for the Level 1 RBAC model in Logto:</p><p>In the RBAC model, permissions are always "positive", meaning the authorization judgement is simple: if a user has the permission, then accept; otherwise, reject.</p><p>Let's say Alice has the role <code>seller</code>, Bob and Carol have the role <code>customer</code>. We'll describe actions in natural language first, and transpile them to the standard authorization format: <strong>IDENTITY</strong> performs <strong>ACTION</strong> on <strong>RESOURCE</strong>, finally giving the conclusion.</p><ul><li>Alice wants to add a new book for sale:<ul><li>User Alice performs <code>create</code> on resource Books (<code>https://api.bookstore.io/books</code>).</li><li>Since Alice has been assigned the permission <code>create</code> of Books according to their role <code>seller</code>, the result is ‚úÖ <strong>ACCEPT</strong>.</li></ul></li><li>Alice wants to view all orders to see if the sale meets their expectation:<ul><li>User Alice performs <code>read</code> on resource Orders (<code>https://api.bookstore.io/orders</code>).</li><li>Since Alice has been assigned the permission <code>read</code> of Orders according to their role <code>seller</code>, the result is ‚úÖ <strong>ACCEPT</strong>.</li></ul></li><li>Bob wants to browse the book list to see if there‚Äôs any books they want to purchase.<ul><li>User Bob performs <code>read</code> on resource Books (<code>https://api.bookstore.io/books</code>).</li><li>Since Bob has been assigned the permission <code>read</code> of Books according to their role <code>cusomter</code>, the result is ‚úÖ <strong>ACCEPT</strong>.</li></ul></li><li>Bob wants to view Carol‚Äôs order.<ul><li>Since it‚Äôs someone else‚Äôs order, the permission <code>read:self</code> of <code>Orders</code> does not work here.</li><li>User Bob performs <code>read</code> on resource Orders (<code>https://api.bookstore.io/order</code>).</li><li>Since Bob has no permission <code>read</code> of Orders, the result is ‚ùå <strong>DENY</strong>.</li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_E7Z_" id="other-rbac-levels">Other RBAC levels<a href="#other-rbac-levels" class="hash-link" aria-label="Direct link to Other RBAC levels" title="Direct link to Other RBAC levels">‚Äã</a></h3><p>There are four levels in the NIST RBAC model:</p><ul><li>Flat RBAC</li><li>Hierarchical RBAC</li><li>Constrained RBAC</li><li>Symmetric RBAC</li></ul><p>See the <a href="https://csrc.nist.gov/CSRC/media/Publications/conference-paper/2000/07/26/the-nist-model-for-role-based-access-control-towards-a-unified-/documents/sandhu-ferraiolo-kuhn-00.pdf" target="_blank" rel="noopener noreferrer">paper</a> for details if you are interested.</p><p>Logto now has the Level 1 implementation and will progress to higher levels based on community feedback. Don‚Äôt hesitate to let us know if a higher level fits your need!</p><h2 class="anchor anchorWithStickyNavbar_E7Z_" id="in-practice">In practice<a href="#in-practice" class="hash-link" aria-label="Direct link to In practice" title="Direct link to In practice">‚Äã</a></h2><p>Beside the theory, we still have heavy technical works to complete in order to make the model work as expected:</p><ul><li>Client and auth server development</li><li>Database design for RBAC</li><li>Validation across different services</li><li>Security and open-standard compliance</li><li>Role, permission, resource management and assignment</li></ul><p>Don‚Äôt panic. We've taken this into account and added out-of-the-box support to cover all of the above. Check out the <a href="/docs/recipes/rbac/">üîê RBAC recipe</a> to learn how to use RBAC in Logto.</p><h2 class="anchor anchorWithStickyNavbar_E7Z_" id="closing-notes">Closing notes<a href="#closing-notes" class="hash-link" aria-label="Direct link to Closing notes" title="Direct link to Closing notes">‚Äã</a></h2><p>RBAC is a powerful access management model for most cases, but there‚Äôs no silver bullet. We still have some questions:</p><ul><li>Do I need high levels of RBAC?</li><li>How does RBAC compare to other authorization models?</li><li>How to define authorization model between different Organizations?</li></ul><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_zpDR"><div class="admonitionHeading_iYwg"><span class="admonitionIcon_GPu2"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_AHia"><p>üî• Stay tuned. We‚Äôll see you in CIAM 103!</p></div></div>]]></content>
        <author>
            <name>Gao</name>
            <uri>https://github.com/gao-sun</uri>
        </author>
        <category label="ciam" term="ciam"/>
        <category label="auth" term="auth"/>
        <category label="authorization" term="authorization"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Logto 2023 February Update]]></title>
        <id>https://logto.qubitpi.org/blog/releases/2023-feb</id>
        <link href="https://logto.qubitpi.org/blog/releases/2023-feb"/>
        <updated>2023-02-02T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Please welcome our first release candidate! Logto is just a few steps away from general availability.]]></summary>
        <content type="html"><![CDATA[<div class="theme-admonition theme-admonition-note alert alert--secondary admonition_zpDR"><div class="admonitionHeading_iYwg"><span class="admonitionIcon_GPu2"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_AHia"><p>Please welcome our first release candidate! Logto is just a few steps away from general availability.</p></div></div><h2 class="anchor anchorWithStickyNavbar_E7Z_" id="-breaking-changes-">üí• Breaking changes üí•<a href="#-breaking-changes-" class="hash-link" aria-label="Direct link to üí• Breaking changes üí•" title="Direct link to üí• Breaking changes üí•">‚Äã</a></h2><ul><li>core: remove <code>GET /settings</code> and <code>PATCH /settings</code> API</li><li>core: add <code>GET /configs/admin-console</code> and <code>PATCH /configs/admin-console</code> API<ul><li><code>/configs/*</code> APIs are config/key-specific now. they may have different logic per key.</li></ul></li><li>core: officially remove all deprecated <code>/session</code> APIs</li><li>core: use HTTP/2 to serve TLS (HTTPS) connections</li><li>cli: change valid <code>logto db config</code> keys by removing <code>alterationState</code> and adding <code>adminConsole</code> since:<ul><li>OIDC configs and admin console configs are tenant-level configs (the concept of "tenant" can be ignored until we officially announce it)</li><li>alteration state is still a system-wide config</li></ul></li><li>for admin access of machine-to-machine applications, now it's required to add scope <code>all</code> for client configs to fetch proper Access Token<ul><li>see <a href="https://docs.logto.io/docs/recipes/interact-with-management-api/" target="_blank" rel="noopener noreferrer">üöù Interact with Management API</a> for details</li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_E7Z_" id="-role-based-access-control">üîí Role-Based Access Control<a href="#-role-based-access-control" class="hash-link" aria-label="Direct link to üîí Role-Based Access Control" title="Direct link to üîí Role-Based Access Control">‚Äã</a></h2><p>We are excited to introduce our latest addition to our product, Role-Based Access Control (RBAC). This powerful feature gives administrators the ability to assign specific roles and permissions to users, ensuring they only have access to the resources and functions they need to do their job.</p><p>With RBAC, administrators can:</p><ul><li>Define permissions across APIs</li><li>Create custom roles with specific permissions</li><li>Assign roles to users and manage their roles</li><li>Easily manage and update permissions</li><li>Securely validate permissions to protect APIs</li></ul><p>Logto takes a major step forward in security and control with easy access management and authorization of sensitive info, ensuring only authorized users have the right to access. This aligns with our vision to provide an open-source identity solution with features for authentication and authorization, and packed with all the features you need.</p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_zpDR"><div class="admonitionHeading_iYwg"><span class="admonitionIcon_GPu2"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_AHia"><p>If you are using Logto SDKs, please upgrade to the latest version to take advantage of RBAC.</p></div></div><p>Check out our <a href="https://docs.logto.io/docs/recipes/rbac/" target="_blank" rel="noopener noreferrer">RBAC recipe</a> for a step-by-step guide. Give it a try and let us know what you think!</p><h2 class="anchor anchorWithStickyNavbar_E7Z_" id="-streamlined-social-sign-in-flow">üèÑ Streamlined social sign-in flow<a href="#-streamlined-social-sign-in-flow" class="hash-link" aria-label="Direct link to üèÑ Streamlined social sign-in flow" title="Direct link to üèÑ Streamlined social sign-in flow">‚Äã</a></h2><p>üí° Logto now detects a trusted email (or phone number) from the social account during social sign-in.</p><ul><li>If the email (or phone number) has been registered: Automatically connect the social identity to the existing user account with a single click.</li><li>If the email (or phone number) is not registered: Automatically sync the user profile with the social-provided email (or phone number) if and only if it is marked as a required user profile.</li></ul><h2 class="anchor anchorWithStickyNavbar_E7Z_" id="-send-and-verify-verification-codes-via-management-api">üî¢ Send and verify verification codes via Management API<a href="#-send-and-verify-verification-codes-via-management-api" class="hash-link" aria-label="Direct link to üî¢ Send and verify verification codes via Management API" title="Direct link to üî¢ Send and verify verification codes via Management API">‚Äã</a></h2><p>The new Management APIs allow you to reuse connectors to dynamically send and verify verification codes for various purposes, such as validating identity before a user updates their profile or performs a dangerous action.</p><ul><li>Call <code>/api/verification-code</code> to send verification code to a given email or phone</li><li>Call <code>/api/verification-code/verify</code> to verify the code against a given email or phone</li></ul><h2 class="anchor anchorWithStickyNavbar_E7Z_" id="Ô∏è-rollback-database-alteration-state">‚Ü©Ô∏è Rollback database alteration state<a href="#Ô∏è-rollback-database-alteration-state" class="hash-link" aria-label="Direct link to ‚Ü©Ô∏è Rollback database alteration state" title="Direct link to ‚Ü©Ô∏è Rollback database alteration state">‚Äã</a></h2><p>In case of any issues with the database, you can now use the <code>logto db alteration rollback [target]</code> command to roll back all database schemas to a previous version, for example <code>logto db alteration rollback v1.0.0-beta.19</code>.</p>]]></content>
        <author>
            <name>Gao</name>
            <uri>https://github.com/gao-sun</uri>
        </author>
        <category label="release" term="release"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Logto 2023 New Year Update]]></title>
        <id>https://logto.qubitpi.org/blog/releases/2023-jan</id>
        <link href="https://logto.qubitpi.org/blog/releases/2023-jan"/>
        <updated>2023-01-01T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[üôã Hey folks!]]></summary>
        <content type="html"><![CDATA[<p>üôã Hey folks!</p><p>For the first day of 2023, we shipped a few things for everybody:</p><ul><li>Web hooks, Advanced search API, New connectors</li><li>Admin console enhancement, Refactored Interaction APIs and Audit logs</li><li>New blog posts</li></ul><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_zpDR"><div class="admonitionHeading_iYwg"><span class="admonitionIcon_GPu2"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_AHia"><p>We are currently busy working on the general availability version which includes User profile, RBAC (Role-based access control), and much more!</p></div></div><h2 class="anchor anchorWithStickyNavbar_E7Z_" id="-breaking-change-">üí• Breaking change üí•<a href="#-breaking-change-" class="hash-link" aria-label="Direct link to üí• Breaking change üí•" title="Direct link to üí• Breaking change üí•">‚Äã</a></h2><p>If you want to perform the original fuzzy user search via Management API, adding <code>%</code> around the keyword is required. E.g.:</p><p>Original: <code>GET /users?search=foo</code>
Now: <code>GET /users?search=%foo%</code></p><h2 class="anchor anchorWithStickyNavbar_E7Z_" id="migration">Migration<a href="#migration" class="hash-link" aria-label="Direct link to Migration" title="Direct link to Migration">‚Äã</a></h2><p>If you are upgrading from an older version of logto, make sure to go through our <a href="https://docs.logto.io/docs/tutorials/using-cli/database-alteration" target="_blank" rel="noopener noreferrer">Database alteration</a> tutorial.</p><h2 class="anchor anchorWithStickyNavbar_E7Z_" id="feature-updates">Feature updates<a href="#feature-updates" class="hash-link" aria-label="Direct link to Feature updates" title="Direct link to Feature updates">‚Äã</a></h2><h3 class="anchor anchorWithStickyNavbar_E7Z_" id="-web-hooks">ü™ù Web hooks<a href="#-web-hooks" class="hash-link" aria-label="Direct link to ü™ù Web hooks" title="Direct link to ü™ù Web hooks">‚Äã</a></h3><p>With hooks, Logto can enable the next-level extensibility for you to interact with other services in an event-based manner. E.g., do some async jobs after a new user registered.</p><p>We support three events in this version: <code>PostRegister</code>, <code>PostSignIn</code> and <code>PostResetPassword</code>. Check out <a href="https://docs.logto.io/docs/recipes/webhooks/" target="_blank" rel="noopener noreferrer">ü™ù Web hooks</a> for the concept explained and detailed usage.</p><h3 class="anchor anchorWithStickyNavbar_E7Z_" id="Ô∏è-advanced-search-api">‚öôÔ∏è Advanced search API<a href="#Ô∏è-advanced-search-api" class="hash-link" aria-label="Direct link to ‚öôÔ∏è Advanced search API" title="Direct link to ‚öôÔ∏è Advanced search API">‚Äã</a></h3><p>Management API is a programmatic way to communicate with Logto. We redesigned the user search API to make it powerful for advanced search requests.</p><p>Now you can designate one or multiple search fields as well as the match mode. For example, you can search users that:</p><ul><li>Name starts with ‚ÄúAlice‚Äù, case-sensitive; or</li><li>Email includes ‚ÄúAlice‚Äù, case-insensitive.</li></ul><p>Exact search is also supported, e.g., search users that name is exactly ‚ÄúJohn Wick‚Äù. See <a href="https://docs.logto.io/docs/recipes/interact-with-management-api/advanced-user-search" target="_blank" rel="noopener noreferrer">Advanced user search</a> for details.</p><h3 class="anchor anchorWithStickyNavbar_E7Z_" id="-connectors">üîó Connectors<a href="#-connectors" class="hash-link" aria-label="Direct link to üîó Connectors" title="Direct link to üîó Connectors">‚Äã</a></h3><p>Logto is built on open standards, and we believe they can eliminate enormous gaps in software development. From this version, Logto supports creating multiple connectors based on the same open standard: <strong>OAuth 2.0</strong> or <strong>OpenID Connect</strong>; We call them ‚Äústandard connectors‚Äù.</p><p>We are developing more standard connectors like SAML and LDAP. Feel free to let us know your needs!</p><p>Besides, we‚Äôd like to highlight our community contributors:</p><ul><li><a href="https://github.com/kentio" target="_blank" rel="noopener noreferrer">@kentio</a> contributed AWS SES connector</li><li><a href="https://github.com/StringKe" target="_blank" rel="noopener noreferrer">@StringKe</a> contributed Tencent SMS and Feishu (Lark) connector</li></ul><p>Thank you!</p><h2 class="anchor anchorWithStickyNavbar_E7Z_" id="enhancement">Enhancement<a href="#enhancement" class="hash-link" aria-label="Direct link to Enhancement" title="Direct link to Enhancement">‚Äã</a></h2><h3 class="anchor anchorWithStickyNavbar_E7Z_" id="-admin-console-enhancement-to-streamline-the-set-up-process">üíª Admin Console enhancement to streamline the set up process<a href="#-admin-console-enhancement-to-streamline-the-set-up-process" class="hash-link" aria-label="Direct link to üíª Admin Console enhancement to streamline the set up process" title="Direct link to üíª Admin Console enhancement to streamline the set up process">‚Äã</a></h3><div class="theme-admonition theme-admonition-info alert alert--info admonition_zpDR"><div class="admonitionHeading_iYwg"><span class="admonitionIcon_GPu2"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_AHia"><p>We revisited the Logto admin console UI and give it a fresh look! The goal of this is to make the admin console more intuitive and aesthetically pleasing, which ends up helping developers more efficiently perform the tasks.</p></div></div><p>Now you can feel the following enhancement as follows:</p><ul><li><strong>Responsive design improvement</strong> We optimized responsive design to ensure that the interface looks great on different screen sizes.</li><li><strong>Simplification of the layout</strong> We have streamlined the layout of the interface, organizing the content in a more logical and intuitive way. This makes it easier for our developers to navigate the interface and find what they are looking for.</li><li><strong>Fixed the non-intuitive interaction behaviors</strong> we changed the saving interaction and make it a section-level behavior, which avoiding seeing too many double check alerts. We wish to provide a more secure developer experience when making configuration.</li></ul><p>Please check it out and explore, and let us know how you feel! üòâ</p><h3 class="anchor anchorWithStickyNavbar_E7Z_" id="-refactored-interaction-apis-and-audit-logs">üßë‚ÄçüöÄ Refactored Interaction APIs and Audit logs<a href="#-refactored-interaction-apis-and-audit-logs" class="hash-link" aria-label="Direct link to üßë‚ÄçüöÄ Refactored Interaction APIs and Audit logs" title="Direct link to üßë‚ÄçüöÄ Refactored Interaction APIs and Audit logs">‚Äã</a></h3><p>Due to the increased flexibility and complexity of Sign-in experience, and to provide even more auditable and structured logs for user interactions, we decided to refactor our Interaction APIs with the logging mechanism; The original session APIs are deprecated from now.</p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_zpDR"><div class="admonitionHeading_iYwg"><span class="admonitionIcon_GPu2"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_AHia"><p>This API change does not affect the end-user Sign-in experience.</p></div></div><p>Audit logs become fine-categorized by the new key definitions, and payloads are optimized for behavior tracing. Check out the ‚ÄúAudit logs‚Äù tab in Admin console to feel the change.</p><h2 class="anchor anchorWithStickyNavbar_E7Z_" id="blog-posts">Blog posts<a href="#blog-posts" class="hash-link" aria-label="Direct link to Blog posts" title="Direct link to Blog posts">‚Äã</a></h2><ul><li><a href="https://silverhand.substack.com/p/the-design-considerations-for-a-seamless-2d4?utm_source=github-release" target="_blank" rel="noopener noreferrer">The design considerations for a seamless sign-in experience (Second Chapter)</a> Learn more about our design thinking and decision making philosophies</li><li><a href="https://dev.to/gaosun/series/21132?utm_source=github-release" target="_blank" rel="noopener noreferrer">Migrate a 60k LOC TypeScript (NodeJS) repo to ESM and testing become 4x faster</a> A practical series of our engineering efforts on module system migration</li></ul>]]></content>
        <author>
            <name>Gao</name>
            <uri>https://github.com/gao-sun</uri>
        </author>
        <category label="release" term="release"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[The design considerations for a seamless sign-in experience (Second Chapter)]]></title>
        <id>https://logto.qubitpi.org/blog/design-for-seamless-sie-2</id>
        <link href="https://logto.qubitpi.org/blog/design-for-seamless-sie-2"/>
        <updated>2022-12-05T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[In the previous piece, we discussed the development of the Sign-in Experience, and what makes a positive end-user encounter, and we ended on some thought-provoking topics.]]></summary>
        <content type="html"><![CDATA[<p>In the previous piece, we discussed the development of the Sign-in Experience, and what makes a positive end-user encounter, and we ended on some thought-provoking topics.</p><ol><li>How can I do this with as little effort as possible using the Logto Admin Console?</li><li>When compared to currently available market solutions, how does Logto‚Äôs configuration experience stand out? Curious to understand why this is the best choice for my business.</li><li>From a business perspective, how can sign-up be evaluated?</li><li>What does Logto have in store for future service and product development?</li></ol><p>In this article, we'll answer these questions and show you how the Logto Admin Console can help.</p><h2 class="anchor anchorWithStickyNavbar_E7Z_" id="make-admin-console-thoughtful-and-educational">Make Admin Console thoughtful and educational<a href="#make-admin-console-thoughtful-and-educational" class="hash-link" aria-label="Direct link to Make Admin Console thoughtful and educational" title="Direct link to Make Admin Console thoughtful and educational">‚Äã</a></h2><p>The permutation and combination of identifier, Authentication Factor, Connector, and Personal information is a complex interaction design question. It‚Äôs very ambitious and there are lots of directions we can go. We listed them out, evaluated them and made the decision with the aligned trade-off on our team.</p><p>To enable the sign-in and sign-up, there are three high-level directions we explored.</p><p><img loading="lazy" alt="Table" src="/assets/images/table-1-d4a78ea14043f3c2766967892e71db5c.jpg" width="1462" height="874" class="img_E_TW"></p><p>A sign-in experience is never complete without the Admin Console. We never lose sight of the fact that the Admin Console exists to support the experience we have suggested, and not the other way around. Many of the solutions out there that let users choose their own sign-in and sign-up processes end up making things more complicated for our developers and lowering the quality of the experience for end users because they don't cater for actual use cases.</p><p>In the end, we picked direction 3.</p><ul><li>There are far too many illogical outcomes when following Option 1.</li><li>The second direction is not consistent with the principle of progressive disclosure. The amount of mental effort required is excessive, and there is no way to make it more scalable in the future.</li></ul><p>First, we'll look at our sample of the Admin Console and run through the two most common use cases. You may learn more about how we make it possible with a robust tool like this.</p><p>The first scenario:</p><ul><li><em>Sign up: Email with a password and verify email at sign up.</em></li><li><em>Sign in: Email with a password, Social account</em></li></ul><p><img loading="lazy" alt="demo" src="/assets/images/demo-1-b2e807777ef0a2ba5ed014efea196fdb.gif" width="1800" height="927" class="img_E_TW"></p><p>The second scenario:</p><ul><li><em>Sign up: Email or Phone number with a password and verify at sign up.</em></li><li><em>Sign in: Email or Phone number with a password, Social accounts.</em></li></ul><p><img loading="lazy" alt="demo" src="/assets/images/demo-2-84d97ed0f531b1dafdc3f90eb43e93d3.gif" width="1800" height="927" class="img_E_TW"></p><p>We have three guiding principles that we stick to as a group to ensure success.</p><h3 class="anchor anchorWithStickyNavbar_E7Z_" id="optimal-balance-between-adaptability-and-solving-real-use-cases">Optimal balance between adaptability and solving real use cases<a href="#optimal-balance-between-adaptability-and-solving-real-use-cases" class="hash-link" aria-label="Direct link to Optimal balance between adaptability and solving real use cases" title="Direct link to Optimal balance between adaptability and solving real use cases">‚Äã</a></h3><p>In order to accommodate the vast majority of use cases, we strive to provide consumers with as much customization as possible. However, we must be strict about any identifier combination that makes no sense to real users as those can have a negative effect on business.</p><h4 class="anchor anchorWithStickyNavbar_E7Z_" id="flexibility">Flexibility<a href="#flexibility" class="hash-link" aria-label="Direct link to Flexibility" title="Direct link to Flexibility">‚Äã</a></h4><p>As previously stated, we divided the Sign-in Experience into four categories: "Identifier, Authentication Factor, Social Connector, and Personal Information.‚Äù</p><div class="theme-admonition theme-admonition-info alert alert--info admonition_zpDR"><div class="admonitionHeading_iYwg"><span class="admonitionIcon_GPu2"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_AHia"><p>The most significant change in Sign-in Experience V2 is the establishment of a flexible and scalable framework to support more scenarios in the long run.</p></div></div><p>This framework allows developers to combine and categorize components based on their choices. Here's how we prioritize features and put them on the roadmap.</p><h5 class="anchor anchorWithStickyNavbar_E7Z_" id="sign-up-identifier">Sign-up identifier<a href="#sign-up-identifier" class="hash-link" aria-label="Direct link to Sign-up identifier" title="Direct link to Sign-up identifier">‚Äã</a></h5><p><img loading="lazy" alt="Sign-up identifier" src="/assets/images/sign-up-identifier-20753d9bb574ef5bcd768675a80c665a.jpg" width="1426" height="500" class="img_E_TW"></p><h5 class="anchor anchorWithStickyNavbar_E7Z_" id="authentication-factors">Authentication factors<a href="#authentication-factors" class="hash-link" aria-label="Direct link to Authentication factors" title="Direct link to Authentication factors">‚Äã</a></h5><p><img loading="lazy" alt="Authentication factors" src="/assets/images/auth-factors-fe234ebefa49523dde381582ed4589e2.jpg" width="1504" height="462" class="img_E_TW"></p><h5 class="anchor anchorWithStickyNavbar_E7Z_" id="social-connector">Social Connector<a href="#social-connector" class="hash-link" aria-label="Direct link to Social Connector" title="Direct link to Social Connector">‚Äã</a></h5><p><img loading="lazy" alt="Social Connector" src="/assets/images/social-connector-87b472e40535549f8670de8099b0232e.jpg" width="1498" height="542" class="img_E_TW"></p><h5 class="anchor anchorWithStickyNavbar_E7Z_" id="personal-information">Personal information<a href="#personal-information" class="hash-link" aria-label="Direct link to Personal information" title="Direct link to Personal information">‚Äã</a></h5><p>We currently do not have a profile page that users can modify and update on their own. This, on the other hand, is on our priority list and will be ready before the end of the year. Following this implementation, the entire sign-in experience can be integrated as a whole.</p><h4 class="anchor anchorWithStickyNavbar_E7Z_" id="be-true-to-real-use-cases">Be true to real use cases<a href="#be-true-to-real-use-cases" class="hash-link" aria-label="Direct link to Be true to real use cases" title="Direct link to Be true to real use cases">‚Äã</a></h4><p>However, based on the permutations and combinations, there are numerous possibilities, many of which make no sense at all. We must make trade-offs and implement features gradually so as not to overwhelm users in the first place. In v2, for example, we only defined four options as sign-up identifiers because these are the most common scenarios, covering 90%+ of the market.</p><p>Another example is that for nonsensical use cases, we disable them and use tooltips to explain why. The rules discussed in the previous article are then applied.</p><blockquote><p><strong>Restrictions between Sign-in, Registration and Authentication Factor, for example:</strong></p><ul><li><em>If password is chosen as an authentication factor, sign-in should support it as well, and all other identifiers must as well. We don't want users to do meaningless work or disregard their security intentions when registering. The fact that a password is required for sign-up with a username but not for email or phone password sign-in makes no sense and confuses the user.</em></li><li><em>If users enabled multiple identifiers during sign-in, such as email or phone number, both of those identifiers must be available for sign-in. For example, if a person signs up using their email address but only signs in with their support phone number, they will be unable to use the product in the end.</em></li><li><em>If the sole identifier used during registration is the username, a password is required. This is owing to the limitations and characteristics of using a username as an identifier.</em></li></ul></blockquote><p><img loading="lazy" alt="Restrictions" src="/assets/images/restrictions-af676108a447785d48ea2d76c080528e.png" width="4072" height="1536" class="img_E_TW"></p><h3 class="anchor anchorWithStickyNavbar_E7Z_" id="beginning-with-developer-mindsets-bring-clarity-to-complexity">Beginning with developer mindsets, bring clarity to complexity<a href="#beginning-with-developer-mindsets-bring-clarity-to-complexity" class="hash-link" aria-label="Direct link to Beginning with developer mindsets, bring clarity to complexity" title="Direct link to Beginning with developer mindsets, bring clarity to complexity">‚Äã</a></h3><p>The setup is intended to assist users in creating successful sign-in and sign-up processes. When building up their Sign-in Experience, we illustrate the broad reasoning behind the scenes and assist people in learning and growing. I'll give you two instances.</p><h4 class="anchor anchorWithStickyNavbar_E7Z_" id="thoughtful-educational-content">Thoughtful educational content<a href="#thoughtful-educational-content" class="hash-link" aria-label="Direct link to Thoughtful educational content" title="Direct link to Thoughtful educational content">‚Äã</a></h4><p>In order to be clear. We utilized a brief and plain description to help customers understand what each setting means and to address any questions they may have.</p><p><img loading="lazy" alt="Educational content" src="/assets/images/educational-content-bcd693420cf6e9b5cd5ef803774037e2.png" width="4076" height="2480" class="img_E_TW"></p><h4 class="anchor anchorWithStickyNavbar_E7Z_" id="a-synopsis-to-provide-clarity">A synopsis to provide clarity<a href="#a-synopsis-to-provide-clarity" class="hash-link" aria-label="Direct link to A synopsis to provide clarity" title="Direct link to A synopsis to provide clarity">‚Äã</a></h4><p>Another example - Developers reconfiguring and updating the Sign-in Experience settings can be a difficult and risky process because it will affect your end users' engagement. Before saving a modification, we show the user a change summary. Our engineers are familiar with the before vs. after mindset, and it has brought a lot of clarity to complexity.</p><p><img loading="lazy" alt="Synopsis" src="/assets/images/synopsis-f836c669c6869b46156db16fd00e74f7.png" width="3068" height="1838" class="img_E_TW"></p><h3 class="anchor anchorWithStickyNavbar_E7Z_" id="make-ability-to-scale-consider-day-0-and-plan-for-iteration">Make ability to scale, consider Day 0, and plan for iteration<a href="#make-ability-to-scale-consider-day-0-and-plan-for-iteration" class="hash-link" aria-label="Direct link to Make ability to scale, consider Day 0, and plan for iteration" title="Direct link to Make ability to scale, consider Day 0, and plan for iteration">‚Äã</a></h3><p>We don't want to piss off our users with another massive redesign in the future, thus we need to make sure that the product design is scalable. We also think about the steps we would take to support future versions, such as Multi-Factor Authentication (MFA), Magic Link, completing a user's profile (including name, gender, email address, and password), and supporting future versions.</p><p>Here is a view about the future version with how we support <code>Unverified email</code> , <code>MFA</code>, <code>Magic Link</code>, and <code>Profile fulfill</code>.</p><p><img loading="lazy" alt="Future version" src="/assets/images/future-version-1caa6a8fe92ec352057cc1da9f304fdd.png" width="4948" height="2840" class="img_E_TW"></p><h2 class="anchor anchorWithStickyNavbar_E7Z_" id="from-a-business-perspective-how-can-sign-up-be-evaluated">From a business perspective, how can sign-up be evaluated?<a href="#from-a-business-perspective-how-can-sign-up-be-evaluated" class="hash-link" aria-label="Direct link to From a business perspective, how can sign-up be evaluated?" title="Direct link to From a business perspective, how can sign-up be evaluated?">‚Äã</a></h2><p>We accelerated the sign-up and sign-in processes and increased user acquisition by adhering to the ideas of "minimum steps," "helping users succeed," and "limited consumer options" when designing the best practice of sign-in flow. Additionally, the <!-- -->[Dashboard]<!-- --> and <!-- -->[Audit Log]<!-- --> are excellent resources for learning about the sign-up and login patterns of users and the general health of the app.</p><h2 class="anchor anchorWithStickyNavbar_E7Z_" id="the-future">The future<a href="#the-future" class="hash-link" aria-label="Direct link to The future" title="Direct link to The future">‚Äã</a></h2><p>The Logto Sign-in Experience V2 and its development process are now clear to you. Now is the moment to experiment and speed up the development of your product. We are also putting up V3 suggestions. To give you a taste of the available options, here is a preview,</p><ol><li>Share our polished design components in Figma source file</li><li>Support multi-factor authentication</li><li>Support magic links</li><li>Visualize the end-to-end flow when building the Sign-in Experience and better for business needs</li><li>User profile customization</li><li>Much more in accessibility improvement, and look and feel customization</li></ol>]]></content>
        <author>
            <name>Guamian</name>
            <uri>https://github.com/fleuraly</uri>
        </author>
        <author>
            <name>Ran</name>
            <uri>https://github.com/Rany0101</uri>
        </author>
        <category label="design" term="design"/>
        <category label="sign-in" term="sign-in"/>
        <category label="ux" term="ux"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[CIAM 101: Authentication, Identity, SSO]]></title>
        <id>https://logto.qubitpi.org/blog/ciam-101-intro-authn-sso</id>
        <link href="https://logto.qubitpi.org/blog/ciam-101-intro-authn-sso"/>
        <updated>2022-11-28T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Background]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_E7Z_" id="background">Background<a href="#background" class="hash-link" aria-label="Direct link to Background" title="Direct link to Background">‚Äã</a></h2><p>I began the build Logto because I noticed that Identity and Access Management (IAM) had become increasingly complex and expansive over time. The concept of IAM is even large enough to give rise to new concepts, such as WIAM (Workforce IAM) and CIAM (Customer IAM).</p><p>While WIAM and CIAM share the same foundation, they have distinct use cases: WIAM is typically used for internal users, while CIAM is used for external customers.<!-- --> Some examples:</p><ul><li><strong>WIAM</strong> Your company has a unified identity system for employees, thus every one can use the same account to access company resources, such as software subscriptions, cloud computing services, etc.</li><li><strong>CIAM</strong> Your online bookstore requires a user identity system for customers and sellers. The sign-in experience is a critical part of onboarding, as it is located at the top of the conversion funnel.</li></ul><p>Logto started with the CIAM for various reasons (we‚Äôll have another article talking about this). During development, we realized that building a unified understanding across the team would be beneficial before taking our product to the next level. We hope this will also help you gain a better grasp of the IAM landscape.</p><p>Let‚Äôs get started!</p><h2 class="anchor anchorWithStickyNavbar_E7Z_" id="the-basics-of-ciam">The basics of CIAM<a href="#the-basics-of-ciam" class="hash-link" aria-label="Direct link to The basics of CIAM" title="Direct link to The basics of CIAM">‚Äã</a></h2><div class="theme-admonition theme-admonition-info alert alert--info admonition_zpDR"><div class="admonitionHeading_iYwg"><span class="admonitionIcon_GPu2"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_AHia"><p>Regardless of their differences, WIAM and CIAM both have the same foundation: authentication and authorization. These two concepts are at the core of their features.</p></div></div><p>In this article, we'll focus on the fundamental concepts of CIAM and problems we may meet during or after the authentication flow. We‚Äôll also discuss Single Sign-On (SSO) and its related scenarios.</p><h3 class="anchor anchorWithStickyNavbar_E7Z_" id="authentication-and-authorization">Authentication and authorization<a href="#authentication-and-authorization" class="hash-link" aria-label="Direct link to Authentication and authorization" title="Direct link to Authentication and authorization">‚Äã</a></h3><div class="theme-admonition theme-admonition-info alert alert--info admonition_zpDR"><div class="admonitionHeading_iYwg"><span class="admonitionIcon_GPu2"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Definition</div><div class="admonitionContent_AHia"><ul><li>Authentication (AuthN) answers the question ‚ÄúWhich identity do you own?‚Äù</li><li>Authorization (AuthZ) answers the question ‚ÄúWhat can you do?‚Äù</li></ul></div></div><blockquote><p>üí° Authentication is initially defined as "Who are you?". However, when discussing digital identities, it is more accurate to demonstrate authentication by "proving ownership of identity". (Credit to <a href="https://www.reddit.com/r/programming/comments/10uycg0/comment/j7eyhrb/" target="_blank" rel="noopener noreferrer">Calm-Card-2424</a>)</p></blockquote><p>If you discover something that does not fit into either of these two categories, it is likely not essential to the identity business.</p><ul><li><strong>Examples for authentication</strong><ul><li>Password sign-in, passwordless sign-in, social sign-in, etc.</li><li>Machine-to-Machine authentication</li></ul></li><li><strong>Examples for authorization</strong><ul><li>Role-based Access Control</li><li>Attribute-based Access Control</li></ul></li><li><strong>Examples for exceptions</strong><ul><li>Non-identity data</li><li>Web hooks</li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_E7Z_" id="identity-and-tenant">Identity and Tenant<a href="#identity-and-tenant" class="hash-link" aria-label="Direct link to Identity and Tenant" title="Direct link to Identity and Tenant">‚Äã</a></h3><p>Identity typically represents either a user or a machine. Upon successful authentication, an ID Token is issued as an Identity.</p><p>In other words, the main purpose of authentication is to obtain an Identity.</p><p>A Tenant is a group of identities:</p><p>When we discuss "Multi-tenant", we are referring to multiple Logto instances that are identity-isolated from one another. In other words, multiple Logto instances.</p><p>Note it has two <strong>isolated</strong> identity systems, i.e. you cannot use the Identity of Tenant 1 in Tenant 2, even for the same identifier (email,  phone, etc.). It's like your Costco membership not being valid at Whole Foods.</p><div class="theme-admonition theme-admonition-info alert alert--info admonition_zpDR"><div class="admonitionHeading_iYwg"><span class="admonitionIcon_GPu2"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_AHia"><p>üß± In short, there are ‚Äúphysical walls‚Äù between Tenants.</p></div></div><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_zpDR"><div class="admonitionHeading_iYwg"><span class="admonitionIcon_GPu2"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_AHia"><p>The definition of "Tenant" varies across CIAM products. Some refer to the term "Organization" in Logto, which will be introduced later.</p></div></div><h3 class="anchor anchorWithStickyNavbar_E7Z_" id="app-and-tenant">App and Tenant<a href="#app-and-tenant" class="hash-link" aria-label="Direct link to App and Tenant" title="Direct link to App and Tenant">‚Äã</a></h3><p>Just like Identity, an App also belongs to a Tenant. Several things to remember:</p><ul><li>There is typically no direct relationship between an App and an Identity.<ul><li>An Identity can represent an App, but there is no direct connection between them.</li></ul></li><li>Like users, apps are also Tenant-level.</li><li>Apps are code, while users are human.</li><li>The sole purpose of Apps are to complete authentication, i.e. to obtain an Identity.</li></ul><h3 class="anchor anchorWithStickyNavbar_E7Z_" id="identity-provider-idp-and-service-provider-sp">Identity Provider (IdP) and Service Provider (SP)<a href="#identity-provider-idp-and-service-provider-sp" class="hash-link" aria-label="Direct link to Identity Provider (IdP) and Service Provider (SP)" title="Direct link to Identity Provider (IdP) and Service Provider (SP)">‚Äã</a></h3><p>The difference between these two providers is tricky but important.</p><ul><li><strong>Identity Provider</strong> is a service that provides authentication (AuthN) and issues identities.</li></ul><p>You can find various explanations about Service Provider from Google, though they may not be satisfactory. In my mind, Service Provider is a relative concept:</p><ul><li><strong>Service Provider (or Relying Party in <a href="https://openid.net/specs/openid-connect-core-1_0.html" target="_blank" rel="noopener noreferrer">OIDC</a>)</strong> is a service or client that initiates authentication (AuthN) and requests the result from Identity Providers.</li></ul><h4 class="anchor anchorWithStickyNavbar_E7Z_" id="quiz">Quiz<a href="#quiz" class="hash-link" aria-label="Direct link to Quiz" title="Direct link to Quiz">‚Äã</a></h4><p>Consider a typical social sign-in scenario:</p><p><strong>‚ùì How many Service Providers and Identity Providers in this graph?</strong></p><details class="details_tgU4 alert alert--info details_uAGx" data-collapsed="true"><summary>Answer</summary><div><div class="collapsibleContent_QcPY">Both have two. iOS App is a service provider to Logto, while Logto is an identity provider. Logto is also a service provider to GitHub, while GitHub is an identity provider. Thus, Logto is a Service Provider also a Identity Provider.</div></div></details><h2 class="anchor anchorWithStickyNavbar_E7Z_" id="case-study-a-tech-solution-company">Case study: A tech solution company<a href="#case-study-a-tech-solution-company" class="hash-link" aria-label="Direct link to Case study: A tech solution company" title="Direct link to Case study: A tech solution company">‚Äã</a></h2><p>You are a CTO of a tech solution company, you have over 100 business partners and you have delivered over 300 projects.</p><ul><li>Each project is either a web app or a mobile app with a backend service.</li><li>For each business partner, you want to refactor the user system to provide SSO across its projects.</li></ul><p><strong>‚ùì How can Logto (or a CIAM product) help?</strong></p><details class="details_tgU4 alert alert--info details_uAGx" data-collapsed="true"><summary>Answer</summary><div><div class="collapsibleContent_QcPY">Create a Logto instance for each business partner. Each partner holds a Tenant. Projects are mapped to "Apps" in Logto.<p>Logto offers a universal sign-in experience (i.e. SSO) within a Tenant, so users don‚Äôt need to sign in again when accessing another app in the same Tenant if they already signed in.</p></div></div></details><h2 class="anchor anchorWithStickyNavbar_E7Z_" id="what-we-talk-about-when-we-talk-about-sso">What we talk about when we talk about SSO<a href="#what-we-talk-about-when-we-talk-about-sso" class="hash-link" aria-label="Direct link to What we talk about when we talk about SSO" title="Direct link to What we talk about when we talk about SSO">‚Äã</a></h2><p>We found the term ‚ÄúSSO‚Äù often causes confusion. We consider Single Sign-On(In) to be a behavior, not a business concept. Therefore, SSO does not equate to ‚ÄúSSO in WIAM‚Äù.</p><p>When we say ‚Äúit needs SSO‚Äù, it can refer to one of the following cases:</p><h3 class="anchor anchorWithStickyNavbar_E7Z_" id="sso-case-1">SSO Case 1<a href="#sso-case-1" class="hash-link" aria-label="Direct link to SSO Case 1" title="Direct link to SSO Case 1">‚Äã</a></h3><blockquote><p>üëâüèΩ In a big corp, employees use the same credentials to sign in to all company-licensed resources (e.g. email, IM, cloud services).</p></blockquote><p>It is the typical WIAM scenario. In this case, only one Identity Provider is involved. We don‚Äôt care for now.</p><h3 class="anchor anchorWithStickyNavbar_E7Z_" id="sso-case-2">SSO Case 2<a href="#sso-case-2" class="hash-link" aria-label="Direct link to SSO Case 2" title="Direct link to SSO Case 2">‚Äã</a></h3><blockquote><p>üëâüèΩ End-users use the same credentials to sign in to all services developed by the same company (e.g. GSuite).</p></blockquote><p>Logto is currently focusing on the approach outlined above. Multiple external identity providers, such as a third-party social sign-in provider, may exist independently and without connection.</p><p>Despite this, Logto remains the single source of truth for Identities, simply "borrowing" them from other providers. In this case, Logto acts as both an Identity Provider (to GSuite apps) and a Service Provider (to external Identity Providers).</p><h3 class="anchor anchorWithStickyNavbar_E7Z_" id="sso-case-3">SSO Case 3<a href="#sso-case-3" class="hash-link" aria-label="Direct link to SSO Case 3" title="Direct link to SSO Case 3">‚Äã</a></h3><blockquote><p>üëâüèΩ End-users can only use the specific Identity Provider within the corresponding email domain to complete authentication. For example, signing in to Figma with Google Workspace.</p></blockquote><p>This is the most common use case for SSO in CIAM. Let‚Äôs take a closer look.</p><p>If we want to sign in to Figma using our @silverhand.io email, we can use either Social sign-in or SSO. The figures below illustrate the difference between the two:</p><div style="padding:2rem;display:grid;grid-template-columns:1fr 1fr;gap:1.5rem"><div><center><p><em>Social sign-in</em></p></center></div><div><center><p><em>SSO</em></p></center></div></div><p>In words:</p><ul><li>After social sign-in, users are free to set a password or change the email address in Figma</li><li>After SSO, users cannot set password or change any personal info including email address, since their Identities are managed by Google Workspace</li></ul><p>In this case, Logto is both an Identity Provider and a Service Provider. It appears that SSO is more complex than a normal sign-in process. What are the benefits for the identity owner?</p><ul><li><strong>Centralized control:</strong> Keep identity information and authentication processes in one place, and ensure user information is always up-to-date. There is no need to add and remove licenses across different applications for changes.</li><li><strong>Improved user experience:</strong> Identity owners who require SSO are usually corporations. Their employees can use the same credentials and shared session for cross-company applications, such as Figma, Zoom, Slack, etc.</li><li><strong>Enhanced security:</strong> You may have noticed that some corporations require specific sign-in methods, such as dynamic verification codes. Using SSO can ensure that every employee uses the same sign-in method combination for accessing all resources.</li></ul><blockquote><p>ü§î Smart like you must have noticed that this is actually <strong>SSO Case 1</strong> from the SaaS perspective.</p></blockquote><p>It‚Äôs time to discuss the "X" in the SSO graph. This represents the process of Figma connecting the email domain to a specific Identity Provider. But, how does it work?</p><h2 class="anchor anchorWithStickyNavbar_E7Z_" id="sso-mapping">SSO mapping<a href="#sso-mapping" class="hash-link" aria-label="Direct link to SSO mapping" title="Direct link to SSO mapping">‚Äã</a></h2><p>Since the request often comes from enterprise clients, we refer to the process of "SSO Case 3" from the previous section as "Enterprise SSO" for clarity.</p><p>We can easily devise a naive solution: create a mapping between email domains and SSO methods, then manually update it.</p><p>The action of process ‚ÄúX‚Äù is now clear:</p><blockquote><p>üîç <strong>Find the mapped Enterprise SSO method of the given email domain</strong></p></blockquote><p>Thus, if you configure <code>silverhand.io</code> as a valid email domain that connects with a Google Workspace SSO URL, users who try to sign in with an <code>@silverhand.io</code> email will be redirected to the corresponding Google Workspace sign-in page, instead of being processed in-place.</p><p>When you only have a few dozen clients that need Enterprise SSO, manually managing the mapping is okay. However, there are more considerations to take into account:</p><ol><li><em>What if there are hundreds or thousands Enterprise SSO clients?</em></li><li><em>What‚Äôs the relationship between ‚Äúnormal users‚Äù and ‚ÄúEnterprise SSO users‚Äù?</em></li><li><em>Should data be isolated between different Enterprise SSO clients?</em></li><li><em>Is there a need to provide a dashboard for the Enterprise SSO admins to view active users, audit logs, etc.?</em></li><li><em>How can accounts be automatically deactivated when a user is removed from the Enterprise SSO Identity Provider?</em></li></ol><p>And a lot more. Since almost all Enterprise SSO are email-domain-based, we can quickly figure out a better solution:</p><ul><li>If the user can prove ownership of that domain, they can set up the enterprise SSO of that domain in a self-serve manner.</li></ul><p>This solution addresses the first two questions:</p><blockquote><p><em>1. What if there are hundreds or thousands Enterprise SSO clients?</em></p></blockquote><ul><li>They can configure Enterprise SSO in a self-serve way.</li></ul><blockquote><p><em>2. What‚Äôs the relationship between ‚Äúnormal users‚Äù and ‚ÄúEnterprise SSO users‚Äù?</em></p></blockquote><ul><li>We open all possible sign-in methods to normal users except Enterprise SSO; While we limit the sign-in method to Enterprise SSO only to the users who are trying to sign in with the configured domains.</li></ul><p>As for the third question:</p><blockquote><p><em>3. Should I isolate data between different Enterprise SSO clients?</em></p></blockquote><ul><li>Yes and no. It‚Äòs time to introduce organization.</li></ul><h2 class="anchor anchorWithStickyNavbar_E7Z_" id="organization">Organization<a href="#organization" class="hash-link" aria-label="Direct link to Organization" title="Direct link to Organization">‚Äã</a></h2><p>We mentioned using email domains to recognize the specific Enterprise SSO method to use; in other words, applying a specific treatment for a specific batch of users.</p><p>However, the client requirements are often more than just Enterprise SSO; for example, questions 4 and 5 in the previous section. Over the years, a mature model have been developed by outstanding SaaS companies to address these kinds of problems: Organizations.</p><p><strong>Organizations rules</strong></p><ol><li>An organization is a group of identities, typically smaller than a Tenant.</li><li>All organizations are associated with a Tenant.</li></ol><p>You may see other terms, such as "Workspace", ‚ÄúTeam‚Äù, or even "Tenant" in the software. To identify if it is the concept we are discussing, just check if it represents ‚Äúa group of Identities‚Äù.</p><p>In this article, we will use the term "Organization" for consistency.</p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_zpDR"><div class="admonitionHeading_iYwg"><span class="admonitionIcon_GPu2"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_AHia"><p>ü§πüèΩ‚Äç‚ôÄÔ∏è In most cases, "a group of Identities" is equivalent to "a group of users". However, <strong>the same Identity can exist in multiple Organizations</strong>.</p></div></div><p>In Notion, you can create and join multiple workspaces (i.e. Organizations) with the same email address and switch between them easily.</p><p>For Slack, it appears to be the same, but we suspect it uses different Identities behind the scenes since we need to create a new account for each workspace.</p><div style="padding:2rem 3rem;display:grid;grid-template-columns:1fr 1fr;gap:1.5rem"><center><p><img loading="lazy" alt="Slack workspaces" src="/assets/images/slack-workspaces-a6c6ca44a1802582a796ed59969c73cc.png" width="416" height="354" class="img_E_TW"></p><p><em>Slack workspaces</em></p></center><center><p><img loading="lazy" alt="Notion workspaces" src="/assets/images/notion-workspaces-efa7827b5c42175d1babf17ab105f6f2.png" width="526" height="212" class="img_E_TW"></p><p><em>Notion workspaces</em></p></center></div><p>Notion has a ‚ÄúPersonal Plan‚Äù available, which is normally an Organization under the hood, with the sole user (you) inside. We don't know the exact implementation of Notion, but this explanation is reasonable and archivable for our model.</p><p>Each Organization also has an identifier, usually referred to as the ‚ÄúOrganization domain‚Äù.</p><div class="theme-admonition theme-admonition-info alert alert--info admonition_zpDR"><div class="admonitionHeading_iYwg"><span class="admonitionIcon_GPu2"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_AHia"><p>An "Organization domain" is an internal identifier used to distinguish Organizations. It may differ from the "email domain", as the former is managed by the Service Provider, while the latter is usually provided by an external Identity Provider.</p><p>For example, you can use <code>foo</code> as the Organization domain in Slack, but use <code>@bar.io</code> as the email domain for this Organization.</p></div></div><h3 class="anchor anchorWithStickyNavbar_E7Z_" id="quiz-1">Quiz<a href="#quiz-1" class="hash-link" aria-label="Direct link to Quiz" title="Direct link to Quiz">‚Äã</a></h3><p><strong>‚ùì Can an app be associated with an Organization?</strong></p><details class="details_tgU4 alert alert--info details_uAGx" data-collapsed="true"><summary>Answer</summary><div><div class="collapsibleContent_QcPY">Yes yes. As we discussed in the beginning, an app can have an Identity. Can you elaborate a business scenario of this?</div></div></details><h2 class="anchor anchorWithStickyNavbar_E7Z_" id="questions-remain">Questions remain<a href="#questions-remain" class="hash-link" aria-label="Direct link to Questions remain" title="Direct link to Questions remain">‚Äã</a></h2><blockquote><p><em>3. Should data be isolated between different Enterprise SSO clients?</em></p></blockquote><ul><li><strong>Yes:</strong> Isolate business data, such as messages and documents, at the Organization level.</li><li><strong>No:</strong> Keep Identities independent, since they do not need to be associated with an Organization.</li><li>Note there are three distinct entities involved here: Identities, Organizations, and Enterprise SSO configurations; which notably increased the complexity. The question itself is not specific enough.</li></ul><blockquote><p><em>4. Is there a need to provide a dashboard for the Enterprise SSO admins to view active users, audit logs, etc.?</em></p><p><em>5. How to automatically deactivate account when user is removed for the Enterprise SSO Identity Provider?</em></p></blockquote><ul><li>These demands are more business-oriented and can be implemented at Organization level. We'll leave them open here.</li></ul><h2 class="anchor anchorWithStickyNavbar_E7Z_" id="closing-notes">Closing notes<a href="#closing-notes" class="hash-link" aria-label="Direct link to Closing notes" title="Direct link to Closing notes">‚Äã</a></h2><p>We've introduced several concepts: Authentication (AuthN), Authorization (AuthZ), Identity, Tenant, Application, Identity Provider (IdP), Service Provider (SP), Single Sign-On (SSO), and Enterprise SSO (Organization). It may take some time to understand them all.</p><p>As I wrote this article, I noticed that interestingly, the most expensive plans of online services often include exclusive features related to authorization, which is totally unmentioned in this article. You may already have some questions about authorization, such as:</p><ul><li>How can we assign permissions to a user and verify them?</li><li>What authorization model should I use?</li><li>What is the best practice for applying an authorization model?</li></ul><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_zpDR"><div class="admonitionHeading_iYwg"><span class="admonitionIcon_GPu2"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_AHia"><p>üî• Take a break, and see you in CIAM 102!</p></div></div>]]></content>
        <author>
            <name>Gao</name>
            <uri>https://github.com/gao-sun</uri>
        </author>
        <category label="ciam" term="ciam"/>
        <category label="auth" term="auth"/>
        <category label="authentication" term="authentication"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[The design considerations for a seamless sign-in experience (First Chapter)]]></title>
        <id>https://logto.qubitpi.org/blog/design-for-seamless-sie-1</id>
        <link href="https://logto.qubitpi.org/blog/design-for-seamless-sie-1"/>
        <updated>2022-11-15T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[We are thrilled to announce the release of the newest version of the Sign-in Experience, which includes more ways to sign-in and sign-up, as well as a framework that is easier to understand and more flexible to configure in the Admin Console. When compared to Sign-in Experience V1, this version's capability was expanded so that it could support a greater variety of flexible use cases. We hope that this will be able to assist developers in delivering a successful sign-in flow, which will also be appreciated by the end users.]]></summary>
        <content type="html"><![CDATA[<p>We are thrilled to announce the release of the newest version of the Sign-in Experience, which includes more ways to sign-in and sign-up, as well as a framework that is easier to understand and more flexible to configure in the Admin Console. When compared to Sign-in Experience V1, this version's capability was expanded so that it could support a greater variety of flexible use cases. We hope that this will be able to assist developers in delivering a successful sign-in flow, which will also be appreciated by the end users.</p><p>In this article, we'll go over the history of Sign-in Experience, including its conception, design decisions, and product tradeoffs. You will also gain a better grasp of how to construct a successful and frictionless sign-in or sign-up experience.</p><p>If you're unfamiliar with Logto, let me back up a bit and define it, as well as the connection between Logto and the Sign-in Experience.</p><p>As an OIDC-based identity service, Logto is available as open source software allowing professionals, groups, and companies to set up the necessary sign-in and identity infrastructure in a matter of minutes.</p><center style="margin:2rem"><div><img loading="lazy" src="/assets/images/architecture-65c09e8d0706b7221a824f9178da3aa0.png" alt="Architecture" width="640" class="img_E_TW"></div><div><i>Our portfolio and key components of Logto</i></div></center><p>Providing a straightforward sign-up process forms one of our top priorities. The sign-in process can be quickly customized by developers using the Admin Console without the need for any custom coding.</p><h2 class="anchor anchorWithStickyNavbar_E7Z_" id="why-do-we-design-an-end-to-end-sign-in-experience">Why do we design an end-to-end Sign-in Experience?<a href="#why-do-we-design-an-end-to-end-sign-in-experience" class="hash-link" aria-label="Direct link to Why do we design an end-to-end Sign-in Experience?" title="Direct link to Why do we design an end-to-end Sign-in Experience?">‚Äã</a></h2><p>We saw a lot of challenges and problems in the market before we started Logto, and that's why we spent tonnes of time researching and talking to customers, developers, and businesses that were having trouble with their sign-up processes.</p><h3 class="anchor anchorWithStickyNavbar_E7Z_" id="painpoints">Painpoints<a href="#painpoints" class="hash-link" aria-label="Direct link to Painpoints" title="Direct link to Painpoints">‚Äã</a></h3><h4 class="anchor anchorWithStickyNavbar_E7Z_" id="developer-team-builders">Developer, Team (Builders)<a href="#developer-team-builders" class="hash-link" aria-label="Direct link to Developer, Team (Builders)" title="Direct link to Developer, Team (Builders)">‚Äã</a></h4><p>Creating a smooth sign-up process is a mundane but intricate endeavor. Tasks like composing 0-1 front-end code and ensuring platform consistency is a challenging problem. Unfortunately, this problem is exacerbated for the early-stage startup or for individual developers because there is no professional design or product team to help them. If developers didn't have to deal with and manage the chore, they could put more effort into the main product and other impactful priorities.</p><h4 class="anchor anchorWithStickyNavbar_E7Z_" id="business-stakeholders">Business stakeholders<a href="#business-stakeholders" class="hash-link" aria-label="Direct link to Business stakeholders" title="Direct link to Business stakeholders">‚Äã</a></h4><p>A self-serve Sign-up flow is a standard tactic for user acquisition. It takes into account the requirements of multiple disciplines and data growth. Building a Sign-in and sign-up process that has everyone happy requires a lot of back-and-forth because of all the decisions that need to be made.</p><h4 class="anchor anchorWithStickyNavbar_E7Z_" id="end-customers">End customers<a href="#end-customers" class="hash-link" aria-label="Direct link to End customers" title="Direct link to End customers">‚Äã</a></h4><p>Quick and smooth is the key and a single blocker can ruin the whole game. For example, multiple unnecessary accounts, blocked by terribly designed flow are definitely huge concerns for the end users. Security and privacy are seriously taken care of too. An untrusted flow or sign-in UI can prevent users from moving forwards and end up dropping off the product.</p><h4 class="anchor anchorWithStickyNavbar_E7Z_" id="similar-solutions-in-the-market">Similar solutions in the market<a href="#similar-solutions-in-the-market" class="hash-link" aria-label="Direct link to Similar solutions in the market" title="Direct link to Similar solutions in the market">‚Äã</a></h4><p>We're not naive; we know there are other open-source sign-in flow solutions out there. However,
few authentication and identification options are supported.</p><ul><li>Their user interface lacks polish and personalization and neglects user experience and accessibility.</li><li>The latest trends, such as supporting localization and a "dark mode," are rarely implemented.</li><li>There is a lack of end-user testing and verification of the entire process.</li><li>There are only a handful of industry-tested solutions, and they are prohibitively expensive, making them unattainable for most individuals, small teams, and startups.</li></ul><p>Furthermore, the final user experience between consumer-facing apps and B2B SaaS products is very different. Focusing on customer identity first and being business and industry-agnostic ‚Äî taking on the Sign-in Experience happening in our daily lives, such as e-commerce, food delivery, and entertainment ‚Äî is important to us because it will allow us to make an accessible product and build the strong foundation step by step. In the meantime, think ahead and keep exploring extensive user cases of sign-in for different verticals that can be simply applied to many types of businesses in the near future.</p><p>With that in mind, we aim to make this step so easy that even those with no prior experience with programming may set up a self-serve sign-up process. Logto V1 was released in July 2022 and has since had a lot of positive feedback from users all across the world, helping us reach 4.4k stars in just two months with limited promotional resources. This motivates us to keep going! It was important to us to make sure that our global audience could use our service, therefore we added support for additional sign-in methods in version 2. Compare Version 1 to Version 2 and see what we backed first.</p><h2 class="anchor anchorWithStickyNavbar_E7Z_" id="our-solutions-so-far">Our solutions so far<a href="#our-solutions-so-far" class="hash-link" aria-label="Direct link to Our solutions so far" title="Direct link to Our solutions so far">‚Äã</a></h2><center style="margin:2rem"><p><img loading="lazy" alt="New sign-in experience preview" src="/assets/images/sie-preview-7a951b0edbaedf5c3eafae65b520d2db.png" width="2880" height="2388" class="img_E_TW"></p><p><em>Logto Sign-in Experience v2 Preview</em></p></center><p><img loading="lazy" alt="Compare v1 and v2" src="/assets/images/compare-v1-v2-e05a3f39b20df29379659ed74becbe1d.png" width="2158" height="1382" class="img_E_TW"></p><p>Now that you know what we brought to the table in V2, let's examine the road we took to get there and the backstory that led us here.</p><h2 class="anchor anchorWithStickyNavbar_E7Z_" id="modularize-sign-in-experience-like-lego-blocks-atomic-but-scalable">Modularize Sign-in Experience like LEGO blocks, atomic but scalable<a href="#modularize-sign-in-experience-like-lego-blocks-atomic-but-scalable" class="hash-link" aria-label="Direct link to Modularize Sign-in Experience like LEGO blocks, atomic but scalable" title="Direct link to Modularize Sign-in Experience like LEGO blocks, atomic but scalable">‚Äã</a></h2><p>Our difficulty as an open-source project is that Logto should be flexible enough to meet the needs of developers working on a wide range of products and with varying degrees of customization. That said, our product might inevitably become a complex monster devoid of special opinions if we aim to cover every possible circumstance.</p><p>Our strategic solution to the above is to base ourselves in the actual world while approaching Sign-in Experience as though it were a LEGO set‚Äîindividual pieces that may be combined to become something larger.</p><p>As a first step, we surveyed the login procedures of over a hundred apps in various industries and held one-on-one discussions with app creators and end users in the Logto Discord Community. We organized the product challenges into four pillars after considering many viewpoints; they are also the most common issues encountered by construction professionals.</p><ul><li>Define methods</li><li>Design an ideal flow</li><li>Guided by UX strategies</li><li>Customize the look and feel</li></ul><p>The market's validation of usage frequency and popularity was used to determine the priority of certain features under each pillar.</p><p>We seek to provide the best practices within the scope of fundamental functions (both universal and extensible), bridge the gap between scenarios, and make it easy for developers to grasp Admin Console's complicated logic in the critical 0-1 window. Whether a developer is highly experimental and has no ideas at all, or highly targeted and has a precise UI design in hand, Sign-in Experience may be configured seamlessly in any case.</p><p>So, let's take a closer look at these four cornerstones:</p><h3 class="anchor anchorWithStickyNavbar_E7Z_" id="step-1-define-methods">Step 1: Define methods<a href="#step-1-define-methods" class="hash-link" aria-label="Direct link to Step 1: Define methods" title="Direct link to Step 1: Define methods">‚Äã</a></h3><p>We break down the example sign-in into four categories: identifier, authentication factor, third-party connector, and personal information. Components like these make up the sign-in process for thousands of users. The final user experience, however, varies widely depending on the specifics of each situation. There are benefits to each approach; developers should consider their needs before settling on one.</p><h4 class="anchor anchorWithStickyNavbar_E7Z_" id="identifier">Identifier<a href="#identifier" class="hash-link" aria-label="Direct link to Identifier" title="Direct link to Identifier">‚Äã</a></h4><p>Let's first take a look at the popular identifiers and their pros and cons:</p><table><tbody><tr><td><b>Username</b></td><td><p>A user's username is frequently disclosed anonymously as a unique identifier. It is appropriate for social products such as content, games, instant messaging, and so on. It can be configured by the user or selected by the system.</p><p>When registering, a username can be used in conjunction with an email address or a phone number to offer users one more reminder information. A username is also a secure identifier that does not reveal too much personal information.</p></td></tr><tr><td><b>Email</b></td><td><p>In the long run, users can simply recall their email addresses, and there are no device restrictions for getting verification emails. Subscriptions or win-back campaigns can also be sent to users' email addresses for marketing objectives.</p></td></tr><tr><td><b>Phone</b></td><td><p>The use of a phone number as an identity is more mobile and accessible to the elderly. Its advantages include real-name authentication, timely interaction with the user, and access to the user's contacts list for connection.</p><p>However, there are issues like changing mobile phone numbers, using used numbers, leaking contact information, and requiring devices to be present while signing in or signing up.</p></td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_E7Z_" id="authentication-factor">Authentication Factor<a href="#authentication-factor" class="hash-link" aria-label="Direct link to Authentication Factor" title="Direct link to Authentication Factor">‚Äã</a></h4><table><tbody><tr><td><b>Password</b></td><td><p>Password sign-in is convenient, but users sometimes forget it. Low-complexity password is at risk of theft.</p></td></tr><tr><td><b>Email verification</b></td><td><p>Email Verification Codes or Magic links are the most popular ways for verification. It has higher security but is cheaper than SMS.</p></td></tr><tr><td><b>SMS</b></td><td><p>SMS is also more secure. The autofill feature of the keyboard facilitates mobile input. However, it may result in additional SMS charges.</p></td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_E7Z_" id="third-party-connector">Third-party connector<a href="#third-party-connector" class="hash-link" aria-label="Direct link to Third-party connector" title="Direct link to Third-party connector">‚Äã</a></h4><table><tbody><tr><td><b>Social Connector</b></td><td><p>According to Google Account and Facebook data, implementing Social Sign-in can strengthen the acquisition funnel and raise registration rates. Users may sign in with a single click, synchronize personal information with a more convenient and confident sense, and avoid forgetting passwords or email addresses used to sign up.</p><p>The drawback is that third-party service quality and product life will limit the Sign-in Experience. If the social connector does not give trustworthy contact information, the user must provide the necessary contact information; otherwise, the user cannot be contacted.</p></td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_E7Z_" id="personal-information">Personal information<a href="#personal-information" class="hash-link" aria-label="Direct link to Personal information" title="Direct link to Personal information">‚Äã</a></h4><table><tbody><tr><td><b>Personal information</b></td><td><p>Contact information, name, gender, age, region, address, user preferences, and other personal information provided by users can be used for display, account recovery, personalized recommendations, product data analysis, and other purposes. It is a standard affiliate and business-neutral component of the sign-up process.</p></td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_E7Z_" id="step-2-design-an-ideal-flow">Step 2: Design an ideal flow<a href="#step-2-design-an-ideal-flow" class="hash-link" aria-label="Direct link to Step 2: Design an ideal flow" title="Direct link to Step 2: Design an ideal flow">‚Äã</a></h3><p><strong>What does flow mean in Sign-in ExperienceÔºü</strong></p><p>There is more to the Sign-in Experience than just the layout. The layout is simple, and a preview may be seen on the left while you work on it. In this context, "flow" refers to the entire sign-up process that a user would go through. We intend to handle the entire trip, which has traditionally been a difficult job for developers.</p><p><strong>Atomized the flow</strong></p><p>Developers can utilize the Logto Sign-in Experience in a flexible manner by breaking down the full process into its component parts. With this mental modal, you will then develop a mindmap like below, which is all you need to consider when you design an end-to-end sign-in experience for your end customer.</p><p><img loading="lazy" alt="Mind map" src="/assets/images/mind-map-6cf4022c50c379a0a562756d9ff2705b.png" width="2722" height="1670" class="img_E_TW"></p><p><strong>Standardized the flow and guard by carefully considered product logic</strong></p><p>To establish the framework, we have to provide the best practice for each individual flow mentioned above. Those best practices were based on well-considered product logic, user-center design principles, and business objectives. We keep generality and inclusiveness at the same time.</p><p>A lot of Logto competitor treats the flow like an easy permutation and combination task but it is definitely not true. Let‚Äôs talk about the constraints and laws between them:</p><ol><li><strong>Sign in ‚â† Create Account</strong></li></ol><p>Methods of sign-in and registration are neither equal nor inclusive. Some programs, for example, request "Email+Password+Email Verification code" when signing up but only support "Email+Password" as a sign-in method.</p><p><img loading="lazy" alt="Mobile sign-in" src="/assets/images/mobile-sign-in-a22462848fc3adbe9e8a68c75b7fa238.png" width="3600" height="2040" class="img_E_TW"></p><p>In another case, requiring to enter a username when registering, but there is no option for Username sign-in.</p><p>Distinct scenarios have different goals, resulting in various product logic. We will not only examine the variety of logic but also delve deeper into why. In summary, the difference between creating an account and sign-in is listed below:</p><table><thead><tr><td></td><td><b>Purpose</b></td><td><b>Flow</b></td></tr></thead><tbody><tr><td><b>Create account</b></td><td><p>The purpose of creating an account is to ask consumers for identifying information while also acquiring users with the least amount of effort from a commercial standpoint.</p><p>There is a trade-off between doing the fewest steps and gathering more information from end users. Fewer steps indicate higher conversion rates, but they may result in low-quality targeted users and leads, which could harm future customer support and product growth.</p><p>Simultaneously, the registration rate might be increased.</p></td><td><p>Between various IDs, the logic is "and." Because this is a product requirement, consumers must fill all of them at the same time (some factors can be skipped).</p><p>There is just one exception, "Phone or Email," because consumers validating two pieces of contact information at the same time is time-consuming and unneeded.</p></td></tr><tr><td><b>Sign in</b></td><td><p>Sign-purpose is to allow users to access the product quickly, securely, and successfully.</p></td><td><p>Between various IDs, the logic is "or." That implies consumers can use whichever sign-in technique they like. The less complicated, the better. (Multi-factor authentication instances are excluded here)</p></td></tr></tbody></table><ol start="2"><li><strong>Sign in + Create an account ‚â§ Profile</strong></li></ol><p>All sign-in and registration information is stored in a profile. However, don't feel rushed to obtain all of the information during registration. Allow users to register successfully first and then access user information incrementally in specified instances. The contact information that the user enters proactively in the Profile may be used in the sign-in procedures. As a result, sign-in methods may be more than just sign-up methods.</p><ol><li><strong>Restrictions between Sign-in, Registration, and Authentication Factors, for example:</strong></li></ol><ul><li>If password is used as an authentication factor ‚Üí sign-in should support it as well, and all other identifiers must support password as well. We don't want consumers to complete pointless efforts or to disregard their security intentions while registering. The fact that a password is necessary for sign-up with a username but not for email or phone password sign-in makes no sense and confuses the user.</li><li>If users enabled multiple identifiers during registration, such as email or phone number, both of those identifiers must be available for sign-in. For example, if a person signs up using their email address but only founds phone number sign-in option, they will be unable to use the product in the end.</li><li>A password is necessary if the username is the only identifier used during registration. This is owing to the limitations and characteristics of using a username as an identifier.</li></ul><h3 class="anchor anchorWithStickyNavbar_E7Z_" id="step-3-guide-by-ux-design-strategies">Step 3: Guide by UX design strategies<a href="#step-3-guide-by-ux-design-strategies" class="hash-link" aria-label="Direct link to Step 3: Guide by UX design strategies" title="Direct link to Step 3: Guide by UX design strategies">‚Äã</a></h3><p>Logto delivers flows that are governed by a few end-user-centered tactics to enable the finest end-user experience. You can get a sense of what we insist on in terms of UX design by looking at the examples below.</p><ul><li><p><strong>Security first</strong></p><p>Security is unquestionably crucial in terms of sign-in experience and user identity. We took this approach seriously and put it into action. For example, when a user wants to verify an email address, we only alert the user that the account already exists until the user enters the verification code and verifies. In this strategy, we prevent someone from hacking a list of emails that do not exist.</p><p><img loading="lazy" alt="Mobile sign-in" src="/assets/images/mobile-sign-in-2-5d234179b74f90533ecba03d0c7bd86f.png" width="5400" height="3060" class="img_E_TW"></p></li><li><p><strong>Anticipate user needs and avoid meaningless attempts</strong></p><p>This is done to prevent pointless efforts at creating a successful outcome. The login process is convoluted and full of edge cases. When an account is found, for instance, the user is prompted to log in. When a person attempts to sign in and their account already does not exist, we will ask them if they would want to create an account.</p><p>This foresight allows customers to get up and running with the product with minimal delay.</p><p><img loading="lazy" alt="Mobile sign-in" src="/assets/images/mobile-sign-in-3-82d41c2d749f3c0881ce934964f5380e.png" width="5400" height="3060" class="img_E_TW"></p></li><li><p><strong>Consider account upgrades</strong></p><p>Account upgrades may also result in a change in the sign-in or sign-up flow. This will also have an influence on our end-user engagement. This scenario should also be considered. For example, if the administrator makes some modifications and adds new sign-in methods in the admin dashboard, existing end users will be required to sign in to the app.</p><p><img loading="lazy" alt="Mobile sign-in" src="/assets/images/mobile-sign-in-4-46a09f3e07aca529316270f7104c9946.png" width="5400" height="3060" class="img_E_TW"></p></li><li><p><strong>Making the choice easier for users</strong></p><p>For example, we advise developers not to use too many social sign-in methods and if they are too many they will be hidden in another view because this would result in a poorer conversion. We don't include everything equally in the UI layout of the sign-in experience, but we do have a focus. This is to adhere to general design principles of usability and a better acquisition approach. At the same time, this is done to reduce users‚Äô cognitive load.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_E7Z_" id="step-4-brand-and-look-and-feel">Step 4: Brand and look and feel<a href="#step-4-brand-and-look-and-feel" class="hash-link" aria-label="Direct link to Step 4: Brand and look and feel" title="Direct link to Step 4: Brand and look and feel">‚Äã</a></h3><p>Last but not least, we provide users with lots of flexibility to customize their look and feel.</p><ul><li>Modification of Brand elements, such as the selection of theme color, the replacement of a logo image, changes to component settings, and the selection of standard layouts, can all be accomplished with just one click when working with developers.</li><li>Maintain as much uniformity as possible across all multi-end design plans in order to make it easier for developers to intuitively comprehend and adjust UI. Mobile and web, for instance, use layouts, processes, components, and styles that are equivalent to one another.</li><li>In comparison to more conventional business tools, we put in a lot of work to ensure that the design is elegant. We came up with the formulas for calculating the brand colors, the dark mode, the internationalization of languages, and the barrier-free strategy.</li></ul><h2 class="anchor anchorWithStickyNavbar_E7Z_" id="closing-notes">Closing notes<a href="#closing-notes" class="hash-link" aria-label="Direct link to Closing notes" title="Direct link to Closing notes">‚Äã</a></h2><p>Thank you for spending time reading about our Logto Sign-in Experience. You might have the following questions:</p><ol><li>How can this be accomplished with the least amount of work in Logto Admin Console?</li><li>How does your configuration experience vary from existing market solutions? Why is it the greatest option for my company?</li><li>How can the success of sign-ups be measured from a business standpoint? Have you thought about it yet?</li><li>What is Logto‚Äôs upcoming plan for supporting you and your product?</li></ol>]]></content>
        <author>
            <name>Guamian</name>
            <uri>https://github.com/fleuraly</uri>
        </author>
        <author>
            <name>Ran</name>
            <uri>https://github.com/Rany0101</uri>
        </author>
        <category label="design" term="design"/>
        <category label="sign-in" term="sign-in"/>
        <category label="ux" term="ux"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Logto x Hasura: How to use open-source auth + GraphQL solution to boost your project]]></title>
        <id>https://logto.qubitpi.org/blog/logto-x-hasura</id>
        <link href="https://logto.qubitpi.org/blog/logto-x-hasura"/>
        <updated>2022-08-20T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Intro]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_E7Z_" id="intro">Intro<a href="#intro" class="hash-link" aria-label="Direct link to Intro" title="Direct link to Intro">‚Äã</a></h2><p>When it comes to a new project, you usually cannot skip several things: APIs, authentication + authorization, identity, and end-user sign-in flow. It used to be hard to kick off these things because there are many concepts and technologies that spread widely: RESTful/GraphQL, web frontend, native client, connect clients with APIs, auth best practices to balance security and user experience, etc.</p><p>Also, most of the works are ‚Äúrepeating‚Äù. I mean, they are needed and similar for almost every project, with some tweaks.</p><p>Sounds scary and tedious? Don‚Äôt panic. Today we have open source. With the two open-source projects below, things become not tricky :</p><ul><li><a href="https://github.com/logto-io/logto" target="_blank" rel="noopener noreferrer">Logto</a>: Helps you build the sign-in, auth, and user identity within minutes.</li><li><a href="https://github.com/hasura/graphql-engine" target="_blank" rel="noopener noreferrer">Hasura</a>: Blazing fast, instant real-time GraphQL APIs on your DB with fine-grained access control.</li></ul><center><img loading="lazy" alt="Logto x Hasura" src="/assets/images/logos-3fc88b5045a437c285845ee9fe4b015c.png" width="480" class="img_E_TW"></center><p>In this article, we‚Äôll focus on connecting Logto and Hasura, which enables you to implement authentication, authorization, and GraphQL APIs without friction. Thus you can quickly jump into your business without rocket-science learning.</p><h2 class="anchor anchorWithStickyNavbar_E7Z_" id="get-started">Get started<a href="#get-started" class="hash-link" aria-label="Direct link to Get started" title="Direct link to Get started">‚Äã</a></h2><h3 class="anchor anchorWithStickyNavbar_E7Z_" id="prerequisites">Prerequisites<a href="#prerequisites" class="hash-link" aria-label="Direct link to Prerequisites" title="Direct link to Prerequisites">‚Äã</a></h3><p>Since both <a href="https://docs.logto.io/docs/tutorials/get-started/" target="_blank" rel="noopener noreferrer">Logto</a> and <a href="https://hasura.io/docs/latest/getting-started/index/" target="_blank" rel="noopener noreferrer">Hasura</a> have a decent get-started guide, we assume you have read them and have a basic feeling. Access to a running instance of both is needed.</p><p>We assume the accessible endpoints are:</p><ul><li>Logto: <code>http://localhost:3001</code></li><li>Hasura: <code>http://localhost:8080</code></li></ul><div class="theme-admonition theme-admonition-info alert alert--info admonition_zpDR"><div class="admonitionHeading_iYwg"><span class="admonitionIcon_GPu2"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_AHia"><p>If you are using Docker/Docker Compose, for accessing of your machine(host)‚Äôs <code>localhost</code>, you can use the Docker magic string <code>host.docker.internal</code>. In this case, the Logto endpoint will be <code>http://host.docker.internal:3001</code>.</p></div></div><p>Also, we assume you have a preferred platform and framework to build the client app, say React or Next.js.</p><h3 class="anchor anchorWithStickyNavbar_E7Z_" id="set-up-api-in-logto">Set up API in Logto<a href="#set-up-api-in-logto" class="hash-link" aria-label="Direct link to Set up API in Logto" title="Direct link to Set up API in Logto">‚Äã</a></h3><p>In the left navigation sidebar of your Logto Admin Console, click ‚ÄúAPI Resources‚Äù, and you‚Äôll see the API Resource management page.</p><p>Then click the huge ‚Äú+ Create API Resource‚Äù button in the top-right corner. In the opening modal, enter <code>Hasura</code> for API name and <code>https://hasura.api</code> for API identifier.</p><center><img loading="lazy" alt="Create API modal" src="/assets/images/create-api-c5c6e125bce972eb32323f2d4e27b436.png" width="540" class="img_E_TW"></center><p>We‚Äôll use this API identifier for the rest of our article. But feel free to change the values based on your preference.</p><p>Click ‚ÄúCreate API Resource‚Äù, and it will show a message that indicates the resource has been successfully created. That‚Äôs all we need in Logto for now.</p><h3 class="anchor anchorWithStickyNavbar_E7Z_" id="enable-webhook-authentication-in-hasura">Enable webhook authentication in Hasura<a href="#enable-webhook-authentication-in-hasura" class="hash-link" aria-label="Direct link to Enable webhook authentication in Hasura" title="Direct link to Enable webhook authentication in Hasura">‚Äã</a></h3><p><a href="https://hasura.io/docs/latest/auth/index/" target="_blank" rel="noopener noreferrer">Hasura uses role-based access management</a>, which handles authorization. So, we only need to figure out authentication. It supports two methods: Webhook and JWT. We choose <a href="https://hasura.io/docs/latest/auth/authentication/webhook/" target="_blank" rel="noopener noreferrer">webhook</a> since it‚Äôs more flexible.</p><p>To enable webhook authentication, you must set the admin secret and auth hook endpoint.</p><ul><li>The admin secret is the key to having Hasura admin access when sending requests. It is required before enabling webhook authentication. Remember to keep it somewhere safe, and don‚Äôt use it in production.</li><li>The auth hook endpoint is a URL to send authentication requests.</li></ul><p>You can set them via <a href="https://hasura.io/docs/latest/auth/authentication/webhook/#configuring-webhook-mode" target="_blank" rel="noopener noreferrer">environment variables</a>:</p><div class="language-yaml codeBlockContainer_dUHu theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_SC1B"><pre tabindex="0" class="prism-code language-yaml codeBlock_noRx thin-scrollbar"><code class="codeBlockLines_a94C"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">HASURA_GRAPHQL_ADMIN_SECRET</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> myadminsecretkey </span><span class="token comment" style="color:#999988;font-style:italic"># Replace with your own secret</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">HASURA_GRAPHQL_AUTH_HOOK</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> http</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//localhost</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">3001/api/authn/hasura</span><span class="token punctuation" style="color:#393A34">?</span><span class="token plain">resource=https</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//hasura.api</span><br></span></code></pre><div class="buttonGroup_qENx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_ihXY" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_e8Rr"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_iX_b"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You may notice we use the API identifier filled in Logto to build the auth hook endpoint. It ensures that the user is passing the correct bearer token instead of a random one that may from malicious.</p><p>You need to update the auth hook endpoint if you have a different Logto endpoint or API indicator. Say you have <code>https://logto.domain.com</code> as the Logto endpoint and <code>https://graphql.domain.com</code> as the API identifier, then it will be:</p><div class="language-yaml codeBlockContainer_dUHu theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_SC1B"><pre tabindex="0" class="prism-code language-yaml codeBlock_noRx thin-scrollbar"><code class="codeBlockLines_a94C"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">HASURA_GRAPHQL_AUTH_HOOK</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> https</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//logto.domain.com/api/authn/hasura</span><span class="token punctuation" style="color:#393A34">?</span><span class="token plain">resource=https</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//graphql.domain.com</span><br></span></code></pre><div class="buttonGroup_qENx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_ihXY" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_e8Rr"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_iX_b"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>From now, for every GraphQL request, Hasura will bring all request headers to the Logto auth hook endpoint, and Logto will respond properly.</p><h2 class="anchor anchorWithStickyNavbar_E7Z_" id="send-secured-graphql-requests">Send secured GraphQL requests<a href="#send-secured-graphql-requests" class="hash-link" aria-label="Direct link to Send secured GraphQL requests" title="Direct link to Send secured GraphQL requests">‚Äã</a></h2><h3 class="anchor anchorWithStickyNavbar_E7Z_" id="summary">Summary<a href="#summary" class="hash-link" aria-label="Direct link to Summary" title="Direct link to Summary">‚Äã</a></h3><p>Since we won‚Äôt use the Hasura admin secret in production, every GraphQL request is secured by the following headers:</p><ul><li><code>Authorization</code> The standard bearer token that Logto generates.</li><li><code>Expected-Role</code> The role you want Logto to show in the auth hook response.</li></ul><div class="theme-admonition theme-admonition-caution alert alert--warning admonition_zpDR"><div class="admonitionHeading_iYwg"><span class="admonitionIcon_GPu2"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_AHia"><p>If the user that the <code>Authorization</code> header indicates doesn‚Äôt have the <code>Expected-Role</code>, Logto will respond with <code>401 Unauthorized</code>.</p></div></div><p>The <code>Authorization</code> header requires a valid Access Token in JWT format with the Hasura API indicator for audience. Hold on - it‚Äôs quite hard to remember and compose all these things. Fortunately we get Logto SDKs to simplify the geeky part.</p><h3 class="anchor anchorWithStickyNavbar_E7Z_" id="set-default-roles-in-logto">Set default roles in Logto<a href="#set-default-roles-in-logto" class="hash-link" aria-label="Direct link to Set default roles in Logto" title="Direct link to Set default roles in Logto">‚Äã</a></h3><p>By default, only the first user will have an <code>admin</code> role name. After that, Logto will NOT assign any role names to new users. But for Hasura, it is necessary to have a role to perform an authed request.</p><p>While access control is still an under-the-hood feature of Logto, we don‚Äôt want you to manually add the default role names. You can set an environment variable <code>USER_DEFAULT_ROLE_NAMES</code> with a comma-separated string <a href="https://docs.logto.io/docs/references/core/configuration" target="_blank" rel="noopener noreferrer">for Logto</a>. E.g.:</p><div class="language-yaml codeBlockContainer_dUHu theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_SC1B"><pre tabindex="0" class="prism-code language-yaml codeBlock_noRx thin-scrollbar"><code class="codeBlockLines_a94C"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">USER_DEFAULT_ROLE_NAMES</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> user</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">good_user</span><br></span></code></pre><div class="buttonGroup_qENx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_ihXY" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_e8Rr"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_iX_b"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Then two roles <code>user</code> and <code>good_user</code> will be automatically added to newly created users. It will reflect in both <code>users</code> table and Access Tokens.</p><h3 class="anchor anchorWithStickyNavbar_E7Z_" id="integrate-logto-sdk">Integrate Logto SDK<a href="#integrate-logto-sdk" class="hash-link" aria-label="Direct link to Integrate Logto SDK" title="Direct link to Integrate Logto SDK">‚Äã</a></h3><p>Follow the <a href="https://docs.logto.io/docs/recipes/integrate-logto/" target="_blank" rel="noopener noreferrer">integration guide</a> to integrate a Logto SDK in your client app. It enables not only the ability to generate a valid Access Token for GraphQL requests, but also a smooth sign-in experience for your end-users.</p><p>Once you finish the guide, we need one tiny modification to the <code>LogtoConfig</code>: Add the API indicator you created in Logto Admin Console to <code>resources</code>. Taking React SDK as an example:</p><div class="language-tsx codeBlockContainer_dUHu theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_SC1B"><pre tabindex="0" class="prism-code language-tsx codeBlock_noRx thin-scrollbar"><code class="codeBlockLines_a94C"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> config</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">LogtoConfig</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  endpoint</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'http://localhost:3001'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  appId</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'&lt;your-application-id&gt;'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  resources</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">'https://hasura.api'</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Add this line</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_qENx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_ihXY" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_e8Rr"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_iX_b"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_E7Z_" id="send-requests">Send requests<a href="#send-requests" class="hash-link" aria-label="Direct link to Send requests" title="Direct link to Send requests">‚Äã</a></h3><p>Finally! After the user is signed in, use <code>getAccessToken()</code> in Logto SDK to fetch the Access Token for Hasura GraphQL requests:</p><div class="language-tsx codeBlockContainer_dUHu theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_SC1B"><pre tabindex="0" class="prism-code language-tsx codeBlock_noRx thin-scrollbar"><code class="codeBlockLines_a94C"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> accessToken </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> logto</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getAccessToken</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'https://hasura.api'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Before sending the request</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">request</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">headers</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">set</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'Authorization'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">Bearer </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">accessToken</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">request</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">headers</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">set</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'Expected-Role'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'user'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_qENx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_ihXY" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_e8Rr"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_iX_b"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_E7Z_" id="recap">Recap<a href="#recap" class="hash-link" aria-label="Direct link to Recap" title="Direct link to Recap">‚Äã</a></h2><p>With the effort above, we successfully implemented all the non-skippable things in the intro:</p><ul><li>A database-schema-driven GraphQL API endpoint</li><li>An auth and identity service on top of OIDC protocol</li><li>The complete end-user sign-in flow and auth state management</li><li>Secured API access based on user identity and roles</li></ul><p>Not that hard, right? If you meet any issues, feel free to join the <a href="https://discord.gg/vRvwuwgpVX" target="_blank" rel="noopener noreferrer">Logto</a> or <a href="https://discord.gg/hasura" target="_blank" rel="noopener noreferrer">Hasura</a> discord server to have a live chat with the team.</p>]]></content>
        <author>
            <name>Gao</name>
            <uri>https://github.com/gao-sun</uri>
        </author>
        <category label="graphql" term="graphql"/>
        <category label="hasura" term="hasura"/>
        <category label="api" term="api"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[TypeScript all-in-one: Monorepo with its pains and gains]]></title>
        <id>https://logto.qubitpi.org/blog/typescript-all-in-one</id>
        <link href="https://logto.qubitpi.org/blog/typescript-all-in-one"/>
        <updated>2022-08-07T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Intro]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_E7Z_" id="intro">Intro<a href="#intro" class="hash-link" aria-label="Direct link to Intro" title="Direct link to Intro">‚Äã</a></h2><p>I always had a dream of monorepo.</p><p>I saw the monorepo approach while working for Airbnb, but it was for the frontend only. With a deep love of the JavaScript ecosystem and the ‚Äúhappy‚Äù TypeScript developing experience, I started to align frontend and backend code in the same language from ~three years ago. It was great (for hiring) but not that great for developing since our projects were still scattered across multiple repos.</p><div class="theme-admonition theme-admonition-info alert alert--info admonition_zpDR"><div class="admonitionHeading_iYwg"><span class="admonitionIcon_GPu2"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>FYI</div><div class="admonitionContent_AHia"><p>There are quotes around the word ‚Äúhappy‚Äù since TypeScript did bring me a lot of fun and a-ha moments, but it also let me think ‚Äúhow could this doesn‚Äôt work‚Äù sometimes.</p></div></div><p>As it says, ‚Äúthe best way of refactoring a project is to start a new one‚Äù. So when I was starting my startup about one year ago, I decided to use a total monorepo strategy: put frontend and backend projects, even database schemas, into one repo.</p><p>In this article, I won‚Äôt compare monorepo and polyrepo since it‚Äôs all about philosophy. Instead, I‚Äôll focus on the building and evolving experience and assume you are familiar with the JS/TS ecosystem.</p><p>The final result is available on <a href="https://github.com/logto-io/logto" target="_blank" rel="noopener noreferrer">GitHub</a>.</p><h2 class="anchor anchorWithStickyNavbar_E7Z_" id="why-typescript">Why TypeScript?<a href="#why-typescript" class="hash-link" aria-label="Direct link to Why TypeScript?" title="Direct link to Why TypeScript?">‚Äã</a></h2><p>Frankly speaking, I‚Äôm a fan of JavaScript and TypeScript. I love the compatibility of its flexibility and rigorousness: you can fall back to <code>unknown</code> or <code>any</code> (although we banned any form of <code>any</code> in our codebase), or use a super-strict lint rule set to align the code style across the team.</p><p>When we were talking about the concept of ‚Äúfullstack‚Äù before, we usually imagine at least two ecosystems and programming languages: one for frontend and one for backend.</p><p>One day, I suddenly realized it could be simpler: Node.js is fast enough (believe me, in most cases, code quality is more important than running speed), TypeScript is mature enough (works well in big frontend projects), and the monorepo concept has been practiced by a bunch of famous teams (React, Babel, etc.) - so why don‚Äôt we combine all the code together, from frontend to backend? This can make engineers do the jobs without context switch in one repo and implement a complete feature in (almost) one language.</p><h2 class="anchor anchorWithStickyNavbar_E7Z_" id="choosing-package-manager">Choosing package manager<a href="#choosing-package-manager" class="hash-link" aria-label="Direct link to Choosing package manager" title="Direct link to Choosing package manager">‚Äã</a></h2><p>As a developer, and as usual, I couldn‚Äôt wait to start coding. But this time, things were different.</p><p>The choice of the package manager is critical to the dev experience in a monorepo.</p><div class="theme-admonition theme-admonition-info alert alert--info admonition_zpDR"><div class="admonitionHeading_iYwg"><span class="admonitionIcon_GPu2"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>üî® TL; DR</div><div class="admonitionContent_AHia"><p>We chose lerna with pnpm.</p></div></div><h3 class="anchor anchorWithStickyNavbar_E7Z_" id="the-pain-of-inertia">The pain of inertia<a href="#the-pain-of-inertia" class="hash-link" aria-label="Direct link to The pain of inertia" title="Direct link to The pain of inertia">‚Äã</a></h3><p>It was July 2021. I started with <code>yarn@1.x</code> since I‚Äôve been using it for a long time. Yarn was fast, but soon I met several issues with Yarn Workspaces. E.g., <a href="https://github.com/yarnpkg/yarn/issues/7572" target="_blank" rel="noopener noreferrer">not hoisting dependencies correctly</a>, and tons of issues are tagged with ‚Äú<a href="https://github.com/yarnpkg/yarn/issues?q=label%3Afixed-in-modern+" target="_blank" rel="noopener noreferrer">fixed in modern</a>‚Äù, which redirects me to the v2 (<a href="https://github.com/yarnpkg/berry" target="_blank" rel="noopener noreferrer">berry</a>).</p><p>‚ÄúOkay fine I‚Äôm upgrading now.‚Äù I stopped struggling with v1 and started to migrate. But the long <a href="https://yarnpkg.com/getting-started/migration" target="_blank" rel="noopener noreferrer">migration guide</a> of berry frightened me, and I gave up after several failed tries.</p><h3 class="anchor anchorWithStickyNavbar_E7Z_" id="it-just-works">It just works<a href="#it-just-works" class="hash-link" aria-label="Direct link to It just works" title="Direct link to It just works">‚Äã</a></h3><p>So the research about package managers began. I was absorbed by <code>pnpm</code> after a trial: fast as yarn, native monorepo support, similar commands to <code>npm</code>, hard links, etc. Most importantly, it just works. As a developer who wants to get started with a product but NOT develop a package manager, I just wanted to add some dependencies and start the project without knowing how a package manager works or any other fancy concepts.</p><p>Based on the same idea, we chose an old friend <code>lerna</code> for executing commands across the packages and publishing workspace packages.</p><div class="theme-admonition theme-admonition-info alert alert--info admonition_zpDR"><div class="admonitionHeading_iYwg"><span class="admonitionIcon_GPu2"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_AHia"><p>Now pnpm has a -w option to run commands in the workspace root and --filter for filtering. Thus you can probably replace lerna with a more dedicated package publishing CLI.</p></div></div><h2 class="anchor anchorWithStickyNavbar_E7Z_" id="defining-package-scopes">Defining package scopes<a href="#defining-package-scopes" class="hash-link" aria-label="Direct link to Defining package scopes" title="Direct link to Defining package scopes">‚Äã</a></h2><p>It‚Äôs hard to clearly figure out the final scope of each package in the beginning. Just start with your best try according to the status quo, and remember you can always refactor during development.</p><p>Our <a href="https://github.com/logto-io/logto/tree/af7e6ccd83723d623555dafa4650e115fa795838/packages" target="_blank" rel="noopener noreferrer">initial structure</a> contains four packages:</p><ul><li><code>core</code>: the backend monolith service.</li><li><code>phrases</code>: i18n key ‚Üí phrase resources.</li><li><code>schemas</code>: the database and shared TypeScript schemas.</li><li><code>ui</code>: a web SPA that interacts with <code>core</code>.</li></ul><h2 class="anchor anchorWithStickyNavbar_E7Z_" id="tech-stack-for-fullstack">Tech stack for fullstack<a href="#tech-stack-for-fullstack" class="hash-link" aria-label="Direct link to Tech stack for fullstack" title="Direct link to Tech stack for fullstack">‚Äã</a></h2><p>Since we are embracing the JavaScript ecosystem and using TypeScript as our main programming language, a lot of choices are straightforward (based on my preference üòä):</p><ul><li><code>koajs</code> for the backend service (core): I had a hard experience using <code>async/await</code> in <code>express</code>, so I decided to use something with native support.</li><li><code>i18next/react-i18next</code> for i18n (phrases/ui): like its simplicity of APIs and good TypeScript support.</li><li><code>react</code> for SPA (ui): Just personal preference.</li></ul><h3 class="anchor anchorWithStickyNavbar_E7Z_" id="how-about-schemas">How about schemas?<a href="#how-about-schemas" class="hash-link" aria-label="Direct link to How about schemas?" title="Direct link to How about schemas?">‚Äã</a></h3><p>Something is still missing here: database system and schema &lt;-&gt; TypeScript definition mapping.</p><h4 class="anchor anchorWithStickyNavbar_E7Z_" id="general-vs-opinionated">General v.s. opinionated<a href="#general-vs-opinionated" class="hash-link" aria-label="Direct link to General v.s. opinionated" title="Direct link to General v.s. opinionated">‚Äã</a></h4><p>At that point, I tried two popular approaches:</p><ul><li>Use ORM with a lot of decorators.</li><li>Use a query builder like Knex.js.</li></ul><p>But both of them produce a strange feeling during previous development:</p><ul><li>For ORM: I‚Äôm not a fan of decorators, and another abstract layer of the database causes more learning effort and uncertainty for the team.</li><li>For query builder: It‚Äôs like writing SQL with some restrictions (in a good way), but it‚Äôs not actual SQL. Thus we need to use <code>.raw()</code> for raw queries in many scenarios.</li></ul><p>Then I saw this article: ‚Äú<a href="https://gajus.medium.com/stop-using-knex-js-and-earn-30-bf410349856c" target="_blank" rel="noopener noreferrer">Stop using Knex.js: Using SQL query builder is an anti-pattern</a>‚Äù. The title looks aggressive, but the content is great. It strongly reminds me that ‚ÄúSQL is a programming language‚Äù, and I realized I could write SQL directly (just like CSS, how could I miss this!) to leverage the native language and database features instead of adding another layer and reducing the power.</p><p>In conclusion, I decided to stick with Postgres and <a href="https://github.com/gajus/slonik" target="_blank" rel="noopener noreferrer">Slonik</a> (an open-source Postgres client), as the article states:</p><blockquote><p>‚Ä¶the benefit of allowing user to choose between the different database dialects is marginal and the overhead of developing for multiple databases at once is significant.</p></blockquote><h4 class="anchor anchorWithStickyNavbar_E7Z_" id="sql---typescript">SQL &lt;-&gt; TypeScript<a href="#sql---typescript" class="hash-link" aria-label="Direct link to SQL <-> TypeScript" title="Direct link to SQL <-> TypeScript">‚Äã</a></h4><p>Another advantage of writing SQL is we can easily use it as the single source of truth of TypeScript definitions. I wrote a <a href="https://github.com/logto-io/logto/tree/af7e6ccd83723d623555dafa4650e115fa795838/packages/schemas/src/gen" target="_blank" rel="noopener noreferrer">code generator</a> to transpile SQL schemas to TypeScript code that we‚Äôll use in our backend, and the result looks not bad:</p><div class="language-tsx codeBlockContainer_dUHu theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_SC1B"><pre tabindex="0" class="prism-code language-tsx codeBlock_noRx thin-scrollbar"><code class="codeBlockLines_a94C"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// THIS IS AN AUTOGENERATED FILE. DO NOT EDIT THIS FILE DIRECTLY.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">OidcClientMetadata</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'../foundations'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name">OidcClient</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  clientId</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  metadata</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">OidcClientMetadata</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  createdAt</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><br></span></code></pre><div class="buttonGroup_qENx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_ihXY" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_e8Rr"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_iX_b"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>We can even connect <code>jsonb</code> with a TypeScript type and process type validation in the backend service if needed.</p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_zpDR"><div class="admonitionHeading_iYwg"><span class="admonitionIcon_GPu2"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>ü§î Why not use TypeScript as the SSOT?</div><div class="admonitionContent_AHia"><p>It‚Äôs a plan I‚Äôve thought of. It sounds attractive initially, but SQL will precisely describe database schemas and keep the flow in one direction (see the following section) instead of using TypeScript and then ‚Äútranspile back‚Äù to SQL.</p></div></div><h3 class="anchor anchorWithStickyNavbar_E7Z_" id="result">Result<a href="#result" class="hash-link" aria-label="Direct link to Result" title="Direct link to Result">‚Äã</a></h3><p>The final dependency structure looks like:</p><p>You may notice it‚Äôs a one-direction diagram, which greatly helped us to keep a clear architecture and the ability to expand while the project grows. Plus, the code is (basically) all in TypeScript.</p><h2 class="anchor anchorWithStickyNavbar_E7Z_" id="dev-experience">Dev experience<a href="#dev-experience" class="hash-link" aria-label="Direct link to Dev experience" title="Direct link to Dev experience">‚Äã</a></h2><h3 class="anchor anchorWithStickyNavbar_E7Z_" id="package-and-config-sharing">Package and config sharing<a href="#package-and-config-sharing" class="hash-link" aria-label="Direct link to Package and config sharing" title="Direct link to Package and config sharing">‚Äã</a></h3><h4 class="anchor anchorWithStickyNavbar_E7Z_" id="internal-dependencies">Internal dependencies<a href="#internal-dependencies" class="hash-link" aria-label="Direct link to Internal dependencies" title="Direct link to Internal dependencies">‚Äã</a></h4><p><code>pnpm</code> and <code>lerna</code> are doing an awesome job on internal workspace dependencies. We use the command below in the project root to add sibling packages:</p><div class="language-bash codeBlockContainer_dUHu theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_SC1B"><pre tabindex="0" class="prism-code language-bash codeBlock_noRx thin-scrollbar"><code class="codeBlockLines_a94C"><span class="token-line" style="color:#393A34"><span class="token plain">lerna </span><span class="token function" style="color:#d73a49">add</span><span class="token plain"> --scope</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">@logto/core @logto/schemas</span><br></span></code></pre><div class="buttonGroup_qENx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_ihXY" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_e8Rr"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_iX_b"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>It will add <code>@logto/schemas</code> as a dependency to <code>@logto/core</code>. While keeping the semantic version in <code>package.json</code> of your internal dependencies, <code>pnpm</code> can also correctly link them in <code>pnpm-lock.yaml</code>. The result will look like this:</p><div class="language-json codeBlockContainer_dUHu theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_SC1B"><pre tabindex="0" class="prism-code language-json codeBlock_noRx thin-scrollbar"><code class="codeBlockLines_a94C"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// packages/core/pacakge.json</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"dependencies"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"@logto/schemas"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"^1.0.0-beta.3"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_qENx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_ihXY" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_e8Rr"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_iX_b"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-yaml codeBlockContainer_dUHu theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_SC1B"><pre tabindex="0" class="prism-code language-yaml codeBlock_noRx thin-scrollbar"><code class="codeBlockLines_a94C"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># pnpm-lock.yaml</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">packages/core</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">dependencies</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">'@logto/schemas'</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> link</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">../schemas</span><br></span></code></pre><div class="buttonGroup_qENx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_ihXY" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_e8Rr"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_iX_b"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_E7Z_" id="config-sharing">Config sharing<a href="#config-sharing" class="hash-link" aria-label="Direct link to Config sharing" title="Direct link to Config sharing">‚Äã</a></h4><p>We treat every package in monorepo ‚Äúindependent‚Äù. Thus we can use the standard approach for config sharing, which covers <code>tsconfig</code>, <code>eslintConfig</code>, <code>prettier</code>, <code>stlyelint</code>, and <code>jest-config</code>. See <a href="https://github.com/logto-io/logto/tree/6327eb6c577cdf36c8f44b55bac8195f7d6a6335/packages/console" target="_blank" rel="noopener noreferrer">this project</a> for example.</p><h3 class="anchor anchorWithStickyNavbar_E7Z_" id="code-lint-and-commit">Code, lint, and commit<a href="#code-lint-and-commit" class="hash-link" aria-label="Direct link to Code, lint, and commit" title="Direct link to Code, lint, and commit">‚Äã</a></h3><p>I use VSCode for daily development, and in short, nothing is different when the project is configured properly:</p><ul><li>ESLint and Stylelint work normally.<ul><li><p>If you are using VSCode ESLint plugin, add the VSCode settings below to make it honors the per-package ESLint config (replace the value of <code>pattern</code> with your own):</p><div class="language-json codeBlockContainer_dUHu theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_SC1B"><pre tabindex="0" class="prism-code language-json codeBlock_noRx thin-scrollbar"><code class="codeBlockLines_a94C"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"eslint.workingDirectories"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"pattern"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"./packages/*"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_qENx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_ihXY" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_e8Rr"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_iX_b"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ul></li><li>husky, commitlint, and lint-staged work as expected.</li></ul><h3 class="anchor anchorWithStickyNavbar_E7Z_" id="compiler-and-proxy">Compiler and proxy<a href="#compiler-and-proxy" class="hash-link" aria-label="Direct link to Compiler and proxy" title="Direct link to Compiler and proxy">‚Äã</a></h3><p>We are using different compilers for frontend and backend: <code>parceljs</code> for UI (React) and <code>tsc</code> for all other pure TypeScript packages. I strongly recommend you to try <code>parceljs</code> if you haven‚Äôt. It‚Äôs a real ‚Äúzero-config‚Äù compiler that gracefully handles different file types.</p><p>Parcel hosts its own frontend dev server, and the production output is just static files. Since we‚Äôd like to mount APIs and SPA under the same origin to avoid CORS issues, the strategy below works:</p><ul><li>In dev environment, use a simple HTTP proxy to redirect the traffic to the Parcel dev server.</li><li>In production, serve static files directly.</li></ul><p>You can find the frontend middleware function implementation <a href="https://github.com/logto-io/logto/blob/6327eb6c577cdf36c8f44b55bac8195f7d6a6335/packages/core/src/middleware/koa-spa-proxy.ts" target="_blank" rel="noopener noreferrer">here</a>.</p><h3 class="anchor anchorWithStickyNavbar_E7Z_" id="watch-mode">Watch mode<a href="#watch-mode" class="hash-link" aria-label="Direct link to Watch mode" title="Direct link to Watch mode">‚Äã</a></h3><p>We have a <code>dev</code> script in <code>package.json</code> for each package that watches the file changes and re-compile when needed. Thanks to <code>lerna</code>, things become easy using <code>lerna exec</code> to run package scripts in parallel. The root script will look like this:</p><div class="language-yaml codeBlockContainer_dUHu theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_SC1B"><pre tabindex="0" class="prism-code language-yaml codeBlock_noRx thin-scrollbar"><code class="codeBlockLines_a94C"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">"dev"</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"lerna --scope=@logto/{core,phrases,schemas,ui} exec -- pnpm dev"</span><br></span></code></pre><div class="buttonGroup_qENx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_ihXY" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_e8Rr"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_iX_b"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_E7Z_" id="summary">Summary<a href="#summary" class="hash-link" aria-label="Direct link to Summary" title="Direct link to Summary">‚Äã</a></h3><p>Ideally, only two steps for a new engineer/contributor to get started:</p><ol><li>Clone the repo</li><li><code>pnpm i &amp;&amp; pnpm dev</code></li></ol><h2 class="anchor anchorWithStickyNavbar_E7Z_" id="closing-notes">Closing notes<a href="#closing-notes" class="hash-link" aria-label="Direct link to Closing notes" title="Direct link to Closing notes">‚Äã</a></h2><p>Our team has been developing under this approach for one year, and we are pretty happy with it. Visit our <a href="https://github.com/logto-io/logto" target="_blank" rel="noopener noreferrer">GitHub repo</a> to see the latest shape of the project. To wrap up:</p><p><strong>Pains</strong></p><ul><li>Need to be familiar with the JS/TS ecosystem</li><li>Need to choose the right package manager</li><li>Require some additional one-time setup</li></ul><p><strong>Gains</strong></p><ul><li>Develop and maintain the whole project in one repo</li><li>Simplified coding skill requirements</li><li>Shared code styles, schemas, phrases, and utilities</li><li>Improved communication efficiency<ul><li>No more questions like: What‚Äôs the API definition?</li><li>All engineers are talking in the same programming language</li></ul></li><li>CI/CD with ease<ul><li>Use the same toolchain for building, testing, and publishing</li></ul></li></ul><p>This article remains several topics uncovered: Setting up the repo from scratch, adding a new package, leveraging GitHub Actions for CI/CD, etc. It‚Äôll be too long for this article if I expand each of them. Feel free to comment and let me know which topic you‚Äôd like to see in the future.</p>]]></content>
        <author>
            <name>Gao</name>
            <uri>https://github.com/gao-sun</uri>
        </author>
        <category label="typescript" term="typescript"/>
        <category label="monorepo" term="monorepo"/>
    </entry>
</feed>