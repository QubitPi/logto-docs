"use strict";(self.webpackChunk_logto_docs=self.webpackChunk_logto_docs||[]).push([[1490],{62310:(e,n,o)=>{o.d(n,{Ay:()=>a,RM:()=>i});var s=o(25105),r=o(79621);const i=[];function t(e){const n={a:"a",p:"p",...(0,r.R)(),...e.components};return(0,s.jsxs)(n.p,{children:["Recomendamos ler ",(0,s.jsx)(n.a,{href:"/authorization/role-based-access-control",children:"\ud83d\udd10 Controle de Acesso Baseado em Papel (RBAC)"})," primeiro para entender os conceitos b\xe1sicos do RBAC do Logto e como configurar corretamente os recursos de API."]})}function a(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(t,{...e})}):t(e)}},40626:(e,n,o)=>{o.d(n,{Ay:()=>a,RM:()=>i});var s=o(25105),r=o(79621);const i=[];function t(e){const n={a:"a",admonition:"admonition",code:"code",p:"p",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:"Depois de configurar os recursos de API, voc\xea pode adicion\xe1-los ao configurar o Logto em seu aplicativo:"}),"\n",e.configResourcesCode,"\n",(0,s.jsx)(n.p,{children:"Cada recurso de API tem suas pr\xf3prias permiss\xf5es (escopos)."}),"\n",(0,s.jsxs)(n.p,{children:["Por exemplo, o recurso ",(0,s.jsx)(n.code,{children:"https://shopping.your-app.com/api"})," tem as permiss\xf5es ",(0,s.jsx)(n.code,{children:"shopping:read"})," e ",(0,s.jsx)(n.code,{children:"shopping:write"}),", e o recurso ",(0,s.jsx)(n.code,{children:"https://store.your-app.com/api"})," tem as permiss\xf5es ",(0,s.jsx)(n.code,{children:"store:read"})," e ",(0,s.jsx)(n.code,{children:"store:write"}),"."]}),"\n",(0,s.jsx)(n.p,{children:"Para solicitar essas permiss\xf5es, voc\xea pode adicion\xe1-las ao configurar o Logto em seu aplicativo:"}),"\n",e.configResourcesWithScopesCode,"\n",(0,s.jsxs)(n.p,{children:["Voc\xea pode notar que os escopos s\xe3o definidos separadamente dos recursos de API. Isso ocorre porque ",(0,s.jsx)(n.a,{href:"https://www.rfc-editor.org/rfc/rfc8707.html",children:"Resource Indicators for OAuth 2.0"})," especifica que os escopos finais para a solicita\xe7\xe3o ser\xe3o o produto cartesiano de todos os escopos em todos os servi\xe7os de destino."]}),"\n",e.configResourcesWithSharedScopesCode&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("p",{children:["Assim, no caso acima, os escopos podem ser simplificados a partir da defini\xe7\xe3o no Logto, ambos os recursos de API podem ter escopos ",(0,s.jsx)("code",{children:"read"})," e ",(0,s.jsx)("code",{children:"write"})," sem o prefixo. Ent\xe3o, na configura\xe7\xe3o do Logto:"]}),e.configResourcesWithSharedScopesCode,(0,s.jsxs)("p",{children:["Para cada recurso de API, ele solicitar\xe1 os escopos ",(0,s.jsx)("code",{children:"read"})," e ",(0,s.jsx)("code",{children:"write"}),"."]})]}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsxs)(n.p,{children:["N\xe3o h\xe1 problema em solicitar escopos que n\xe3o est\xe3o definidos nos recursos de API. Por exemplo, voc\xea pode solicitar o escopo ",(0,s.jsx)(n.code,{children:"email"})," mesmo que os recursos de API n\xe3o tenham o escopo ",(0,s.jsx)(n.code,{children:"email"})," dispon\xedvel. Escopos indispon\xedveis ser\xe3o ignorados com seguran\xe7a."]})}),"\n",(0,s.jsx)(n.p,{children:"Ap\xf3s o login bem-sucedido, o Logto emitir\xe1 os escopos apropriados para os recursos de API de acordo com os pap\xe9is do usu\xe1rio."})]})}function a(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(t,{...e})}):t(e)}},46443:(e,n,o)=>{o.d(n,{Ay:()=>a,RM:()=>i});var s=o(25105),r=o(79621);const i=[];function t(e){const n={p:"p",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.p,{children:["Vamos mudar para a p\xe1gina de detalhes do Aplicativo no Logto Console. Adicione um URI de redirecionamento ",(0,s.jsx)("code",{children:e.redirectUri}),' e clique em "Salvar altera\xe7\xf5es".']}),"\n",(0,s.jsx)("img",{alt:"URI de redirecionamento no Logto Console",src:e.figureSrc,width:"600px"})]})}function a(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(t,{...e})}):t(e)}},57973:(e,n,o)=>{o.d(n,{Ay:()=>a,RM:()=>i});var s=o(25105),r=o(79621);const i=[];function t(e){const n={a:"a",p:"p",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.p,{children:["Se organiza\xe7\xe3o \xe9 um conceito novo para voc\xea, por favor, leia ",(0,s.jsx)(n.a,{href:"/organizations",children:"\ud83c\udfe2 Organiza\xe7\xf5es (Multi-tenancy)"})," para come\xe7ar."]}),"\n",(0,s.jsxs)(n.p,{children:["Voc\xea precisa adicionar o escopo ",(0,s.jsx)("code",{children:e.organizationScope})," ao configurar o cliente Logto:"]}),"\n",e.configOrganizationCode,"\n",(0,s.jsx)(n.p,{children:"Uma vez que o usu\xe1rio esteja autenticado, voc\xea pode buscar o token de organiza\xe7\xe3o para o usu\xe1rio:"}),"\n",e.getOrganizationAccessTokenCode]})}function a(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(t,{...e})}):t(e)}},46680:(e,n,o)=>{o.d(n,{Ay:()=>a,RM:()=>i});var s=o(25105),r=o(79621);const i=[];function t(e){const n={p:"p",...(0,r.R)(),...e.components};return(0,s.jsxs)(n.p,{children:["Voc\xea pode perceber que algumas informa\xe7\xf5es do usu\xe1rio est\xe3o faltando no objeto retornado de ",(0,s.jsx)("code",{children:e.method}),". Isso ocorre porque OAuth 2.0 e OpenID Connect (OIDC) s\xe3o projetados para seguir o princ\xedpio do menor privil\xe9gio (PoLP), e o Logto \xe9 constru\xeddo com base nesses padr\xf5es."]})}function a(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(t,{...e})}):t(e)}},20045:(e,n,o)=>{o.d(n,{Ay:()=>a,RM:()=>i});var s=o(25105),r=o(79621);const i=[];function t(e){const{Url:n}={...(0,r.R)(),...e.components};return n||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Url",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n,{href:"/end-user-flows",children:" Fluxos do usu\xe1rio final: fluxos de autentica\xe7\xe3o, fluxos de conta e fluxos de organiza\xe7\xe3o "}),"\n",(0,s.jsx)(n,{href:"/connectors",children:" Configurar conectores "}),"\n",(0,s.jsx)(n,{href:"/authorization",children:" Autoriza\xe7\xe3o (Authorization) "})]})}function a(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(t,{...e})}):t(e)}},47540:(e,n,o)=>{o.d(n,{Ay:()=>a,RM:()=>i});var s=o(25105),r=o(79621);const i=[];function t(e){const n={admonition:"admonition",p:"p",...(0,r.R)(),...e.components};return(0,s.jsxs)(n.admonition,{type:"tip",children:[(0,s.jsx)("p",{children:(0,s.jsx)(n.p,{children:'Voc\xea pode encontrar e copiar o "App Secret" na p\xe1gina de detalhes do aplicativo no Admin Console:'})}),(0,s.jsx)("img",{alt:"App Secret",src:"/img/assets/app-secret.png",width:"586px"})]})}function a(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(t,{...e})}):t(e)}},81427:(e,n,o)=>{o.d(n,{Ay:()=>a,RM:()=>i});var s=o(25105),r=o(79621);const i=[{value:"Sobre o login baseado em redirecionamento",id:"regarding-redirect-based-sign-in",level:3}];function t(e){const n={a:"a",h3:"h3",li:"li",ol:"ol",p:"p",...(0,r.R)(),...e.components},{Details:o,MainSiteUrl:i}=n;return o||c("Details",!0),i||c("MainSiteUrl",!0),(0,s.jsxs)(o,{children:[(0,s.jsx)("summary",{children:(0,s.jsx)(n.h3,{id:"regarding-redirect-based-sign-in",children:"Sobre o login baseado em redirecionamento"})}),(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Este processo de autentica\xe7\xe3o segue o protocolo ",(0,s.jsx)(n.a,{href:"https://openid.net/specs/openid-connect-core-1_0.html",children:"OpenID Connect (OIDC)"}),", e o Logto aplica medidas de seguran\xe7a rigorosas para proteger o login do usu\xe1rio."]}),"\n",(0,s.jsx)(n.li,{children:"Se voc\xea tiver v\xe1rios aplicativos, pode usar o mesmo provedor de identidade (Logto). Uma vez que o usu\xe1rio faz login em um aplicativo, o Logto completar\xe1 automaticamente o processo de login quando o usu\xe1rio acessar outro aplicativo."}),"\n"]}),(0,s.jsxs)(n.p,{children:["Para saber mais sobre a l\xf3gica e os benef\xedcios do login baseado em redirecionamento, veja ",(0,s.jsx)(i,{href:"/concepts/sign-in-experience",children:"Experi\xeancia de login do Logto explicada"}),"."]})]})}function a(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(t,{...e})}):t(e)}function c(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},26461:(e,n,o)=>{o.d(n,{Ay:()=>a,RM:()=>i});var s=o(25105),r=o(79621);const i=[];function t(e){const n={a:"a",admonition:"admonition",code:"code",hr:"hr",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:"Aqui est\xe1 a lista de escopos suportados e as reivindica\xe7\xf5es correspondentes:"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"openid"})})}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Nome da reivindica\xe7\xe3o"}),(0,s.jsx)(n.th,{children:"Tipo"}),(0,s.jsx)(n.th,{children:"Descri\xe7\xe3o"}),(0,s.jsx)(n.th,{children:"Precisa de userinfo?"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"sub"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"string"})}),(0,s.jsx)(n.td,{children:"O identificador \xfanico do usu\xe1rio"}),(0,s.jsx)(n.td,{children:"N\xe3o"})]})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"profile"})})}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Nome da reivindica\xe7\xe3o"}),(0,s.jsx)(n.th,{children:"Tipo"}),(0,s.jsx)(n.th,{children:"Descri\xe7\xe3o"}),(0,s.jsx)(n.th,{children:"Precisa de userinfo?"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"name"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"string"})}),(0,s.jsx)(n.td,{children:"O nome completo do usu\xe1rio"}),(0,s.jsx)(n.td,{children:"N\xe3o"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"username"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"string"})}),(0,s.jsx)(n.td,{children:"O nome de usu\xe1rio do usu\xe1rio"}),(0,s.jsx)(n.td,{children:"N\xe3o"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"picture"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"string"})}),(0,s.jsx)(n.td,{children:"URL da foto de perfil do Usu\xe1rio Final. Este URL DEVE referir-se a um arquivo de imagem (por exemplo, um arquivo de imagem PNG, JPEG ou GIF), em vez de uma p\xe1gina da Web contendo uma imagem. Note que este URL DEVE referir-se especificamente a uma foto de perfil do Usu\xe1rio Final adequada para exibi\xe7\xe3o ao descrever o Usu\xe1rio Final, em vez de uma foto arbitr\xe1ria tirada pelo Usu\xe1rio Final."}),(0,s.jsx)(n.td,{children:"N\xe3o"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"created_at"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"number"})}),(0,s.jsx)(n.td,{children:"Hora em que o Usu\xe1rio Final foi criado. O tempo \xe9 representado como o n\xfamero de milissegundos desde a \xe9poca Unix (1970-01-01T00:00:00Z)."}),(0,s.jsx)(n.td,{children:"N\xe3o"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"updated_at"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"number"})}),(0,s.jsx)(n.td,{children:"Hora em que as informa\xe7\xf5es do Usu\xe1rio Final foram atualizadas pela \xfaltima vez. O tempo \xe9 representado como o n\xfamero de milissegundos desde a \xe9poca Unix (1970-01-01T00:00:00Z)."}),(0,s.jsx)(n.td,{children:"N\xe3o"})]})]})]}),"\n",(0,s.jsxs)(n.p,{children:["Outras ",(0,s.jsx)(n.a,{href:"https://openid.net/specs/openid-connect-core-1_0.html#StandardClaims",children:"reivindica\xe7\xf5es padr\xe3o"})," incluem ",(0,s.jsx)(n.code,{children:"family_name"}),", ",(0,s.jsx)(n.code,{children:"given_name"}),", ",(0,s.jsx)(n.code,{children:"middle_name"}),", ",(0,s.jsx)(n.code,{children:"nickname"}),", ",(0,s.jsx)(n.code,{children:"preferred_username"}),", ",(0,s.jsx)(n.code,{children:"profile"}),", ",(0,s.jsx)(n.code,{children:"website"}),", ",(0,s.jsx)(n.code,{children:"gender"}),", ",(0,s.jsx)(n.code,{children:"birthdate"}),", ",(0,s.jsx)(n.code,{children:"zoneinfo"})," e ",(0,s.jsx)(n.code,{children:"locale"})," tamb\xe9m ser\xe3o inclu\xeddas no escopo ",(0,s.jsx)(n.code,{children:"profile"})," sem a necessidade de solicitar o endpoint userinfo. Uma diferen\xe7a em rela\xe7\xe3o \xe0s reivindica\xe7\xf5es acima \xe9 que essas reivindica\xe7\xf5es s\xf3 ser\xe3o retornadas quando seus valores n\xe3o estiverem vazios, enquanto as reivindica\xe7\xf5es acima retornar\xe3o ",(0,s.jsx)(n.code,{children:"null"})," se os valores estiverem vazios."]}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsxs)(n.p,{children:["Ao contr\xe1rio das reivindica\xe7\xf5es padr\xe3o, as reivindica\xe7\xf5es ",(0,s.jsx)(n.code,{children:"created_at"})," e ",(0,s.jsx)(n.code,{children:"updated_at"})," est\xe3o usando milissegundos em vez de segundos."]})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"email"})})}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Nome da reivindica\xe7\xe3o"}),(0,s.jsx)(n.th,{children:"Tipo"}),(0,s.jsx)(n.th,{children:"Descri\xe7\xe3o"}),(0,s.jsx)(n.th,{children:"Precisa de userinfo?"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"email"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"string"})}),(0,s.jsx)(n.td,{children:"O endere\xe7o de email do usu\xe1rio"}),(0,s.jsx)(n.td,{children:"N\xe3o"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"email_verified"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"boolean"})}),(0,s.jsx)(n.td,{children:"Se o endere\xe7o de email foi verificado"}),(0,s.jsx)(n.td,{children:"N\xe3o"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"phone"})})}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Nome da reivindica\xe7\xe3o"}),(0,s.jsx)(n.th,{children:"Tipo"}),(0,s.jsx)(n.th,{children:"Descri\xe7\xe3o"}),(0,s.jsx)(n.th,{children:"Precisa de userinfo?"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"phone_number"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"string"})}),(0,s.jsx)(n.td,{children:"O n\xfamero de telefone do usu\xe1rio"}),(0,s.jsx)(n.td,{children:"N\xe3o"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"phone_number_verified"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"boolean"})}),(0,s.jsx)(n.td,{children:"Se o n\xfamero de telefone foi verificado"}),(0,s.jsx)(n.td,{children:"N\xe3o"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"address"})})}),"\n",(0,s.jsxs)(n.p,{children:["Por favor, consulte o ",(0,s.jsx)(n.a,{href:"https://openid.net/specs/openid-connect-core-1_0.html#AddressClaim",children:"OpenID Connect Core 1.0"})," para os detalhes da reivindica\xe7\xe3o de endere\xe7o."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"custom_data"})})}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Nome da reivindica\xe7\xe3o"}),(0,s.jsx)(n.th,{children:"Tipo"}),(0,s.jsx)(n.th,{children:"Descri\xe7\xe3o"}),(0,s.jsx)(n.th,{children:"Precisa de userinfo?"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"custom_data"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"object"})}),(0,s.jsx)(n.td,{children:"Os dados personalizados do usu\xe1rio"}),(0,s.jsx)(n.td,{children:"Sim"})]})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"identities"})})}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Nome da reivindica\xe7\xe3o"}),(0,s.jsx)(n.th,{children:"Tipo"}),(0,s.jsx)(n.th,{children:"Descri\xe7\xe3o"}),(0,s.jsx)(n.th,{children:"Precisa de userinfo?"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"identities"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"object"})}),(0,s.jsx)(n.td,{children:"As identidades vinculadas do usu\xe1rio"}),(0,s.jsx)(n.td,{children:"Sim"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"sso_identities"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"array"})}),(0,s.jsx)(n.td,{children:"As identidades SSO vinculadas do usu\xe1rio"}),(0,s.jsx)(n.td,{children:"Sim"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"roles"})})}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Nome da reivindica\xe7\xe3o"}),(0,s.jsx)(n.th,{children:"Tipo"}),(0,s.jsx)(n.th,{children:"Descri\xe7\xe3o"}),(0,s.jsx)(n.th,{children:"Precisa de userinfo?"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"roles"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"string[]"})}),(0,s.jsx)(n.td,{children:"Os pap\xe9is do usu\xe1rio"}),(0,s.jsx)(n.td,{children:"N\xe3o"})]})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"urn:logto:scope:organizations"})})}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Nome da reivindica\xe7\xe3o"}),(0,s.jsx)(n.th,{children:"Tipo"}),(0,s.jsx)(n.th,{children:"Descri\xe7\xe3o"}),(0,s.jsx)(n.th,{children:"Precisa de userinfo?"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"organizations"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"string[]"})}),(0,s.jsx)(n.td,{children:"Os IDs das organiza\xe7\xf5es \xe0s quais o usu\xe1rio pertence"}),(0,s.jsx)(n.td,{children:"N\xe3o"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"organization_data"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"object[]"})}),(0,s.jsx)(n.td,{children:"Os dados das organiza\xe7\xf5es \xe0s quais o usu\xe1rio pertence"}),(0,s.jsx)(n.td,{children:"Sim"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"urn:logto:scope:organization_roles"})})}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Nome da reivindica\xe7\xe3o"}),(0,s.jsx)(n.th,{children:"Tipo"}),(0,s.jsx)(n.th,{children:"Descri\xe7\xe3o"}),(0,s.jsx)(n.th,{children:"Precisa de userinfo?"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"organization_roles"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"string[]"})}),(0,s.jsxs)(n.td,{children:["Os pap\xe9is das organiza\xe7\xf5es \xe0s quais o usu\xe1rio pertence com o formato ",(0,s.jsx)(n.code,{children:"<organization_id>:<role_name>"})]}),(0,s.jsx)(n.td,{children:"N\xe3o"})]})})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsxs)(n.p,{children:['Considerando o desempenho e o tamanho dos dados, se "Precisa de userinfo?" for "Sim", isso significa que a reivindica\xe7\xe3o n\xe3o aparecer\xe1 no Token de ID, mas ser\xe1 retornada na resposta do ',(0,s.jsx)(n.a,{href:"https://openid.net/specs/openid-connect-core-1_0.html#UserInfo",children:"endpoint userinfo"}),"."]})]})}function a(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(t,{...e})}):t(e)}},59832:(e,n,o)=>{o.d(n,{Ay:()=>c,RM:()=>t});var s=o(25105),r=o(79621),i=o(26461);const t=[...i.RM];function a(e){const n={a:"a",p:"p",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.p,{children:["Logto usa as ",(0,s.jsx)(n.a,{href:"https://openid.net/specs/openid-connect-core-1_0.html#Claims",children:"conven\xe7\xf5es de escopos e reivindica\xe7\xf5es"})," do OIDC para definir os escopos e reivindica\xe7\xf5es para recuperar informa\xe7\xf5es do usu\xe1rio do Token de ID e do ",(0,s.jsx)("a",{href:"https://openid.net/specs/openid-connect-core-1_0.html#UserInfo",children:"endpoint userinfo"}),' do OIDC. Tanto "escopo" quanto "reivindica\xe7\xe3o" s\xe3o termos das especifica\xe7\xf5es OAuth 2.0 e OpenID Connect (OIDC).']}),"\n","\n",e.configScopesCode&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("p",{children:"Em resumo, quando voc\xea solicita um escopo, voc\xea obter\xe1 as reivindica\xe7\xf5es correspondentes nas informa\xe7\xf5es do usu\xe1rio. Por exemplo, se voc\xea solicitar o escopo `email`, voc\xea obter\xe1 os dados `email` e `email_verified` do usu\xe1rio."}),(0,s.jsx)("p",{children:"Por padr\xe3o, o Logto SDK sempre solicitar\xe1 tr\xeas escopos: `openid`, `profile` e `offline_access`, e n\xe3o h\xe1 como remover esses escopos padr\xe3o. Mas voc\xea pode adicionar mais escopos ao configurar o Logto:"}),e.configScopesCode]}),"\n",(0,s.jsx)(i.Ay,{})]})}function c(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}},93961:(e,n,o)=>{o.d(n,{Ay:()=>a,RM:()=>i});var s=o(25105),r=o(79621);const i=[];function t(e){const n={admonition:"admonition",code:"code",mermaid:"mermaid",p:"p",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:"Por padr\xe3o, reivindica\xe7\xf5es limitadas s\xe3o retornadas. Se voc\xea precisar de mais informa\xe7\xf5es, pode solicitar escopos adicionais para acessar mais reivindica\xe7\xf5es."}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsx)(n.p,{children:'Uma "reivindica\xe7\xe3o (Claim)" \xe9 uma afirma\xe7\xe3o feita sobre um sujeito; um "escopo (Scope)" \xe9 um grupo de reivindica\xe7\xf5es. No caso atual, uma reivindica\xe7\xe3o \xe9 uma informa\xe7\xe3o sobre o usu\xe1rio.'})}),"\n",(0,s.jsx)(n.p,{children:"Aqui est\xe1 um exemplo n\xe3o normativo da rela\xe7\xe3o escopo - reivindica\xe7\xe3o:"}),"\n",(0,s.jsx)(n.mermaid,{value:"classDiagram\n  class openid {\n    +sub\n  }\n\n  class profile {\n    +name\n    +username\n    +picture\n    +...\n  }\n\n  class email {\n    +email\n    +email_verified\n  }\n\n  class phone {\n    +phone_number\n    +phone_number_verified\n  }"}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsx)(n.p,{children:'A reivindica\xe7\xe3o "sub" significa "sujeito (Subject)", que \xe9 o identificador \xfanico do usu\xe1rio (ou seja, ID do usu\xe1rio).'})}),"\n",(0,s.jsxs)(n.p,{children:["O Logto SDK sempre solicitar\xe1 tr\xeas escopos: ",(0,s.jsx)(n.code,{children:"openid"}),", ",(0,s.jsx)(n.code,{children:"profile"})," e ",(0,s.jsx)(n.code,{children:"offline_access"}),"."]})]})}function a(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(t,{...e})}):t(e)}},44251:(e,n,o)=>{o.d(n,{Ay:()=>c,Ip:()=>i,RM:()=>t});var s=o(25105),r=o(79621);const i="http://localhost:3000/",t=[];function a(e){const n={admonition:"admonition",p:"p",...(0,r.R)(),...e.components};return(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsxs)(n.p,{children:["Nos trechos de c\xf3digo a seguir, assumimos que seu aplicativo est\xe1 sendo executado em ",(0,s.jsx)("code",{children:i}),"."]})})}function c(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}},84057:(e,n,o)=>{o.d(n,{Ay:()=>c,RM:()=>t});var s=o(25105),r=o(79621),i=o(81427);const t=[...i.RM];function a(e){const n={hr:"hr",li:"li",mermaid:"mermaid",ol:"ol",p:"p",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:"Antes de mergulharmos nos detalhes, aqui est\xe1 uma vis\xe3o geral r\xe1pida da experi\xeancia do usu\xe1rio final. O processo de login pode ser simplificado da seguinte forma:"}),"\n",(0,s.jsx)(n.mermaid,{value:"graph LR\n    A(Seu aplicativo) --\x3e|1. Invocar login| B(Logto)\n    B --\x3e|2. Concluir login| A"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Seu aplicativo invoca o m\xe9todo de login."}),"\n",(0,s.jsx)(n.li,{children:"O usu\xe1rio \xe9 redirecionado para a p\xe1gina de login do Logto. Para aplicativos nativos, o navegador do sistema \xe9 aberto."}),"\n",(0,s.jsx)(n.li,{children:"O usu\xe1rio faz login e \xe9 redirecionado de volta para o seu aplicativo (configurado como o URI de redirecionamento)."}),"\n"]}),"\n",(0,s.jsx)(i.Ay,{}),"\n",(0,s.jsx)(n.hr,{})]})}function c(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}},15883:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>X,contentTitle:()=>Q,default:()=>ne,frontMatter:()=>J,metadata:()=>s,toc:()=>Y});const s=JSON.parse('{"id":"quick-starts/framework/next-auth/README","title":"Adicionar autentica\xe7\xe3o ao seu aplicativo Auth.js (Next Auth)","description":"Este guia mostrar\xe1 como integrar o Logto em seu aplicativo Next.js com Auth.js, anteriormente conhecido como Next Auth.","source":"@site/i18n/pt-BR/docusaurus-plugin-content-docs/current/quick-starts/framework/next-auth/README.mdx","sourceDirName":"quick-starts/framework/next-auth","slug":"/quick-starts/next-auth","permalink":"/pt-BR/quick-starts/next-auth","draft":false,"unlisted":false,"editUrl":"https://github.com/logto-io/docs/tree/master/i18n/pt-BR/docusaurus-plugin-content-docs/current/quick-starts/framework/next-auth/README.mdx","tags":[],"version":"current","frontMatter":{"slug":"/quick-starts/next-auth","sidebar_label":"Auth.js (Next Auth)","sidebar_custom_props":{"logoFilename":"next-auth.svg","description":"Autentica\xe7\xe3o para Next.js."}},"sidebar":"quickStartSidebar","previous":{"title":"Next.js (App Router)","permalink":"/pt-BR/quick-starts/next-app-router"},"next":{"title":"Nuxt","permalink":"/pt-BR/quick-starts/nuxt"}}');var r=o(25105),i=o(79621),t=o(62310),a=o(20045),c=o(46680),d=o(59832),l=o(93961);const u=[{value:"Exibir informa\xe7\xf5es do usu\xe1rio",id:"display-user-information",level:3},{value:"Solicitar reivindica\xe7\xf5es adicionais",id:"request-additional-claims",level:3},...c.RM,...l.RM,{value:"Reivindica\xe7\xf5es que precisam de solicita\xe7\xf5es de rede",id:"claims-that-need-network-requests",level:3},{value:"Obter token de acesso",id:"get-access-token",level:4},{value:"Buscar informa\xe7\xf5es do usu\xe1rio",id:"fetch-user-info",level:4},{value:"Atualiza\xe7\xe3o do token de acesso",id:"access-token-refresh",level:4},{value:"Escopos e reivindica\xe7\xf5es",id:"scopes-and-claims",level:3},...d.RM];function h(e){const n={a:"a",code:"code",h3:"h3",h4:"h4",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h3,{id:"display-user-information",children:"Exibir informa\xe7\xf5es do usu\xe1rio"}),"\n",(0,r.jsxs)(n.p,{children:["Quando o usu\xe1rio est\xe1 autenticado, o valor de retorno de ",(0,r.jsx)(n.code,{children:"auth()"})," ser\xe1 um objeto contendo as informa\xe7\xf5es do usu\xe1rio. Voc\xea pode exibir essas informa\xe7\xf5es em seu aplicativo:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",metastring:'title="app/page.tsx"',children:"import { auth } from '@/auth';\n\nexport default async function Home() {\n  const session = await auth();\n\n  return (\n    <main>\n      {session?.user && (\n        <div>\n          <h2>Reivindica\xe7\xf5es (Claims):</h2>\n          <table>\n            <thead>\n              <tr>\n                <th>Nome</th>\n                <th>Valor</th>\n              </tr>\n            </thead>\n            <tbody>\n              {Object.entries(session.user).map(([key, value]) => (\n                <tr key={key}>\n                  <td>{key}</td>\n                  <td>{String(value)}</td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      )}\n    </main>\n  );\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"request-additional-claims",children:"Solicitar reivindica\xe7\xf5es adicionais"}),"\n",(0,r.jsx)(c.Ay,{method:"auth()"}),"\n",(0,r.jsx)(l.Ay,{hideDefaultScopes:!0}),"\n",(0,r.jsx)(n.p,{children:"Para solicitar escopos adicionais, voc\xea pode configurar os par\xe2metros do provedor Logto:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",metastring:'title="./auth.ts"',children:"import NextAuth from 'next-auth';\nimport Logto from 'next-auth/providers/logto';\n\nexport const { handlers, signIn, signOut, auth } = NextAuth({\n  providers: [\n    Logto({\n      // ...\n      authorization: {\n        params: {\n          // highlight-next-line\n          scope: 'openid offline_access profile email',\n        },\n      },\n      // ...\n    }),\n  ],\n});\n"})}),"\n",(0,r.jsx)(n.h3,{id:"claims-that-need-network-requests",children:"Reivindica\xe7\xf5es que precisam de solicita\xe7\xf5es de rede"}),"\n",(0,r.jsxs)(n.p,{children:["Para evitar sobrecarregar o token de ID, algumas reivindica\xe7\xf5es requerem solicita\xe7\xf5es de rede para serem obtidas. Por exemplo, a reivindica\xe7\xe3o ",(0,r.jsx)(n.code,{children:"custom_data"})," n\xe3o est\xe1 inclu\xedda no objeto do usu\xe1rio, mesmo que seja solicitada nos escopos. Para acessar essas reivindica\xe7\xf5es, voc\xea precisa fazer uma solicita\xe7\xe3o de rede para buscar as informa\xe7\xf5es do usu\xe1rio."]}),"\n",(0,r.jsx)(n.h4,{id:"get-access-token",children:"Obter token de acesso"}),"\n",(0,r.jsxs)(n.p,{children:["Atualize a configura\xe7\xe3o do ",(0,r.jsx)(n.code,{children:"NextAuth"})," para que possamos obter o token de acesso:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",metastring:'title="./auth.ts"',children:"export const { handlers, signIn, signOut, auth } = NextAuth({\n  // ...\n  callbacks: {\n    async jwt({ token, account }) {\n      if (account) {\n        token.accessToken = account.access_token;\n      }\n      return token;\n    },\n    async session({ session, token }) {\n      // Injeta o token de acesso no objeto de sess\xe3o\n      session.accessToken = token.accessToken;\n      return session;\n    },\n  },\n});\n"})}),"\n",(0,r.jsx)(n.h4,{id:"fetch-user-info",children:"Buscar informa\xe7\xf5es do usu\xe1rio"}),"\n",(0,r.jsx)(n.p,{children:"Agora acesse o endpoint de informa\xe7\xf5es do usu\xe1rio OIDC com o token de acesso:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",metastring:'title="./app/page.tsx"',children:"// ...\n\nexport default async function Home() {\n  const session = await auth();\n  // Substitua a URL pelo seu endpoint Logto, deve terminar com `/oidc/me`\n  const response = await fetch('https://xxx.logto.app/oidc/me', {\n    headers: {\n      Authorization: `Bearer ${session?.accessToken}`,\n    },\n  });\n  const user = await response.json();\n  console.log(user);\n\n  // ...\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:"Acima est\xe1 um exemplo simples. Lembre-se de tratar os casos de erro."}),"\n",(0,r.jsx)(n.h4,{id:"access-token-refresh",children:"Atualiza\xe7\xe3o do token de acesso"}),"\n",(0,r.jsxs)(n.p,{children:["Um token de acesso \xe9 v\xe1lido por um curto per\xedodo de tempo. Por padr\xe3o, o Next.js s\xf3 buscar\xe1 um quando a sess\xe3o for criada. Para implementar a atualiza\xe7\xe3o autom\xe1tica do token de acesso, veja ",(0,r.jsx)(n.a,{href:"https://next-auth.js.org/v3/tutorials/refresh-token-rotation",children:"Rota\xe7\xe3o de token de atualiza\xe7\xe3o"}),"."]}),"\n",(0,r.jsx)(n.h3,{id:"scopes-and-claims",children:"Escopos e reivindica\xe7\xf5es"}),"\n",(0,r.jsx)(d.Ay,{})]})}function p(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}function x(e){const n={a:"a",admonition:"admonition",li:"li",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsx)(n.admonition,{type:"tip",children:(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Neste guia, assumimos que voc\xea configurou o Next Auth em seu projeto Next.js. Se voc\xea ainda n\xe3o fez isso, confira a ",(0,r.jsx)(n.a,{href:"https://next-auth.js.org/getting-started/introduction",children:"documenta\xe7\xe3o do Next Auth"})," para come\xe7ar."]}),"\n"]})})}function m(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(x,{...e})}):x(e)}var j=o(38552),g=o(22002);function f(e){const n={a:"a",p:"p",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"Instale Auth.js atrav\xe9s do seu gerenciador de pacotes favorito:"}),"\n",(0,r.jsxs)(g.A,{children:[(0,r.jsx)(j.A,{value:"npm",label:"npm",children:(0,r.jsx)("pre",{children:(0,r.jsx)("code",{className:"language-bash",children:"npm i next-auth@beta"})})}),(0,r.jsx)(j.A,{value:"pnpm",label:"pnpm",children:(0,r.jsx)("pre",{children:(0,r.jsx)("code",{className:"language-bash",children:"pnpm add next-auth@beta"})})}),(0,r.jsx)(j.A,{value:"yarn",label:"yarn",children:(0,r.jsx)("pre",{children:(0,r.jsx)("code",{className:"language-bash",children:"yarn add next-auth@beta"})})})]}),"\n",(0,r.jsxs)(n.p,{children:["Veja a ",(0,r.jsx)(n.a,{href:"https://authjs.dev/getting-started/installation",children:"documenta\xe7\xe3o do Auth.js"})," para mais detalhes."]})]})}function v(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(f,{...e})}):f(e)}var b=o(46443),A=o(47540),k=o(44251),R=o(84057);const y=[{value:"Configurar provedor Auth.js",id:"set-up-authjs-provider",level:3},...A.RM,{value:"Configurar URI de redirecionamento de login",id:"configure-sign-in-redirect-uri",level:3},...R.RM,...k.RM,...b.RM,{value:"Implementar login e logout",id:"implement-sign-in-and-sign-out",level:3},{value:"Implementar bot\xe3o de login e logout",id:"implement-sign-in-and-sign-out-button",level:4},{value:"Mostrar bot\xe3o de login e logout na p\xe1gina",id:"show-sign-in-and-sign-out-button-in-the-page",level:4},{value:"Ponto de verifica\xe7\xe3o",id:"checkpoint",level:3}];function w(e){const n={a:"a",code:"code",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h3,{id:"set-up-authjs-provider",children:"Configurar provedor Auth.js"}),"\n",(0,r.jsx)(A.Ay,{}),"\n",(0,r.jsx)(n.p,{children:"Modifique a configura\xe7\xe3o da rota da API do Auth.js, adicione Logto como um provedor OIDC:"}),"\n",(0,r.jsxs)(g.A,{children:[(0,r.jsxs)(j.A,{value:"v5",label:"Auth.js v5",children:[(0,r.jsx)(n.p,{children:"Configure vari\xe1veis de ambiente:"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-env",children:"AUTH_LOGTO_ISSUER=https://xxxx.logto.app/oidc\nAUTH_LOGTO_ID=your-logto-app-id\nAUTH_LOGTO_SECRET=your-logto-app-secret\n"})}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",metastring:'title="./app/api/auth/[...nextauth]/route.ts"',children:"import { handlers } from '@/auth';\nexport const { GET, POST } = handlers;\n"})}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",metastring:'title="./auth.ts"',children:"import NextAuth from 'next-auth';\nimport Logto from 'next-auth/providers/logto';\n\nexport const { handlers, signIn, signOut, auth } = NextAuth({\n  providers: [Logto],\n});\n"})}),(0,r.jsx)(n.p,{children:"Voc\xea tamb\xe9m pode adicionar um Middleware opcional para manter a sess\xe3o ativa:"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",metastring:'title="./middleware.ts"',children:"export { auth as middleware } from '@/auth';\n"})})]}),(0,r.jsxs)(j.A,{value:"v4",label:"Next Auth v4",children:[(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",metastring:'title="app/api/auth/[...nextauth]/route.ts"',children:"import NextAuth from 'next-auth';\n\nconst handler = NextAuth({\n  providers: [\n    {\n      id: 'logto',\n      name: 'Logto',\n      type: 'oauth',\n      // Voc\xea pode obter a URL conhecida a partir da p\xe1gina de Detalhes do Aplicativo Logto,\n      // no campo \"Ponto de configura\xe7\xe3o do provedor OpenID\"\n      wellKnown: 'https://xxxx.logto.app/oidc/.well-known/openid-configuration',\n      authorization: { params: { scope: 'openid offline_access profile email' } },\n      clientId: '<logto-app-id>',\n      clientSecret: '<logto-app-secret>',\n      client: {\n        id_token_signed_response_alg: 'ES384',\n      },\n      profile(profile) {\n        // Voc\xea pode personalizar o mapeamento do perfil do usu\xe1rio aqui\n        return {\n          id: profile.sub,\n          name: profile.name ?? profile.username,\n          email: profile.email,\n          image: profile.picture,\n        };\n      },\n    },\n  ],\n});\n\nexport { handler as GET, handler as POST };\n"})}),(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Substitua a URL ",(0,r.jsx)(n.code,{children:"wellKnown"}),' pelo "Ponto de configura\xe7\xe3o do provedor OpenID" do seu aplicativo Logto.']}),"\n",(0,r.jsxs)(n.li,{children:["Substitua o ",(0,r.jsx)(n.code,{children:"clientId"})," e o ",(0,r.jsx)(n.code,{children:"clientSecret"})," pelo ID e segredo do seu aplicativo Logto."]}),"\n",(0,r.jsxs)(n.li,{children:["Personalize a fun\xe7\xe3o ",(0,r.jsx)(n.code,{children:"profile"})," para mapear o perfil do usu\xe1rio para o objeto de usu\xe1rio do Next Auth, o mapeamento padr\xe3o \xe9 mostrado no exemplo."]}),"\n",(0,r.jsxs)(n.li,{children:["Lembre-se de definir o ",(0,r.jsx)(n.code,{children:"id_token_signed_response_alg"})," como ",(0,r.jsx)(n.code,{children:"ES384"}),"."]}),"\n"]})]})]}),"\n",(0,r.jsxs)(n.p,{children:["Voc\xea pode encontrar mais detalhes na ",(0,r.jsx)(n.a,{href:"https://authjs.dev/getting-started/installation",children:"documenta\xe7\xe3o do Auth.js"}),"."]}),"\n",(0,r.jsx)(n.h3,{id:"configure-sign-in-redirect-uri",children:"Configurar URI de redirecionamento de login"}),"\n",(0,r.jsx)(R.Ay,{}),"\n",(0,r.jsx)(k.Ay,{}),"\n",(0,r.jsx)(b.Ay,{figureSrc:"/img/assets/next-auth-redirect-uri.png",redirectUri:"http://localhost:3000/api/auth/callback/logto"}),"\n",(0,r.jsx)(n.h3,{id:"implement-sign-in-and-sign-out",children:"Implementar login e logout"}),"\n",(0,r.jsx)(n.h4,{id:"implement-sign-in-and-sign-out-button",children:"Implementar bot\xe3o de login e logout"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",metastring:'title="app/components/sign-in.tsx"',children:"import { signIn } from '@/auth';\n\nexport default function SignIn() {\n  return (\n    <form\n      action={async () => {\n        'use server';\n        await signIn('logto');\n      }}\n    >\n      <button type=\"submit\">Sign In</button>\n    </form>\n  );\n}\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",metastring:'title="app/components/sign-out.tsx"',children:"import { signOut } from '@/auth';\n\nexport function SignOut() {\n  return (\n    <form\n      action={async () => {\n        'use server';\n        await signOut();\n      }}\n    >\n      <button type=\"submit\">Sign Out</button>\n    </form>\n  );\n}\n"})}),"\n",(0,r.jsx)(n.h4,{id:"show-sign-in-and-sign-out-button-in-the-page",children:"Mostrar bot\xe3o de login e logout na p\xe1gina"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",metastring:'title="app/page.tsx"',children:"import SignIn from './components/sign-in';\nimport SignOut from './components/sign-out';\nimport { auth } from '@/auth';\n\nexport default function Home() {\n  const session = await auth();\n\n  return <div>{session?.user ? <SignOut /> : <SignIn />}</div>;\n}\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Acima est\xe1 um exemplo simples, voc\xea pode verificar a ",(0,r.jsx)(n.a,{href:"https://authjs.dev/getting-started/session-management/login",children:"documenta\xe7\xe3o do Auth.js"})," para mais detalhes."]}),"\n",(0,r.jsx)(n.h3,{id:"checkpoint",children:"Ponto de verifica\xe7\xe3o"}),"\n",(0,r.jsx)(n.p,{children:"Agora, voc\xea pode testar seu aplicativo para ver se a autentica\xe7\xe3o funciona como esperado."})]})}function N(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(w,{...e})}):w(e)}var I=o(40626);function S(e){const n={code:"code",pre:"pre",...(0,i.R)(),...e.components};return(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",metastring:'title="./auth.ts"',children:"import NextAuth from 'next-auth';\nimport Logto from 'next-auth/providers/logto';\n\nexport const { handlers, signIn, signOut, auth } = NextAuth({\n  providers: [\n    Logto({\n      // ...\n      authorization: {\n        params: {\n          scope: 'openid offline_access profile email',\n          // highlight-next-line\n          resource: 'https://shopping.your-app.com/api',\n        },\n      },\n      // ...\n    }),\n  ],\n});\n"})})}function _(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(S,{...e})}):S(e)}function L(e){const n={code:"code",pre:"pre",...(0,i.R)(),...e.components};return(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",metastring:'title="./auth.ts"',children:"import NextAuth from 'next-auth';\nimport Logto from 'next-auth/providers/logto';\n\nexport const { handlers, signIn, signOut, auth } = NextAuth({\n  providers: [\n    Logto({\n      // ...\n      authorization: {\n        params: {\n          // highlight-next-line\n          scope: 'openid offline_access profile email shopping:read shopping:write',\n          resource: 'https://shopping.your-app.com/api',\n        },\n      },\n      // ...\n    }),\n  ],\n});\n"})})}function O(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(L,{...e})}):L(e)}function z(e){const n={code:"code",pre:"pre",...(0,i.R)(),...e.components};return(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",metastring:'title="./auth.ts"',children:"import NextAuth from 'next-auth';\nimport Logto from 'next-auth/providers/logto';\n\nexport const { handlers, signIn, signOut, auth } = NextAuth({\n  providers: [\n    Logto({\n      // ...\n      authorization: {\n        params: {\n          // highlight-next-line\n          scope: 'openid offline_access profile read write',\n          resource: 'https://shopping.your-app.com/api',\n        },\n      },\n      // ...\n    }),\n  ],\n});\n"})})}function q(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(z,{...e})}):z(e)}const C=[...I.RM];function P(e){return(0,r.jsx)(I.Ay,{configResourcesCode:(0,r.jsx)(_,{}),configResourcesWithScopesCode:(0,r.jsx)(O,{}),configResourcesWithSharedScopesCode:(0,r.jsx)(q,{})})}function T(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(P,{...e})}):P()}function D(e){const n={code:"code",h4:"h4",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"Auth.js buscar\xe1 o token de acesso apenas uma vez sem o par\xe2metro de recurso. Precisamos implementar a busca do token de acesso por conta pr\xf3pria."}),"\n",(0,r.jsx)(n.h4,{id:"get-refresh-token",children:"Obter token de atualiza\xe7\xe3o"}),"\n",(0,r.jsxs)(n.p,{children:['Atualize a configura\xe7\xe3o do provedor Logto, adicione o par\xe2metro "prompt" e defina-o como ',(0,r.jsx)(n.code,{children:"consent"}),", e certifique-se de que o escopo ",(0,r.jsx)(n.code,{children:"offline_access"})," esteja inclu\xeddo:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",metastring:'title="./auth.ts"',children:"import NextAuth from 'next-auth';\n\nexport const { handlers, signIn, signOut, auth } = NextAuth({\n  // ...\n  authorization: {\n    params: {\n      // highlight-next-line\n      prompt: 'consent',\n      scope: 'openid offline_access shopping:read shopping:write',\n      resource: 'https://shopping.your-app.com/api',\n      // ...\n    },\n  },\n  // ...\n});\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Em seguida, adicione um callback para salvar o ",(0,r.jsx)(n.code,{children:"refresh_token"})," na sess\xe3o:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",metastring:'title="./auth.ts"',children:"export const { handlers, signIn, signOut, auth } = NextAuth({\n  // ...\n  callbacks: {\n    async jwt({ token, account }) {\n      if (account) {\n        // ...\n        // highlight-next-line\n        token.refreshToken = account.refresh_token;\n      }\n      return token;\n    },\n    async session({ session, token }) {\n      // ...\n      // highlight-next-line\n      session.refreshToken = token.refreshToken;\n      return session;\n    },\n  },\n});\n"})}),"\n",(0,r.jsx)(n.h4,{id:"fetch-access-token",children:"Buscar token de acesso"}),"\n",(0,r.jsxs)(n.p,{children:["Com o ",(0,r.jsx)(n.code,{children:"refresh_token"}),", podemos buscar o token de acesso do endpoint de token OIDC do Logto."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",metastring:'title="./app/page.tsx"',children:"// ...\n\nexport default async function Home() {\n  const session = await auth();\n\n  if (session?.refreshToken) {\n    // Substitua o ID e o segredo do aplicativo pelo seu pr\xf3prio, voc\xea pode verificar a se\xe7\xe3o \"Integration\".\n    const basicAuth = Buffer.from('<logto-app-id>:<logto-app-secret>').toString('base64');\n\n    // Substitua a URL pelo seu endpoint Logto, deve terminar com `/oidc/token`\n    const response = await fetch('https://xxx.logto.app/oidc/token', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded',\n        Authorization: `Basic ${basicAuth}`,\n      },\n      body: new URLSearchParams({\n        grant_type: 'refresh_token',\n        refresh_token: session.refreshToken,\n        resource: 'https://shopping.your-app.com/api',\n      }).toString(),\n    });\n\n    const data = await response.json();\n    console.log(data.access_token);\n  }\n\n  // ...\n}\n"})})]})}function E(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(D,{...e})}):D(e)}const U=[{value:"Obter token de atualiza\xe7\xe3o",id:"get-refresh-token",level:4},{value:"Buscar token de acesso",id:"fetch-access-token",level:4}];function M(e){return(0,r.jsx)(E,{})}function V(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(M,{...e})}):M()}var B=o(57973);function F(e){const n={code:"code",pre:"pre",...(0,i.R)(),...e.components};return(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",metastring:'title="./auth.ts"',children:"import NextAuth from 'next-auth';\nimport Logto from 'next-auth/providers/logto';\n\nexport const { handlers, signIn, signOut, auth } = NextAuth({\n  providers: [\n    Logto({\n      // ...\n      authorization: {\n        params: {\n          // highlight-next-line\n          scope: 'openid offline_access urn:logto:scope:organizations',\n        },\n      },\n      // ...\n    }),\n  ],\n});\n"})})}function H(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(F,{...e})}):F(e)}function $(e){const n={code:"code",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"Similar ao token de acesso para recursos de API, podemos usar o token de atualiza\xe7\xe3o para buscar o token de acesso da organiza\xe7\xe3o."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",metastring:'title="./app/page.tsx"',children:"// ...\n\nexport default async function Home() {\n  const session = await auth();\n\n  if (session?.refreshToken) {\n    // Substitua o ID e o segredo do aplicativo pelos seus pr\xf3prios, voc\xea pode verificar a se\xe7\xe3o \"Integration\".\n    const basicAuth = Buffer.from('<logto-app-id>:<logto-app-secret>').toString('base64');\n\n    // Substitua a URL pelo seu endpoint Logto, deve terminar com `/oidc/token`\n    const response = await fetch('https://xxx.logto.app/oidc/token', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded',\n        Authorization: `Basic ${basicAuth}`,\n      },\n      body: new URLSearchParams({\n        grant_type: 'refresh_token',\n        refresh_token: session.refreshToken,\n        // highlight-next-line\n        resource: 'urn:logto:scope:organizations',\n        // highlight-next-line\n        organization_id: 'organization-id',\n      }).toString(),\n    });\n\n    const data = await response.json();\n    console.log(data.access_token);\n  }\n\n  // ...\n}\n"})})]})}function G(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)($,{...e})}):$(e)}const W=[...B.RM];function K(e){return(0,r.jsx)(B.Ay,{organizationScope:"urn:logto:scope:organizations",configOrganizationCode:(0,r.jsx)(H,{}),getOrganizationAccessTokenCode:(0,r.jsx)(G,{})})}function Z(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(K,{...e})}):K()}const J={slug:"/quick-starts/next-auth",sidebar_label:"Auth.js (Next Auth)",sidebar_custom_props:{logoFilename:"next-auth.svg",description:"Autentica\xe7\xe3o para Next.js."}},Q="Adicionar autentica\xe7\xe3o ao seu aplicativo Auth.js (Next Auth)",X={},Y=[{value:"Pr\xe9-requisitos",id:"prerequisites",level:2},{value:"Instala\xe7\xe3o",id:"installation",level:2},{value:"Integra\xe7\xe3o",id:"integration",level:2},...y,{value:"Buscar informa\xe7\xf5es do usu\xe1rio",id:"fetch-user-information",level:2},...u,{value:"Recursos de API",id:"api-resources",level:2},...t.RM,{value:"Configurar provedor Logto",id:"configure-logto-provider",level:3},...C,{value:"Buscar token de acesso para o recurso de API",id:"fetch-access-token-for-the-api-resource",level:3},...U,{value:"Buscar tokens de organiza\xe7\xe3o",id:"fetch-organization-tokens",level:3},...W,{value:"Leituras adicionais",id:"further-readings",level:2},...a.RM];function ee(e){const n={a:"a",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",ul:"ul",...(0,i.R)(),...e.components},{Url:o}=n;return o||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Url",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"adicionar-autentica\xe7\xe3o-ao-seu-aplicativo-authjs-next-auth",children:"Adicionar autentica\xe7\xe3o ao seu aplicativo Auth.js (Next Auth)"})}),"\n",(0,r.jsxs)(n.p,{children:["Este guia mostrar\xe1 como integrar o Logto em seu aplicativo Next.js com ",(0,r.jsx)(n.a,{href:"https://authjs.dev/",children:"Auth.js"}),", anteriormente conhecido como Next Auth."]}),"\n",(0,r.jsx)(m,{}),"\n",(0,r.jsx)(n.h2,{id:"prerequisites",children:"Pr\xe9-requisitos"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Uma conta ",(0,r.jsx)(n.a,{href:"https://cloud.logto.io",children:"Logto Cloud"})," ou um ",(0,r.jsx)(n.a,{href:"/introduction/set-up-logto-oss",children:"Logto auto-hospedado"}),"."]}),"\n",(0,r.jsx)(n.li,{children:"Um aplicativo tradicional Logto criado."}),"\n",(0,r.jsxs)(n.li,{children:["Um projeto Next.js com Auth.js, confira a ",(0,r.jsx)(n.a,{href:"https://authjs.dev/getting-started/installation",children:"documenta\xe7\xe3o do Auth.js"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"installation",children:"Instala\xe7\xe3o"}),"\n",(0,r.jsx)(v,{}),"\n",(0,r.jsx)(n.h2,{id:"integration",children:"Integra\xe7\xe3o"}),"\n",(0,r.jsx)(N,{}),"\n",(0,r.jsx)(n.h2,{id:"fetch-user-information",children:"Buscar informa\xe7\xf5es do usu\xe1rio"}),"\n",(0,r.jsx)(p,{}),"\n",(0,r.jsx)(n.h2,{id:"api-resources",children:"Recursos de API"}),"\n",(0,r.jsx)(t.Ay,{}),"\n",(0,r.jsx)(n.h3,{id:"configure-logto-provider",children:"Configurar provedor Logto"}),"\n",(0,r.jsx)(T,{}),"\n",(0,r.jsx)(n.h3,{id:"fetch-access-token-for-the-api-resource",children:"Buscar token de acesso para o recurso de API"}),"\n",(0,r.jsx)(V,{}),"\n",(0,r.jsx)(n.h3,{id:"fetch-organization-tokens",children:"Buscar tokens de organiza\xe7\xe3o"}),"\n",(0,r.jsx)(Z,{}),"\n",(0,r.jsx)(n.h2,{id:"further-readings",children:"Leituras adicionais"}),"\n",(0,r.jsx)(a.Ay,{}),"\n",(0,r.jsx)(o,{href:"https://blog.logto.io/next-auth-v5",children:(0,r.jsx)(n.p,{children:"Migrando a integra\xe7\xe3o Logto do NextAuth.js v4 para v5"})})]})}function ne(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(ee,{...e})}):ee(e)}},38552:(e,n,o)=>{o.d(n,{A:()=>t});o(58101);var s=o(13526);const r={tabItem:"tabItem_dgSZ"};var i=o(25105);function t(e){let{children:n,hidden:o,className:t}=e;return(0,i.jsx)("div",{role:"tabpanel",className:(0,s.A)(r.tabItem,t),hidden:o,children:n})}},22002:(e,n,o)=>{o.d(n,{A:()=>k});var s=o(58101),r=o(13526),i=o(60755),t=o(55234),a=o(6635),c=o(4100),d=o(35661),l=o(42752);function u(e){return s.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,s.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function h(e){const{values:n,children:o}=e;return(0,s.useMemo)((()=>{const e=n??function(e){return u(e).map((e=>{let{props:{value:n,label:o,attributes:s,default:r}}=e;return{value:n,label:o,attributes:s,default:r}}))}(o);return function(e){const n=(0,d.XI)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,o])}function p(e){let{value:n,tabValues:o}=e;return o.some((e=>e.value===n))}function x(e){let{queryString:n=!1,groupId:o}=e;const r=(0,t.W6)(),i=function(e){let{queryString:n=!1,groupId:o}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!o)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return o??null}({queryString:n,groupId:o});return[(0,c.aZ)(i),(0,s.useCallback)((e=>{if(!i)return;const n=new URLSearchParams(r.location.search);n.set(i,e),r.replace({...r.location,search:n.toString()})}),[i,r])]}function m(e){const{defaultValue:n,queryString:o=!1,groupId:r}=e,i=h(e),[t,c]=(0,s.useState)((()=>function(e){let{defaultValue:n,tabValues:o}=e;if(0===o.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!p({value:n,tabValues:o}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${o.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const s=o.find((e=>e.default))??o[0];if(!s)throw new Error("Unexpected error: 0 tabValues");return s.value}({defaultValue:n,tabValues:i}))),[d,u]=x({queryString:o,groupId:r}),[m,j]=function(e){let{groupId:n}=e;const o=function(e){return e?`docusaurus.tab.${e}`:null}(n),[r,i]=(0,l.Dv)(o);return[r,(0,s.useCallback)((e=>{o&&i.set(e)}),[o,i])]}({groupId:r}),g=(()=>{const e=d??m;return p({value:e,tabValues:i})?e:null})();(0,a.A)((()=>{g&&c(g)}),[g]);return{selectedValue:t,selectValue:(0,s.useCallback)((e=>{if(!p({value:e,tabValues:i}))throw new Error(`Can't select invalid tab value=${e}`);c(e),u(e),j(e)}),[u,j,i]),tabValues:i}}var j=o(21929);const g={tabList:"tabList_osvQ",tabItem:"tabItem_dc4O"};var f=o(25105);function v(e){let{className:n,block:o,selectedValue:s,selectValue:t,tabValues:a}=e;const c=[],{blockElementScrollPositionUntilNextRender:d}=(0,i.a_)(),l=e=>{const n=e.currentTarget,o=c.indexOf(n),r=a[o].value;r!==s&&(d(n),t(r))},u=e=>{let n=null;switch(e.key){case"Enter":l(e);break;case"ArrowRight":{const o=c.indexOf(e.currentTarget)+1;n=c[o]??c[0];break}case"ArrowLeft":{const o=c.indexOf(e.currentTarget)-1;n=c[o]??c[c.length-1];break}}n?.focus()};return(0,f.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.A)("tabs",{"tabs--block":o},n),children:a.map((e=>{let{value:n,label:o,attributes:i}=e;return(0,f.jsx)("li",{role:"tab",tabIndex:s===n?0:-1,"aria-selected":s===n,ref:e=>{c.push(e)},onKeyDown:u,onClick:l,...i,className:(0,r.A)("tabs__item",g.tabItem,i?.className,{"tabs__item--active":s===n}),children:o??n},n)}))})}function b(e){let{lazy:n,children:o,selectedValue:i}=e;const t=(Array.isArray(o)?o:[o]).filter(Boolean);if(n){const e=t.find((e=>e.props.value===i));return e?(0,s.cloneElement)(e,{className:(0,r.A)("margin-top--md",e.props.className)}):null}return(0,f.jsx)("div",{className:"margin-top--md",children:t.map(((e,n)=>(0,s.cloneElement)(e,{key:n,hidden:e.props.value!==i})))})}function A(e){const n=m(e);return(0,f.jsxs)("div",{className:(0,r.A)("tabs-container",g.tabList),children:[(0,f.jsx)(v,{...n,...e}),(0,f.jsx)(b,{...n,...e})]})}function k(e){const n=(0,j.A)();return(0,f.jsx)(A,{...e,children:u(e.children)},String(n))}},79621:(e,n,o)=>{o.d(n,{R:()=>t,x:()=>a});var s=o(58101);const r={},i=s.createContext(r);function t(e){const n=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);