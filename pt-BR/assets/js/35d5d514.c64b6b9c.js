"use strict";(self.webpackChunk_logto_docs=self.webpackChunk_logto_docs||[]).push([[21400],{12209:(e,a,o)=>{o.r(a),o.d(a,{assets:()=>t,contentTitle:()=>s,default:()=>u,frontMatter:()=>c,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"end-user-flows/account-settings/by-account-api","title":"Configura\xe7\xf5es de conta pela Account API","description":"Aprenda a usar a Account API para gerenciar usu\xe1rios","source":"@site/i18n/pt-BR/docusaurus-plugin-content-docs/current/end-user-flows/account-settings/by-account-api.mdx","sourceDirName":"end-user-flows/account-settings","slug":"/end-user-flows/account-settings/by-account-api","permalink":"/pt-BR/end-user-flows/account-settings/by-account-api","draft":false,"unlisted":false,"editUrl":"https://github.com/logto-io/docs/tree/master/i18n/pt-BR/docusaurus-plugin-content-docs/current/end-user-flows/account-settings/by-account-api.mdx","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"description":"Aprenda a usar a Account API para gerenciar usu\xe1rios","sidebar_position":2},"sidebar":"docsSidebar","previous":{"title":"Configura\xe7\xf5es de conta pela Management API","permalink":"/pt-BR/end-user-flows/account-settings/by-management-api"},"next":{"title":"Verifica\xe7\xe3o de seguran\xe7a","permalink":"/pt-BR/end-user-flows/security-verification/"}}');var n=o(25105),r=o(79621);const c={description:"Aprenda a usar a Account API para gerenciar usu\xe1rios",sidebar_position:2},s="Configura\xe7\xf5es de conta pela Account API",t={},d=[{value:"O que \xe9 a Logto Account API",id:"what-is-logto-account-api",level:2},{value:"Como habilitar a Account API",id:"how-to-enable-account-api",level:2},{value:"Como acessar a Account API",id:"how-to-access-account-api",level:2},{value:"Obter um token de acesso",id:"fetch-an-access-token",level:3},{value:"Acessar a Account API usando o token de acesso",id:"access-account-api-using-access-token",level:3},{value:"Gerenciar informa\xe7\xf5es b\xe1sicas da conta",id:"manage-basic-account-information",level:2},{value:"Recuperar informa\xe7\xf5es da conta do usu\xe1rio",id:"retrieve-user-account-information",level:3},{value:"Atualizar informa\xe7\xf5es b\xe1sicas da conta",id:"update-basic-account-information",level:3},{value:"Gerenciar identificadores e outras informa\xe7\xf5es sens\xedveis",id:"manage-identifiers-and-other-sensitive-information",level:2},{value:"Obter um id de registro de verifica\xe7\xe3o",id:"get-a-verification-record-id",level:3},{value:"Verificar a senha do usu\xe1rio",id:"verify-the-users-password",level:4},{value:"Verificar enviando um c\xf3digo de verifica\xe7\xe3o para o email ou telefone do usu\xe1rio",id:"verify-by-sending-a-verification-code-to-the-users-email-or-phone",level:4},{value:"Enviar solicita\xe7\xe3o com id de registro de verifica\xe7\xe3o",id:"send-request-with-verification-record-id",level:3},{value:"Atualizar ou vincular novo email",id:"update-or-link-new-email",level:3},{value:"Remover o email do usu\xe1rio",id:"remove-the-users-email",level:3},{value:"Gerenciar telefone",id:"manage-phone",level:3},{value:"Vincular uma nova conex\xe3o social",id:"link-a-new-social-connection",level:3},{value:"Remover uma conex\xe3o social",id:"remove-a-social-connection",level:3}];function l(e){const a={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.header,{children:(0,n.jsx)(a.h1,{id:"configura\xe7\xf5es-de-conta-pela-account-api",children:"Configura\xe7\xf5es de conta pela Account API"})}),"\n",(0,n.jsx)(a.h2,{id:"what-is-logto-account-api",children:"O que \xe9 a Logto Account API"}),"\n",(0,n.jsx)(a.p,{children:"A Logto Account API \xe9 um conjunto abrangente de APIs que oferece aos usu\xe1rios finais acesso direto \xe0 API sem a necessidade de passar pela Management API. Aqui est\xe3o os destaques:"}),"\n",(0,n.jsxs)(a.ul,{children:["\n",(0,n.jsx)(a.li,{children:"Acesso direto: A Account API capacita os usu\xe1rios finais a acessar e gerenciar diretamente seu pr\xf3prio perfil de conta sem exigir o uso da Management API."}),"\n",(0,n.jsx)(a.li,{children:"Gerenciamento de perfil de usu\xe1rio e identidades: Os usu\xe1rios podem gerenciar completamente seus perfis e configura\xe7\xf5es de seguran\xe7a, incluindo a capacidade de atualizar informa\xe7\xf5es de identidade como email, telefone e senha, bem como gerenciar conex\xf5es sociais. Suporte para MFA e SSO em breve."}),"\n",(0,n.jsx)(a.li,{children:"Controle de acesso global: O administrador tem controle total e global sobre as configura\xe7\xf5es de acesso, podendo personalizar cada campo."}),"\n",(0,n.jsxs)(a.li,{children:["Autoriza\xe7\xe3o sem complica\xe7\xf5es: Autorizar \xe9 mais f\xe1cil do que nunca! Basta usar ",(0,n.jsx)(a.code,{children:"client.getAccessToken()"})," para obter um token de acesso opaco para OP (Logto) e anex\xe1-lo ao cabe\xe7alho de Autoriza\xe7\xe3o como ",(0,n.jsx)(a.code,{children:"Bearer <access_token>"}),"."]}),"\n"]}),"\n",(0,n.jsx)(a.p,{children:"Com a Logto Account API, voc\xea pode construir um sistema de gerenciamento de contas personalizado, como uma p\xe1gina de perfil totalmente integrada ao Logto."}),"\n",(0,n.jsx)(a.p,{children:"Alguns usos frequentes est\xe3o listados abaixo:"}),"\n",(0,n.jsxs)(a.ul,{children:["\n",(0,n.jsx)(a.li,{children:"Recuperar perfil de usu\xe1rio"}),"\n",(0,n.jsx)(a.li,{children:"Atualizar perfil de usu\xe1rio"}),"\n",(0,n.jsx)(a.li,{children:"Atualizar senha do usu\xe1rio"}),"\n",(0,n.jsx)(a.li,{children:"Atualizar identidades do usu\xe1rio, incluindo email, telefone e conex\xf5es sociais"}),"\n"]}),"\n",(0,n.jsxs)(a.p,{children:["Para saber mais sobre as APIs dispon\xedveis, visite ",(0,n.jsx)(a.a,{href:"https://openapi.logto.io/group/endpoint-my-account",children:"Logto Account API Reference"})," e ",(0,n.jsx)(a.a,{href:"https://openapi.logto.io/group/endpoint-verifications",children:"Logto Verification API Reference"}),"."]}),"\n",(0,n.jsx)(a.h2,{id:"how-to-enable-account-api",children:"Como habilitar a Account API"}),"\n",(0,n.jsxs)(a.p,{children:["Por padr\xe3o, a Account API est\xe1 desabilitada. Para habilit\xe1-la, voc\xea precisa usar a ",(0,n.jsx)(a.a,{href:"/integrate-logto/interact-with-management-api",children:"Management API"})," para atualizar as configura\xe7\xf5es globais."]}),"\n",(0,n.jsxs)(a.p,{children:["O endpoint da API ",(0,n.jsx)(a.code,{children:"/api/account-center"})," pode ser usado para recuperar e atualizar as configura\xe7\xf5es do centro de contas, voc\xea pode us\xe1-lo para habilitar ou desabilitar a Account API e personalizar os campos."]}),"\n",(0,n.jsx)(a.p,{children:"Exemplo de solicita\xe7\xe3o:"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-bash",children:'curl -X PATCH https://[tenant-id].logto.app/api/account-center \\\n  -H \'authorization: Bearer <access_token for Logto Management API>\' \\\n  -H \'content-type: application/json\' \\\n  --data-raw \'{"enabled":true,"fields":{"username":"Edit"}}\'\n'})}),"\n",(0,n.jsxs)(a.p,{children:["O campo ",(0,n.jsx)(a.code,{children:"enabled"})," \xe9 usado para habilitar ou desabilitar a Account API, e o campo ",(0,n.jsx)(a.code,{children:"fields"})," \xe9 usado para personalizar os campos, o valor pode ser ",(0,n.jsx)(a.code,{children:"Off"}),", ",(0,n.jsx)(a.code,{children:"Edit"}),", ",(0,n.jsx)(a.code,{children:"ReadOnly"}),". O valor padr\xe3o \xe9 ",(0,n.jsx)(a.code,{children:"Off"}),". A lista de campos:"]}),"\n",(0,n.jsxs)(a.ul,{children:["\n",(0,n.jsxs)(a.li,{children:[(0,n.jsx)(a.code,{children:"name"}),": O campo de nome."]}),"\n",(0,n.jsxs)(a.li,{children:[(0,n.jsx)(a.code,{children:"avatar"}),": O campo de avatar."]}),"\n",(0,n.jsxs)(a.li,{children:[(0,n.jsx)(a.code,{children:"profile"}),": O campo de perfil, incluindo seus subcampos."]}),"\n",(0,n.jsxs)(a.li,{children:[(0,n.jsx)(a.code,{children:"username"}),": O campo de nome de usu\xe1rio."]}),"\n",(0,n.jsxs)(a.li,{children:[(0,n.jsx)(a.code,{children:"email"}),": O campo de email."]}),"\n",(0,n.jsxs)(a.li,{children:[(0,n.jsx)(a.code,{children:"phone"}),": O campo de telefone."]}),"\n",(0,n.jsxs)(a.li,{children:[(0,n.jsx)(a.code,{children:"password"}),": O campo de senha, ao obter, retornar\xe1 ",(0,n.jsx)(a.code,{children:"true"})," se o usu\xe1rio tiver definido uma senha, caso contr\xe1rio, ",(0,n.jsx)(a.code,{children:"false"}),"."]}),"\n",(0,n.jsxs)(a.li,{children:[(0,n.jsx)(a.code,{children:"social"}),": Conex\xf5es sociais."]}),"\n"]}),"\n",(0,n.jsxs)(a.p,{children:["Saiba mais sobre os detalhes da API em ",(0,n.jsx)(a.a,{href:"https://openapi.logto.io/group/endpoint-account-center",children:"Logto Management API Reference"}),"."]}),"\n",(0,n.jsx)(a.h2,{id:"how-to-access-account-api",children:"Como acessar a Account API"}),"\n",(0,n.jsx)(a.h3,{id:"fetch-an-access-token",children:"Obter um token de acesso"}),"\n",(0,n.jsxs)(a.p,{children:["Ap\xf3s configurar o SDK em seu aplicativo, voc\xea pode usar o m\xe9todo ",(0,n.jsx)(a.code,{children:"client.getAccessToken()"})," para obter um token de acesso. Este token \xe9 um token opaco que pode ser usado para acessar a Account API."]}),"\n",(0,n.jsxs)(a.p,{children:["Se voc\xea n\xe3o estiver usando o SDK oficial, deve definir o ",(0,n.jsx)(a.code,{children:"resource"})," como vazio para a solicita\xe7\xe3o de concess\xe3o de token de acesso para ",(0,n.jsx)(a.code,{children:"/oidc/token"}),"."]}),"\n",(0,n.jsx)(a.h3,{id:"access-account-api-using-access-token",children:"Acessar a Account API usando o token de acesso"}),"\n",(0,n.jsxs)(a.p,{children:["Voc\xea deve colocar o token de acesso no campo ",(0,n.jsx)(a.code,{children:"Authorization"})," dos cabe\xe7alhos HTTP com o formato Bearer (",(0,n.jsx)(a.code,{children:"Bearer YOUR_TOKEN"}),") ao interagir com a Account API."]}),"\n",(0,n.jsx)(a.p,{children:"Um exemplo para obter as informa\xe7\xf5es da conta do usu\xe1rio:"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-bash",children:"curl https://[tenant-id].logto.app/api/my-account \\\n  -H 'authorization: Bearer <access_token>'\n"})}),"\n",(0,n.jsx)(a.h2,{id:"manage-basic-account-information",children:"Gerenciar informa\xe7\xf5es b\xe1sicas da conta"}),"\n",(0,n.jsx)(a.h3,{id:"retrieve-user-account-information",children:"Recuperar informa\xe7\xf5es da conta do usu\xe1rio"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-bash",children:"curl https://[tenant-id].logto.app/api/my-account \\\n  -H 'authorization: Bearer <access_token>'\n"})}),"\n",(0,n.jsx)(a.p,{children:"O corpo da resposta seria assim:"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-json",children:'{\n  "id": "...",\n  "username": "...",\n  "name": "...",\n  "avatar": "..."\n}\n'})}),"\n",(0,n.jsx)(a.p,{children:"Os campos da resposta podem variar dependendo das configura\xe7\xf5es do centro de contas."}),"\n",(0,n.jsx)(a.h3,{id:"update-basic-account-information",children:"Atualizar informa\xe7\xf5es b\xe1sicas da conta"}),"\n",(0,n.jsx)(a.p,{children:"As informa\xe7\xf5es b\xe1sicas da conta incluem o nome de usu\xe1rio, nome, avatar e perfil."}),"\n",(0,n.jsxs)(a.p,{children:["Para atualizar o nome de usu\xe1rio, nome e avatar, voc\xea pode usar o endpoint ",(0,n.jsx)(a.code,{children:"PATCH /api/my-account"}),"."]}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-bash",children:'curl -X PATCH https://[tenant-id].logto.app/api/my-account \\\n  -H \'authorization: Bearer <access_token>\' \\\n  -H \'content-type: application/json\' \\\n  --data-raw \'{"username":"...","name":"...","avatar":"..."}\'\n'})}),"\n",(0,n.jsxs)(a.p,{children:["Para atualizar o perfil, voc\xea pode usar o endpoint ",(0,n.jsx)(a.code,{children:"PATCH /api/my-account/profile"}),"."]}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-bash",children:'curl -X PATCH https://[tenant-id].logto.app/api/my-account/profile \\\n  -H \'authorization: Bearer <access_token>\' \\\n  -H \'content-type: application/json\' \\\n  --data-raw \'{"familyName":"...","givenName":"..."}\'\n'})}),"\n",(0,n.jsx)(a.h2,{id:"manage-identifiers-and-other-sensitive-information",children:"Gerenciar identificadores e outras informa\xe7\xf5es sens\xedveis"}),"\n",(0,n.jsx)(a.p,{children:"Por raz\xf5es de seguran\xe7a, a Account API requer outra camada de autoriza\xe7\xe3o para as opera\xe7\xf5es que envolvem identificadores e outras informa\xe7\xf5es sens\xedveis."}),"\n",(0,n.jsx)(a.h3,{id:"get-a-verification-record-id",children:"Obter um id de registro de verifica\xe7\xe3o"}),"\n",(0,n.jsx)(a.p,{children:"Primeiro, voc\xea precisa obter um id de registro de verifica\xe7\xe3o, isso pode ser usado para verificar a identidade do usu\xe1rio ao atualizar identificadores."}),"\n",(0,n.jsx)(a.p,{children:"Para obter um id de registro de verifica\xe7\xe3o, voc\xea pode verificar a senha do usu\xe1rio ou enviar um c\xf3digo de verifica\xe7\xe3o para o email ou telefone do usu\xe1rio."}),"\n",(0,n.jsx)(a.h4,{id:"verify-the-users-password",children:"Verificar a senha do usu\xe1rio"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-bash",children:"curl -X POST https://[tenant-id].logto.app/api/verifications/password \\\n  -H 'authorization: Bearer <access_token>' \\\n  -H 'content-type: application/json' \\\n  --data-raw '{\"password\":\"...\"}'\n"})}),"\n",(0,n.jsx)(a.p,{children:"O corpo da resposta seria assim:"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-json",children:'{\n  "verificationRecordId": "...",\n  "expiresAt": "..."\n}\n'})}),"\n",(0,n.jsx)(a.h4,{id:"verify-by-sending-a-verification-code-to-the-users-email-or-phone",children:"Verificar enviando um c\xf3digo de verifica\xe7\xe3o para o email ou telefone do usu\xe1rio"}),"\n",(0,n.jsx)(a.admonition,{type:"note",children:(0,n.jsxs)(a.p,{children:["Para usar este m\xe9todo, voc\xea precisa ",(0,n.jsx)(a.a,{href:"/connectors/email-connectors/",children:"configurar o conector de email"})," ou ",(0,n.jsx)(a.a,{href:"/connectors/sms-connectors/",children:"conector de SMS"}),", e certificar-se de que o template ",(0,n.jsx)(a.code,{children:"UserPermissionValidation"})," est\xe1 configurado."]})}),"\n",(0,n.jsx)(a.p,{children:"Tomando o email como exemplo, solicite um novo c\xf3digo de verifica\xe7\xe3o e obtenha o id de registro de verifica\xe7\xe3o:"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-bash",children:'curl -X POST https://[tenant-id].logto.app/api/verifications/verification-code \\\n  -H \'authorization: Bearer <access_token>\' \\\n  -H \'content-type: application/json\' \\\n  --data-raw \'{"identifier":{"type":"email","value":"..."}}\'\n'})}),"\n",(0,n.jsx)(a.p,{children:"O corpo da resposta seria assim:"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-json",children:'{\n  "verificationRecordId": "...",\n  "expiresAt": "..."\n}\n'})}),"\n",(0,n.jsx)(a.p,{children:"Ao receber o c\xf3digo de verifica\xe7\xe3o, voc\xea pode us\xe1-lo para atualizar o status de verifica\xe7\xe3o do registro de verifica\xe7\xe3o."}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-bash",children:'curl -X PATCH https://[tenant-id].logto.app/api/verifications/verification-code/verify \\\n  -H \'authorization: Bearer <access_token>\' \\\n  -H \'content-type: application/json\' \\\n  --data-raw \'{"identifier":{"type":"email","value":"..."},"verificationId":"...","code":"123456"}\'\n'})}),"\n",(0,n.jsx)(a.p,{children:"Ap\xf3s verificar o c\xf3digo, voc\xea pode agora usar o id de registro de verifica\xe7\xe3o para atualizar o identificador do usu\xe1rio."}),"\n",(0,n.jsx)(a.h3,{id:"send-request-with-verification-record-id",children:"Enviar solicita\xe7\xe3o com id de registro de verifica\xe7\xe3o"}),"\n",(0,n.jsxs)(a.p,{children:["Ao enviar uma solicita\xe7\xe3o para atualizar o identificador do usu\xe1rio, voc\xea precisa anexar o id de registro de verifica\xe7\xe3o ao cabe\xe7alho da solicita\xe7\xe3o com o campo ",(0,n.jsx)(a.code,{children:"logto-verification-id"}),"."]}),"\n",(0,n.jsx)(a.h3,{id:"update-or-link-new-email",children:"Atualizar ou vincular novo email"}),"\n",(0,n.jsx)(a.admonition,{type:"note",children:(0,n.jsxs)(a.p,{children:["Para usar este m\xe9todo, voc\xea precisa ",(0,n.jsx)(a.a,{href:"/connectors/email-connectors/",children:"configurar o conector de email"}),", e certificar-se de que o template ",(0,n.jsx)(a.code,{children:"BindNewIdentifier"})," est\xe1 configurado."]})}),"\n",(0,n.jsx)(a.p,{children:"Para atualizar ou vincular um novo email, voc\xea deve primeiro provar a propriedade do email."}),"\n",(0,n.jsxs)(a.p,{children:["Chame o endpoint ",(0,n.jsx)(a.code,{children:"POST /api/verifications/verification-code"})," para solicitar um c\xf3digo de verifica\xe7\xe3o."]}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-bash",children:'curl -X POST https://[tenant-id].logto.app/api/verifications/verification-code \\\n  -H \'authorization: Bearer <access_token>\' \\\n  -H \'content-type: application/json\' \\\n  --data-raw \'{"identifier":{"type":"email","value":"..."}}\'\n'})}),"\n",(0,n.jsxs)(a.p,{children:["Voc\xea encontrar\xe1 um ",(0,n.jsx)(a.code,{children:"verificationId"})," na resposta e receber\xe1 um c\xf3digo de verifica\xe7\xe3o no email, use-o para verificar o email."]}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-bash",children:'curl -X PATCH https://[tenant-id].logto.app/api/verifications/verification-code/verify \\\n  -H \'authorization: Bearer <access_token>\' \\\n  -H \'content-type: application/json\' \\\n  --data-raw \'{"identifier":{"type":"email","value":"..."},"verificationId":"...","code":"..."}\'\n'})}),"\n",(0,n.jsxs)(a.p,{children:["Ap\xf3s verificar o c\xf3digo, voc\xea pode agora atualizar o email do usu\xe1rio, definir o ",(0,n.jsx)(a.code,{children:"verificationId"})," no corpo da solicita\xe7\xe3o como ",(0,n.jsx)(a.code,{children:"newIdentifierVerificationRecordId"}),"."]}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-bash",children:"curl -X PATCH https://[tenant-id].logto.app/api/my-account/primary-email \\\n  -H 'authorization: Bearer <access_token>' \\\n  -H 'logto-verification-id: <verification_record_id>' \\\n  -H 'content-type: application/json' \\\n  --data-raw '{\"email\":\"...\",\"newIdentifierVerificationRecordId\":\"...\"}'\n"})}),"\n",(0,n.jsx)(a.h3,{id:"remove-the-users-email",children:"Remover o email do usu\xe1rio"}),"\n",(0,n.jsxs)(a.p,{children:["Para remover o email do usu\xe1rio, voc\xea pode usar o endpoint ",(0,n.jsx)(a.code,{children:"DELETE /api/my-account/primary-email"}),"."]}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-bash",children:"curl -X DELETE https://[tenant-id].logto.app/api/my-account/primary-email \\\n  -H 'authorization: Bearer <access_token>' \\\n  -H 'logto-verification-id: <verification_record_id>'\n"})}),"\n",(0,n.jsx)(a.h3,{id:"manage-phone",children:"Gerenciar telefone"}),"\n",(0,n.jsx)(a.admonition,{type:"note",children:(0,n.jsxs)(a.p,{children:["Para usar este m\xe9todo, voc\xea precisa ",(0,n.jsx)(a.a,{href:"/connectors/sms-connectors/",children:"configurar o conector de SMS"}),", e certificar-se de que o template ",(0,n.jsx)(a.code,{children:"BindNewIdentifier"})," est\xe1 configurado."]})}),"\n",(0,n.jsxs)(a.p,{children:["Semelhante \xe0 atualiza\xe7\xe3o de email, voc\xea pode usar o endpoint ",(0,n.jsx)(a.code,{children:"PATCH /api/my-account/primary-phone"})," para atualizar ou vincular um novo telefone. E usar o endpoint ",(0,n.jsx)(a.code,{children:"DELETE /api/my-account/primary-phone"})," para remover o telefone do usu\xe1rio."]}),"\n",(0,n.jsx)(a.h3,{id:"link-a-new-social-connection",children:"Vincular uma nova conex\xe3o social"}),"\n",(0,n.jsx)(a.p,{children:"Para vincular uma nova conex\xe3o social, primeiro voc\xea deve solicitar uma URL de autoriza\xe7\xe3o:"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-bash",children:'curl -X POST https://[tenant-id].logto.app/api/verifications/social \\\n  -H \'authorization: Bearer <access_token>\' \\\n  -H \'content-type: application/json\' \\\n  --data-raw \'{"connectorId":"...","redirectUri":"...","state":"..."}\'\n'})}),"\n",(0,n.jsxs)(a.ul,{children:["\n",(0,n.jsxs)(a.li,{children:[(0,n.jsx)(a.code,{children:"connectorId"}),": O ID do ",(0,n.jsx)(a.a,{href:"/connectors/social-connectors/",children:"conector social"}),"."]}),"\n",(0,n.jsxs)(a.li,{children:[(0,n.jsx)(a.code,{children:"redirectUri"}),": O URI de redirecionamento ap\xf3s o usu\xe1rio autorizar o aplicativo, voc\xea deve hospedar uma p\xe1gina da web neste URL e capturar o callback."]}),"\n",(0,n.jsxs)(a.li,{children:[(0,n.jsx)(a.code,{children:"state"}),": O estado a ser retornado ap\xf3s o usu\xe1rio autorizar o aplicativo, \xe9 uma string aleat\xf3ria usada para prevenir ataques CSRF."]}),"\n"]}),"\n",(0,n.jsxs)(a.p,{children:["Na resposta, voc\xea encontrar\xe1 um ",(0,n.jsx)(a.code,{children:"verificationRecordId"}),", guarde-o para uso posterior."]}),"\n",(0,n.jsxs)(a.p,{children:["Ap\xf3s o usu\xe1rio autorizar o aplicativo, voc\xea receber\xe1 um callback no ",(0,n.jsx)(a.code,{children:"redirectUri"})," com o par\xe2metro ",(0,n.jsx)(a.code,{children:"state"}),". Ent\xe3o, voc\xea pode usar o endpoint ",(0,n.jsx)(a.code,{children:"POST /api/verifications/social/verify"})," para verificar a conex\xe3o social."]}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-bash",children:'curl -X POST https://[tenant-id].logto.app/api/verifications/social/verify \\\n  -H \'authorization: Bearer <access_token>\' \\\n  -H \'content-type: application/json\' \\\n  --data-raw \'{"connectorData":"...","verificationRecordId":"..."}\'\n'})}),"\n",(0,n.jsxs)(a.p,{children:["O ",(0,n.jsx)(a.code,{children:"connectorData"})," s\xe3o os dados retornados pelo conector social ap\xf3s o usu\xe1rio autorizar o aplicativo, voc\xea precisa analisar e obter os par\xe2metros de consulta do ",(0,n.jsx)(a.code,{children:"redirectUri"})," em sua p\xe1gina de callback e envolv\xea-los como um JSON como o valor do campo ",(0,n.jsx)(a.code,{children:"connectorData"}),"."]}),"\n",(0,n.jsxs)(a.p,{children:["Finalmente, voc\xea pode usar o endpoint ",(0,n.jsx)(a.code,{children:"PATCH /api/my-account/identities"})," para vincular a conex\xe3o social."]}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-bash",children:"curl -X PATCH https://[tenant-id].logto.app/api/my-account/identities \\\n  -H 'authorization: Bearer <access_token>' \\\n  -H 'logto-verification-id: <verification_record_id>' \\\n  -H 'content-type: application/json' \\\n  --data-raw '{\"newIdentifierVerificationRecordId\":\"...\"}'\n"})}),"\n",(0,n.jsx)(a.h3,{id:"remove-a-social-connection",children:"Remover uma conex\xe3o social"}),"\n",(0,n.jsxs)(a.p,{children:["Para remover uma conex\xe3o social, voc\xea pode usar o endpoint ",(0,n.jsx)(a.code,{children:"DELETE /api/my-account/identities"}),"."]}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-bash",children:"curl -X DELETE https://[tenant-id].logto.app/api/my-account/identities/[connector_target_id] \\\n  -H 'authorization: Bearer <access_token>' \\\n  -H 'logto-verification-id: <verification_record_id>'\n"})})]})}function u(e={}){const{wrapper:a}={...(0,r.R)(),...e.components};return a?(0,n.jsx)(a,{...e,children:(0,n.jsx)(l,{...e})}):l(e)}},79621:(e,a,o)=>{o.d(a,{R:()=>c,x:()=>s});var i=o(58101);const n={},r=i.createContext(n);function c(e){const a=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(a):{...a,...e}}),[a,e])}function s(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:c(e.components),i.createElement(r.Provider,{value:a},e.children)}}}]);