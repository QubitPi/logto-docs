"use strict";(self.webpackChunk_logto_docs=self.webpackChunk_logto_docs||[]).push([[52491],{57340:(e,o,a)=>{a.r(o),a.d(o,{assets:()=>d,contentTitle:()=>t,default:()=>m,frontMatter:()=>r,metadata:()=>n,toc:()=>c});const n=JSON.parse('{"id":"end-user-flows/organization-experience/invite-organization-members","title":"Convidar membros da organiza\xe7\xe3o","description":"Como um aplicativo de multi-organiza\xe7\xe3o, um requisito comum \xe9 convidar membros para sua organiza\xe7\xe3o. Neste guia, vamos orient\xe1-lo atrav\xe9s dos passos e detalhes t\xe9cnicos para implementar esse recurso em seu aplicativo.","source":"@site/i18n/pt-BR/docusaurus-plugin-content-docs/current/end-user-flows/organization-experience/invite-organization-members.mdx","sourceDirName":"end-user-flows/organization-experience","slug":"/end-user-flows/organization-experience/invite-organization-members","permalink":"/pt-BR/end-user-flows/organization-experience/invite-organization-members","draft":false,"unlisted":false,"editUrl":"https://github.com/logto-io/docs/tree/master/i18n/pt-BR/docusaurus-plugin-content-docs/current/end-user-flows/organization-experience/invite-organization-members.mdx","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"docsSidebar","previous":{"title":"Criar organiza\xe7\xe3o","permalink":"/pt-BR/end-user-flows/organization-experience/create-organization"},"next":{"title":"Gerenciamento de organiza\xe7\xe3o","permalink":"/pt-BR/end-user-flows/organization-experience/organization-management"}}');var i=a(25105),s=a(79621);const r={sidebar_position:2},t="Convidar membros da organiza\xe7\xe3o",d={},c=[{value:"Vis\xe3o geral do fluxo",id:"flow-overview",level:2},{value:"Criar pap\xe9is da organiza\xe7\xe3o",id:"create-organization-roles",level:2},{value:"Configurar seu conector de email",id:"configure-your-email-connector",level:2},{value:"Lidar com convites com Logto Management API",id:"handle-invitations-with-logto-management-api",level:2},{value:"Usar controle de acesso baseado em papel (RBAC) da organiza\xe7\xe3o para gerenciar permiss\xf5es de usu\xe1rio",id:"use-organization-role-based-access-control-rbac-to-manage-user-permissions",level:2},{value:"Lidar com atualiza\xe7\xf5es de escopo em tokens de organiza\xe7\xe3o",id:"handle-scope-updates-in-organization-tokens",level:2},{value:"Revogar escopos existentes",id:"revoking-existing-scopes",level:3},{value:"Conceder novos escopos",id:"granting-new-scopes",level:3},{value:"Conceder novos escopos j\xe1 definidos em seu sistema de autentica\xe7\xe3o",id:"grant-new-scopes-that-already-defined-in-your-auth-system",level:4},{value:"Conceder novos escopos que s\xe3o rec\xe9m-introduzidos em seu sistema de autentica\xe7\xe3o",id:"grant-new-scopes-that-are-newly-introduced-your-auth-system",level:4},{value:"Implementar verifica\xe7\xe3o de permiss\xe3o em tempo real e atualizar token de organiza\xe7\xe3o",id:"implement-real-time-permission-check-and-update-organization-token",level:3},{value:"Recursos relacionados",id:"related-resources",level:2}];function l(e){const o={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",mermaid:"mermaid",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components},{Url:a}=o;return a||function(e,o){throw new Error("Expected "+(o?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Url",!0),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.header,{children:(0,i.jsx)(o.h1,{id:"convidar-membros-da-organiza\xe7\xe3o",children:"Convidar membros da organiza\xe7\xe3o"})}),"\n",(0,i.jsx)(o.p,{children:"Como um aplicativo de multi-organiza\xe7\xe3o, um requisito comum \xe9 convidar membros para sua organiza\xe7\xe3o. Neste guia, vamos orient\xe1-lo atrav\xe9s dos passos e detalhes t\xe9cnicos para implementar esse recurso em seu aplicativo."}),"\n",(0,i.jsx)(o.h2,{id:"flow-overview",children:"Vis\xe3o geral do fluxo"}),"\n",(0,i.jsx)(o.p,{children:"O processo geral \xe9 ilustrado no diagrama abaixo:"}),"\n",(0,i.jsx)(o.mermaid,{value:"sequenceDiagram\n\tParticipant U as Usu\xe1rio final\n  Participant A as Administrador da organiza\xe7\xe3o\n  Participant C as Seu aplicativo de multi-organiza\xe7\xe3o\n\tParticipant L as Logto\n\n  A ->> C: Insere email e papel do convidado\n  C ->> L: Cria convite de organiza\xe7\xe3o com Management API\n  L --\x3e> C: Retorna ID do convite\n  C ->> C: Compor link de convite com ID do convite\n  C ->> L: Solicita envio de email de convite com link de convite\n  L --\x3e> U: Envia email de convite com link de convite\n  U ->> C: Clica no link de convite e navega para sua p\xe1gina de destino,<br /> aceita ou rejeita o convite\n  C ->> L: Atualiza status do convite com Management API"}),"\n",(0,i.jsx)(o.h2,{id:"create-organization-roles",children:"Criar pap\xe9is da organiza\xe7\xe3o"}),"\n",(0,i.jsxs)(o.p,{children:["Antes de convidar membros para sua organiza\xe7\xe3o, voc\xea precisa criar pap\xe9is da organiza\xe7\xe3o. Confira o guia ",(0,i.jsx)(o.a,{href:"/authorization/organization-template/configure-organization-template",children:"Configurar modelo de organiza\xe7\xe3o"})," para instru\xe7\xf5es detalhadas."]}),"\n",(0,i.jsxs)(o.p,{children:["Neste guia, vamos criar dois pap\xe9is t\xedpicos de organiza\xe7\xe3o: ",(0,i.jsx)(o.code,{children:"admin"})," e ",(0,i.jsx)(o.code,{children:"member"}),"."]}),"\n",(0,i.jsxs)(o.p,{children:["O papel ",(0,i.jsx)(o.code,{children:"admin"})," tem acesso total a todos os recursos da organiza\xe7\xe3o, enquanto o papel ",(0,i.jsx)(o.code,{children:"member"})," tem acesso limitado. Por exemplo, cada papel pode ter um conjunto de permiss\xf5es como segue:"]}),"\n",(0,i.jsxs)(o.ul,{children:["\n",(0,i.jsxs)(o.li,{children:["Papel ",(0,i.jsx)(o.code,{children:"admin"}),":","\n",(0,i.jsxs)(o.ul,{children:["\n",(0,i.jsxs)(o.li,{children:[(0,i.jsx)(o.code,{children:"read:data"})," - Acesso de leitura a todos os recursos de dados da organiza\xe7\xe3o."]}),"\n",(0,i.jsxs)(o.li,{children:[(0,i.jsx)(o.code,{children:"write:data"})," - Acesso de escrita a todos os recursos de dados da organiza\xe7\xe3o."]}),"\n",(0,i.jsxs)(o.li,{children:[(0,i.jsx)(o.code,{children:"delete:data"})," - Acesso de exclus\xe3o a todos os recursos de dados da organiza\xe7\xe3o."]}),"\n",(0,i.jsxs)(o.li,{children:[(0,i.jsx)(o.code,{children:"invite:member"})," - Convidar membros para a organiza\xe7\xe3o."]}),"\n",(0,i.jsxs)(o.li,{children:[(0,i.jsx)(o.code,{children:"manage:member"})," - Gerenciar membros na organiza\xe7\xe3o."]}),"\n",(0,i.jsxs)(o.li,{children:[(0,i.jsx)(o.code,{children:"delete:member"})," - Remover membros da organiza\xe7\xe3o."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(o.li,{children:["Papel ",(0,i.jsx)(o.code,{children:"member"}),":","\n",(0,i.jsxs)(o.ul,{children:["\n",(0,i.jsxs)(o.li,{children:[(0,i.jsx)(o.code,{children:"read:data"})," - Acesso de leitura a todos os recursos de dados da organiza\xe7\xe3o."]}),"\n",(0,i.jsxs)(o.li,{children:[(0,i.jsx)(o.code,{children:"write:data"})," - Acesso de escrita a todos os recursos de dados da organiza\xe7\xe3o."]}),"\n",(0,i.jsxs)(o.li,{children:[(0,i.jsx)(o.code,{children:"invite:member"})," - Convidar membros para a organiza\xe7\xe3o."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(o.p,{children:["Isso pode ser feito facilmente no ",(0,i.jsx)(o.a,{href:"https://cloud.logto.io/",children:"Logto Console"}),". Voc\xea tamb\xe9m pode usar o ",(0,i.jsx)(o.a,{href:"https://openapi.logto.io/operation/operation-createorganizationrole",children:"Logto Management API"})," para criar pap\xe9is de organiza\xe7\xe3o programaticamente."]}),"\n",(0,i.jsx)(o.h2,{id:"configure-your-email-connector",children:"Configurar seu conector de email"}),"\n",(0,i.jsxs)(o.p,{children:["Como os convites s\xe3o enviados por email, certifique-se de que seu ",(0,i.jsx)(o.a,{href:"/connectors/email-connectors",children:"conector de email"})," esteja devidamente configurado. Para enviar convites, voc\xea precisa configurar um tipo de uso de ",(0,i.jsx)(o.a,{href:"/connectors/email-connectors/email-templates#email-template-types",children:"modelo de email"})," rec\xe9m-introduzido - ",(0,i.jsx)(o.code,{children:"OrganizationInvitation"}),"."]}),"\n",(0,i.jsxs)(o.p,{children:["Um modelo de email de exemplo para o tipo de uso ",(0,i.jsx)(o.code,{children:"OrganizationInvitation"})," \xe9 mostrado abaixo:"]}),"\n",(0,i.jsx)(o.pre,{children:(0,i.jsx)(o.code,{className:"language-json",children:'{\n  "subject": "Bem-vindo \xe0 minha organiza\xe7\xe3o",\n  "content": "<p>Junte-se \xe0 minha organiza\xe7\xe3o por este <a href=\\"{{link}}\\" target=\\"_blank\\">link</a>.</p>",\n  "usageType": "OrganizationInvitation",\n  "type": "text/html"\n}\n'})}),"\n",(0,i.jsxs)(o.p,{children:["O espa\xe7o reservado ",(0,i.jsx)(o.code,{children:"{{link}}"})," no conte\xfado do email ser\xe1 substitu\xeddo pelo link de convite real ao enviar o email. Neste guia, vamos supor que seria ",(0,i.jsx)(o.code,{children:"https://your-app.com/invitation/accept/{your-invitation-id}"}),"."]}),"\n",(0,i.jsx)(o.admonition,{type:"note",children:(0,i.jsxs)(o.p,{children:['O "servi\xe7o de email Logto" embutido no Logto Cloud n\xe3o suporta o tipo de uso ',(0,i.jsx)(o.code,{children:"OrganizationInvitation"})," no momento. Em vez disso, voc\xea precisa configurar seu conector de email (por exemplo, Sendgrid) e configurar o modelo ",(0,i.jsx)(o.code,{children:"OrganizationInvitation"}),"."]})}),"\n",(0,i.jsx)(o.h2,{id:"handle-invitations-with-logto-management-api",children:"Lidar com convites com Logto Management API"}),"\n",(0,i.jsx)(o.admonition,{type:"note",children:(0,i.jsxs)(o.p,{children:["Se voc\xea ainda n\xe3o configurou o Logto Management API, confira ",(0,i.jsx)(o.a,{href:"/integrate-logto/interact-with-management-api",children:"Interagir com Management API"})," para detalhes."]})}),"\n",(0,i.jsx)(o.p,{children:"Fornecemos um conjunto de APIs de gerenciamento relacionadas a convites no recurso de organiza\xe7\xf5es. Com essas APIs, voc\xea pode:"}),"\n",(0,i.jsxs)(o.ul,{children:["\n",(0,i.jsxs)(o.li,{children:["\n",(0,i.jsxs)(o.p,{children:[(0,i.jsx)(o.code,{children:"POST /api/organization-invitations"})," criar um convite de organiza\xe7\xe3o com um papel de organiza\xe7\xe3o atribu\xeddo."]}),"\n"]}),"\n",(0,i.jsxs)(o.li,{children:["\n",(0,i.jsxs)(o.p,{children:[(0,i.jsx)(o.code,{children:"POST /api/organization-invitations/{id}/message"})," enviar o convite da organiza\xe7\xe3o para o convidado por email.\nNota: Este payload de API suporta uma propriedade ",(0,i.jsx)(o.code,{children:"link"}),", voc\xea pode compor seu link de convite com base no ID do convite. Por exemplo:"]}),"\n",(0,i.jsx)(o.pre,{children:(0,i.jsx)(o.code,{className:"language-json",children:'{\n  "link": "https://your-app.com/invitation/accept/{your-invitation-id}"\n}\n'})}),"\n",(0,i.jsx)(o.p,{children:"Consequentemente, voc\xea precisa implementar uma p\xe1gina de destino quando seu convidado navegar pelo link de convite para seu aplicativo."}),"\n"]}),"\n",(0,i.jsxs)(o.li,{children:["\n",(0,i.jsxs)(o.p,{children:[(0,i.jsx)(o.code,{children:"GET /api/organization-invitations"})," & ",(0,i.jsx)(o.code,{children:"GET /api/organization-invitations/{id}"})," obter todos os seus convites ou um espec\xedfico por ID.\nNa sua p\xe1gina de destino, use essas APIs para listar todos os convites ou detalhes de um convite que um usu\xe1rio recebeu."]}),"\n"]}),"\n",(0,i.jsxs)(o.li,{children:["\n",(0,i.jsxs)(o.p,{children:[(0,i.jsx)(o.code,{children:"PUT /api/organization-invitations/{id}/status"})," aceitar ou rejeitar o convite atualizando o status do convite.\nUse esta API para lidar com a resposta do usu\xe1rio ao convite."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(o.p,{children:['Por favor, note que todas as APIs listadas acima requerem um "token de organiza\xe7\xe3o" v\xe1lido. ',(0,i.jsx)(o.a,{href:"/authorization/organization-template/protect-organization-resources#step-2-fetch-organization-token",children:"Confira este guia"})," para aprender como obter o token de organiza\xe7\xe3o."]}),"\n",(0,i.jsx)(o.h2,{id:"use-organization-role-based-access-control-rbac-to-manage-user-permissions",children:"Usar controle de acesso baseado em papel (RBAC) da organiza\xe7\xe3o para gerenciar permiss\xf5es de usu\xe1rio"}),"\n",(0,i.jsx)(o.p,{children:"Com as configura\xe7\xf5es acima, voc\xea pode agora enviar convites por email, e os convidados podem se juntar \xe0 organiza\xe7\xe3o com o papel atribu\xeddo."}),"\n",(0,i.jsx)(o.p,{children:"Usu\xe1rios com diferentes pap\xe9is de organiza\xe7\xe3o ter\xe3o diferentes escopos (permiss\xf5es) em seus tokens de organiza\xe7\xe3o. Assim, tanto seu aplicativo cliente quanto os servi\xe7os de backend devem verificar esses escopos para determinar recursos vis\xedveis e a\xe7\xf5es permitidas."}),"\n",(0,i.jsx)(o.h2,{id:"handle-scope-updates-in-organization-tokens",children:"Lidar com atualiza\xe7\xf5es de escopo em tokens de organiza\xe7\xe3o"}),"\n",(0,i.jsx)(o.admonition,{type:"note",children:(0,i.jsxs)(o.p,{children:["Certifique-se de ter integrado a organiza\xe7\xe3o com seu aplicativo. Confira o ",(0,i.jsx)(o.a,{href:"/authorization/organization-template/protect-organization-resources",children:"guia de integra\xe7\xe3o"})," para mais detalhes."]})}),"\n",(0,i.jsx)(o.p,{children:"Gerenciar atualiza\xe7\xf5es de escopo em tokens de organiza\xe7\xe3o envolve:"}),"\n",(0,i.jsx)(o.h3,{id:"revoking-existing-scopes",children:"Revogar escopos existentes"}),"\n",(0,i.jsx)(o.p,{children:"Por exemplo, rebaixar um administrador para um membro n\xe3o-administrador deve remover escopos do usu\xe1rio. Nesse caso, voc\xea pode simplesmente limpar o token de organiza\xe7\xe3o em cache e buscar um novo com token de atualiza\xe7\xe3o. Os escopos reduzidos ser\xe3o refletidos imediatamente no novo token de organiza\xe7\xe3o emitido."}),"\n",(0,i.jsx)(o.h3,{id:"granting-new-scopes",children:"Conceder novos escopos"}),"\n",(0,i.jsx)(o.p,{children:"Isso pode ser dividido em dois cen\xe1rios:"}),"\n",(0,i.jsx)(o.h4,{id:"grant-new-scopes-that-already-defined-in-your-auth-system",children:"Conceder novos escopos j\xe1 definidos em seu sistema de autentica\xe7\xe3o"}),"\n",(0,i.jsx)(o.p,{children:"Semelhante \xe0 revoga\xe7\xe3o de escopos, se o novo escopo concedido j\xe1 estiver registrado no servidor de autentica\xe7\xe3o, voc\xea pode simplesmente emitir um novo token de organiza\xe7\xe3o, e os novos escopos ser\xe3o refletidos imediatamente."}),"\n",(0,i.jsx)(o.h4,{id:"grant-new-scopes-that-are-newly-introduced-your-auth-system",children:"Conceder novos escopos que s\xe3o rec\xe9m-introduzidos em seu sistema de autentica\xe7\xe3o"}),"\n",(0,i.jsxs)(o.p,{children:["Nesse caso, voc\xea precisa acionar um processo de novo login ou novo consentimento para atualizar o token de organiza\xe7\xe3o do usu\xe1rio. Por exemplo, chamando o m\xe9todo ",(0,i.jsx)(o.code,{children:"signIn"})," no Logto SDK."]}),"\n",(0,i.jsxs)(o.p,{children:["Saiba mais sobre ",(0,i.jsx)(o.a,{href:"/authorization/organization-template/protect-organization-resources/#fetch-the-organization-token",children:"emitir um token de organiza\xe7\xe3o"}),"."]}),"\n",(0,i.jsx)(o.h3,{id:"implement-real-time-permission-check-and-update-organization-token",children:"Implementar verifica\xe7\xe3o de permiss\xe3o em tempo real e atualizar token de organiza\xe7\xe3o"}),"\n",(0,i.jsx)(o.p,{children:"Logto fornece Management API para buscar permiss\xf5es de usu\xe1rio em tempo real na organiza\xe7\xe3o."}),"\n",(0,i.jsxs)(o.ul,{children:["\n",(0,i.jsxs)(o.li,{children:[(0,i.jsx)(o.code,{children:"GET /api/organizations/{id}/users/{userId}/scopes"})," (",(0,i.jsx)(o.a,{href:"https://openapi.logto.io/operation/operation-listorganizationuserscopes",children:"Refer\xeancias de API"}),")"]}),"\n"]}),"\n",(0,i.jsx)(o.p,{children:"Voc\xea pode ent\xe3o comparar os escopos no token de organiza\xe7\xe3o do usu\xe1rio com as permiss\xf5es em tempo real para determinar se o usu\xe1rio foi promovido ou rebaixado."}),"\n",(0,i.jsxs)(o.ul,{children:["\n",(0,i.jsxs)(o.li,{children:["\n",(0,i.jsx)(o.p,{children:"Se rebaixado, voc\xea pode simplesmente limpar o token de organiza\xe7\xe3o em cache e o SDK emitir\xe1 automaticamente um novo com os escopos atualizados."}),"\n",(0,i.jsx)(o.pre,{children:(0,i.jsx)(o.code,{className:"language-ts",children:"const { clearAccessToken } = useLogto();\n\n...\n// Se os escopos em tempo real buscados tiverem menos escopos do que os escopos do token de organiza\xe7\xe3o\nawait clearAccessToken();\n"})}),"\n",(0,i.jsx)(o.p,{children:"Isso n\xe3o requer um processo de novo login ou novo consentimento. Novos tokens de organiza\xe7\xe3o ser\xe3o emitidos automaticamente pelo Logto SDK."}),"\n"]}),"\n",(0,i.jsxs)(o.li,{children:["\n",(0,i.jsx)(o.p,{children:"Se um novo escopo for introduzido em seu sistema de autentica\xe7\xe3o, acione um processo de novo login ou novo consentimento para atualizar o token de organiza\xe7\xe3o do usu\xe1rio. Vamos tomar o SDK React como exemplo:"}),"\n",(0,i.jsx)(o.pre,{children:(0,i.jsx)(o.code,{className:"language-ts",children:"const { clearAllTokens, signIn } = useLogto();\n\n...\n// Se os escopos em tempo real buscados tiverem escopos rec\xe9m-atribu\xeddos do que os escopos do token de organiza\xe7\xe3o\nawait clearAllTokens();\nsignIn({\n  redirectUri: '<your-sign-in-redirect-uri>',\n  prompt: 'consent',\n});\n"})}),"\n",(0,i.jsx)(o.p,{children:"O c\xf3digo acima acionar\xe1 uma navega\xe7\xe3o de p\xe1gina para a tela de consentimento e redirecionar\xe1 automaticamente de volta para seu aplicativo, com escopos atualizados no token de organiza\xe7\xe3o do usu\xe1rio."}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(o.h2,{id:"related-resources",children:"Recursos relacionados"}),"\n",(0,i.jsx)(a,{href:"https://blog.logto.io/implement-user-collaboration-in-your-app",children:(0,i.jsx)(o.p,{children:"Como implementamos a colabora\xe7\xe3o de usu\xe1rios dentro de um aplicativo multi-inquilino"})})]})}function m(e={}){const{wrapper:o}={...(0,s.R)(),...e.components};return o?(0,i.jsx)(o,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},79621:(e,o,a)=>{a.d(o,{R:()=>r,x:()=>t});var n=a(58101);const i={},s=n.createContext(i);function r(e){const o=n.useContext(s);return n.useMemo((function(){return"function"==typeof e?e(o):{...o,...e}}),[o,e])}function t(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),n.createElement(s.Provider,{value:o},e.children)}}}]);