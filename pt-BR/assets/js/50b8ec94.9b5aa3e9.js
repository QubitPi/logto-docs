"use strict";(self.webpackChunk_logto_docs=self.webpackChunk_logto_docs||[]).push([[4373],{64002:(e,o,s)=>{s.r(o),s.d(o,{assets:()=>d,contentTitle:()=>t,default:()=>l,frontMatter:()=>i,metadata:()=>r,toc:()=>u});const r=JSON.parse('{"id":"user-management/user-migration","title":"Migra\xe7\xe3o de usu\xe1rios","description":"Logto suporta a migra\xe7\xe3o manual de usu\xe1rios existentes de outra plataforma. Este guia mostrar\xe1 como importar usu\xe1rios existentes via Management API e falar\xe1 sobre coisas que voc\xea deve considerar antes de migrar.","source":"@site/i18n/pt-BR/docusaurus-plugin-content-docs/current/user-management/user-migration.mdx","sourceDirName":"user-management","slug":"/user-management/user-migration","permalink":"/pt-BR/user-management/user-migration","draft":false,"unlisted":false,"editUrl":"https://github.com/logto-io/docs/tree/master/i18n/pt-BR/docusaurus-plugin-content-docs/current/user-management/user-migration.mdx","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_position":5},"sidebar":"docsSidebar","previous":{"title":"Token de acesso pessoal","permalink":"/pt-BR/user-management/personal-access-token"},"next":{"title":"Gerenciamento de usu\xe1rios","permalink":"/pt-BR/user-management/"}}');var a=s(25105),n=s(79621);const i={sidebar_position:5},t="Migra\xe7\xe3o de usu\xe1rios",d={},u=[{value:"Esquema de usu\xe1rio",id:"user-schema",level:2},{value:"Hashing de senha",id:"password-hashing",level:2},{value:"Etapas para migrar",id:"steps-to-migrate",level:2},{value:"Recursos relacionados",id:"related-resources",level:2}];function c(e){const o={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,n.R)(),...e.components},{Url:s}=o;return s||function(e,o){throw new Error("Expected "+(o?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Url",!0),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.header,{children:(0,a.jsx)(o.h1,{id:"migra\xe7\xe3o-de-usu\xe1rios",children:"Migra\xe7\xe3o de usu\xe1rios"})}),"\n",(0,a.jsx)(o.p,{children:"Logto suporta a migra\xe7\xe3o manual de usu\xe1rios existentes de outra plataforma. Este guia mostrar\xe1 como importar usu\xe1rios existentes via Management API e falar\xe1 sobre coisas que voc\xea deve considerar antes de migrar."}),"\n",(0,a.jsx)(o.h2,{id:"user-schema",children:"Esquema de usu\xe1rio"}),"\n",(0,a.jsxs)(o.p,{children:["Antes de come\xe7armos, vamos dar uma olhada no ",(0,a.jsx)(o.a,{href:"/user-management/user-data/#user-profile",children:"esquema de usu\xe1rio"})," no Logto. Existem 3 partes do esquema de usu\xe1rio que voc\xea deve estar ciente:"]}),"\n",(0,a.jsxs)(o.ol,{children:["\n",(0,a.jsxs)(o.li,{children:[(0,a.jsx)(o.strong,{children:"Dados b\xe1sicos"}),": s\xe3o as informa\xe7\xf5es b\xe1sicas do perfil do usu\xe1rio, voc\xea pode corresponder os dados do seu perfil de usu\xe1rio existente."]}),"\n",(0,a.jsxs)(o.li,{children:[(0,a.jsx)(o.strong,{children:"Dados personalizados"}),": armazena informa\xe7\xf5es adicionais do usu\xe1rio, voc\xea pode usar isso para armazenar arquivos que n\xe3o conseguem corresponder aos dados b\xe1sicos."]}),"\n",(0,a.jsxs)(o.li,{children:[(0,a.jsx)(o.strong,{children:"Identidades sociais"}),": armazena as informa\xe7\xf5es do usu\xe1rio recuperadas do login social."]}),"\n"]}),"\n",(0,a.jsxs)(o.p,{children:["Voc\xea pode criar um mapa para corresponder as informa\xe7\xf5es do usu\xe1rio do seu perfil de usu\xe1rio existente aos ",(0,a.jsx)(o.strong,{children:"dados b\xe1sicos"})," e ",(0,a.jsx)(o.strong,{children:"dados personalizados"}),". Para login social, voc\xea precisar\xe1 de etapas adicionais para importar as identidades sociais, consulte a API de ",(0,a.jsx)(o.a,{href:"https://openapi.logto.io/operation/operation-createuseridentity",children:"Vincular identidade social ao usu\xe1rio"}),"."]}),"\n",(0,a.jsx)(o.h2,{id:"password-hashing",children:"Hashing de senha"}),"\n",(0,a.jsxs)(o.p,{children:["Logto usa ",(0,a.jsx)(o.a,{href:"https://en.wikipedia.org/wiki/Argon2",children:"Argon2"})," para hashear a senha do usu\xe1rio e tamb\xe9m suporta outros algoritmos como ",(0,a.jsx)(o.code,{children:"MD5"}),", ",(0,a.jsx)(o.code,{children:"SHA1"}),", ",(0,a.jsx)(o.code,{children:"SHA256"})," e ",(0,a.jsx)(o.code,{children:"Bcrypt"})," para conveni\xeancia de migra\xe7\xe3o. Esses algoritmos s\xe3o considerados inseguros, os hashes de senha correspondentes ser\xe3o migrados para Argon2 ap\xf3s o primeiro login bem-sucedido do usu\xe1rio."]}),"\n",(0,a.jsxs)(o.p,{children:["Se voc\xea precisar de suporte para algum algoritmo de hashing espec\xedfico, ",(0,a.jsx)(o.a,{href:"https://logto.io/contact",children:"por favor, nos avise"}),"."]}),"\n",(0,a.jsx)(o.h2,{id:"steps-to-migrate",children:"Etapas para migrar"}),"\n",(0,a.jsxs)(o.ol,{children:["\n",(0,a.jsxs)(o.li,{children:["\n",(0,a.jsxs)(o.p,{children:[(0,a.jsx)(o.strong,{children:"Prepare os dados do usu\xe1rio"}),"\nVoc\xea deve primeiro exportar os dados do usu\xe1rio da sua plataforma existente e, em seguida, mapear as informa\xe7\xf5es do usu\xe1rio para o esquema de usu\xe1rio do Logto. Recomendamos que voc\xea prepare os dados mapeados em formato JSON. Aqui est\xe1 um exemplo dos dados do usu\xe1rio:"]}),"\n",(0,a.jsx)(o.pre,{children:(0,a.jsx)(o.code,{className:"language-json",children:'[\n  {\n    "username": "user1",\n    "passwordDigest": "password-encrypted",\n    "passwordAlgorithm": "SHA256"\n  },\n  {\n    "username": "user2",\n    "passwordDigest": "password-encrypted",\n    "passwordAlgorithm": "SHA256"\n  }\n]\n'})}),"\n"]}),"\n",(0,a.jsxs)(o.li,{children:["\n",(0,a.jsxs)(o.p,{children:[(0,a.jsx)(o.strong,{children:"Crie um tenant Logto"}),"\nVoc\xea precisar\xe1 configurar um tenant no Logto. Voc\xea pode usar Logto Cloud ou Logto OSS. Se ainda n\xe3o fez isso, consulte o guia ",(0,a.jsx)(o.a,{href:"/introduction/set-up-logto-cloud/#create-logto-tenant",children:"Configurar Logto cloud"}),"."]}),"\n"]}),"\n",(0,a.jsxs)(o.li,{children:["\n",(0,a.jsxs)(o.p,{children:[(0,a.jsx)(o.strong,{children:"Configurar a conex\xe3o da Management API"}),"\nUsaremos a Management API para importar os dados do usu\xe1rio, voc\xea pode consultar a ",(0,a.jsx)(o.a,{href:"/integrate-logto/interact-with-management-api",children:"Management API"})," para aprender como configurar a conex\xe3o em seu ambiente de desenvolvimento."]}),"\n"]}),"\n",(0,a.jsxs)(o.li,{children:["\n",(0,a.jsxs)(o.p,{children:[(0,a.jsx)(o.strong,{children:"Importar os dados do usu\xe1rio"}),"\nRecomenda-se preparar um script para importar os dados do usu\xe1rio um por um, chamaremos a API ",(0,a.jsx)(o.a,{href:"https://openapi.logto.io/operation/operation-createuser",children:"create user"})," para importar os dados do usu\xe1rio. Aqui est\xe1 um exemplo do script:"]}),"\n",(0,a.jsx)(o.pre,{children:(0,a.jsx)(o.code,{className:"language-jsx",children:"const users = require('./users.json');\n\nconst importUsers = async () => {\n  for (const user of users) {\n    try {\n      await fetch('https://[tenant_id].logto.app/api/users', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: 'Bearer [your-access-token]',\n        },\n        body: JSON.stringify(user),\n      });\n      // Aguarde um pouco para evitar limite de taxa\n      await new Promise((resolve) => setTimeout(resolve, 200));\n    } catch (error) {\n      console.error(`Falha ao importar usu\xe1rio ${user.username}: ${error.message}`);\n    }\n  }\n};\n\nimportUsers();\n"})}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(o.p,{children:["Observe que o ponto da API tem limite de taxa, voc\xea deve adicionar uma pausa entre cada solicita\xe7\xe3o para evitar o limite de taxa. Por favor, reveja nossa p\xe1gina de ",(0,a.jsx)(o.a,{href:"/integrate-logto/interact-with-management-api/#rate-limit",children:"limites de taxa"})," para detalhes."]}),"\n",(0,a.jsxs)(o.p,{children:["Se voc\xea tiver uma grande quantidade de dados de usu\xe1rios (100k+ usu\xe1rios), voc\xea pode ",(0,a.jsx)(o.a,{href:"https://logto.io/contact",children:"entrar em contato conosco"})," para aumentar o limite de taxa."]}),"\n",(0,a.jsx)(o.h2,{id:"related-resources",children:"Recursos relacionados"}),"\n",(0,a.jsx)(s,{href:"https://blog.logto.io/general-migration-guide",children:(0,a.jsx)(o.p,{children:"Uma diretriz geral para migrar seu banco de dados de usu\xe1rios existente para o Logto"})})]})}function l(e={}){const{wrapper:o}={...(0,n.R)(),...e.components};return o?(0,a.jsx)(o,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}},79621:(e,o,s)=>{s.d(o,{R:()=>i,x:()=>t});var r=s(58101);const a={},n=r.createContext(a);function i(e){const o=r.useContext(n);return r.useMemo((function(){return"function"==typeof e?e(o):{...o,...e}}),[o,e])}function t(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),r.createElement(n.Provider,{value:o},e.children)}}}]);