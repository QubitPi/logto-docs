"use strict";(self.webpackChunk_logto_docs=self.webpackChunk_logto_docs||[]).push([[40526],{31467:(e,a,o)=>{o.r(a),o.d(a,{assets:()=>c,contentTitle:()=>r,default:()=>p,frontMatter:()=>t,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"quick-starts/database/supabase/README","title":"Adicionar autentica\xe7\xe3o ao seu aplicativo Supabase","description":"No\xe7\xf5es b\xe1sicas do Supabase \\\\","source":"@site/i18n/pt-BR/docusaurus-plugin-content-docs/current/quick-starts/database/supabase/README.mdx","sourceDirName":"quick-starts/database/supabase","slug":"/quick-starts/supabase","permalink":"/pt-BR/quick-starts/supabase","draft":false,"unlisted":false,"editUrl":"https://github.com/logto-io/docs/tree/master/i18n/pt-BR/docusaurus-plugin-content-docs/current/quick-starts/database/supabase/README.mdx","tags":[],"version":"current","frontMatter":{"slug":"/quick-starts/supabase","sidebar_label":"Supabase","sidebar_custom_props":{"description":"Integrar Logto com Supabase.","logoFilename":"supabase.svg"}},"sidebar":"quickStartSidebar","previous":{"title":"Hasura","permalink":"/pt-BR/quick-starts/hasura"},"next":{"title":"OIDC (Aplicativo de terceiros)","permalink":"/pt-BR/quick-starts/third-party-oidc"}}');var i=o(25105),n=o(79621);const t={slug:"/quick-starts/supabase",sidebar_label:"Supabase",sidebar_custom_props:{description:"Integrar Logto com Supabase.",logoFilename:"supabase.svg"}},r="Adicionar autentica\xe7\xe3o ao seu aplicativo Supabase",c={},d=[{value:"No\xe7\xf5es b\xe1sicas do Supabase",id:"supabase-basics",level:2},{value:"Adicionar dados do usu\xe1rio \xe0s solicita\xe7\xf5es do Supabase",id:"add-user-data-to-the-supabase-requests",level:3},{value:"Criar pol\xedtica de Seguran\xe7a em N\xedvel de Linha",id:"create-row-level-security-policy",level:3},{value:"Processo b\xe1sico de integra\xe7\xe3o com Logto",id:"basic-integration-process-with-logto",level:3},{value:"Integra\xe7\xe3o com Logto",id:"logto-integration",level:2},{value:"Aplicativo Nativo ou SPA",id:"native-app-or-spa",level:3},{value:"Aplicativo web tradicional",id:"traditional-web-app",level:3},{value:"Aplicativo m\xe1quina para m\xe1quina",id:"machine-to-machine-app",level:3}];function u(e){const a={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",...(0,n.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.header,{children:(0,i.jsx)(a.h1,{id:"adicionar-autentica\xe7\xe3o-ao-seu-aplicativo-supabase",children:"Adicionar autentica\xe7\xe3o ao seu aplicativo Supabase"})}),"\n",(0,i.jsx)(a.h2,{id:"supabase-basics",children:"No\xe7\xf5es b\xe1sicas do Supabase"}),"\n",(0,i.jsxs)(a.p,{children:["Supabase utiliza ",(0,i.jsx)(a.a,{href:"https://www.postgresql.org/docs/current/ddl-rowsecurity.html",children:"Seguran\xe7a em N\xedvel de Linha do Postgres"})," para controlar permiss\xf5es de acesso a dados. Em termos simples, ao criar pol\xedticas de Seguran\xe7a em N\xedvel de Linha para tabelas no banco de dados, podemos restringir e gerenciar quem pode ler, escrever e atualizar dados em uma tabela."]}),"\n",(0,i.jsx)(a.p,{children:'Vamos supor que voc\xea tenha uma tabela chamada "posts" no seu banco de dados, com o seguinte conte\xfado:'}),"\n",(0,i.jsx)(a.p,{children:(0,i.jsx)(a.img,{alt:"Tabela de posts",src:o(14892).A+"",width:"2000",height:"339"})}),"\n",(0,i.jsxs)(a.p,{children:["O campo ",(0,i.jsx)(a.code,{children:"user_id"})," na tabela representa o usu\xe1rio a quem cada dado de post pertence. Voc\xea pode restringir cada usu\xe1rio a acessar apenas seus pr\xf3prios dados de post com base no campo ",(0,i.jsx)(a.code,{children:"user_id"}),"."]}),"\n",(0,i.jsx)(a.p,{children:"No entanto, antes que isso possa ser implementado, o Supabase precisa ser capaz de identificar o usu\xe1rio atual acessando o banco de dados."}),"\n",(0,i.jsx)(a.h3,{id:"add-user-data-to-the-supabase-requests",children:"Adicionar dados do usu\xe1rio \xe0s solicita\xe7\xf5es do Supabase"}),"\n",(0,i.jsx)(a.p,{children:"Gra\xe7as ao suporte do Supabase para JWT, quando nosso aplicativo interage com o Supabase, podemos gerar um JWT contendo dados do usu\xe1rio usando o segredo JWT fornecido pelo Supabase. Em seguida, usamos esse JWT como o cabe\xe7alho de Autentica\xe7\xe3o ao fazer solicita\xe7\xf5es. Ao receber a solicita\xe7\xe3o, o Supabase verifica automaticamente a validade do JWT e permite o acesso aos dados contidos nele durante os processos subsequentes."}),"\n",(0,i.jsx)(a.p,{children:'Primeiramente, podemos obter o segredo JWT fornecido pelo Supabase nas "Configura\xe7\xf5es do Projeto" no painel do Supabase:'}),"\n",(0,i.jsx)(a.p,{children:(0,i.jsx)(a.img,{alt:"P\xe1gina de configura\xe7\xf5es da API do Supabase",src:o(48401).A+"",width:"2000",height:"1018"})}),"\n",(0,i.jsx)(a.p,{children:"Ent\xe3o, quando usamos o SDK do Supabase para fazer solicita\xe7\xf5es ao Supabase, utilizamos esse segredo para gerar nosso JWT e anex\xe1-lo como o cabe\xe7alho de Autentica\xe7\xe3o \xe0 solicita\xe7\xe3o. (Observe que esse processo ocorre dentro do servi\xe7o de backend do seu aplicativo, e o segredo JWT nunca deve ser exposto a terceiros)."}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-jsx",children:"import { createClient } from '@supabase/supabase-js';\nimport { sign } from 'jsonwebtoken';\n\n/*\n * Nota:\n * Voc\xea pode encontrar o SUPABASE_URL, SUPABASE_ANON_KEY no mesmo lugar onde encontra o JWT Secret.\n */\nconst SUPABASE_URL = process.env.SUPABASE_URL;\nconst SUPABASE_ANON_KEY = process.env.SUPABASE_ANON_KEY;\n\nconst SUPABASE_JWT_SECRET = process.env.SUPABASE_JWT_SECRET;\n\nexport const getSupabaseClient = (userId) => {\n  const jwtPayload = {\n    userId,\n  };\n\n  const jwt = sign(jwtPayload, SUPABASE_JWT_SECRET, {\n    expiresIn: '1h', // Apenas para demonstra\xe7\xe3o\n  });\n\n  const client = createClient(SUPABASE_URL, SUPABASE_ANON_KEY, {\n    global: {\n      headers: {\n        Authorization: `Bearer ${jwt}`,\n      },\n    },\n  });\n\n  return client;\n};\n"})}),"\n",(0,i.jsx)(a.p,{children:"Em seguida, navegue at\xe9 o Editor SQL no painel do Supabase e crie uma fun\xe7\xe3o para recuperar o userId carregado na solicita\xe7\xe3o:"}),"\n",(0,i.jsx)(a.p,{children:(0,i.jsx)(a.img,{alt:"Criar fun\xe7\xe3o de obten\xe7\xe3o de ID do usu\xe1rio",src:o(99048).A+"",width:"2000",height:"1054"})}),"\n",(0,i.jsx)(a.p,{children:"O c\xf3digo usado na imagem \xe9 o seguinte:"}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-sql",children:"create or replace function auth.user_id() returns text as $$\n  select nullif(current_setting('request.jwt.claims', true)::json->>'userId', '')::text;\n$$ language sql stable;\n"})}),"\n",(0,i.jsxs)(a.p,{children:["Como mostra o c\xf3digo, no Supabase, voc\xea pode recuperar o payload do JWT que geramos chamando ",(0,i.jsx)(a.code,{children:"request.jwt.claims"}),". O campo ",(0,i.jsx)(a.code,{children:"userId"})," dentro do payload \xe9 o valor que definimos."]}),"\n",(0,i.jsx)(a.p,{children:"Com essa fun\xe7\xe3o, o Supabase pode determinar o usu\xe1rio que est\xe1 atualmente acessando o banco de dados."}),"\n",(0,i.jsx)(a.h3,{id:"create-row-level-security-policy",children:"Criar pol\xedtica de Seguran\xe7a em N\xedvel de Linha"}),"\n",(0,i.jsxs)(a.p,{children:["Em seguida, podemos criar uma pol\xedtica de Seguran\xe7a em N\xedvel de Linha para restringir cada usu\xe1rio a acessar apenas seus pr\xf3prios dados de post com base no campo ",(0,i.jsx)(a.code,{children:"user_id"})," na tabela de posts."]}),"\n",(0,i.jsxs)(a.ol,{children:["\n",(0,i.jsx)(a.li,{children:"Navegue at\xe9 a p\xe1gina do Editor de Tabelas no painel do Supabase e selecione a tabela de posts."}),"\n",(0,i.jsx)(a.li,{children:'Clique em "Add RLS Policy" no topo da tabela.'}),"\n",(0,i.jsx)(a.li,{children:'Na janela solicitada, clique em "Create policy".'}),"\n",(0,i.jsx)(a.li,{children:"Insira um Nome de Pol\xedtica e escolha o comando de Pol\xedtica SELECT."}),"\n",(0,i.jsxs)(a.li,{children:["No bloco ",(0,i.jsx)(a.code,{children:"using"})," do c\xf3digo abaixo, insira:"]}),"\n"]}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-sql",children:"auth.user_id() = user_id\n"})}),"\n",(0,i.jsx)(a.p,{children:(0,i.jsx)(a.img,{alt:"Criar pol\xedtica de RLS",src:o(42369).A+"",width:"2000",height:"2330"})}),"\n",(0,i.jsx)(a.p,{children:"Ao aproveitar essas pol\xedticas, o controle de acesso a dados dentro do Supabase \xe9 alcan\xe7ado."}),"\n",(0,i.jsxs)(a.p,{children:["Em aplicativos do mundo real, voc\xea criaria v\xe1rias pol\xedticas para restringir a\xe7\xf5es do usu\xe1rio, como inser\xe7\xe3o e modifica\xe7\xe3o de dados. No entanto, isso est\xe1 al\xe9m do escopo deste artigo. Para mais informa\xe7\xf5es sobre Seguran\xe7a em N\xedvel de Linha (RLS), consulte ",(0,i.jsx)(a.a,{href:"https://supabase.com/docs/guides/database/postgres/row-level-security",children:"Proteja seus dados usando Seguran\xe7a em N\xedvel de Linha do Postgres"}),"."]}),"\n",(0,i.jsx)(a.h3,{id:"basic-integration-process-with-logto",children:"Processo b\xe1sico de integra\xe7\xe3o com Logto"}),"\n",(0,i.jsx)(a.p,{children:"Como mencionado anteriormente, porque o Supabase utiliza RLS para seu controle de acesso, a chave para integrar com Logto (ou qualquer outro servi\xe7o de autentica\xe7\xe3o) est\xe1 em obter o id do usu\xe1rio autorizado e envi\xe1-lo para o Supabase. Todo o processo \xe9 ilustrado no diagrama abaixo:"}),"\n",(0,i.jsx)(a.mermaid,{value:"sequenceDiagram\n\tParticipant U as Usu\xe1rio final\n\tParticipant Logto\n\tParticipant B as Servi\xe7o de backend do aplicativo\n\tParticipant Supabase\n\n\tU->>Logto: Fazer login com Logto\n\tLogto--\x3e>U: `access_token`\n\tU->>B: Solicitar dados com `access_token`\n\tB->>B: Recuperar `user_id` do `access_token`\n\tB->>B: Gerar jwt por `user_id` & `Supabase JWT secret`\n\tB->>Supabase: Solicitar dados com jwt\n\tSupabase--\x3e>B: Dados respondidos\n\tB--\x3e>U: Dados respondidos"}),"\n",(0,i.jsx)(a.p,{children:"Em seguida, explicaremos como integrar Logto com Supabase com base neste diagrama de processo."}),"\n",(0,i.jsx)(a.h2,{id:"logto-integration",children:"Integra\xe7\xe3o com Logto"}),"\n",(0,i.jsx)(a.p,{children:"Logto oferece guias de integra\xe7\xe3o para v\xe1rias frameworks e linguagens de programa\xe7\xe3o."}),"\n",(0,i.jsxs)(a.p,{children:["Geralmente, aplicativos constru\xeddos com essas frameworks e linguagens se enquadram em categorias como aplicativos Nativos, SPA (aplicativos de p\xe1gina \xfanica), aplicativos web tradicionais e aplicativos M2M (m\xe1quina para m\xe1quina). Voc\xea pode visitar a p\xe1gina de ",(0,i.jsx)(a.a,{href:"/quick-starts",children:"in\xedcios r\xe1pidos do Logto"})," para integrar Logto ao seu aplicativo com base na pilha de tecnologia que voc\xea est\xe1 usando. Depois, siga as instru\xe7\xf5es abaixo para integrar Logto ao seu projeto com base no tipo do seu aplicativo."]}),"\n",(0,i.jsx)(a.h3,{id:"native-app-or-spa",children:"Aplicativo Nativo ou SPA"}),"\n",(0,i.jsx)(a.p,{children:"Tanto aplicativos nativos quanto SPAs s\xe3o executados no seu dispositivo, e as credenciais (token de acesso) obtidas ap\xf3s o login s\xe3o armazenadas localmente no seu dispositivo."}),"\n",(0,i.jsx)(a.p,{children:"Portanto, ao integrar seu aplicativo com Supabase, voc\xea precisa interagir com o Supabase atrav\xe9s do seu servi\xe7o de backend, pois n\xe3o pode expor informa\xe7\xf5es sens\xedveis (como o segredo JWT do Supabase) no dispositivo de cada usu\xe1rio."}),"\n",(0,i.jsxs)(a.p,{children:["Vamos supor que voc\xea est\xe1 construindo seu SPA usando React e Express. Voc\xea integrou com sucesso o Logto ao seu aplicativo seguindo o ",(0,i.jsx)(a.a,{href:"/quick-starts/react",children:"Guia do Logto React SDK"})," (voc\xea pode consultar o c\xf3digo em nosso ",(0,i.jsx)(a.a,{href:"https://github.com/logto-io/js/tree/master/packages/react-sample",children:"exemplo de react"}),"). Al\xe9m disso, voc\xea adicionou valida\xe7\xe3o do token de acesso do Logto ao seu servidor backend de acordo com a documenta\xe7\xe3o ",(0,i.jsx)(a.a,{href:"/authorization/api-resources/node-express",children:"Proteja sua API no Node (Express)"}),"."]}),"\n",(0,i.jsx)(a.p,{children:"Em seguida, voc\xea usar\xe1 o token de acesso obtido do Logto para solicitar dados do usu\xe1rio ao seu servidor backend:"}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-jsx",children:"import { useLogto } from '@logto/react';\nimport { useState, useEffect } from 'react';\nimport PostList from './PostList';\n\nconst endpoint = '<https://www.mysite.com/api/posts>';\nconst resource = '<https://www.mysite.com/api>';\n\nfunction PostPage() {\n  const { isAuthenticated, getAccessToken } = useLogto();\n  const [posts, setPosts] = useState();\n\n  useEffect(() => {\n    const fetchPosts = async () => {\n      const response = await fetch(endpoint, {\n        headers: {\n          Authorization: `Bearer ${await getAccessToken(resource)}`,\n        },\n      });\n      setPosts(response.json());\n    };\n\n    if (isAuthenticated) {\n      void fetchPosts();\n    }\n  }, [isAuthenticated, getAccessToken]);\n\n  return <PostList posts={posts} />;\n}\n\nexport default PostPage;\n"})}),"\n",(0,i.jsx)(a.p,{children:"No seu servidor backend, voc\xea j\xe1 extraiu o id do usu\xe1rio logado do token de acesso usando middleware:"}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-jsx",children:"// auth-middleware.ts\nimport { createRemoteJWKSet, jwtVerify } from 'jose';\n\n//...\n\nexport const verifyAuthFromRequest = async (ctx, next) => {\n  // Extrair o token\n  const token = extractBearerTokenFromHeaders(ctx.request.headers);\n\n  const { payload } = await jwtVerify(\n    token, // O token Bearer bruto extra\xeddo do cabe\xe7alho da solicita\xe7\xe3o\n    createRemoteJWKSet(new URL('https://<your-logto-domain>/oidc/jwks')), // gerar um jwks usando jwks_uri consultado do servidor Logto\n    {\n      // emissor esperado do token, deve ser emitido pelo servidor Logto\n      issuer: 'https://<your-logto-domain>/oidc',\n      // token de p\xfablico esperado, deve ser o indicador de recurso da API atual\n      audience: '<your request listener resource indicator>',\n    }\n  );\n\n  // se voc\xea estiver usando RBAC\n  assert(payload.scope.includes('some_scope'));\n\n  // l\xf3gica de payload personalizada\n  ctx.auth = {\n    userId: payload.sub,\n  };\n\n  return next();\n};\n"})}),"\n",(0,i.jsxs)(a.p,{children:["Agora, voc\xea pode usar o ",(0,i.jsx)(a.code,{children:"getSupabaseClient"})," descrito acima para anexar o ",(0,i.jsx)(a.code,{children:"userId"})," ao JWT usado em solicita\xe7\xf5es subsequentes ao Supabase. Alternativamente, voc\xea pode criar um middleware para criar um cliente Supabase para solicita\xe7\xf5es que precisam interagir com o Supabase:"]}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-jsx",children:"export const withSupabaseClient = async (ctx, next) => {\n  ctx.supabase = getSupabaseClient(ctx.auth.userId);\n\n  return next();\n};\n"})}),"\n",(0,i.jsxs)(a.p,{children:["No fluxo de processamento subsequente, voc\xea pode chamar diretamente ",(0,i.jsx)(a.code,{children:"ctx.supabase"})," para interagir com o Supabase:"]}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-jsx",children:"const fetchPosts = async (ctx) => {\n  const { data } = await ctx.supabase.from('posts').select('*');\n\n  return data;\n};\n"})}),"\n",(0,i.jsx)(a.p,{children:"Neste c\xf3digo, o Supabase retornar\xe1 apenas os dados de post pertencentes ao usu\xe1rio atual com base nas pol\xedticas definidas anteriormente."}),"\n",(0,i.jsx)(a.h3,{id:"traditional-web-app",children:"Aplicativo web tradicional"}),"\n",(0,i.jsx)(a.p,{children:"A principal diferen\xe7a entre um aplicativo web tradicional e um aplicativo Nativo ou SPA \xe9 que um aplicativo web tradicional renderiza e atualiza p\xe1ginas exclusivamente no servidor web. Portanto, as credenciais do usu\xe1rio s\xe3o gerenciadas diretamente pelo servidor web, enquanto em aplicativos Nativos e SPAs, elas residem no dispositivo do usu\xe1rio."}),"\n",(0,i.jsx)(a.p,{children:"Ao integrar Logto com um aplicativo web tradicional no Supabase, voc\xea pode recuperar diretamente o id do usu\xe1rio logado do backend."}),"\n",(0,i.jsxs)(a.p,{children:["Tomando um projeto Next.js como exemplo, ap\xf3s integrar Logto ao seu projeto seguindo o ",(0,i.jsx)(a.a,{href:"/quick-starts/next-app-router",children:"Guia do SDK Next.js"}),", voc\xea pode usar o SDK do Logto para recuperar informa\xe7\xf5es do usu\xe1rio e construir o JWT correspondente para interagir com o Supabase."]}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-jsx",children:"import { getLogtoContext } from '@logto/next-server-actions';\nimport { logtoConfig } from '@/logto';\nimport { getSupabaseClient } from '@/utils';\nimport PostList from './PostList';\n\nexport default async function PostPage() {\n  const { claims } = await getLogtoContext(logtoConfig);\n\n  // O valor `sub` em `claims` \xe9 o id do usu\xe1rio.\n  const supabase = getSupabaseClient(claims.sub);\n\n  const { data: posts } = await supabase.from('posts').select('*');\n\n  return <PostList posts={posts} />;\n}\n"})}),"\n",(0,i.jsx)(a.h3,{id:"machine-to-machine-app",children:"Aplicativo m\xe1quina para m\xe1quina"}),"\n",(0,i.jsx)(a.p,{children:"M\xe1quina para m\xe1quina (M2M) \xe9 frequentemente usado quando seu aplicativo precisa se comunicar diretamente com servidores de recursos, como um servi\xe7o est\xe1tico que busca posts di\xe1rios, etc."}),"\n",(0,i.jsxs)(a.p,{children:["Voc\xea pode usar o guia ",(0,i.jsx)(a.a,{href:"/quick-starts/m2m",children:"M\xe1quina para m\xe1quina: Autentica\xe7\xe3o com Logto"}),' para autentica\xe7\xe3o de aplicativos m\xe1quina para m\xe1quina. A integra\xe7\xe3o entre Supabase e aplicativos m\xe1quina para m\xe1quina \xe9 semelhante \xe0 de aplicativos Nativos e SPAs (como descrito na se\xe7\xe3o "',(0,i.jsx)(a.a,{href:"#native-app-or-spa",children:"Aplicativo Nativo ou SPA"}),'"). Envolve obter um token de acesso do Logto e, em seguida, valid\xe1-lo atrav\xe9s de uma API backend protegida.']}),"\n",(0,i.jsxs)(a.p,{children:["No entanto, \xe9 importante notar que aplicativos Nativos e SPAs s\xe3o tipicamente projetados para usu\xe1rios finais, ent\xe3o o id do usu\xe1rio obtido representa o pr\xf3prio usu\xe1rio. No entanto, o token de acesso para aplicativos m\xe1quina para m\xe1quina representa o pr\xf3prio aplicativo, e o campo ",(0,i.jsx)(a.code,{children:"sub"})," no payload do token de acesso \xe9 o id do cliente do aplicativo M2M, n\xe3o um usu\xe1rio espec\xedfico. Portanto, durante o desenvolvimento, \xe9 crucial distinguir quais dados s\xe3o destinados a aplicativos M2M."]}),"\n",(0,i.jsxs)(a.p,{children:["Al\xe9m disso, se voc\xea quiser que um aplicativo M2M espec\xedfico acesse o Supabase em nome de todo o servi\xe7o para contornar as restri\xe7\xf5es de RLS, voc\xea pode usar o segredo ",(0,i.jsx)(a.code,{children:"service_role"})," do Supabase para criar um cliente Supabase. Isso \xe9 \xfatil quando voc\xea deseja realizar algumas tarefas administrativas ou automatizadas que exigem acesso a todos os dados sem serem restringidas pelas pol\xedticas de Seguran\xe7a em N\xedvel de Linha configuradas para usu\xe1rios individuais."]}),"\n",(0,i.jsxs)(a.p,{children:["O segredo ",(0,i.jsx)(a.code,{children:"service_role"})," pode ser encontrado na mesma p\xe1gina que o segredo JWT:"]}),"\n",(0,i.jsx)(a.p,{children:(0,i.jsx)(a.img,{alt:"Segredo do papel de servi\xe7o",src:o(74491).A+"",width:"2000",height:"948"})}),"\n",(0,i.jsxs)(a.p,{children:["Ao criar um cliente Supabase, use o segredo ",(0,i.jsx)(a.code,{children:"service_role"}),", ent\xe3o este cliente pode acessar todos os dados no banco de dados:"]}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-jsx",children:"import { createClient } from '@supabase/supabase-js';\n\n// ...\nconst SUPABASE_SERVICE_ROLE_SECRET = process.env.SUPABASE_SERVICE_ROLE_SECRET;\n\nconst client = createClient(SUPABASE_URL, SUPABASE_SERVICE_ROLE_SECRET, {\n  // ...op\xe7\xf5es\n});\n"})})]})}function p(e={}){const{wrapper:a}={...(0,n.R)(),...e.components};return a?(0,i.jsx)(a,{...e,children:(0,i.jsx)(u,{...e})}):u(e)}},99048:(e,a,o)=>{o.d(a,{A:()=>s});const s=o.p+"assets/images/create-get-user-id-function-a82403fda6b70a5ee944d2ddc6058fdd.webp"},42369:(e,a,o)=>{o.d(a,{A:()=>s});const s=o.p+"assets/images/create-rls-policy-d25a9bcf6966e995cd80e49dbd1a5739.webp"},14892:(e,a,o)=>{o.d(a,{A:()=>s});const s=o.p+"assets/images/posts-table-d61708b17c77e0f3e3c23edad626b553.webp"},74491:(e,a,o)=>{o.d(a,{A:()=>s});const s=o.p+"assets/images/service-role-secret-b671423defc58517bd481227b24da422.webp"},48401:(e,a,o)=>{o.d(a,{A:()=>s});const s=o.p+"assets/images/supabase-api-settings-b81e56237542563029e32cffc158bead.webp"},79621:(e,a,o)=>{o.d(a,{R:()=>t,x:()=>r});var s=o(58101);const i={},n=s.createContext(i);function t(e){const a=s.useContext(n);return s.useMemo((function(){return"function"==typeof e?e(a):{...a,...e}}),[a,e])}function r(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),s.createElement(n.Provider,{value:a},e.children)}}}]);