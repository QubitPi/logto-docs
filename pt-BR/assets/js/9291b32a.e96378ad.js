"use strict";(self.webpackChunk_logto_docs=self.webpackChunk_logto_docs||[]).push([[71238],{94603:(e,o,s)=>{s.r(o),s.d(o,{assets:()=>t,contentTitle:()=>d,default:()=>u,frontMatter:()=>n,metadata:()=>a,toc:()=>c});const a=JSON.parse('{"id":"developers/webhooks/README","title":"Webhooks","description":"O Webhook do Logto fornece notifica\xe7\xf5es em tempo real para v\xe1rios eventos, incluindo altera\xe7\xf5es em conta de usu\xe1rio, papel, permiss\xe3o, organiza\xe7\xe3o, papel da organiza\xe7\xe3o, permiss\xe3o da organiza\xe7\xe3o e intera\xe7\xe3o do usu\xe1rio.","source":"@site/i18n/pt-BR/docusaurus-plugin-content-docs/current/developers/webhooks/README.mdx","sourceDirName":"developers/webhooks","slug":"/developers/webhooks/","permalink":"/pt-BR/developers/webhooks/","draft":false,"unlisted":false,"editUrl":"https://github.com/logto-io/docs/tree/master/i18n/pt-BR/docusaurus-plugin-content-docs/current/developers/webhooks/README.mdx","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_position":5},"sidebar":"docsSidebar","previous":{"title":"Chaves de assinatura","permalink":"/pt-BR/developers/signing-keys"},"next":{"title":"Configurar Webhooks","permalink":"/pt-BR/developers/webhooks/configure-webhooks"}}');var r=s(25105),i=s(79621);const n={sidebar_position:5},d="Webhooks",t={},c=[{value:"Por que usar Webhook?",id:"why-use-webhook",level:2},{value:"Termos",id:"terms",level:2},{value:"Perguntas frequentes",id:"faqs",level:2},{value:"O Logto suporta webhooks sincronizados?",id:"does-logto-support-synced-webhooks",level:3},{value:"Como lidar com a mudan\xe7a de permiss\xe3o do usu\xe1rio?",id:"how-to-deal-with-user-permission-change",level:3},{value:"Como depurar o timeout do webhook?",id:"how-to-debug-webhook-timeout",level:3},{value:"Posso obter o endere\xe7o IP do cliente dos webhooks <code>PostSignIn</code>?",id:"can-i-get-the-client-ip-address-from-postsignin-webhooks",level:3},{value:"Recursos relacionados",id:"related-resources",level:2}];function l(e){const o={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",mermaid:"mermaid",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components},{Details:s,Url:a}=o;return s||h("Details",!0),a||h("Url",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.header,{children:(0,r.jsx)(o.h1,{id:"webhooks",children:"Webhooks"})}),"\n",(0,r.jsxs)(o.p,{children:["O ",(0,r.jsx)(o.a,{href:"https://auth.wiki/webhook",children:"Webhook"})," do Logto fornece notifica\xe7\xf5es em tempo real para v\xe1rios eventos, incluindo altera\xe7\xf5es em ",(0,r.jsx)(o.a,{href:"/user-management/user-data",children:"conta de usu\xe1rio"}),", ",(0,r.jsx)(o.a,{href:"/authorization/role-based-access-control#roles",children:"papel"}),", ",(0,r.jsx)(o.a,{href:"/authorization/role-based-access-control#permissionsscopes",children:"permiss\xe3o"}),", ",(0,r.jsx)(o.a,{href:"/organizations/organization-data",children:"organiza\xe7\xe3o"}),", ",(0,r.jsx)(o.a,{href:"/authorization/organization-template#organization-role",children:"papel da organiza\xe7\xe3o"}),", ",(0,r.jsx)(o.a,{href:"/authorization/organization-template#organization-permission",children:"permiss\xe3o da organiza\xe7\xe3o"})," e ",(0,r.jsx)(o.a,{href:"/end-user-flows",children:"intera\xe7\xe3o do usu\xe1rio"}),"."]}),"\n",(0,r.jsxs)(o.p,{children:["Quando um evento \xe9 acionado, o Logto envia uma solicita\xe7\xe3o HTTP para o Endpoint URL que voc\xea fornece, contendo informa\xe7\xf5es detalhadas sobre o evento, como ID do usu\xe1rio, nome de usu\xe1rio, email e outros detalhes relevantes (para mais informa\xe7\xf5es sobre os dados inclu\xeddos no payload e no cabe\xe7alho, consulte ",(0,r.jsx)(o.a,{href:"/developers/webhooks/webhooks-request",children:"Solicita\xe7\xe3o de Webhook"}),"). Seu aplicativo pode processar essa solicita\xe7\xe3o e realizar a\xe7\xf5es personalizadas, como enviar um email ou atualizar dados no banco de dados."]}),"\n",(0,r.jsx)(o.p,{children:"Continuamos adicionando mais eventos com base nas necessidades dos usu\xe1rios. Se voc\xea tiver requisitos espec\xedficos para o seu neg\xf3cio, por favor, nos avise."}),"\n",(0,r.jsx)(o.h2,{id:"why-use-webhook",children:"Por que usar Webhook?"}),"\n",(0,r.jsx)(o.p,{children:"Webhooks oferecem comunica\xe7\xe3o em tempo real entre aplicativos, eliminando a necessidade de polling e permitindo atualiza\xe7\xf5es imediatas de dados. Eles simplificam a integra\xe7\xe3o de aplicativos e a automa\xe7\xe3o de fluxos de trabalho sem c\xf3digo complexo ou APIs propriet\xe1rias."}),"\n",(0,r.jsx)(o.p,{children:"Aqui est\xe3o alguns exemplos de casos de uso comuns de Webhook para CIAM:"}),"\n",(0,r.jsxs)(o.ul,{children:["\n",(0,r.jsxs)(o.li,{children:[(0,r.jsx)(o.strong,{children:"Enviar emails:"})," Configure um Webhook para enviar um email de boas-vindas a novos usu\xe1rios ap\xf3s o registro ou notificar administradores quando um usu\xe1rio fizer login de um novo dispositivo ou local."]}),"\n",(0,r.jsxs)(o.li,{children:[(0,r.jsx)(o.strong,{children:"Enviar notifica\xe7\xf5es:"})," Configure um Webhook para acionar um assistente virtual com seu sistema CRM para fornecer suporte ao cliente em tempo real quando os usu\xe1rios se inscreverem."]}),"\n",(0,r.jsxs)(o.li,{children:[(0,r.jsx)(o.strong,{children:"Realizar chamadas adicionais de API"}),": Configure um Webhook para verificar o acesso do usu\xe1rio verificando seu dom\xednio de email ou endere\xe7o IP e, em seguida, use o Logto Management API para atribuir pap\xe9is apropriados com permiss\xf5es de recursos."]}),"\n",(0,r.jsxs)(o.li,{children:[(0,r.jsx)(o.strong,{children:"Sincroniza\xe7\xe3o de dados:"})," Configure Webhook para manter o aplicativo atualizado sobre altera\xe7\xf5es, como suspens\xf5es ou exclus\xf5es de contas de usu\xe1rio."]}),"\n",(0,r.jsxs)(o.li,{children:[(0,r.jsx)(o.strong,{children:"Gerar relat\xf3rios"}),": Configure um Webhook para receber dados de atividade de login de usu\xe1rios e aproveite-os para criar relat\xf3rios sobre engajamento ou padr\xf5es de uso dos usu\xe1rios."]}),"\n"]}),"\n",(0,r.jsx)(o.h2,{id:"terms",children:"Termos"}),"\n",(0,r.jsxs)(o.table,{children:[(0,r.jsx)(o.thead,{children:(0,r.jsxs)(o.tr,{children:[(0,r.jsx)(o.th,{children:"Item"}),(0,r.jsx)(o.th,{children:"Descri\xe7\xe3o"})]})}),(0,r.jsxs)(o.tbody,{children:[(0,r.jsxs)(o.tr,{children:[(0,r.jsx)(o.td,{children:"Evento"}),(0,r.jsx)(o.td,{children:"Quando uma a\xe7\xe3o espec\xedfica \xe9 realizada, ela acionar\xe1 um evento de hook com um tipo espec\xedfico. Por exemplo, o Logto emitir\xe1 um evento de hook PostRegister quando o usu\xe1rio concluir o processo de inscri\xe7\xe3o e criar uma nova conta."})]}),(0,r.jsxs)(o.tr,{children:[(0,r.jsx)(o.td,{children:"Hook"}),(0,r.jsx)(o.td,{children:"Uma \xfanica ou s\xe9rie de a\xe7\xf5es que se conectam a um evento espec\xedfico. A a\xe7\xe3o pode ser chamar API, executar trechos de c\xf3digo, etc."})]}),(0,r.jsxs)(o.tr,{children:[(0,r.jsx)(o.td,{children:"Webhook"}),(0,r.jsx)(o.td,{children:"Um subtipo de hook que indica a chamada de uma API com o payload do evento."})]}),(0,r.jsxs)(o.tr,{children:[(0,r.jsx)(o.td,{children:"Digamos que um desenvolvedor queira enviar uma notifica\xe7\xe3o quando um usu\xe1rio fizer login via um novo dispositivo, o desenvolvedor pode adicionar um webhook que chama sua API de servi\xe7o de seguran\xe7a para o evento PostSignIn."}),(0,r.jsx)(o.td,{})]})]})]}),"\n",(0,r.jsxs)(o.p,{children:["Aqui est\xe1 um exemplo de habilita\xe7\xe3o de dois webhooks para o evento ",(0,r.jsx)(o.code,{children:"PostSignIn"})," no Logto:"]}),"\n",(0,r.jsx)(o.mermaid,{value:"graph LR\n  subgraph Logto\n    SF(Login conclu\xeddo)\n    PS(P\xf3s-login)\n    WH2(Webhook 2)\n    WH1(Webhook 1)\n  end\n\n  subgraph Service 2\n    E2(Endpoint)\n  end\n\n  subgraph Service 1\n    E1(Endpoint)\n  end\n\n  SF --\x3e|Acionar| PS\n  PS --\x3e WH1\n  PS --\x3e WH2\n  WH1 ---\x3e|Chamada de API POST| E1\n  WH2 ---\x3e|Chamada de API POST| E2\n"}),"\n",(0,r.jsx)(o.h2,{id:"faqs",children:"Perguntas frequentes"}),"\n",(0,r.jsxs)(s,{children:[(0,r.jsx)("summary",{children:(0,r.jsx)(o.h3,{id:"does-logto-support-synced-webhooks",children:"O Logto suporta webhooks sincronizados?"})}),(0,r.jsx)(o.p,{children:"Embora webhooks sincronizados tornassem o fluxo de login do usu\xe1rio mais suave, ainda n\xe3o os suportamos (mas suportaremos no futuro). Portanto, cen\xe1rios que dependem de webhooks sincronizados atualmente exigem diferentes solu\xe7\xf5es alternativas. Se voc\xea tiver alguma d\xfavida, n\xe3o hesite em nos contatar."})]}),"\n",(0,r.jsxs)(s,{children:[(0,r.jsx)("summary",{children:(0,r.jsx)(o.h3,{id:"how-to-deal-with-user-permission-change",children:"Como lidar com a mudan\xe7a de permiss\xe3o do usu\xe1rio?"})}),(0,r.jsxs)(o.p,{children:["Veja o guia ",(0,r.jsx)(o.a,{href:"/authorization/role-based-access-control/protect-api-resources-with-rbac/#optional-handle-user-permission-change",children:"Gerenciar mudan\xe7a de permiss\xe3o do usu\xe1rio"}),"."]})]}),"\n",(0,r.jsxs)(s,{children:[(0,r.jsx)("summary",{children:(0,r.jsx)(o.h3,{id:"how-to-debug-webhook-timeout",children:"Como depurar o timeout do webhook?"})}),(0,r.jsx)(o.p,{children:"Para o endpoint que recebe Webhooks, ele deve retornar uma resposta 2xx o mais r\xe1pido poss\xedvel para informar ao Logto que o Webhook foi recebido com sucesso. Como diferentes usu\xe1rios t\xeam l\xf3gicas de processamento muito diferentes para Webhooks, tarefas excessivamente complexas podem levar v\xe1rios segundos, causando o timeout do Webhook do Logto. A melhor pr\xe1tica \xe9 manter sua pr\xf3pria fila de eventos; ao receber o Webhook do Logto, insira o evento na fila e retorne uma resposta 2xx ao Logto. Em seguida, deixe seu pr\xf3prio trabalhador processar as tarefas na fila passo a passo. Se o trabalhador encontrar um erro, lide com ele em seu pr\xf3prio servidor."})]}),"\n",(0,r.jsxs)(s,{children:[(0,r.jsx)("summary",{children:(0,r.jsxs)(o.h3,{id:"can-i-get-the-client-ip-address-from-postsignin-webhooks",children:["Posso obter o endere\xe7o IP do cliente dos webhooks ",(0,r.jsx)(o.code,{children:"PostSignIn"}),"?"]})}),(0,r.jsx)(o.p,{children:"Sim, voc\xea pode obter o endere\xe7o IP, agentes de usu\xe1rio, etc., no payload do Webhook. Se voc\xea precisar de informa\xe7\xf5es que atualmente n\xe3o s\xe3o suportadas, pode criar solicita\xe7\xf5es de recursos em problemas do GitHub ou nos contatar."})]}),"\n",(0,r.jsx)(o.h2,{id:"related-resources",children:"Recursos relacionados"}),"\n",(0,r.jsx)(a,{href:"https://blog.logto.io/webhooks-vs-polling",children:"Webhooks vs. polling"})]})}function u(e={}){const{wrapper:o}={...(0,i.R)(),...e.components};return o?(0,r.jsx)(o,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}function h(e,o){throw new Error("Expected "+(o?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},79621:(e,o,s)=>{s.d(o,{R:()=>n,x:()=>d});var a=s(58101);const r={},i=a.createContext(r);function n(e){const o=a.useContext(i);return a.useMemo((function(){return"function"==typeof e?e(o):{...o,...e}}),[o,e])}function d(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:n(e.components),a.createElement(i.Provider,{value:o},e.children)}}}]);