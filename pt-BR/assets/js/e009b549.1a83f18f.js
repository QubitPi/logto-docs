"use strict";(self.webpackChunk_logto_docs=self.webpackChunk_logto_docs||[]).push([[635],{62310:(e,o,n)=>{n.d(o,{Ay:()=>a,RM:()=>r});var s=n(25105),i=n(79621);const r=[];function t(e){const o={a:"a",p:"p",...(0,i.R)(),...e.components};return(0,s.jsxs)(o.p,{children:["Recomendamos ler ",(0,s.jsx)(o.a,{href:"/authorization/role-based-access-control",children:"\ud83d\udd10 Controle de Acesso Baseado em Papel (RBAC)"})," primeiro para entender os conceitos b\xe1sicos do RBAC do Logto e como configurar corretamente os recursos de API."]})}function a(e={}){const{wrapper:o}={...(0,i.R)(),...e.components};return o?(0,s.jsx)(o,{...e,children:(0,s.jsx)(t,{...e})}):t(e)}},42097:(e,o,n)=>{n.d(o,{Ay:()=>a,RM:()=>r});var s=n(25105),i=n(79621);const r=[{value:"Ponto de verifica\xe7\xe3o: Teste seu aplicativo",id:"checkpoint-test-your-application",level:3}];function t(e){const o={h3:"h3",li:"li",ol:"ol",p:"p",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.h3,{id:"checkpoint-test-your-application",children:"Ponto de verifica\xe7\xe3o: Teste seu aplicativo"}),"\n",(0,s.jsx)(o.p,{children:"Agora, voc\xea pode testar seu aplicativo:"}),"\n",(0,s.jsxs)(o.ol,{children:["\n",(0,s.jsx)(o.li,{children:"Execute seu aplicativo, voc\xea ver\xe1 o bot\xe3o de login."}),"\n",(0,s.jsx)(o.li,{children:"Clique no bot\xe3o de login, o SDK iniciar\xe1 o processo de login e redirecionar\xe1 voc\xea para a p\xe1gina de login do Logto."}),"\n",(0,s.jsx)(o.li,{children:"Ap\xf3s fazer login, voc\xea ser\xe1 redirecionado de volta para seu aplicativo e ver\xe1 o bot\xe3o de logout."}),"\n",(0,s.jsx)(o.li,{children:"Clique no bot\xe3o de logout para limpar o armazenamento de tokens e sair."}),"\n"]})]})}function a(e={}){const{wrapper:o}={...(0,i.R)(),...e.components};return o?(0,s.jsx)(o,{...e,children:(0,s.jsx)(t,{...e})}):t(e)}},78766:(e,o,n)=>{n.d(o,{Ay:()=>a,RM:()=>r});var s=n(25105),i=n(79621);const r=[{value:"Reivindica\xe7\xf5es que precisam de solicita\xe7\xf5es de rede",id:"claims-that-need-network-requests",level:3}];function t(e){const o={code:"code",h3:"h3",p:"p",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[e.type?null:(()=>{throw new Error("props.type is required when importing _claims-need-network-request.mdx")})(),"\n",(0,s.jsx)(o.h3,{id:"claims-that-need-network-requests",children:"Reivindica\xe7\xf5es que precisam de solicita\xe7\xf5es de rede"}),"\n",(0,s.jsxs)(o.p,{children:["Para evitar o incha\xe7o do Token de ID (ID token), algumas reivindica\xe7\xf5es requerem solicita\xe7\xf5es de rede para serem buscadas. Por exemplo, a reivindica\xe7\xe3o ",(0,s.jsx)(o.code,{children:"custom_data"})," n\xe3o est\xe1 inclu\xedda no objeto do usu\xe1rio, mesmo que seja solicitada nos escopos. Para acessar essas reivindica\xe7\xf5es, ",(0,s.jsxs)("span",{children:["method"===e.type&&(0,s.jsxs)(s.Fragment,{children:["voc\xea pode usar o m\xe9todo ",(0,s.jsx)("code",{children:e.method})]}),"option"===e.type&&(0,s.jsxs)(s.Fragment,{children:["voc\xea pode configurar a op\xe7\xe3o ",(0,s.jsx)("code",{children:e.configOption})]})]}),":"]}),"\n",e.codeSnippet,"\n","method"===e.type&&(0,s.jsxs)(s.Fragment,{children:["Este m\xe9todo buscar\xe1 as informa\xe7\xf5es do usu\xe1rio solicitando ao"," ",(0,s.jsx)("a",{href:"https://openid.net/specs/openid-connect-core-1_0.html#UserInfo",children:"endpoint userinfo"}),". Para saber mais sobre os escopos e reivindica\xe7\xf5es dispon\xedveis, veja a se\xe7\xe3o"," ",(0,s.jsx)("a",{href:"#scopes-and-claims",children:"Escopos e reivindica\xe7\xf5es"}),"."]}),"\n","option"===e.type&&(0,s.jsxs)(s.Fragment,{children:["Ao configurar ",(0,s.jsx)("code",{children:e.configOption}),", o SDK buscar\xe1 as informa\xe7\xf5es do usu\xe1rio solicitando ao"," ",(0,s.jsx)("a",{href:"https://openid.net/specs/openid-connect-core-1_0.html#UserInfo",children:"endpoint userinfo"})," ","ap\xf3s o usu\xe1rio fazer login, e ",(0,s.jsx)("code",{children:e.value??"user.custom_data"})," estar\xe1 dispon\xedvel assim que a solicita\xe7\xe3o for conclu\xedda."]})]})}function a(e={}){const{wrapper:o}={...(0,i.R)(),...e.components};return o?(0,s.jsx)(o,{...e,children:(0,s.jsx)(t,{...e})}):t(e)}},40626:(e,o,n)=>{n.d(o,{Ay:()=>a,RM:()=>r});var s=n(25105),i=n(79621);const r=[];function t(e){const o={a:"a",admonition:"admonition",code:"code",p:"p",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.p,{children:"Depois de configurar os recursos de API, voc\xea pode adicion\xe1-los ao configurar o Logto em seu aplicativo:"}),"\n",e.configResourcesCode,"\n",(0,s.jsx)(o.p,{children:"Cada recurso de API tem suas pr\xf3prias permiss\xf5es (escopos)."}),"\n",(0,s.jsxs)(o.p,{children:["Por exemplo, o recurso ",(0,s.jsx)(o.code,{children:"https://shopping.your-app.com/api"})," tem as permiss\xf5es ",(0,s.jsx)(o.code,{children:"shopping:read"})," e ",(0,s.jsx)(o.code,{children:"shopping:write"}),", e o recurso ",(0,s.jsx)(o.code,{children:"https://store.your-app.com/api"})," tem as permiss\xf5es ",(0,s.jsx)(o.code,{children:"store:read"})," e ",(0,s.jsx)(o.code,{children:"store:write"}),"."]}),"\n",(0,s.jsx)(o.p,{children:"Para solicitar essas permiss\xf5es, voc\xea pode adicion\xe1-las ao configurar o Logto em seu aplicativo:"}),"\n",e.configResourcesWithScopesCode,"\n",(0,s.jsxs)(o.p,{children:["Voc\xea pode notar que os escopos s\xe3o definidos separadamente dos recursos de API. Isso ocorre porque ",(0,s.jsx)(o.a,{href:"https://www.rfc-editor.org/rfc/rfc8707.html",children:"Resource Indicators for OAuth 2.0"})," especifica que os escopos finais para a solicita\xe7\xe3o ser\xe3o o produto cartesiano de todos os escopos em todos os servi\xe7os de destino."]}),"\n",e.configResourcesWithSharedScopesCode&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("p",{children:["Assim, no caso acima, os escopos podem ser simplificados a partir da defini\xe7\xe3o no Logto, ambos os recursos de API podem ter escopos ",(0,s.jsx)("code",{children:"read"})," e ",(0,s.jsx)("code",{children:"write"})," sem o prefixo. Ent\xe3o, na configura\xe7\xe3o do Logto:"]}),e.configResourcesWithSharedScopesCode,(0,s.jsxs)("p",{children:["Para cada recurso de API, ele solicitar\xe1 os escopos ",(0,s.jsx)("code",{children:"read"})," e ",(0,s.jsx)("code",{children:"write"}),"."]})]}),"\n",(0,s.jsx)(o.admonition,{type:"note",children:(0,s.jsxs)(o.p,{children:["N\xe3o h\xe1 problema em solicitar escopos que n\xe3o est\xe3o definidos nos recursos de API. Por exemplo, voc\xea pode solicitar o escopo ",(0,s.jsx)(o.code,{children:"email"})," mesmo que os recursos de API n\xe3o tenham o escopo ",(0,s.jsx)(o.code,{children:"email"})," dispon\xedvel. Escopos indispon\xedveis ser\xe3o ignorados com seguran\xe7a."]})}),"\n",(0,s.jsx)(o.p,{children:"Ap\xf3s o login bem-sucedido, o Logto emitir\xe1 os escopos apropriados para os recursos de API de acordo com os pap\xe9is do usu\xe1rio."})]})}function a(e={}){const{wrapper:o}={...(0,i.R)(),...e.components};return o?(0,s.jsx)(o,{...e,children:(0,s.jsx)(t,{...e})}):t(e)}},85153:(e,o,n)=>{n.d(o,{Ay:()=>a,RM:()=>r});var s=n(25105),i=n(79621);const r=[];function t(e){const o={p:"p",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(o.p,{children:["Para buscar o token de acesso para um recurso de API espec\xedfico, voc\xea pode usar o m\xe9todo ",(0,s.jsx)("code",{children:e.getAccessTokenApi}),":"]}),"\n",e.getAccessTokenCode,"\n",(0,s.jsx)(o.p,{children:"Este m\xe9todo retornar\xe1 um token de acesso JWT que pode ser usado para acessar o recurso de API quando o usu\xe1rio tiver as permiss\xf5es relacionadas. Se o token de acesso em cache atual tiver expirado, este m\xe9todo tentar\xe1 automaticamente usar um token de atualiza\xe7\xe3o para obter um novo token de acesso."})]})}function a(e={}){const{wrapper:o}={...(0,i.R)(),...e.components};return o?(0,s.jsx)(o,{...e,children:(0,s.jsx)(t,{...e})}):t(e)}},57973:(e,o,n)=>{n.d(o,{Ay:()=>a,RM:()=>r});var s=n(25105),i=n(79621);const r=[];function t(e){const o={a:"a",p:"p",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(o.p,{children:["Se organiza\xe7\xe3o \xe9 um conceito novo para voc\xea, por favor, leia ",(0,s.jsx)(o.a,{href:"/organizations",children:"\ud83c\udfe2 Organiza\xe7\xf5es (Multi-tenancy)"})," para come\xe7ar."]}),"\n",(0,s.jsxs)(o.p,{children:["Voc\xea precisa adicionar o escopo ",(0,s.jsx)("code",{children:e.organizationScope})," ao configurar o cliente Logto:"]}),"\n",e.configOrganizationCode,"\n",(0,s.jsx)(o.p,{children:"Uma vez que o usu\xe1rio esteja autenticado, voc\xea pode buscar o token de organiza\xe7\xe3o para o usu\xe1rio:"}),"\n",e.getOrganizationAccessTokenCode]})}function a(e={}){const{wrapper:o}={...(0,i.R)(),...e.components};return o?(0,s.jsx)(o,{...e,children:(0,s.jsx)(t,{...e})}):t(e)}},46680:(e,o,n)=>{n.d(o,{Ay:()=>a,RM:()=>r});var s=n(25105),i=n(79621);const r=[];function t(e){const o={p:"p",...(0,i.R)(),...e.components};return(0,s.jsxs)(o.p,{children:["Voc\xea pode perceber que algumas informa\xe7\xf5es do usu\xe1rio est\xe3o faltando no objeto retornado de ",(0,s.jsx)("code",{children:e.method}),". Isso ocorre porque OAuth 2.0 e OpenID Connect (OIDC) s\xe3o projetados para seguir o princ\xedpio do menor privil\xe9gio (PoLP), e o Logto \xe9 constru\xeddo com base nesses padr\xf5es."]})}function a(e={}){const{wrapper:o}={...(0,i.R)(),...e.components};return o?(0,s.jsx)(o,{...e,children:(0,s.jsx)(t,{...e})}):t(e)}},20045:(e,o,n)=>{n.d(o,{Ay:()=>a,RM:()=>r});var s=n(25105),i=n(79621);const r=[];function t(e){const{Url:o}={...(0,i.R)(),...e.components};return o||function(e,o){throw new Error("Expected "+(o?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Url",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o,{href:"/end-user-flows",children:" Fluxos do usu\xe1rio final: fluxos de autentica\xe7\xe3o, fluxos de conta e fluxos de organiza\xe7\xe3o "}),"\n",(0,s.jsx)(o,{href:"/connectors",children:" Configurar conectores "}),"\n",(0,s.jsx)(o,{href:"/authorization",children:" Autoriza\xe7\xe3o (Authorization) "})]})}function a(e={}){const{wrapper:o}={...(0,i.R)(),...e.components};return o?(0,s.jsx)(o,{...e,children:(0,s.jsx)(t,{...e})}):t(e)}},47540:(e,o,n)=>{n.d(o,{Ay:()=>a,RM:()=>r});var s=n(25105),i=n(79621);const r=[];function t(e){const o={admonition:"admonition",p:"p",...(0,i.R)(),...e.components};return(0,s.jsxs)(o.admonition,{type:"tip",children:[(0,s.jsx)("p",{children:(0,s.jsx)(o.p,{children:'Voc\xea pode encontrar e copiar o "App Secret" na p\xe1gina de detalhes do aplicativo no Admin Console:'})}),(0,s.jsx)("img",{alt:"App Secret",src:"/img/assets/app-secret.png",width:"586px"})]})}function a(e={}){const{wrapper:o}={...(0,i.R)(),...e.components};return o?(0,s.jsx)(o,{...e,children:(0,s.jsx)(t,{...e})}):t(e)}},81427:(e,o,n)=>{n.d(o,{Ay:()=>a,RM:()=>r});var s=n(25105),i=n(79621);const r=[{value:"Sobre o login baseado em redirecionamento",id:"regarding-redirect-based-sign-in",level:3}];function t(e){const o={a:"a",h3:"h3",li:"li",ol:"ol",p:"p",...(0,i.R)(),...e.components},{Details:n,MainSiteUrl:r}=o;return n||c("Details",!0),r||c("MainSiteUrl",!0),(0,s.jsxs)(n,{children:[(0,s.jsx)("summary",{children:(0,s.jsx)(o.h3,{id:"regarding-redirect-based-sign-in",children:"Sobre o login baseado em redirecionamento"})}),(0,s.jsxs)(o.ol,{children:["\n",(0,s.jsxs)(o.li,{children:["Este processo de autentica\xe7\xe3o segue o protocolo ",(0,s.jsx)(o.a,{href:"https://openid.net/specs/openid-connect-core-1_0.html",children:"OpenID Connect (OIDC)"}),", e o Logto aplica medidas de seguran\xe7a rigorosas para proteger o login do usu\xe1rio."]}),"\n",(0,s.jsx)(o.li,{children:"Se voc\xea tiver v\xe1rios aplicativos, pode usar o mesmo provedor de identidade (Logto). Uma vez que o usu\xe1rio faz login em um aplicativo, o Logto completar\xe1 automaticamente o processo de login quando o usu\xe1rio acessar outro aplicativo."}),"\n"]}),(0,s.jsxs)(o.p,{children:["Para saber mais sobre a l\xf3gica e os benef\xedcios do login baseado em redirecionamento, veja ",(0,s.jsx)(r,{href:"/concepts/sign-in-experience",children:"Experi\xeancia de login do Logto explicada"}),"."]})]})}function a(e={}){const{wrapper:o}={...(0,i.R)(),...e.components};return o?(0,s.jsx)(o,{...e,children:(0,s.jsx)(t,{...e})}):t(e)}function c(e,o){throw new Error("Expected "+(o?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},26461:(e,o,n)=>{n.d(o,{Ay:()=>a,RM:()=>r});var s=n(25105),i=n(79621);const r=[];function t(e){const o={a:"a",admonition:"admonition",code:"code",hr:"hr",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.p,{children:"Aqui est\xe1 a lista de escopos suportados e as reivindica\xe7\xf5es correspondentes:"}),"\n",(0,s.jsx)(o.p,{children:(0,s.jsx)(o.strong,{children:(0,s.jsx)(o.code,{children:"openid"})})}),"\n",(0,s.jsxs)(o.table,{children:[(0,s.jsx)(o.thead,{children:(0,s.jsxs)(o.tr,{children:[(0,s.jsx)(o.th,{children:"Nome da reivindica\xe7\xe3o"}),(0,s.jsx)(o.th,{children:"Tipo"}),(0,s.jsx)(o.th,{children:"Descri\xe7\xe3o"}),(0,s.jsx)(o.th,{children:"Precisa de userinfo?"})]})}),(0,s.jsx)(o.tbody,{children:(0,s.jsxs)(o.tr,{children:[(0,s.jsx)(o.td,{children:"sub"}),(0,s.jsx)(o.td,{children:(0,s.jsx)(o.code,{children:"string"})}),(0,s.jsx)(o.td,{children:"O identificador \xfanico do usu\xe1rio"}),(0,s.jsx)(o.td,{children:"N\xe3o"})]})})]}),"\n",(0,s.jsx)(o.p,{children:(0,s.jsx)(o.strong,{children:(0,s.jsx)(o.code,{children:"profile"})})}),"\n",(0,s.jsxs)(o.table,{children:[(0,s.jsx)(o.thead,{children:(0,s.jsxs)(o.tr,{children:[(0,s.jsx)(o.th,{children:"Nome da reivindica\xe7\xe3o"}),(0,s.jsx)(o.th,{children:"Tipo"}),(0,s.jsx)(o.th,{children:"Descri\xe7\xe3o"}),(0,s.jsx)(o.th,{children:"Precisa de userinfo?"})]})}),(0,s.jsxs)(o.tbody,{children:[(0,s.jsxs)(o.tr,{children:[(0,s.jsx)(o.td,{children:"name"}),(0,s.jsx)(o.td,{children:(0,s.jsx)(o.code,{children:"string"})}),(0,s.jsx)(o.td,{children:"O nome completo do usu\xe1rio"}),(0,s.jsx)(o.td,{children:"N\xe3o"})]}),(0,s.jsxs)(o.tr,{children:[(0,s.jsx)(o.td,{children:"username"}),(0,s.jsx)(o.td,{children:(0,s.jsx)(o.code,{children:"string"})}),(0,s.jsx)(o.td,{children:"O nome de usu\xe1rio do usu\xe1rio"}),(0,s.jsx)(o.td,{children:"N\xe3o"})]}),(0,s.jsxs)(o.tr,{children:[(0,s.jsx)(o.td,{children:"picture"}),(0,s.jsx)(o.td,{children:(0,s.jsx)(o.code,{children:"string"})}),(0,s.jsx)(o.td,{children:"URL da foto de perfil do Usu\xe1rio Final. Este URL DEVE referir-se a um arquivo de imagem (por exemplo, um arquivo de imagem PNG, JPEG ou GIF), em vez de uma p\xe1gina da Web contendo uma imagem. Note que este URL DEVE referir-se especificamente a uma foto de perfil do Usu\xe1rio Final adequada para exibi\xe7\xe3o ao descrever o Usu\xe1rio Final, em vez de uma foto arbitr\xe1ria tirada pelo Usu\xe1rio Final."}),(0,s.jsx)(o.td,{children:"N\xe3o"})]}),(0,s.jsxs)(o.tr,{children:[(0,s.jsx)(o.td,{children:"created_at"}),(0,s.jsx)(o.td,{children:(0,s.jsx)(o.code,{children:"number"})}),(0,s.jsx)(o.td,{children:"Hora em que o Usu\xe1rio Final foi criado. O tempo \xe9 representado como o n\xfamero de milissegundos desde a \xe9poca Unix (1970-01-01T00:00:00Z)."}),(0,s.jsx)(o.td,{children:"N\xe3o"})]}),(0,s.jsxs)(o.tr,{children:[(0,s.jsx)(o.td,{children:"updated_at"}),(0,s.jsx)(o.td,{children:(0,s.jsx)(o.code,{children:"number"})}),(0,s.jsx)(o.td,{children:"Hora em que as informa\xe7\xf5es do Usu\xe1rio Final foram atualizadas pela \xfaltima vez. O tempo \xe9 representado como o n\xfamero de milissegundos desde a \xe9poca Unix (1970-01-01T00:00:00Z)."}),(0,s.jsx)(o.td,{children:"N\xe3o"})]})]})]}),"\n",(0,s.jsxs)(o.p,{children:["Outras ",(0,s.jsx)(o.a,{href:"https://openid.net/specs/openid-connect-core-1_0.html#StandardClaims",children:"reivindica\xe7\xf5es padr\xe3o"})," incluem ",(0,s.jsx)(o.code,{children:"family_name"}),", ",(0,s.jsx)(o.code,{children:"given_name"}),", ",(0,s.jsx)(o.code,{children:"middle_name"}),", ",(0,s.jsx)(o.code,{children:"nickname"}),", ",(0,s.jsx)(o.code,{children:"preferred_username"}),", ",(0,s.jsx)(o.code,{children:"profile"}),", ",(0,s.jsx)(o.code,{children:"website"}),", ",(0,s.jsx)(o.code,{children:"gender"}),", ",(0,s.jsx)(o.code,{children:"birthdate"}),", ",(0,s.jsx)(o.code,{children:"zoneinfo"})," e ",(0,s.jsx)(o.code,{children:"locale"})," tamb\xe9m ser\xe3o inclu\xeddas no escopo ",(0,s.jsx)(o.code,{children:"profile"})," sem a necessidade de solicitar o endpoint userinfo. Uma diferen\xe7a em rela\xe7\xe3o \xe0s reivindica\xe7\xf5es acima \xe9 que essas reivindica\xe7\xf5es s\xf3 ser\xe3o retornadas quando seus valores n\xe3o estiverem vazios, enquanto as reivindica\xe7\xf5es acima retornar\xe3o ",(0,s.jsx)(o.code,{children:"null"})," se os valores estiverem vazios."]}),"\n",(0,s.jsx)(o.admonition,{type:"note",children:(0,s.jsxs)(o.p,{children:["Ao contr\xe1rio das reivindica\xe7\xf5es padr\xe3o, as reivindica\xe7\xf5es ",(0,s.jsx)(o.code,{children:"created_at"})," e ",(0,s.jsx)(o.code,{children:"updated_at"})," est\xe3o usando milissegundos em vez de segundos."]})}),"\n",(0,s.jsx)(o.p,{children:(0,s.jsx)(o.strong,{children:(0,s.jsx)(o.code,{children:"email"})})}),"\n",(0,s.jsxs)(o.table,{children:[(0,s.jsx)(o.thead,{children:(0,s.jsxs)(o.tr,{children:[(0,s.jsx)(o.th,{children:"Nome da reivindica\xe7\xe3o"}),(0,s.jsx)(o.th,{children:"Tipo"}),(0,s.jsx)(o.th,{children:"Descri\xe7\xe3o"}),(0,s.jsx)(o.th,{children:"Precisa de userinfo?"})]})}),(0,s.jsxs)(o.tbody,{children:[(0,s.jsxs)(o.tr,{children:[(0,s.jsx)(o.td,{children:"email"}),(0,s.jsx)(o.td,{children:(0,s.jsx)(o.code,{children:"string"})}),(0,s.jsx)(o.td,{children:"O endere\xe7o de email do usu\xe1rio"}),(0,s.jsx)(o.td,{children:"N\xe3o"})]}),(0,s.jsxs)(o.tr,{children:[(0,s.jsx)(o.td,{children:"email_verified"}),(0,s.jsx)(o.td,{children:(0,s.jsx)(o.code,{children:"boolean"})}),(0,s.jsx)(o.td,{children:"Se o endere\xe7o de email foi verificado"}),(0,s.jsx)(o.td,{children:"N\xe3o"})]})]})]}),"\n",(0,s.jsx)(o.p,{children:(0,s.jsx)(o.strong,{children:(0,s.jsx)(o.code,{children:"phone"})})}),"\n",(0,s.jsxs)(o.table,{children:[(0,s.jsx)(o.thead,{children:(0,s.jsxs)(o.tr,{children:[(0,s.jsx)(o.th,{children:"Nome da reivindica\xe7\xe3o"}),(0,s.jsx)(o.th,{children:"Tipo"}),(0,s.jsx)(o.th,{children:"Descri\xe7\xe3o"}),(0,s.jsx)(o.th,{children:"Precisa de userinfo?"})]})}),(0,s.jsxs)(o.tbody,{children:[(0,s.jsxs)(o.tr,{children:[(0,s.jsx)(o.td,{children:"phone_number"}),(0,s.jsx)(o.td,{children:(0,s.jsx)(o.code,{children:"string"})}),(0,s.jsx)(o.td,{children:"O n\xfamero de telefone do usu\xe1rio"}),(0,s.jsx)(o.td,{children:"N\xe3o"})]}),(0,s.jsxs)(o.tr,{children:[(0,s.jsx)(o.td,{children:"phone_number_verified"}),(0,s.jsx)(o.td,{children:(0,s.jsx)(o.code,{children:"boolean"})}),(0,s.jsx)(o.td,{children:"Se o n\xfamero de telefone foi verificado"}),(0,s.jsx)(o.td,{children:"N\xe3o"})]})]})]}),"\n",(0,s.jsx)(o.p,{children:(0,s.jsx)(o.strong,{children:(0,s.jsx)(o.code,{children:"address"})})}),"\n",(0,s.jsxs)(o.p,{children:["Por favor, consulte o ",(0,s.jsx)(o.a,{href:"https://openid.net/specs/openid-connect-core-1_0.html#AddressClaim",children:"OpenID Connect Core 1.0"})," para os detalhes da reivindica\xe7\xe3o de endere\xe7o."]}),"\n",(0,s.jsx)(o.p,{children:(0,s.jsx)(o.strong,{children:(0,s.jsx)(o.code,{children:"custom_data"})})}),"\n",(0,s.jsxs)(o.table,{children:[(0,s.jsx)(o.thead,{children:(0,s.jsxs)(o.tr,{children:[(0,s.jsx)(o.th,{children:"Nome da reivindica\xe7\xe3o"}),(0,s.jsx)(o.th,{children:"Tipo"}),(0,s.jsx)(o.th,{children:"Descri\xe7\xe3o"}),(0,s.jsx)(o.th,{children:"Precisa de userinfo?"})]})}),(0,s.jsx)(o.tbody,{children:(0,s.jsxs)(o.tr,{children:[(0,s.jsx)(o.td,{children:"custom_data"}),(0,s.jsx)(o.td,{children:(0,s.jsx)(o.code,{children:"object"})}),(0,s.jsx)(o.td,{children:"Os dados personalizados do usu\xe1rio"}),(0,s.jsx)(o.td,{children:"Sim"})]})})]}),"\n",(0,s.jsx)(o.p,{children:(0,s.jsx)(o.strong,{children:(0,s.jsx)(o.code,{children:"identities"})})}),"\n",(0,s.jsxs)(o.table,{children:[(0,s.jsx)(o.thead,{children:(0,s.jsxs)(o.tr,{children:[(0,s.jsx)(o.th,{children:"Nome da reivindica\xe7\xe3o"}),(0,s.jsx)(o.th,{children:"Tipo"}),(0,s.jsx)(o.th,{children:"Descri\xe7\xe3o"}),(0,s.jsx)(o.th,{children:"Precisa de userinfo?"})]})}),(0,s.jsxs)(o.tbody,{children:[(0,s.jsxs)(o.tr,{children:[(0,s.jsx)(o.td,{children:"identities"}),(0,s.jsx)(o.td,{children:(0,s.jsx)(o.code,{children:"object"})}),(0,s.jsx)(o.td,{children:"As identidades vinculadas do usu\xe1rio"}),(0,s.jsx)(o.td,{children:"Sim"})]}),(0,s.jsxs)(o.tr,{children:[(0,s.jsx)(o.td,{children:"sso_identities"}),(0,s.jsx)(o.td,{children:(0,s.jsx)(o.code,{children:"array"})}),(0,s.jsx)(o.td,{children:"As identidades SSO vinculadas do usu\xe1rio"}),(0,s.jsx)(o.td,{children:"Sim"})]})]})]}),"\n",(0,s.jsx)(o.p,{children:(0,s.jsx)(o.strong,{children:(0,s.jsx)(o.code,{children:"roles"})})}),"\n",(0,s.jsxs)(o.table,{children:[(0,s.jsx)(o.thead,{children:(0,s.jsxs)(o.tr,{children:[(0,s.jsx)(o.th,{children:"Nome da reivindica\xe7\xe3o"}),(0,s.jsx)(o.th,{children:"Tipo"}),(0,s.jsx)(o.th,{children:"Descri\xe7\xe3o"}),(0,s.jsx)(o.th,{children:"Precisa de userinfo?"})]})}),(0,s.jsx)(o.tbody,{children:(0,s.jsxs)(o.tr,{children:[(0,s.jsx)(o.td,{children:"roles"}),(0,s.jsx)(o.td,{children:(0,s.jsx)(o.code,{children:"string[]"})}),(0,s.jsx)(o.td,{children:"Os pap\xe9is do usu\xe1rio"}),(0,s.jsx)(o.td,{children:"N\xe3o"})]})})]}),"\n",(0,s.jsx)(o.p,{children:(0,s.jsx)(o.strong,{children:(0,s.jsx)(o.code,{children:"urn:logto:scope:organizations"})})}),"\n",(0,s.jsxs)(o.table,{children:[(0,s.jsx)(o.thead,{children:(0,s.jsxs)(o.tr,{children:[(0,s.jsx)(o.th,{children:"Nome da reivindica\xe7\xe3o"}),(0,s.jsx)(o.th,{children:"Tipo"}),(0,s.jsx)(o.th,{children:"Descri\xe7\xe3o"}),(0,s.jsx)(o.th,{children:"Precisa de userinfo?"})]})}),(0,s.jsxs)(o.tbody,{children:[(0,s.jsxs)(o.tr,{children:[(0,s.jsx)(o.td,{children:"organizations"}),(0,s.jsx)(o.td,{children:(0,s.jsx)(o.code,{children:"string[]"})}),(0,s.jsx)(o.td,{children:"Os IDs das organiza\xe7\xf5es \xe0s quais o usu\xe1rio pertence"}),(0,s.jsx)(o.td,{children:"N\xe3o"})]}),(0,s.jsxs)(o.tr,{children:[(0,s.jsx)(o.td,{children:"organization_data"}),(0,s.jsx)(o.td,{children:(0,s.jsx)(o.code,{children:"object[]"})}),(0,s.jsx)(o.td,{children:"Os dados das organiza\xe7\xf5es \xe0s quais o usu\xe1rio pertence"}),(0,s.jsx)(o.td,{children:"Sim"})]})]})]}),"\n",(0,s.jsx)(o.p,{children:(0,s.jsx)(o.strong,{children:(0,s.jsx)(o.code,{children:"urn:logto:scope:organization_roles"})})}),"\n",(0,s.jsxs)(o.table,{children:[(0,s.jsx)(o.thead,{children:(0,s.jsxs)(o.tr,{children:[(0,s.jsx)(o.th,{children:"Nome da reivindica\xe7\xe3o"}),(0,s.jsx)(o.th,{children:"Tipo"}),(0,s.jsx)(o.th,{children:"Descri\xe7\xe3o"}),(0,s.jsx)(o.th,{children:"Precisa de userinfo?"})]})}),(0,s.jsx)(o.tbody,{children:(0,s.jsxs)(o.tr,{children:[(0,s.jsx)(o.td,{children:"organization_roles"}),(0,s.jsx)(o.td,{children:(0,s.jsx)(o.code,{children:"string[]"})}),(0,s.jsxs)(o.td,{children:["Os pap\xe9is das organiza\xe7\xf5es \xe0s quais o usu\xe1rio pertence com o formato ",(0,s.jsx)(o.code,{children:"<organization_id>:<role_name>"})]}),(0,s.jsx)(o.td,{children:"N\xe3o"})]})})]}),"\n",(0,s.jsx)(o.hr,{}),"\n",(0,s.jsxs)(o.p,{children:['Considerando o desempenho e o tamanho dos dados, se "Precisa de userinfo?" for "Sim", isso significa que a reivindica\xe7\xe3o n\xe3o aparecer\xe1 no Token de ID, mas ser\xe1 retornada na resposta do ',(0,s.jsx)(o.a,{href:"https://openid.net/specs/openid-connect-core-1_0.html#UserInfo",children:"endpoint userinfo"}),"."]})]})}function a(e={}){const{wrapper:o}={...(0,i.R)(),...e.components};return o?(0,s.jsx)(o,{...e,children:(0,s.jsx)(t,{...e})}):t(e)}},59832:(e,o,n)=>{n.d(o,{Ay:()=>c,RM:()=>t});var s=n(25105),i=n(79621),r=n(26461);const t=[...r.RM];function a(e){const o={a:"a",p:"p",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(o.p,{children:["Logto usa as ",(0,s.jsx)(o.a,{href:"https://openid.net/specs/openid-connect-core-1_0.html#Claims",children:"conven\xe7\xf5es de escopos e reivindica\xe7\xf5es"})," do OIDC para definir os escopos e reivindica\xe7\xf5es para recuperar informa\xe7\xf5es do usu\xe1rio do Token de ID e do ",(0,s.jsx)("a",{href:"https://openid.net/specs/openid-connect-core-1_0.html#UserInfo",children:"endpoint userinfo"}),' do OIDC. Tanto "escopo" quanto "reivindica\xe7\xe3o" s\xe3o termos das especifica\xe7\xf5es OAuth 2.0 e OpenID Connect (OIDC).']}),"\n","\n",e.configScopesCode&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("p",{children:"Em resumo, quando voc\xea solicita um escopo, voc\xea obter\xe1 as reivindica\xe7\xf5es correspondentes nas informa\xe7\xf5es do usu\xe1rio. Por exemplo, se voc\xea solicitar o escopo `email`, voc\xea obter\xe1 os dados `email` e `email_verified` do usu\xe1rio."}),(0,s.jsx)("p",{children:"Por padr\xe3o, o Logto SDK sempre solicitar\xe1 tr\xeas escopos: `openid`, `profile` e `offline_access`, e n\xe3o h\xe1 como remover esses escopos padr\xe3o. Mas voc\xea pode adicionar mais escopos ao configurar o Logto:"}),e.configScopesCode]}),"\n",(0,s.jsx)(r.Ay,{})]})}function c(e={}){const{wrapper:o}={...(0,i.R)(),...e.components};return o?(0,s.jsx)(o,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}},93961:(e,o,n)=>{n.d(o,{Ay:()=>a,RM:()=>r});var s=n(25105),i=n(79621);const r=[];function t(e){const o={admonition:"admonition",code:"code",mermaid:"mermaid",p:"p",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.p,{children:"Por padr\xe3o, reivindica\xe7\xf5es limitadas s\xe3o retornadas. Se voc\xea precisar de mais informa\xe7\xf5es, pode solicitar escopos adicionais para acessar mais reivindica\xe7\xf5es."}),"\n",(0,s.jsx)(o.admonition,{type:"info",children:(0,s.jsx)(o.p,{children:'Uma "reivindica\xe7\xe3o (Claim)" \xe9 uma afirma\xe7\xe3o feita sobre um sujeito; um "escopo (Scope)" \xe9 um grupo de reivindica\xe7\xf5es. No caso atual, uma reivindica\xe7\xe3o \xe9 uma informa\xe7\xe3o sobre o usu\xe1rio.'})}),"\n",(0,s.jsx)(o.p,{children:"Aqui est\xe1 um exemplo n\xe3o normativo da rela\xe7\xe3o escopo - reivindica\xe7\xe3o:"}),"\n",(0,s.jsx)(o.mermaid,{value:"classDiagram\n  class openid {\n    +sub\n  }\n\n  class profile {\n    +name\n    +username\n    +picture\n    +...\n  }\n\n  class email {\n    +email\n    +email_verified\n  }\n\n  class phone {\n    +phone_number\n    +phone_number_verified\n  }"}),"\n",(0,s.jsx)(o.admonition,{type:"tip",children:(0,s.jsx)(o.p,{children:'A reivindica\xe7\xe3o "sub" significa "sujeito (Subject)", que \xe9 o identificador \xfanico do usu\xe1rio (ou seja, ID do usu\xe1rio).'})}),"\n",(0,s.jsxs)(o.p,{children:["O Logto SDK sempre solicitar\xe1 tr\xeas escopos: ",(0,s.jsx)(o.code,{children:"openid"}),", ",(0,s.jsx)(o.code,{children:"profile"})," e ",(0,s.jsx)(o.code,{children:"offline_access"}),"."]})]})}function a(e={}){const{wrapper:o}={...(0,i.R)(),...e.components};return o?(0,s.jsx)(o,{...e,children:(0,s.jsx)(t,{...e})}):t(e)}},44251:(e,o,n)=>{n.d(o,{Ay:()=>c,Ip:()=>r,RM:()=>t});var s=n(25105),i=n(79621);const r="http://localhost:3000/",t=[];function a(e){const o={admonition:"admonition",p:"p",...(0,i.R)(),...e.components};return(0,s.jsx)(o.admonition,{type:"note",children:(0,s.jsxs)(o.p,{children:["Nos trechos de c\xf3digo a seguir, assumimos que seu aplicativo est\xe1 sendo executado em ",(0,s.jsx)("code",{children:r}),"."]})})}function c(e={}){const{wrapper:o}={...(0,i.R)(),...e.components};return o?(0,s.jsx)(o,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}},7225:(e,o,n)=>{n.d(o,{Ay:()=>d,Ip:()=>r,RM:()=>a,YF:()=>t});var s=n(25105),i=n(79621);const r="http://localhost:3000/",t=`${r}callback`,a=[{value:"Configurar URIs de redirecionamento",id:"configure-redirect-uris",level:4}];function c(e){const o={h4:"h4",p:"p",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:["\n","\n",(0,s.jsx)(o.h4,{id:"configure-redirect-uris",children:"Configurar URIs de redirecionamento"}),"\n",(0,s.jsxs)(o.p,{children:["V\xe1 para a p\xe1gina de detalhes do aplicativo no Logto Console. Adicione um URI de redirecionamento ",(0,s.jsx)("code",{children:e.redirectUri??"http://localhost:3000/callback"}),"."]}),"\n",(0,s.jsx)("img",{alt:"URI de redirecionamento no Logto Console",src:"/img/assets/web-redirect-uri.png",width:"600px"}),"\n",(0,s.jsxs)(o.p,{children:["Assim como no login, os usu\xe1rios devem ser redirecionados para o Logto para sair da sess\xe3o compartilhada. Uma vez conclu\xeddo, seria \xf3timo redirecionar o usu\xe1rio de volta para o seu site. Por exemplo, adicione ",(0,s.jsx)("code",{children:r})," como a se\xe7\xe3o de URI de redirecionamento p\xf3s logout."]}),"\n",(0,s.jsx)(o.p,{children:'Em seguida, clique em "Salvar" para salvar as altera\xe7\xf5es.'})]})}function d(e={}){const{wrapper:o}={...(0,i.R)(),...e.components};return o?(0,s.jsx)(o,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},84057:(e,o,n)=>{n.d(o,{Ay:()=>c,RM:()=>t});var s=n(25105),i=n(79621),r=n(81427);const t=[...r.RM];function a(e){const o={hr:"hr",li:"li",mermaid:"mermaid",ol:"ol",p:"p",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.p,{children:"Antes de mergulharmos nos detalhes, aqui est\xe1 uma vis\xe3o geral r\xe1pida da experi\xeancia do usu\xe1rio final. O processo de login pode ser simplificado da seguinte forma:"}),"\n",(0,s.jsx)(o.mermaid,{value:"graph LR\n    A(Seu aplicativo) --\x3e|1. Invocar login| B(Logto)\n    B --\x3e|2. Concluir login| A"}),"\n",(0,s.jsxs)(o.ol,{children:["\n",(0,s.jsx)(o.li,{children:"Seu aplicativo invoca o m\xe9todo de login."}),"\n",(0,s.jsx)(o.li,{children:"O usu\xe1rio \xe9 redirecionado para a p\xe1gina de login do Logto. Para aplicativos nativos, o navegador do sistema \xe9 aberto."}),"\n",(0,s.jsx)(o.li,{children:"O usu\xe1rio faz login e \xe9 redirecionado de volta para o seu aplicativo (configurado como o URI de redirecionamento)."}),"\n"]}),"\n",(0,s.jsx)(r.Ay,{}),"\n",(0,s.jsx)(o.hr,{})]})}function c(e={}){const{wrapper:o}={...(0,i.R)(),...e.components};return o?(0,s.jsx)(o,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}},64309:(e,o,n)=>{n.r(o),n.d(o,{assets:()=>oe,contentTitle:()=>ee,default:()=>ie,frontMatter:()=>X,metadata:()=>s,toc:()=>ne});const s=JSON.parse('{"id":"quick-starts/framework/python/README","title":"Adicionar autentica\xe7\xe3o ao seu aplicativo web Python","description":"Este guia mostrar\xe1 como integrar o Logto em seu aplicativo web Python.","source":"@site/i18n/pt-BR/docusaurus-plugin-content-docs/current/quick-starts/framework/python/README.mdx","sourceDirName":"quick-starts/framework/python","slug":"/quick-starts/python","permalink":"/pt-BR/quick-starts/python","draft":false,"unlisted":false,"editUrl":"https://github.com/logto-io/docs/tree/master/i18n/pt-BR/docusaurus-plugin-content-docs/current/quick-starts/framework/python/README.mdx","tags":[],"version":"current","frontMatter":{"slug":"/quick-starts/python","sidebar_label":"Python","sidebar_custom_props":{"description":"Integre o Logto em seu aplicativo web Python, como Django e Flask."},"language":"python","official_link":"https://www.python.org","app_type":"Aplicativo web tradicional","framework":"Flask"},"sidebar":"quickStartSidebar","previous":{"title":"PHP","permalink":"/pt-BR/quick-starts/php"},"next":{"title":"React","permalink":"/pt-BR/quick-starts/react"}}');var i=n(25105),r=n(79621),t=n(80173),a=n(62310),c=n(42097),d=n(78766),l=n(46680),p=n(20045),h=n(59832),u=n(93961),m=n(44251),x=n(7225),j=n(84057);function g(e){const o={a:"a",admonition:"admonition",code:"code",li:"li",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsx)(o.admonition,{type:"tip",children:(0,i.jsxs)(o.ul,{children:["\n",(0,i.jsxs)(o.li,{children:["O exemplo usa ",(0,i.jsx)(o.a,{href:"https://flask.palletsprojects.com/en/2.3.x/",children:"Flask"}),", mas os conceitos s\xe3o os mesmos para outros frameworks."]}),"\n",(0,i.jsxs)(o.li,{children:["O projeto de exemplo em Python est\xe1 dispon\xedvel em nosso ",(0,i.jsx)(o.a,{href:"https://github.com/logto-io/python/tree/master/samples",children:"reposit\xf3rio do Python SDK"}),"."]}),"\n",(0,i.jsxs)(o.li,{children:["O Logto SDK utiliza corrotinas, lembre-se de usar ",(0,i.jsx)(o.code,{children:"await"})," ao chamar fun\xe7\xf5es ass\xedncronas."]}),"\n"]})})}function f(e={}){const{wrapper:o}={...(0,r.R)(),...e.components};return o?(0,i.jsx)(o,{...e,children:(0,i.jsx)(g,{...e})}):g(e)}function v(e){const o={code:"code",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(o.p,{children:["No Logto SDK, podemos usar ",(0,i.jsx)(o.code,{children:"client.isAuthenticated()"})," para verificar o status de autentica\xe7\xe3o. Se o usu\xe1rio estiver autenticado, o valor ser\xe1 verdadeiro; caso contr\xe1rio, o valor ser\xe1 falso."]}),"\n",(0,i.jsx)(o.p,{children:"Aqui tamb\xe9m implementamos uma p\xe1gina inicial simples para demonstra\xe7\xe3o:"}),"\n",(0,i.jsxs)(o.ul,{children:["\n",(0,i.jsx)(o.li,{children:"Se o usu\xe1rio n\xe3o estiver autenticado, mostrar um bot\xe3o de login;"}),"\n",(0,i.jsx)(o.li,{children:"Se o usu\xe1rio estiver autenticado, mostrar um bot\xe3o de logout."}),"\n"]}),"\n",(0,i.jsx)(o.pre,{children:(0,i.jsx)(o.code,{className:"language-python",children:'@app.route("/")\nasync def home():\n    if client.isAuthenticated() is False:\n        return "N\xe3o autenticado <a href=\'/sign-in\'>Entrar</a>"\n    return "Autenticado <a href=\'/sign-out\'>Sair</a>"\n'})})]})}function y(e={}){const{wrapper:o}={...(0,r.R)(),...e.components};return o?(0,i.jsx)(o,{...e,children:(0,i.jsx)(v,{...e})}):v(e)}function b(e){const o={blockquote:"blockquote",code:"code",p:"p",strong:"strong",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(o.p,{children:["No seu aplicativo web, adicione uma rota para lidar adequadamente com a solicita\xe7\xe3o de login dos usu\xe1rios. Vamos usar ",(0,i.jsx)(o.code,{children:"/sign-in"})," como exemplo:"]}),"\n",(0,i.jsx)(t.A,{language:"python",title:"flask.py",children:`@app.route("/sign-in")\nasync def sign_in():\n  # Obtenha a URL de login e redirecione o usu\xe1rio para ela\n  return redirect(await client.signIn(\n      redirectUri="${x.YF}",\n  ))\n`}),"\n",(0,i.jsxs)(o.p,{children:["Substitua ",(0,i.jsx)("code",{children:x.YF})," pela URL de callback que voc\xea configurou no seu Logto Console para este aplicativo."]}),"\n",(0,i.jsxs)(o.p,{children:["Se voc\xea quiser mostrar a p\xe1gina de cadastro na primeira tela, pode definir ",(0,i.jsx)(o.code,{children:"interactionMode"})," como ",(0,i.jsx)(o.code,{children:"signUp"}),":"]}),"\n",(0,i.jsx)(t.A,{language:"python",title:"flask.py",children:`@app.route("/sign-in")\nasync def sign_in():\n  return redirect(await client.signIn(\n      redirectUri="${x.YF}",\n      interactionMode="signUp", # Mostrar a p\xe1gina de cadastro na primeira tela\n  ))\n`}),"\n",(0,i.jsxs)(o.p,{children:["Agora, sempre que seus usu\xe1rios visitarem ",(0,i.jsxs)("code",{children:[x.Ip,"sign-in"]}),", isso iniciar\xe1 uma nova tentativa de login e redirecionar\xe1 o usu\xe1rio para a p\xe1gina de login do Logto."]}),"\n",(0,i.jsxs)(o.blockquote,{children:["\n",(0,i.jsxs)(o.p,{children:[(0,i.jsx)(o.strong,{children:"Nota"}),"\nCriar uma rota de login n\xe3o \xe9 a \xfanica maneira de iniciar uma tentativa de login. Voc\xea sempre pode usar o m\xe9todo ",(0,i.jsx)(o.code,{children:"signIn"})," para obter a URL de login e redirecionar o usu\xe1rio para ela."]}),"\n"]}),"\n",(0,i.jsx)(o.p,{children:"Ap\xf3s o usu\xe1rio fazer uma solicita\xe7\xe3o de logout, o Logto limpar\xe1 todas as informa\xe7\xf5es de autentica\xe7\xe3o do usu\xe1rio na sess\xe3o."}),"\n",(0,i.jsx)(o.p,{children:"Para limpar a sess\xe3o do Python e a sess\xe3o do Logto, uma rota de logout pode ser implementada da seguinte forma:"}),"\n",(0,i.jsx)(t.A,{language:"python",title:"flask.py",children:`@app.route("/sign-out")\nasync def sign_out():\n  return redirect(\n      # Redirecionar o usu\xe1rio para a p\xe1gina inicial ap\xf3s um logout bem-sucedido\n      await client.signOut(postLogoutRedirectUri="${x.Ip}")\n  )\n`})]})}function R(e={}){const{wrapper:o}={...(0,r.R)(),...e.components};return o?(0,i.jsx)(o,{...e,children:(0,i.jsx)(b,{...e})}):b(e)}var k=n(47540);const A=[...k.RM];function w(e){const o={a:"a",code:"code",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.p,{children:"Primeiro, crie uma configura\xe7\xe3o Logto:"}),"\n",(0,i.jsx)(o.pre,{children:(0,i.jsx)(o.code,{className:"language-python",metastring:'title="client.py"',children:'from logto import LogtoClient, LogtoConfig\n\nclient = LogtoClient(\n    LogtoConfig(\n        endpoint="https://you-logto-endpoint.app",  # Substitua pelo seu endpoint Logto\n        appId="replace-with-your-app-id",\n        appSecret="replace-with-your-app-secret",\n    ),\n)\n'})}),"\n",(0,i.jsx)(k.Ay,{}),"\n",(0,i.jsx)(o.p,{children:"Tamb\xe9m substitua o armazenamento de mem\xf3ria padr\xe3o por um armazenamento persistente, por exemplo:"}),"\n",(0,i.jsx)(o.pre,{children:(0,i.jsx)(o.code,{className:"language-python",metastring:'title="client.py"',children:"from logto import LogtoClient, LogtoConfig, Storage\nfrom flask import session\nfrom typing import Union\n\nclass SessionStorage(Storage):\n    def get(self, key: str) -> Union[str, None]:\n        return session.get(key, None)\n\n    def set(self, key: str, value: Union[str, None]) -> None:\n        session[key] = value\n\n    def delete(self, key: str) -> None:\n        session.pop(key, None)\n\nclient = LogtoClient(\n    LogtoConfig(...),\n    storage=SessionStorage(),\n)\n"})}),"\n",(0,i.jsxs)(o.p,{children:["Veja ",(0,i.jsx)(o.a,{href:"https://github.com/logto-io/python/blob/master/logto/Storage.py",children:"Storage"})," para mais detalhes."]})]})}function C(e={}){const{wrapper:o}={...(0,r.R)(),...e.components};return o?(0,i.jsx)(o,{...e,children:(0,i.jsx)(w,{...e})}):w(e)}function I(e){const o={code:"code",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.p,{children:"Execute no diret\xf3rio raiz do projeto:"}),"\n",(0,i.jsx)(o.pre,{children:(0,i.jsx)(o.code,{className:"language-bash",children:"pip install logto # ou `poetry add logto` ou qualquer outro que voc\xea use\n"})})]})}function L(e={}){const{wrapper:o}={...(0,r.R)(),...e.components};return o?(0,i.jsx)(o,{...e,children:(0,i.jsx)(I,{...e})}):I(e)}var S=n(40626);function P(e){const o={code:"code",pre:"pre",...(0,r.R)(),...e.components};return(0,i.jsx)(o.pre,{children:(0,i.jsx)(o.code,{className:"language-python",metastring:'title="client.py"',children:'client = LogtoClient(\n    LogtoConfig(\n        # ...other configs\n        # highlight-next-line\n        resources=["https://shopping.your-app.com/api", "https://store.your-app.com/api"], # Adicionar recursos de API\n    ),\n)\n'})})}function N(e={}){const{wrapper:o}={...(0,r.R)(),...e.components};return o?(0,i.jsx)(o,{...e,children:(0,i.jsx)(P,{...e})}):P(e)}function q(e){const o={code:"code",pre:"pre",...(0,r.R)(),...e.components};return(0,i.jsx)(o.pre,{children:(0,i.jsx)(o.code,{className:"language-python",metastring:'title="client.py"',children:'client = LogtoClient(\n    LogtoConfig(\n        # ...other configs\n        # highlight-start\n        scopes=["shopping:read", "shopping:write", "store:read", "store:write"],\n        resources=["https://shopping.your-app.com/api", "https://store.your-app.com/api"],\n        # highlight-end\n    ),\n)\n'})})}function _(e={}){const{wrapper:o}={...(0,r.R)(),...e.components};return o?(0,i.jsx)(o,{...e,children:(0,i.jsx)(q,{...e})}):q(e)}function z(e){const o={code:"code",pre:"pre",...(0,r.R)(),...e.components};return(0,i.jsx)(o.pre,{children:(0,i.jsx)(o.code,{className:"language-python",metastring:'title="client.py"',children:'client = LogtoClient(\n    LogtoConfig(\n        # ...other configs\n        # highlight-start\n        scopes=["read", "write"],\n        resources=["https://shopping.your-app.com/api", "https://store.your-app.com/api"],\n        # highlight-end\n    ),\n)\n'})})}function U(e={}){const{wrapper:o}={...(0,r.R)(),...e.components};return o?(0,i.jsx)(o,{...e,children:(0,i.jsx)(z,{...e})}):z(e)}const O=[...S.RM];function T(e){return(0,i.jsx)(S.Ay,{configResourcesCode:(0,i.jsx)(N,{}),configResourcesWithScopesCode:(0,i.jsx)(_,{}),configResourcesWithSharedScopesCode:(0,i.jsx)(U,{})})}function D(e={}){const{wrapper:o}={...(0,r.R)(),...e.components};return o?(0,i.jsx)(o,{...e,children:(0,i.jsx)(T,{...e})}):T()}var F=n(85153);function M(e){const o={code:"code",pre:"pre",...(0,r.R)(),...e.components};return(0,i.jsx)(o.pre,{children:(0,i.jsx)(o.code,{className:"language-python",metastring:'title="flask.py"',children:'accessToken = await client.getAccessToken("https://shopping.your-app.com/api")\n# ou\nclaims = await client.getAccessTokenClaims("https://shopping.your-app.com/api")\n'})})}function E(e={}){const{wrapper:o}={...(0,r.R)(),...e.components};return o?(0,i.jsx)(o,{...e,children:(0,i.jsx)(M,{...e})}):M(e)}const B=[...F.RM];function W(e){return(0,i.jsx)(F.Ay,{getAccessTokenApi:"GetAccessToken",getAccessTokenCode:(0,i.jsx)(E,{})})}function V(e={}){const{wrapper:o}={...(0,r.R)(),...e.components};return o?(0,i.jsx)(o,{...e,children:(0,i.jsx)(W,{...e})}):W()}var G=n(57973);function J(e){const o={code:"code",pre:"pre",...(0,r.R)(),...e.components};return(0,i.jsx)(o.pre,{children:(0,i.jsx)(o.code,{className:"language-python",metastring:'title="client.py"',children:"from logto import LogtoClient, LogtoConfig, UserInfoScope\n\nclient = LogtoClient(\n    LogtoConfig(\n        # ...outras configura\xe7\xf5es\n        # highlight-next-line\n        scopes=[UserInfoScope.organizations],\n    ),\n)\n"})})}function K(e={}){const{wrapper:o}={...(0,r.R)(),...e.components};return o?(0,i.jsx)(o,{...e,children:(0,i.jsx)(J,{...e})}):J(e)}function $(e){const o={code:"code",pre:"pre",...(0,r.R)(),...e.components};return(0,i.jsx)(o.pre,{children:(0,i.jsx)(o.code,{className:"language-python",metastring:'title="flask.py"',children:"# Substitua o par\xe2metro por um ID de organiza\xe7\xe3o v\xe1lido.\n# IDs de organiza\xe7\xe3o v\xe1lidos para o usu\xe1rio podem ser encontrados na reivindica\xe7\xe3o do Token de ID `organizations`.\norganizationToken = await client.getOrganizationToken(organization_id)\n# ou\norganizationTokenClaims = await client.getOrganizationTokenClaims(organization_id)\n"})})}function H(e={}){const{wrapper:o}={...(0,r.R)(),...e.components};return o?(0,i.jsx)(o,{...e,children:(0,i.jsx)($,{...e})}):$(e)}const Y=[...G.RM];function Z(e){return(0,i.jsx)(G.Ay,{organizationScope:"core.UserScopeOrganizations",configOrganizationCode:(0,i.jsx)(K,{}),getOrganizationAccessTokenCode:(0,i.jsx)(H,{})})}function Q(e={}){const{wrapper:o}={...(0,r.R)(),...e.components};return o?(0,i.jsx)(o,{...e,children:(0,i.jsx)(Z,{...e})}):Z()}const X={slug:"/quick-starts/python",sidebar_label:"Python",sidebar_custom_props:{description:"Integre o Logto em seu aplicativo web Python, como Django e Flask."},language:"python",official_link:"https://www.python.org",app_type:"Aplicativo web tradicional",framework:"Flask"},ee="Adicionar autentica\xe7\xe3o ao seu aplicativo web Python",oe={},ne=[{value:"Pr\xe9-requisitos",id:"prerequisites",level:2},{value:"Instala\xe7\xe3o",id:"installation",level:2},{value:"Integra\xe7\xe3o",id:"integration",level:2},{value:"Inicializar LogtoClient",id:"init-logtoclient",level:3},...A,{value:"Configurar URIs de redirecionamento",id:"configure-redirect-uris",level:3},...j.RM,...m.RM,...x.RM,{value:"Implementar rotas de login e logout",id:"implement-sign-in-and-sign-out-routes",level:3},{value:"Lidar com o status de autentica\xe7\xe3o",id:"handle-authentication-status",level:3},...c.RM,{value:"Obter informa\xe7\xf5es do usu\xe1rio",id:"get-user-information",level:2},{value:"Exibir informa\xe7\xf5es do usu\xe1rio",id:"display-user-information",level:3},{value:"Solicitar reivindica\xe7\xf5es adicionais",id:"request-additional-claims",level:3},...l.RM,...u.RM,...d.RM,{value:"Escopos e reivindica\xe7\xf5es",id:"scopes-and-claims",level:3},...h.RM,{value:"Recursos de API e organiza\xe7\xf5es",id:"api-resources-and-organizations",level:2},...a.RM,{value:"Configurar cliente Logto",id:"configure-logto-client",level:3},...O,{value:"Buscar token de acesso para o recurso de API",id:"fetch-access-token-for-the-api-resource",level:3},...B,{value:"Buscar tokens de organiza\xe7\xe3o",id:"fetch-organization-tokens",level:3},...Y,{value:"Leituras adicionais",id:"further-readings",level:2},...p.RM];function se(e){const o={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.header,{children:(0,i.jsx)(o.h1,{id:"adicionar-autentica\xe7\xe3o-ao-seu-aplicativo-web-python",children:"Adicionar autentica\xe7\xe3o ao seu aplicativo web Python"})}),"\n",(0,i.jsx)(o.p,{children:"Este guia mostrar\xe1 como integrar o Logto em seu aplicativo web Python."}),"\n",(0,i.jsx)(f,{}),"\n",(0,i.jsx)(o.h2,{id:"prerequisites",children:"Pr\xe9-requisitos"}),"\n",(0,i.jsxs)(o.ul,{children:["\n",(0,i.jsxs)(o.li,{children:["Uma conta ",(0,i.jsx)(o.a,{href:"https://cloud.logto.io",children:"Logto Cloud"})," ou um ",(0,i.jsx)(o.a,{href:"/introduction/set-up-logto-oss",children:"Logto auto-hospedado"}),"."]}),"\n",(0,i.jsx)(o.li,{children:"Um aplicativo web tradicional Logto criado."}),"\n"]}),"\n",(0,i.jsx)(o.h2,{id:"installation",children:"Instala\xe7\xe3o"}),"\n",(0,i.jsx)(L,{}),"\n",(0,i.jsx)(o.h2,{id:"integration",children:"Integra\xe7\xe3o"}),"\n",(0,i.jsx)(o.h3,{id:"init-logtoclient",children:"Inicializar LogtoClient"}),"\n",(0,i.jsx)(C,{}),"\n",(0,i.jsx)(o.h3,{id:"configure-redirect-uris",children:"Configurar URIs de redirecionamento"}),"\n",(0,i.jsx)(j.Ay,{}),"\n",(0,i.jsx)(m.Ay,{}),"\n",(0,i.jsx)(x.Ay,{}),"\n",(0,i.jsx)(o.h3,{id:"implement-sign-in-and-sign-out-routes",children:"Implementar rotas de login e logout"}),"\n",(0,i.jsx)(R,{}),"\n",(0,i.jsx)(o.h3,{id:"handle-authentication-status",children:"Lidar com o status de autentica\xe7\xe3o"}),"\n",(0,i.jsx)(y,{}),"\n",(0,i.jsx)(c.Ay,{}),"\n",(0,i.jsx)(o.h2,{id:"get-user-information",children:"Obter informa\xe7\xf5es do usu\xe1rio"}),"\n",(0,i.jsx)(o.h3,{id:"display-user-information",children:"Exibir informa\xe7\xf5es do usu\xe1rio"}),"\n",(0,i.jsxs)(o.p,{children:["Para exibir as informa\xe7\xf5es do usu\xe1rio, voc\xea pode usar o m\xe9todo ",(0,i.jsx)(o.code,{children:"getIdTokenClaims"})," ou o m\xe9todo ",(0,i.jsx)(o.code,{children:"fetchUserInfo"})," para obter informa\xe7\xf5es do usu\xe1rio. Enquanto ",(0,i.jsx)(o.code,{children:"getIdTokenClaims"})," retorna as informa\xe7\xf5es do usu\xe1rio contidas no Token de ID, ",(0,i.jsx)(o.code,{children:"fetchUserInfo"})," busca as informa\xe7\xf5es do usu\xe1rio do endpoint userinfo."]}),"\n",(0,i.jsxs)(o.p,{children:["Como voc\xea pode ver, usamos o decorador ",(0,i.jsx)(o.code,{children:"@authenticated"})," para trazer o contexto das informa\xe7\xf5es do usu\xe1rio para as APIs do aplicativo Flask."]}),"\n",(0,i.jsx)(t.A,{title:"authenticated.py",language:"python",children:'from functools import wraps\nfrom flask import g, jsonify, redirect\nfrom samples.client import client\ndef authenticated(shouldRedirect: bool = False, fetchUserInfo: bool = False):\n  def decorator(func):\n      @wraps(func)\n      async def wrapper(*args, **kwargs):\n          if client.isAuthenticated() is False:\n              if shouldRedirect:\n                  return redirect("/sign-in")\n              return jsonify({"error": "Not authenticated"}), 401\n          # Armazenar informa\xe7\xf5es do usu\xe1rio no contexto do aplicativo Flask\n          g.user = (\n              await client.fetchUserInfo()\n              if fetchUserInfo\n              else client.getIdTokenClaims()\n          )\n          return await func(*args, **kwargs)\n      return wrapper\n  return decorator\n'}),"\n",(0,i.jsx)(o.p,{children:"Por exemplo, para exibir as informa\xe7\xf5es do usu\xe1rio em uma API, voc\xea pode usar o seguinte c\xf3digo:"}),"\n",(0,i.jsx)(t.A,{title:"flask.py",language:"python",children:'@app.route("/protected/userinfo")\n@authenticated(shouldRedirect=True, fetchUserInfo=True)\nasync def protectedUserinfo():\n  try:\n      return (\n          "<h2>User info</h2>"\n          + g.user.model_dump_json(indent=2, exclude_unset=True).replace("\\n", "<br>")\n          + navigationHtml\n      )\n  except LogtoException as e:\n      return "<h2>Error</h2>" + str(e) + "<br>" + navigationHtml\n'}),"\n",(0,i.jsxs)(o.p,{children:["Nossos modelos de dados s\xe3o baseados em ",(0,i.jsx)(o.a,{href:"https://docs.pydantic.dev/",children:"pydantic"}),", ent\xe3o voc\xea pode usar ",(0,i.jsx)(o.code,{children:"model_dump_json"})," para converter o modelo de dados em JSON."]}),"\n",(0,i.jsxs)(o.p,{children:["Adicionar ",(0,i.jsx)(o.code,{children:"exclude_unset=True"})," excluir\xe1 campos n\xe3o definidos da sa\xedda JSON, tornando a sa\xedda mais precisa."]}),"\n",(0,i.jsxs)(o.p,{children:["Por exemplo, se n\xe3o solicitarmos o escopo ",(0,i.jsx)(o.code,{children:"email"})," ao fazer login, o campo ",(0,i.jsx)(o.code,{children:"email"})," ser\xe1 exclu\xeddo da sa\xedda JSON. No entanto, se solicitarmos o escopo ",(0,i.jsx)(o.code,{children:"email"}),", mas o usu\xe1rio n\xe3o tiver um endere\xe7o de email, o campo ",(0,i.jsx)(o.code,{children:"email"})," ser\xe1 inclu\xeddo na sa\xedda JSON com um valor ",(0,i.jsx)(o.code,{children:"null"}),"."]}),"\n",(0,i.jsxs)(o.p,{children:["Para saber mais sobre escopos e reivindica\xe7\xf5es, veja ",(0,i.jsx)(o.a,{href:"#get-user-information",children:"Obter informa\xe7\xf5es do usu\xe1rio"}),"."]}),"\n",(0,i.jsx)(o.h3,{id:"request-additional-claims",children:"Solicitar reivindica\xe7\xf5es adicionais"}),"\n",(0,i.jsx)(l.Ay,{method:"client.getIdTokenClaims()"}),"\n",(0,i.jsx)(u.Ay,{}),"\n",(0,i.jsxs)(o.p,{children:["Para solicitar escopos adicionais, voc\xea pode pass\xe1-los para o objeto ",(0,i.jsx)(o.code,{children:"LogtoConfig"}),". Por exemplo:"]}),"\n",(0,i.jsx)(o.pre,{children:(0,i.jsx)(o.code,{className:"language-python",metastring:'title="client.py"',children:"# highlight-next-line\nfrom logto import UserInfoScope\n\nclient = LogtoClient(\n    LogtoConfig(\n        # ...outras configura\xe7\xf5es\n        # highlight-start\n        scopes = [\n            UserInfoScope.email,\n            UserInfoScope.phone,\n        ],\n        # highlight-end\n    ),\n    storage=SessionStorage(),\n)\n"})}),"\n",(0,i.jsxs)(o.p,{children:["Ent\xe3o voc\xea pode acessar as reivindica\xe7\xf5es adicionais no valor de retorno de ",(0,i.jsx)(o.code,{children:"client.getIdTokenClaims()"}),":"]}),"\n",(0,i.jsx)(o.pre,{children:(0,i.jsx)(o.code,{className:"language-python",children:"idTokenClaims = await client.getIdTokenClaims();\n"})}),"\n",(0,i.jsx)(d.Ay,{type:"method",method:"client.fetchUserInfo()",codeSnippet:(0,i.jsx)(t.A,{language:"python",title:"flask.py",children:"(await client.fetchUserInfo()).custom_data"})}),"\n",(0,i.jsx)(o.h3,{id:"scopes-and-claims",children:"Escopos e reivindica\xe7\xf5es"}),"\n",(0,i.jsx)(h.Ay,{}),"\n",(0,i.jsx)(o.h2,{id:"api-resources-and-organizations",children:"Recursos de API e organiza\xe7\xf5es"}),"\n",(0,i.jsx)(a.Ay,{}),"\n",(0,i.jsx)(o.h3,{id:"configure-logto-client",children:"Configurar cliente Logto"}),"\n",(0,i.jsx)(D,{}),"\n",(0,i.jsx)(o.h3,{id:"fetch-access-token-for-the-api-resource",children:"Buscar token de acesso para o recurso de API"}),"\n",(0,i.jsx)(V,{}),"\n",(0,i.jsx)(o.h3,{id:"fetch-organization-tokens",children:"Buscar tokens de organiza\xe7\xe3o"}),"\n",(0,i.jsx)(Q,{}),"\n",(0,i.jsx)(o.h2,{id:"further-readings",children:"Leituras adicionais"}),"\n",(0,i.jsx)(p.Ay,{})]})}function ie(e={}){const{wrapper:o}={...(0,r.R)(),...e.components};return o?(0,i.jsx)(o,{...e,children:(0,i.jsx)(se,{...e})}):se(e)}},55138:(e,o,n)=>{n.d(o,{A:()=>x});var s=n(28259),i=n(6097),r=n(58574),t=n(9484),a=n(76566),c=n(26346),d=n(17867),l=n(17510),p=n(13526),h=n(72355);const u={codeBlockContent:"codeBlockContent_m3Ux",codeBlockTitle:"codeBlockTitle_P25_",codeBlock:"codeBlock_qGQc",codeBlockStandalone:"codeBlockStandalone_zC50",codeBlockLines:"codeBlockLines_p187",codeBlockLinesWithNumbering:"codeBlockLinesWithNumbering_OFgW",buttonGroup:"buttonGroup_6DOT"};var m=n(25105);function x(e){let{children:o,className:n="",metastring:x,title:j,showLineNumbers:g,language:f}=e;const{prism:{defaultLanguage:v,magicComments:y}}=(0,s.p)(),b=function(e){return e?.toLowerCase()}(f??(0,r.Op)(n)??v),R=(0,i.A)(),k=(0,t.f)(),A=(0,r.wt)(x)||j,{lineClassNames:w,code:C}=(0,r.Li)(o,{metastring:x,language:b,magicComments:y}),I=g??(0,r._u)(x);return(0,m.jsxs)(a.A,{as:"div",className:(0,p.A)(n,b&&!n.includes(`language-${b}`)&&`language-${b}`),children:[A&&(0,m.jsx)("div",{className:u.codeBlockTitle,children:A}),(0,m.jsxs)("div",{className:u.codeBlockContent,children:[(0,m.jsx)(h.f4,{theme:R,code:C,language:b??"text",children:e=>{let{className:o,tokens:n,getLineProps:s,getTokenProps:i}=e;return(0,m.jsx)("pre",{ref:k.codeBlockRef,tabIndex:0,className:(0,p.A)(o,u.codeBlock,"thin-scrollbar"),children:(0,m.jsx)("code",{className:(0,p.A)(u.codeBlockLines,I&&u.codeBlockLinesWithNumbering),children:n.map(((e,o)=>(0,m.jsx)(d.A,{line:e,getLineProps:s,getTokenProps:i,classNames:w[o],showLineNumbers:I},o)))})})}}),(0,m.jsxs)("div",{className:u.buttonGroup,children:[(k.isEnabled||k.isCodeScrollable)&&(0,m.jsx)(l.A,{className:u.codeButton,isEnabled:k.isEnabled,onClick:()=>{k.toggle()}}),(0,m.jsx)(c.A,{className:u.codeButton,code:C})]})]})]})}}}]);