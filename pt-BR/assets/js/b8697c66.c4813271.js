"use strict";(self.webpackChunk_logto_docs=self.webpackChunk_logto_docs||[]).push([[636],{28984:(e,a,o)=>{o.r(a),o.d(a,{assets:()=>x,contentTitle:()=>g,default:()=>b,frontMatter:()=>m,metadata:()=>t,toc:()=>f});const t=JSON.parse('{"id":"quick-starts/framework/flutterflow/README","title":"Personalizar o FlutterFlow CustomAuthManager usando Logto SDK","description":"FlutterFlow possui um recurso de autentica\xe7\xe3o personalizada embutido que permite autenticar usu\xe1rios usando seu pr\xf3prio backend. No entanto, o fluxo de autentica\xe7\xe3o personalizada embutido foi projetado para funcionar com uma \xfanica chamada de API de autentica\xe7\xe3o. Se voc\xea estiver usando um Provedor de Identidade (IdP) de terceiros, a solicita\xe7\xe3o de autentica\xe7\xe3o s\xf3 pode ser feita usando o tipo de concess\xe3o Resource Owner Password Credentials, o que n\xe3o \xe9 recomendado para uso em produ\xe7\xe3o. Veja Tipo de concess\xe3o ropc obsoleto para mais detalhes.","source":"@site/i18n/pt-BR/docusaurus-plugin-content-docs/current/quick-starts/framework/flutterflow/README.mdx","sourceDirName":"quick-starts/framework/flutterflow","slug":"/quick-starts/flutter-flow","permalink":"/pt-BR/quick-starts/flutter-flow","draft":false,"unlisted":false,"editUrl":"https://github.com/logto-io/docs/tree/master/i18n/pt-BR/docusaurus-plugin-content-docs/current/quick-starts/framework/flutterflow/README.mdx","tags":[],"version":"current","frontMatter":{"slug":"/quick-starts/flutter-flow","sidebar_label":"FlutterFlow","sidebar_custom_props":{"description":"FlutterFlow \xe9 um framework de baixo c\xf3digo para construir aplicativos h\xedbridos em Flutter."}},"sidebar":"quickStartSidebar","previous":{"title":"Flutter","permalink":"/pt-BR/quick-starts/flutter"},"next":{"title":"Go","permalink":"/pt-BR/quick-starts/go"}}');var n=o(25105),r=o(79621);function i(e){const a={code:"code",pre:"pre",...(0,r.R)(),...e.components};return(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-dart",children:"// lib/auth/custom_auth/custom_auth_manager.dart\n\nimport 'dart:async';\n\nimport 'package:flutter/foundation.dart';\nimport 'package:http/http.dart' as http;\nimport 'package:logto_dart_sdk/logto_client.dart';\nimport 'package:logto_dart_sdk/src/modules/id_token.dart';\n\nimport 'custom_auth_user_provider.dart';\n\nexport 'custom_auth_manager.dart';\n\n\nclass CustomAuthManager {\n  late LogtoClient logtoClient;\n\n  final logtoConfig = const LogtoConfig(\n      appId: '<YOUR-APP-ID>',\n      endpoint: '<YOUR-LOGTO-ENDPOINT>');\n\n\n  // ...\n\n  FlutterFlowAuthAuthUser? _updateCurrentUser(\n      {bool loggedIn = false, String? uid, OpenIdClaims? idToken}) {\n    // Atualiza o fluxo do usu\xe1rio atual.\n    final updatedUser = FlutterFlowAuthAuthUser(\n      loggedIn: loggedIn,\n      uid: uid,\n      idToken: idToken,\n    );\n\n    flutterFlowAuthAuthUserSubject.add(updatedUser);\n\n    return updatedUser;\n  }\n\n  Future initialize() async {\n    logtoClient = LogtoClient(config: logtoConfig, httpClient: http.Client());\n\n    late OpenIdClaims? idToken;\n\n    try {\n      idToken = await logtoClient.idTokenClaims;\n    } catch (e) {\n      if (kDebugMode) {\n        print('Erro ao inicializar a autentica\xe7\xe3o: $e');\n      }\n    }\n\n    _updateCurrentUser(\n        loggedIn: idToken != null, uid: idToken?.subject, idToken: idToken);\n  }\n}\n\nFlutterFlowAuthAuthUser? currentUser;\nbool get loggedIn => currentUser?.loggedIn ?? false;\n\n"})})}function s(e={}){const{wrapper:a}={...(0,r.R)(),...e.components};return a?(0,n.jsx)(a,{...e,children:(0,n.jsx)(i,{...e})}):i(e)}function l(e){const a={code:"code",pre:"pre",...(0,r.R)(),...e.components};return(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-dart",children:"// lib/auth/custom_auth/custom_auth_user_provider.dart\n\nimport 'package:logto_dart_sdk/src/modules/id_token.dart';\nimport 'package:rxdart/rxdart.dart';\n\nimport 'custom_auth_manager.dart';\n\nclass FlutterFlowAuthAuthUser {\n  FlutterFlowAuthAuthUser({required this.loggedIn, this.uid, this.idToken});\n\n  bool loggedIn;\n  String? uid;\n  OpenIdClaims? idToken;\n}\n\n/// Gera um fluxo do usu\xe1rio autenticado.\nBehaviorSubject<FlutterFlowAuthAuthUser> flutterFlowAuthAuthUserSubject =\n    BehaviorSubject.seeded(FlutterFlowAuthAuthUser(loggedIn: false));\nStream<FlutterFlowAuthAuthUser> flutterFlowAuthAuthUserStream() =>\n    flutterFlowAuthAuthUserSubject\n        .asBroadcastStream()\n        .map((user) => currentUser = user);\n\n"})})}function d(e={}){const{wrapper:a}={...(0,r.R)(),...e.components};return a?(0,n.jsx)(a,{...e,children:(0,n.jsx)(l,{...e})}):l(e)}function u(e){const a={a:"a",admonition:"admonition",code:"code",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components},{Details:o}=a;return o||function(e,a){throw new Error("Expected "+(a?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,n.jsxs)(o,{children:[(0,n.jsx)("summary",{children:(0,n.jsx)(a.h3,{id:"flutter_secure_storage",children:"flutter_secure_storage"})}),(0,n.jsxs)(a.p,{children:["Usamos ",(0,n.jsx)(a.a,{href:"https://pub.dev/packages/flutter_secure_storage",children:"flutter_secure_storage"})," para implementar o armazenamento seguro persistente de tokens em v\xe1rias plataformas. Sob o cap\xf4:"]}),(0,n.jsxs)(a.ul,{children:["\n",(0,n.jsx)(a.li,{children:"Keychain \xe9 usado para iOS"}),"\n",(0,n.jsx)(a.li,{children:"Criptografia AES \xe9 usada para Android."}),"\n"]}),(0,n.jsx)(a.h3,{id:"config-android-version",children:"Configurar vers\xe3o do Android:"}),(0,n.jsx)(a.p,{children:"Em [project]/android/app/build.gradle defina minSdkVersion para >= 18."}),(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-kotlin",children:"  android {\n      ...\n\n      defaultConfig {\n          ...\n          minSdkVersion 18\n          ...\n      }\n  }\n"})}),(0,n.jsx)(a.h3,{id:"disable-autobackup",children:"Desativar backup autom\xe1tico:"}),(0,n.jsx)(a.admonition,{type:"note",children:(0,n.jsxs)(a.p,{children:["Por padr\xe3o, o Android faz backup dos dados no Google Drive. Isso pode causar a exce\xe7\xe3o java.security.InvalidKeyException",":Failed"," to unwrap key."]})}),(0,n.jsx)(a.p,{children:"Para evitar isso, voc\xea pode desativar o backup autom\xe1tico para seu aplicativo ou excluir sharedprefs do FlutterSecureStorage."}),(0,n.jsxs)(a.ol,{children:["\n",(0,n.jsxs)(a.li,{children:["\n",(0,n.jsx)(a.p,{children:"Para desativar o backup autom\xe1tico, v\xe1 para o arquivo de manifesto do seu aplicativo e defina o valor booleano android:allowBackup:"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-xml",children:'<manifest ... >\n    ...\n    <application\n      android:allowBackup="false"\n      android:fullBackupContent="false"\n      ...\n    >\n        ...\n    </application>\n</manifest>\n\n'})}),"\n"]}),"\n",(0,n.jsxs)(a.li,{children:["\n",(0,n.jsx)(a.p,{children:"Excluir sharedprefs do FlutterSecureStorage."}),"\n",(0,n.jsxs)(a.p,{children:["Se voc\xea precisar habilitar o android",":fullBackupContent"," para seu aplicativo. Configure uma regra de backup para ",(0,n.jsx)(a.a,{href:"https://developer.android.com/guide/topics/data/autobackup#IncludingFiles",children:"excluir"})," as prefs usadas pelo plugin:"]}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-xml",children:'<application ...\n  android:fullBackupContent="@xml/backup_rules">\n</application>\n'})}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-xml",children:'<?xml version="1.0" encoding="utf-8"?>\n<full-backup-content>\n  <exclude domain="sharedpref" path="FlutterSecureStorage"/>\n</full-backup-content>\n'})}),"\n",(0,n.jsxs)(a.p,{children:["Por favor, verifique ",(0,n.jsx)(a.a,{href:"https://pub.dev/packages/flutter_secure_storage#configure-android-version",children:"flutter_secure_storage"})," para mais detalhes."]}),"\n"]}),"\n"]})]})}function c(e={}){const{wrapper:a}={...(0,r.R)(),...e.components};return a?(0,n.jsx)(a,{...e,children:(0,n.jsx)(u,{...e})}):u(e)}function p(e){const a={a:"a",admonition:"admonition",code:"code",h3:"h3",p:"p",pre:"pre",...(0,r.R)(),...e.components},{Details:o}=a;return o||function(e,a){throw new Error("Expected "+(a?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,n.jsxs)(o,{children:[(0,n.jsx)("summary",{children:(0,n.jsx)(a.h3,{id:"flutter_web_auth",children:"flutter_web_auth"})}),(0,n.jsxs)(a.p,{children:[(0,n.jsx)(a.a,{href:"https://pub.dev/packages/flutter_web_auth",children:"flutter_web_auth"})," \xe9 usado por tr\xe1s do SDK flutter do Logto. N\xf3s confiamos em sua interface de intera\xe7\xe3o baseada em webview para abrir as p\xe1ginas de autoriza\xe7\xe3o do Logto."]}),(0,n.jsx)(a.admonition,{type:"note",children:(0,n.jsx)(a.p,{children:"Este plugin usa ASWebAuthenticationSession no iOS 12+ e macOS 10.15+, SFAuthenticationSession no iOS 11, Chrome Custom Tabs no Android e abre uma nova janela na Web.\nVoc\xea pode constru\xed-lo com iOS 8+, mas atualmente \xe9 suportado apenas por iOS 11 ou superior."})}),(0,n.jsx)(a.h3,{id:"register-the-callback-url-on-android",children:"Registrar a URL de callback no Android"}),(0,n.jsx)(a.p,{children:"Para capturar a URL de callback da p\xe1gina de login do Logto, voc\xea precisar\xe1 registrar seu redirectUri de login no AndroidManifest.xml."}),(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-xml",children:'<activity android:name="com.linusu.flutter_web_auth.CallbackActivity" android:exported="true">\n    <intent-filter android:label="flutter_web_auth">\n        <action android:name="android.intent.action.VIEW"/>\n        <category android:name="android.intent.category.DEFAULT"/>\n        <category android:name="android.intent.category.BROWSABLE"/>\n        <data android:scheme="io.logto"/>\n    </intent-filter>\n</activity>\n'})})]})}function h(e={}){const{wrapper:a}={...(0,r.R)(),...e.components};return a?(0,n.jsx)(a,{...e,children:(0,n.jsx)(p,{...e})}):p(e)}const m={slug:"/quick-starts/flutter-flow",sidebar_label:"FlutterFlow",sidebar_custom_props:{description:"FlutterFlow \xe9 um framework de baixo c\xf3digo para construir aplicativos h\xedbridos em Flutter."}},g="Personalizar o FlutterFlow CustomAuthManager usando Logto SDK",x={},f=[{value:"Pr\xe9-requisitos",id:"prerequisites",level:2},{value:"Habilitar c\xf3digo personalizado no FlutterFlow",id:"enable-flutterflow-custom-code",level:2},{value:"Crie sua interface no FlutterFlow",id:"create-your-ui-in-flutterflow",level:2},{value:"Personalizar o CustomAuthManager",id:"customize-the-customauthmanager",level:2},{value:"Instalar a depend\xeancia do Logto SDK",id:"install-logto-sdk-dependency",level:3},{value:"Atualizar o UserProvider",id:"update-the-userprovider",level:3},{value:"Inicializar o cliente logto no CustomAuthManager",id:"init-the-logto-client-in-customauthmanager",level:3},{value:"Implementar o m\xe9todo de login",id:"implement-the-sign-in-method",level:3},{value:"Implementar o m\xe9todo de logout",id:"implement-the-sign-out-method",level:3},{value:"Atualizar os m\xe9todos utilit\xe1rios de autentica\xe7\xe3o",id:"update-the-auth-util-methods",level:3},{value:"Integrar a autentica\xe7\xe3o personalizada na sua interface",id:"integrate-the-custom-authentication-in-your-ui",level:2},{value:"P\xe1gina Inicial",id:"home-page",level:3},{value:"P\xe1gina de Perfil do Usu\xe1rio",id:"user-profile-page",level:3},{value:"Leituras adicionais",id:"further-readings",level:2},{value:"Solu\xe7\xe3o de problemas de depend\xeancia",id:"dependency-troubleshooting",level:2},{value:"flutter_secure_storage",id:"flutter_secure_storage",level:3},{value:"Configurar vers\xe3o do Android:",id:"config-android-version",level:3},{value:"Desativar backup autom\xe1tico:",id:"disable-autobackup",level:3},{value:"flutter_web_auth",id:"flutter_web_auth",level:3},{value:"Registrar a URL de callback no Android",id:"register-the-callback-url-on-android",level:3}];function j(e){const a={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.header,{children:(0,n.jsx)(a.h1,{id:"personalizar-o-flutterflow-customauthmanager-usando-logto-sdk",children:"Personalizar o FlutterFlow CustomAuthManager usando Logto SDK"})}),"\n",(0,n.jsxs)(a.p,{children:["FlutterFlow possui um recurso de ",(0,n.jsx)(a.a,{href:"https://docs.flutterflow.io/data-and-backend/custom-authentication",children:"autentica\xe7\xe3o personalizada"})," embutido que permite autenticar usu\xe1rios usando seu pr\xf3prio backend. No entanto, o fluxo de autentica\xe7\xe3o personalizada embutido foi projetado para funcionar com uma \xfanica chamada de API de autentica\xe7\xe3o. Se voc\xea estiver usando um Provedor de Identidade (IdP) de terceiros, a solicita\xe7\xe3o de autentica\xe7\xe3o s\xf3 pode ser feita usando o tipo de concess\xe3o ",(0,n.jsx)(a.code,{children:"Resource Owner Password Credentials"}),", o que n\xe3o \xe9 recomendado para uso em produ\xe7\xe3o. Veja ",(0,n.jsx)(a.a,{href:"https://blog.logto.io/deprecated-ropc-grant-type/",children:"Tipo de concess\xe3o ropc obsoleto"})," para mais detalhes."]}),"\n",(0,n.jsxs)(a.p,{children:["Um fluxo de autentica\xe7\xe3o padr\xe3o OpenID Connect (OIDC) envolve v\xe1rias etapas, como autoriza\xe7\xe3o, troca de tokens e recupera\xe7\xe3o de informa\xe7\xf5es do usu\xe1rio. Para implementar um fluxo de autentica\xe7\xe3o OIDC padr\xe3o com um IdP como Logto, voc\xea precisa personalizar a classe ",(0,n.jsx)(a.code,{children:"CustomAuthManager"})," no FlutterFlow."]}),"\n",(0,n.jsxs)(a.p,{children:["Este tutorial mostrar\xe1 como personalizar a classe ",(0,n.jsx)(a.code,{children:"CustomAuthManager"})," no FlutterFlow usando o Logto ",(0,n.jsx)(a.a,{href:"/pt-BR/quick-starts/flutter",children:"Flutter SDK"}),". Voc\xea pode aproveitar o Logto SDK para o fluxo de autentica\xe7\xe3o OIDC padr\xe3o enquanto mant\xe9m os benef\xedcios do construtor de interface do FlutterFlow."]}),"\n",(0,n.jsx)(a.admonition,{type:"tip",children:(0,n.jsxs)(a.ul,{children:["\n",(0,n.jsxs)(a.li,{children:["O pacote Logto SDK est\xe1 dispon\xedvel no ",(0,n.jsx)(a.a,{href:"https://pub.dev/packages/logto_dart_sdk",children:"pub.dev"})," e no reposit\xf3rio ",(0,n.jsx)(a.a,{href:"https://github.com/logto-io/dart",children:"github do Logto"}),"."]}),"\n",(0,n.jsx)(a.li,{children:"O SDK atualmente \xe9 adequado apenas para plataformas Android e iOS."}),"\n"]})}),"\n",(0,n.jsx)(a.h2,{id:"prerequisites",children:"Pr\xe9-requisitos"}),"\n",(0,n.jsxs)(a.ul,{children:["\n",(0,n.jsxs)(a.li,{children:["Uma conta ",(0,n.jsx)(a.a,{href:"https://cloud.logto.io",children:"Logto Cloud"})," ou um ",(0,n.jsx)(a.a,{href:"/introduction/set-up-logto-oss",children:"Logto auto-hospedado"}),"."]}),"\n",(0,n.jsx)(a.li,{children:"Criar um aplicativo Logto Flutter."}),"\n",(0,n.jsx)(a.li,{children:"Um projeto FlutterFlow."}),"\n"]}),"\n",(0,n.jsx)(a.h2,{id:"enable-flutterflow-custom-code",children:"Habilitar c\xf3digo personalizado no FlutterFlow"}),"\n",(0,n.jsxs)(a.p,{children:["Para personalizar a classe ",(0,n.jsx)(a.code,{children:"CustomAuthManager"}),", voc\xea precisa habilitar o recurso de c\xf3digo personalizado no FlutterFlow. Siga o guia ",(0,n.jsx)(a.a,{href:"https://docs.flutterflow.io/customizing-your-app/manage-custom-code-in-github",children:"Gerenciar C\xf3digo Personalizado no GitHub"})," para sincronizar seu projeto FlutterFlow com o GitHub."]}),"\n",(0,n.jsx)(a.admonition,{type:"note",children:(0,n.jsx)(a.p,{children:"Gerenciar c\xf3digo personalizado no GitHub \xe9 um recurso premium no FlutterFlow. Voc\xea precisa atualizar seu FlutterFlow para o plano pro para habilitar esse recurso."})}),"\n",(0,n.jsx)(a.p,{children:"Uma vez feito isso, voc\xea ter\xe1 tr\xeas branches diferentes no seu reposit\xf3rio GitHub FlutterFlow:"}),"\n",(0,n.jsxs)(a.ol,{children:["\n",(0,n.jsxs)(a.li,{children:[(0,n.jsx)(a.code,{children:"main"}),": A branch principal para o projeto flutter. Voc\xea precisar\xe1 dessa branch para implantar seu projeto."]}),"\n",(0,n.jsxs)(a.li,{children:[(0,n.jsx)(a.code,{children:"flutterflow"}),": A branch onde o ",(0,n.jsx)(a.code,{children:"FlutterFlow"})," sincronizar\xe1 as altera\xe7\xf5es do editor FlutterFlow."]}),"\n",(0,n.jsxs)(a.li,{children:[(0,n.jsx)(a.code,{children:"develop"}),": A branch onde voc\xea pode modificar seu c\xf3digo personalizado."]}),"\n"]}),"\n",(0,n.jsx)(a.h2,{id:"create-your-ui-in-flutterflow",children:"Crie sua interface no FlutterFlow"}),"\n",(0,n.jsxs)(a.p,{children:["Primeiro, crie sua interface no FlutterFlow. Voc\xea pode seguir a ",(0,n.jsx)(a.a,{href:"https://docs.flutterflow.io/",children:"documenta\xe7\xe3o do FlutterFlow"})," para criar sua interface com base em seus requisitos. Para este tutorial, como requisito m\xednimo, criaremos duas p\xe1ginas:"]}),"\n",(0,n.jsxs)(a.ol,{children:["\n",(0,n.jsx)(a.li,{children:"Uma p\xe1gina inicial simples com um bot\xe3o de login."}),"\n",(0,n.jsx)(a.li,{children:"Uma p\xe1gina de perfil do usu\xe1rio para exibir informa\xe7\xf5es do usu\xe1rio e bot\xe3o de logout."}),"\n"]}),"\n",(0,n.jsxs)(a.p,{children:["V\xe1 para ",(0,n.jsx)(a.code,{children:"App Settings"})," -> p\xe1gina ",(0,n.jsx)(a.code,{children:"Authentication"})," e habilite a autentica\xe7\xe3o personalizada. Isso criar\xe1 uma classe ",(0,n.jsx)(a.code,{children:"CustomAuthManager"})," no seu projeto FlutterFlow."]}),"\n",(0,n.jsx)("center",{children:(0,n.jsx)("img",{src:"/img/assets/flutter-flow-custom-authentication.png",alt:"Autentica\xe7\xe3o personalizada do FlutterFlow"})}),"\n",(0,n.jsxs)(a.p,{children:["Uma vez que voc\xea tenha a interface pronta, navegue at\xe9 ",(0,n.jsx)(a.code,{children:"integrations"})," -> p\xe1gina ",(0,n.jsx)(a.code,{children:"GitHub"})," e clique no bot\xe3o ",(0,n.jsx)(a.code,{children:"Push to Repository"})," para enviar as altera\xe7\xf5es para a branch ",(0,n.jsx)(a.code,{children:"flutterflow"}),"."]}),"\n",(0,n.jsx)("center",{children:(0,n.jsx)("img",{src:"/img/assets/flutter-flow-github-push.png",alt:"Envio para o GitHub do FlutterFlow"})}),"\n",(0,n.jsx)(a.h2,{id:"customize-the-customauthmanager",children:"Personalizar o CustomAuthManager"}),"\n",(0,n.jsxs)(a.p,{children:["Mude para a branch ",(0,n.jsx)(a.code,{children:"develop"})," no seu reposit\xf3rio GitHub e mescle as \xfaltimas altera\xe7\xf5es da branch ",(0,n.jsx)(a.code,{children:"flutterflow"}),". Incluindo suas p\xe1ginas de interface e a classe ",(0,n.jsx)(a.code,{children:"CustomAuthManager"})," pr\xe9-constru\xedda."]}),"\n",(0,n.jsx)(a.h3,{id:"install-logto-sdk-dependency",children:"Instalar a depend\xeancia do Logto SDK"}),"\n",(0,n.jsx)(a.p,{children:"Adicione a depend\xeancia do Logto SDK ao seu projeto."}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-bash",children:"  flutter pub add logto_dart_sdk\n"})}),"\n",(0,n.jsxs)(a.admonition,{type:"note",children:[(0,n.jsx)(a.p,{children:"Pacote Http opcional:"}),(0,n.jsxs)(a.p,{children:["O cliente Logto requer um cliente http para fazer chamadas de API. Voc\xea pode usar o pacote ",(0,n.jsx)(a.code,{children:"http"})," ou qualquer outro pacote de cliente http de sua escolha."]}),(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-bash",children:"  flutter pub add http\n"})})]}),"\n",(0,n.jsx)(a.h3,{id:"update-the-userprovider",children:"Atualizar o UserProvider"}),"\n",(0,n.jsxs)(a.p,{children:["Adicione a classe ",(0,n.jsx)(a.code,{children:"OpenIdClaims"})," \xe0 classe ",(0,n.jsx)(a.code,{children:"CustomAuthUserProvider"})," para armazenar as informa\xe7\xf5es do usu\xe1rio."]}),"\n",(0,n.jsxs)(a.blockquote,{children:["\n",(0,n.jsxs)(a.p,{children:["A classe ",(0,n.jsx)(a.code,{children:"OpenIdClaims"})," faz parte do Logto SDK, que fornecer\xe1 as reivindica\xe7\xf5es do ",(0,n.jsx)(a.code,{children:"id_token"})," para o usu\xe1rio autenticado."]}),"\n"]}),"\n",(0,n.jsx)(d,{}),"\n",(0,n.jsx)(a.h3,{id:"init-the-logto-client-in-customauthmanager",children:"Inicializar o cliente logto no CustomAuthManager"}),"\n",(0,n.jsxs)(a.p,{children:["Inicialize o cliente Logto na classe ",(0,n.jsx)(a.code,{children:"CustomAuthManager"}),"."]}),"\n",(0,n.jsx)(s,{}),"\n",(0,n.jsxs)(a.p,{children:["O m\xe9todo ",(0,n.jsx)(a.code,{children:"initialize"})," inicializar\xe1 o cliente Logto e atualizar\xe1 o fluxo de usu\xe1rio atual com o status de autentica\xe7\xe3o do usu\xe1rio persistido no armazenamento local."]}),"\n",(0,n.jsxs)(a.blockquote,{children:["\n",(0,n.jsxs)(a.p,{children:["O Logto SDK usa o pacote ",(0,n.jsx)(a.a,{href:"https://pub.dev/packages/flutter_secure_storage",children:"flutter_secure_storage"})," para armazenar as informa\xe7\xf5es de autentica\xe7\xe3o do usu\xe1rio de forma segura."]}),"\n"]}),"\n",(0,n.jsx)(a.h3,{id:"implement-the-sign-in-method",children:"Implementar o m\xe9todo de login"}),"\n",(0,n.jsxs)(a.p,{children:["Chame o m\xe9todo ",(0,n.jsx)(a.code,{children:"LogtoClient.signIn"})," para iniciar um fluxo de autentica\xe7\xe3o OIDC padr\xe3o. A p\xe1gina de login do Logto ser\xe1 aberta em uma webview usando ",(0,n.jsx)(a.a,{href:"https://pub.dev/packages/flutter_web_auth",children:"flutter_web_auth"}),"."]}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-dart",children:"// lib/auth/custom_auth/custom_auth_manager.dart\n\nFuture<FlutterFlowAuthAuthUser?> signIn(\n    String redirectUri,\n  ) async {\n    await logtoClient.signIn(redirectUri);\n\n    var idTokenClaims = await logtoClient.idTokenClaims;\n\n    return _updateCurrentUser(\n      loggedIn: idTokenClaims != null,\n      uid: idTokenClaims?.subject,\n      idToken: idTokenClaims,\n    );\n  }\n\n"})}),"\n",(0,n.jsxs)(a.p,{children:["O LogtoClient lidar\xe1 com as etapas de autoriza\xe7\xe3o, troca de tokens e recupera\xe7\xe3o de informa\xe7\xf5es do usu\xe1rio. Uma vez que o usu\xe1rio \xe9 autenticado, as ",(0,n.jsx)(a.code,{children:"idTokenClaims"})," ser\xe3o armazenadas no armazenamento local.\nRecupere as ",(0,n.jsx)(a.code,{children:"idTokenClaims"})," do LogtoClient e atualize o fluxo de usu\xe1rio atual."]}),"\n",(0,n.jsx)(a.h3,{id:"implement-the-sign-out-method",children:"Implementar o m\xe9todo de logout"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-dart",children:"// lib/auth/custom_auth/custom_auth_manager.dart\n\nFuture signOut() async {\n    await logtoClient.signOut();\n\n    flutterFlowAuthAuthUserSubject.add(\n      FlutterFlowAuthAuthUser(loggedIn: false),\n    );\n  }\n"})}),"\n",(0,n.jsx)(a.h3,{id:"update-the-auth-util-methods",children:"Atualizar os m\xe9todos utilit\xe1rios de autentica\xe7\xe3o"}),"\n",(0,n.jsxs)(a.ul,{children:["\n",(0,n.jsxs)(a.li,{children:["Adicione o getter ",(0,n.jsx)(a.code,{children:"authManager"})," para acessar a inst\xe2ncia do ",(0,n.jsx)(a.code,{children:"CustomAuthManager"}),"."]}),"\n",(0,n.jsxs)(a.li,{children:["Adicione o getter ",(0,n.jsx)(a.code,{children:"currentUserUid"})," para obter o uid do usu\xe1rio atual."]}),"\n",(0,n.jsxs)(a.li,{children:["Adicione o getter ",(0,n.jsx)(a.code,{children:"currentUserData"})," para obter os dados do usu\xe1rio atual."]}),"\n",(0,n.jsxs)(a.li,{children:["Adicione o getter ",(0,n.jsx)(a.code,{children:"logtoClient"})," para acessar a inst\xe2ncia do cliente Logto."]}),"\n"]}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-dart",children:"// lib/auth/custom_auth/auth_util.dart\n\nimport 'package:logto_dart_sdk/logto_client.dart';\nimport 'package:logto_dart_sdk/src/modules/id_token.dart';\n\nimport 'custom_auth_manager.dart';\n\nexport 'custom_auth_manager.dart';\n\nfinal _authManager = CustomAuthManager();\nCustomAuthManager get authManager => _authManager;\nString get currentUserUid => currentUser?.uid ?? '';\nOpenIdClaims? get currentUserData => currentUser?.idToken;\nLogtoClient get logtoClient => _authManager.logtoClient;\n"})}),"\n",(0,n.jsx)(a.h2,{id:"integrate-the-custom-authentication-in-your-ui",children:"Integrar a autentica\xe7\xe3o personalizada na sua interface"}),"\n",(0,n.jsx)(a.h3,{id:"home-page",children:"P\xe1gina Inicial"}),"\n",(0,n.jsxs)(a.p,{children:["Chame o m\xe9todo ",(0,n.jsx)(a.code,{children:"authManager.signIn"})," para iniciar o fluxo de autentica\xe7\xe3o quando o usu\xe1rio clicar no bot\xe3o de login."]}),"\n",(0,n.jsxs)(a.blockquote,{children:["\n",(0,n.jsxs)(a.p,{children:[(0,n.jsx)(a.code,{children:"redirectUri"})," \xe9 a URL de callback que ser\xe1 usada para capturar o callback de autoriza\xe7\xe3o da p\xe1gina de login do Logto.\nVeja o ",(0,n.jsx)(a.a,{href:"/pt-BR/quick-starts/flutter#implement-sign-in",children:"Flutter SDK"})," para mais detalhes sobre o redirectUri."]}),"\n"]}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-dart",children:"// lib/pages/home_page/home_page_widget.dart\n\nfinal redirectUri = 'io.logto://callback';\n\n// ...\n\nFFButtonWidget(\n  onPressed: () async {\n    GoRouter.of(context).prepareAuthEvent();\n\n    await authManager.signIn(redirectUri);\n\n    context.replaceNamed('user');\n  },\n  text: 'Sign In',\n  // ...\n)\n"})}),"\n",(0,n.jsx)(a.h3,{id:"user-profile-page",children:"P\xe1gina de Perfil do Usu\xe1rio"}),"\n",(0,n.jsx)(a.p,{children:"Use os getters utilit\xe1rios de autentica\xe7\xe3o para acessar os dados do usu\xe1rio atual e a inst\xe2ncia do cliente Logto."}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-dart",children:"// lib/pages/user/user_widget.dart\n\nimport '/auth/custom_auth/auth_util.dart';\n\n// ...\n\nchildren: [\n  Text(\n    'User ID: $currentUserUid',\n  ),\n  Text(\n    'Display Name: ${currentUserData?.name}',\n  ),\n  Text(\n    'Username: ${currentUserData?.username}',\n  ),\n  Text(\n    'Email: ${currentUserData?.emailVerified ?? currentUserData?.email}',\n  ),\n]\n\n"})}),"\n",(0,n.jsx)(a.p,{children:"Implemente o m\xe9todo de logout quando o usu\xe1rio clicar no bot\xe3o de logout."}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-dart",children:"// lib/pages/user/user_widget.dart\n\nFFButtonWidget(\n  onPressed: () async {\n    await authManager.signOut();\n\n    context.replaceNamed('HomePage');\n  },\n  text: 'Sign Out',\n  // ...\n)\n"})}),"\n",(0,n.jsx)(a.h2,{id:"further-readings",children:"Leituras adicionais"}),"\n",(0,n.jsxs)(a.p,{children:["O Logto SDK fornece mais m\xe9todos para interagir com a API do Logto. Voc\xea pode personalizar ainda mais a classe ",(0,n.jsx)(a.code,{children:"CustomAuthManager"})," para implementar mais recursos."]}),"\n",(0,n.jsxs)(a.ul,{children:["\n",(0,n.jsx)(a.li,{children:(0,n.jsx)(a.a,{href:"/pt-BR/quick-starts/flutter#get-user-information",children:"Perfil do Usu\xe1rio"})}),"\n",(0,n.jsx)(a.li,{children:(0,n.jsx)(a.a,{href:"/pt-BR/quick-starts/flutter#api-resources-and-organizations",children:"Recursos de API e organiza\xe7\xf5es"})}),"\n"]}),"\n",(0,n.jsx)(a.h2,{id:"dependency-troubleshooting",children:"Solu\xe7\xe3o de problemas de depend\xeancia"}),"\n",(0,n.jsx)(c,{}),"\n",(0,n.jsx)(h,{})]})}function b(e={}){const{wrapper:a}={...(0,r.R)(),...e.components};return a?(0,n.jsx)(a,{...e,children:(0,n.jsx)(j,{...e})}):j(e)}},79621:(e,a,o)=>{o.d(a,{R:()=>i,x:()=>s});var t=o(58101);const n={},r=t.createContext(n);function i(e){const a=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(a):{...a,...e}}),[a,e])}function s(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:i(e.components),t.createElement(r.Provider,{value:a},e.children)}}}]);