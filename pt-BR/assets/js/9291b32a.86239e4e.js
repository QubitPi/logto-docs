"use strict";(self.webpackChunk_logto_docs=self.webpackChunk_logto_docs||[]).push([[1238],{63082:(e,o,s)=>{s.r(o),s.d(o,{assets:()=>t,contentTitle:()=>d,default:()=>l,frontMatter:()=>n,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"developers/webhooks/README","title":"Webhooks","description":"O Webhook do Logto fornece notifica\xe7\xf5es em tempo real para v\xe1rios eventos, incluindo altera\xe7\xf5es em contas de usu\xe1rios, pap\xe9is, permiss\xf5es, organiza\xe7\xf5es, pap\xe9is de organiza\xe7\xe3o, permiss\xf5es de organiza\xe7\xe3o e intera\xe7\xf5es do usu\xe1rio.","source":"@site/i18n/pt-BR/docusaurus-plugin-content-docs/current/developers/webhooks/README.mdx","sourceDirName":"developers/webhooks","slug":"/developers/webhooks/","permalink":"/pt-BR/developers/webhooks/","draft":false,"unlisted":false,"editUrl":"https://github.com/logto-io/docs/tree/master/i18n/pt-BR/docusaurus-plugin-content-docs/current/developers/webhooks/README.mdx","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_position":5},"sidebar":"docsSidebar","previous":{"title":"Chaves de assinatura","permalink":"/pt-BR/developers/signing-keys"},"next":{"title":"Configurar Webhooks","permalink":"/pt-BR/developers/webhooks/configure-webhooks"}}');var a=s(25105),i=s(79621);const n={sidebar_position:5},d="Webhooks",t={},c=[{value:"Por que usar Webhook?",id:"why-use-webhook",level:2},{value:"Termos",id:"terms",level:2},{value:"Perguntas frequentes",id:"faqs",level:2},{value:"O Logto suporta webhooks sincronizados?",id:"does-logto-support-synced-webhooks",level:3},{value:"Como lidar com altera\xe7\xe3o de permiss\xe3o de usu\xe1rio?",id:"how-to-deal-with-user-permission-change",level:3},{value:"Como depurar timeout de webhook?",id:"how-to-debug-webhook-timeout",level:3},{value:"Posso obter o endere\xe7o IP do cliente a partir dos webhooks <code>PostSignIn</code>?",id:"can-i-get-the-client-ip-address-from-postsignin-webhooks",level:3},{value:"Recursos relacionados",id:"related-resources",level:2}];function u(e){const o={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",mermaid:"mermaid",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components},{Details:s,Url:r}=o;return s||h("Details",!0),r||h("Url",!0),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.header,{children:(0,a.jsx)(o.h1,{id:"webhooks",children:"Webhooks"})}),"\n",(0,a.jsxs)(o.p,{children:["O ",(0,a.jsx)(o.a,{href:"https://auth.wiki/webhook",children:"Webhook"})," do Logto fornece notifica\xe7\xf5es em tempo real para v\xe1rios eventos, incluindo altera\xe7\xf5es em contas de usu\xe1rios, pap\xe9is, permiss\xf5es, organiza\xe7\xf5es, pap\xe9is de organiza\xe7\xe3o, permiss\xf5es de organiza\xe7\xe3o e ",(0,a.jsx)(o.a,{href:"/end-user-flows",children:"intera\xe7\xf5es do usu\xe1rio"}),"."]}),"\n",(0,a.jsxs)(o.p,{children:["Quando um evento \xe9 acionado, o Logto envia uma solicita\xe7\xe3o HTTP para a URL do Endpoint que voc\xea fornecer, contendo informa\xe7\xf5es detalhadas sobre o evento, como ID do usu\xe1rio, nome de usu\xe1rio, email e outros detalhes relevantes (para saber mais sobre os dados inclu\xeddos no payload e no header, consulte ",(0,a.jsx)(o.a,{href:"/developers/webhooks/webhooks-request",children:"Solicita\xe7\xe3o de Webhook"}),"). Seu aplicativo pode processar essa solicita\xe7\xe3o e tomar a\xe7\xf5es personalizadas, como enviar um email ou atualizar dados no banco de dados."]}),"\n",(0,a.jsx)(o.p,{children:"Continuamos adicionando mais eventos com base nas necessidades dos usu\xe1rios. Se voc\xea tiver requisitos espec\xedficos para o seu neg\xf3cio, por favor, nos avise."}),"\n",(0,a.jsx)(o.h2,{id:"why-use-webhook",children:"Por que usar Webhook?"}),"\n",(0,a.jsx)(o.p,{children:"Webhooks oferecem comunica\xe7\xe3o em tempo real entre aplicativos, eliminando a necessidade de polling e permitindo atualiza\xe7\xf5es imediatas de dados. Eles simplificam a integra\xe7\xe3o de aplicativos e a automa\xe7\xe3o de fluxos de trabalho sem c\xf3digo complexo ou APIs propriet\xe1rias."}),"\n",(0,a.jsx)(o.p,{children:"Aqui est\xe3o alguns exemplos de casos de uso comuns de Webhook para CIAM:"}),"\n",(0,a.jsxs)(o.ul,{children:["\n",(0,a.jsxs)(o.li,{children:[(0,a.jsx)(o.strong,{children:"Enviar emails:"})," Configure um Webhook para enviar um email de boas-vindas a novos usu\xe1rios ap\xf3s o registro ou notificar administradores quando um usu\xe1rio fizer login de um novo dispositivo ou local."]}),"\n",(0,a.jsxs)(o.li,{children:[(0,a.jsx)(o.strong,{children:"Enviar notifica\xe7\xf5es:"})," Configure um Webhook para acionar um assistente virtual com seu sistema CRM para fornecer suporte ao cliente em tempo real quando os usu\xe1rios se cadastrarem."]}),"\n",(0,a.jsxs)(o.li,{children:[(0,a.jsx)(o.strong,{children:"Realizar chamadas adicionais de API"}),": Configure um Webhook para verificar o acesso do usu\xe1rio checando seu dom\xednio de email ou endere\xe7o IP e, em seguida, use a Management API do Logto para atribuir pap\xe9is apropriados com permiss\xf5es de recursos."]}),"\n",(0,a.jsxs)(o.li,{children:[(0,a.jsx)(o.strong,{children:"Sincroniza\xe7\xe3o de dados:"})," Configure Webhook para manter o aplicativo atualizado sobre altera\xe7\xf5es como suspens\xf5es ou exclus\xf5es de contas de usu\xe1rios."]}),"\n",(0,a.jsxs)(o.li,{children:[(0,a.jsx)(o.strong,{children:"Gerar relat\xf3rios"}),": Configure um Webhook para receber dados de atividade de login de usu\xe1rios e aproveite-os para criar relat\xf3rios sobre engajamento ou padr\xf5es de uso dos usu\xe1rios."]}),"\n"]}),"\n",(0,a.jsx)(o.h2,{id:"terms",children:"Termos"}),"\n",(0,a.jsxs)(o.table,{children:[(0,a.jsx)(o.thead,{children:(0,a.jsxs)(o.tr,{children:[(0,a.jsx)(o.th,{children:"Item"}),(0,a.jsx)(o.th,{children:"Descri\xe7\xe3o"})]})}),(0,a.jsxs)(o.tbody,{children:[(0,a.jsxs)(o.tr,{children:[(0,a.jsx)(o.td,{children:"Event"}),(0,a.jsx)(o.td,{children:"Quando uma a\xe7\xe3o espec\xedfica \xe9 realizada, ela aciona um evento de hook com um tipo espec\xedfico. Ex.: o Logto emitir\xe1 um evento de hook PostRegister quando o usu\xe1rio concluir o processo de cadastro e criar uma nova conta."})]}),(0,a.jsxs)(o.tr,{children:[(0,a.jsx)(o.td,{children:"Hook"}),(0,a.jsx)(o.td,{children:"Uma ou uma s\xe9rie de a\xe7\xf5es que se conectam a um evento espec\xedfico. A a\xe7\xe3o pode ser chamar uma API, executar trechos de c\xf3digo, etc."})]}),(0,a.jsxs)(o.tr,{children:[(0,a.jsx)(o.td,{children:"Webhook"}),(0,a.jsx)(o.td,{children:"Um subtipo de hook que indica a chamada de uma API com o payload do evento."})]}),(0,a.jsxs)(o.tr,{children:[(0,a.jsx)(o.td,{children:"Digamos que um desenvolvedor queira enviar uma notifica\xe7\xe3o quando o usu\xe1rio fizer login por um novo dispositivo, o desenvolvedor pode adicionar um webhook que chama a API do seu servi\xe7o de seguran\xe7a para o evento PostSignIn."}),(0,a.jsx)(o.td,{})]})]})]}),"\n",(0,a.jsxs)(o.p,{children:["Aqui est\xe1 um exemplo de habilita\xe7\xe3o de dois web hooks para o evento ",(0,a.jsx)(o.code,{children:"PostSignIn"})," no Logto:"]}),"\n",(0,a.jsx)(o.mermaid,{value:"graph LR\n  subgraph Logto\n    SF(Login finalizado)\n    PS(P\xf3s-login)\n    WH2(Web hook 2)\n    WH1(Web hook 1)\n  end\n\n  subgraph Servi\xe7o 2\n    E2(Endpoint)\n  end\n\n  subgraph Servi\xe7o 1\n    E1(Endpoint)\n  end\n\n  SF --\x3e|Aciona| PS\n  PS --\x3e WH1\n  PS --\x3e WH2\n  WH1 ---\x3e|Chamada de API POST| E1\n  WH2 ---\x3e|Chamada de API POST| E2\n"}),"\n",(0,a.jsx)(o.h2,{id:"faqs",children:"Perguntas frequentes"}),"\n",(0,a.jsxs)(s,{children:[(0,a.jsx)("summary",{children:(0,a.jsx)(o.h3,{id:"does-logto-support-synced-webhooks",children:"O Logto suporta webhooks sincronizados?"})}),(0,a.jsx)(o.p,{children:"Embora webhooks sincronizados tornassem o fluxo de login do usu\xe1rio mais suave, ainda n\xe3o os suportamos (iremos suportar no futuro). Portanto, cen\xe1rios que dependem de webhooks sincronizados atualmente exigem diferentes solu\xe7\xf5es alternativas. Se voc\xea tiver d\xfavidas, n\xe3o hesite em nos contatar."})]}),"\n",(0,a.jsxs)(s,{children:[(0,a.jsx)("summary",{children:(0,a.jsx)(o.h3,{id:"how-to-deal-with-user-permission-change",children:"Como lidar com altera\xe7\xe3o de permiss\xe3o de usu\xe1rio?"})}),(0,a.jsxs)(o.p,{children:["Veja o guia ",(0,a.jsx)(o.a,{href:"/authorization/global-api-resources/#optional-handle-user-permission-change",children:"Gerenciar altera\xe7\xe3o de permiss\xe3o de usu\xe1rio"}),"."]})]}),"\n",(0,a.jsxs)(s,{children:[(0,a.jsx)("summary",{children:(0,a.jsx)(o.h3,{id:"how-to-debug-webhook-timeout",children:"Como depurar timeout de webhook?"})}),(0,a.jsx)(o.p,{children:"Para o endpoint que recebe Webhooks, ele deve retornar uma resposta 2xx o mais r\xe1pido poss\xedvel para informar ao Logto que o Webhook foi recebido com sucesso. Como diferentes usu\xe1rios t\xeam l\xf3gicas de processamento muito distintas para Webhooks, tarefas excessivamente complexas podem levar v\xe1rios segundos, causando timeout no Webhook do Logto. A melhor pr\xe1tica \xe9 manter sua pr\xf3pria fila de eventos; ao receber o Webhook do Logto, insira o evento na fila e retorne uma resposta 2xx ao Logto. Depois, deixe seu pr\xf3prio worker processar as tarefas da fila passo a passo. Se o worker encontrar um erro, trate-o em seu pr\xf3prio servidor."})]}),"\n",(0,a.jsxs)(s,{children:[(0,a.jsx)("summary",{children:(0,a.jsxs)(o.h3,{id:"can-i-get-the-client-ip-address-from-postsignin-webhooks",children:["Posso obter o endere\xe7o IP do cliente a partir dos webhooks ",(0,a.jsx)(o.code,{children:"PostSignIn"}),"?"]})}),(0,a.jsx)(o.p,{children:"Sim, voc\xea pode obter endere\xe7o IP, user agents, etc. no payload do Webhook. Se precisar de informa\xe7\xf5es que ainda n\xe3o s\xe3o suportadas, voc\xea pode criar solicita\xe7\xf5es de recurso no GitHub issues ou entrar em contato conosco."})]}),"\n",(0,a.jsx)(o.h2,{id:"related-resources",children:"Recursos relacionados"}),"\n",(0,a.jsx)(r,{href:"https://blog.logto.io/webhooks-vs-polling",children:"Webhooks vs. polling"})]})}function l(e={}){const{wrapper:o}={...(0,i.R)(),...e.components};return o?(0,a.jsx)(o,{...e,children:(0,a.jsx)(u,{...e})}):u(e)}function h(e,o){throw new Error("Expected "+(o?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},79621:(e,o,s)=>{s.d(o,{R:()=>n,x:()=>d});var r=s(58101);const a={},i=r.createContext(a);function n(e){const o=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(o):{...o,...e}}),[o,e])}function d(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:n(e.components),r.createElement(i.Provider,{value:o},e.children)}}}]);