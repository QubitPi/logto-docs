"use strict";(self.webpackChunk_logto_docs=self.webpackChunk_logto_docs||[]).push([[5296],{61126:(e,s,o)=>{o.r(s),o.d(s,{assets:()=>p,contentTitle:()=>t,default:()=>m,frontMatter:()=>c,metadata:()=>i,toc:()=>u});const i=JSON.parse('{"id":"authorization/role-based-access-control","title":"Controle de acesso baseado em papel (RBAC)","description":"Controle de acesso baseado em papel (RBAC) (Role-based access control (RBAC)) \xe9 um modelo de autoriza\xe7\xe3o comprovado que mapeia a\xe7\xf5es de neg\xf3cios do mundo real para pap\xe9is e permiss\xf5es. Este guia cobre como o RBAC funciona no Logto, padr\xf5es de design pr\xe1ticos e melhores pr\xe1ticas para construir aplica\xe7\xf5es SaaS seguras e escal\xe1veis.","source":"@site/i18n/pt-BR/docusaurus-plugin-content-docs/current/authorization/role-based-access-control.mdx","sourceDirName":"authorization","slug":"/authorization/role-based-access-control","permalink":"/pt-BR/authorization/role-based-access-control","draft":false,"unlisted":false,"editUrl":"https://github.com/logto-io/docs/tree/master/i18n/pt-BR/docusaurus-plugin-content-docs/current/authorization/role-based-access-control.mdx","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"docsSidebar","previous":{"title":"Autoriza\xe7\xe3o (Authorization)","permalink":"/pt-BR/authorization/"},"next":{"title":"Template de organiza\xe7\xe3o","permalink":"/pt-BR/authorization/organization-template"}}');var r=o(25105),a=o(79621),n=o(46643),d=o(1242),l=o(93855);const c={sidebar_position:1},t="Controle de acesso baseado em papel (RBAC)",p={},u=[{value:"O que \xe9 RBAC?",id:"what-is-rbac",level:2},{value:"Recursos de API",id:"api-resources",level:3},{value:"Comportamento do recurso de API padr\xe3o",id:"default-api-resource-behavior",level:4},{value:"RBAC no Logto",id:"rbac-in-logto",level:2},{value:"Modelo 1: Recursos de API globais",id:"model-1-global-api-resources",level:3},{value:"Modelo 2: Permiss\xf5es de organiza\xe7\xe3o (n\xe3o-API)",id:"model-2-organization-non-api-permissions",level:3},{value:"Modelo 3: Recursos de API em n\xedvel de organiza\xe7\xe3o",id:"model-3-organization-level-api-resources",level:3},{value:"Projetar e implementar um modelo de permiss\xf5es",id:"design-and-implement-a-permission-model",level:2},{value:"Definir recursos de API com permiss\xf5es",id:"define-api-resources-with-permissions",level:3},{value:"Registrar recursos de API com permiss\xf5es no Logto Console",id:"register-api-resources-with-permissions-in-logto-console",level:4},{value:"Dicas",id:"tips",level:4},{value:"Definir permiss\xf5es de organiza\xe7\xe3o",id:"define-organization-permissions",level:3},{value:"Registrar permiss\xf5es de organiza\xe7\xe3o no Logto Console",id:"register-organization-permissions-in-logto-console",level:4},{value:"Dicas",id:"tips",level:4},{value:"Configurar pap\xe9is globais",id:"configure-global-roles",level:3},{value:"Criar pap\xe9is globais no Logto Console",id:"create-global-roles-in-logto-console",level:4},{value:"Atribuir usu\xe1rios ou aplicativos M2M a pap\xe9is globais",id:"assign-users-or-m2m-apps-to-global-roles",level:4},{value:"Pap\xe9is globais padr\xe3o",id:"default-global-roles",level:4},{value:"Configurar pap\xe9is de organiza\xe7\xe3o",id:"configure-organization-roles",level:3},{value:"Criar pap\xe9is de organiza\xe7\xe3o no Logto Console",id:"create-organization-roles-in-logto-console",level:4},{value:"Atribuir usu\xe1rios ou aplicativos M2M a pap\xe9is de organiza\xe7\xe3o",id:"assign-users-or-m2m-apps-to-organization-roles",level:4},{value:"Provisionamento Just-in-time (JIT)",id:"just-in-time-jit-provisioning",level:4},{value:"Aplicando autoriza\xe7\xe3o no seu backend ou API",id:"enforcing-authorization-in-your-backend-or-api",level:3},{value:"Integrar o RBAC do Logto \xe0 sua aplica\xe7\xe3o",id:"integrate-logto-rbac-with-your-application",level:3},{value:"Cen\xe1rios avan\xe7ados",id:"advanced-scenarios",level:2},{value:"Melhores pr\xe1ticas &amp; armadilhas comuns",id:"best-practices-common-pitfalls",level:2},{value:"Perguntas frequentes",id:"faqs",level:2},{value:"Como atualizo pap\xe9is ou permiss\xf5es em todas as organiza\xe7\xf5es?",id:"how-do-i-update-roles-or-permissions-across-all-organizations",level:3},{value:"Posso alterar pap\xe9is/permiss\xf5es dinamicamente?",id:"can-i-change-roles-permissions-dynamically",level:3},{value:"O que acontece se eu remover uma permiss\xe3o de um papel?",id:"what-happens-if-i-remove-a-permission-from-a-role",level:3},{value:"Como posso auditar quem tem qual papel?",id:"how-can-i-audit-who-has-what-role",level:3},{value:"Pap\xe9is e permiss\xf5es podem ser atribu\xeddos via API?",id:"can-roles-and-permissions-be-assigned-via-api",level:3},{value:"Leitura adicional",id:"further-reading",level:2}];function h(e){const s={a:"a",admonition:"admonition",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...e.components},{CloudLink:o,Details:i,Url:c}=s;return o||x("CloudLink",!0),i||x("Details",!0),c||x("Url",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.header,{children:(0,r.jsx)(s.h1,{id:"controle-de-acesso-baseado-em-papel-rbac",children:"Controle de acesso baseado em papel (RBAC)"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.a,{href:"https://auth.wiki/rbac",children:"Controle de acesso baseado em papel (RBAC) (Role-based access control (RBAC))"})," \xe9 um modelo de autoriza\xe7\xe3o comprovado que mapeia a\xe7\xf5es de neg\xf3cios do mundo real para pap\xe9is e permiss\xf5es. Este guia cobre como o RBAC funciona no Logto, padr\xf5es de design pr\xe1ticos e melhores pr\xe1ticas para construir aplica\xe7\xf5es SaaS seguras e escal\xe1veis."]}),"\n",(0,r.jsx)(s.h2,{id:"what-is-rbac",children:"O que \xe9 RBAC?"}),"\n",(0,r.jsxs)(s.p,{children:["O RBAC permite que voc\xea gerencie ",(0,r.jsx)(s.strong,{children:"quem"})," pode fazer ",(0,r.jsx)(s.strong,{children:"o qu\xea"})," em sua aplica\xe7\xe3o agrupando permiss\xf5es em pap\xe9is. Usu\xe1rios e clientes recebem um ou mais pap\xe9is, que concedem as permiss\xf5es necess\xe1rias para acessar funcionalidades, APIs ou dados."]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Conceitos principais"})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Papel (Role):"})," Um conjunto nomeado de permiss\xf5es (ex: ",(0,r.jsx)(s.code,{children:"admin"}),", ",(0,r.jsx)(s.code,{children:"viewer"}),", ",(0,r.jsx)(s.code,{children:"billing-manager"}),")."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Permiss\xe3o (Permission):"})," Uma a\xe7\xe3o ou direito (ex: ",(0,r.jsx)(s.code,{children:"manage:members"}),", ",(0,r.jsx)(s.code,{children:"view:analytics"}),")."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Escopo (Scope):"})," Um sin\xf4nimo para permiss\xe3o, comumente usado em contextos OAuth 2.0."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Recurso de API (API resource):"})," Uma API, endpoint ou servi\xe7o ao qual as permiss\xf5es se aplicam."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Usu\xe1rio/Cliente (User/Client):"})," A entidade \xe0 qual os pap\xe9is s\xe3o atribu\xeddos (usu\xe1rios finais ou aplicativos m\xe1quina para m\xe1quina (M2M))."]}),"\n"]}),"\n",(0,r.jsx)(s.admonition,{type:"note",children:(0,r.jsxs)(s.p,{children:["No Logto (e no OAuth 2.1), ",(0,r.jsx)(s.strong,{children:'"permiss\xf5es" e "escopos" referem-se ao mesmo conceito'})," e s\xe3o usados de forma intercambi\xe1vel nesta documenta\xe7\xe3o."]})}),"\n",(0,r.jsx)(s.h3,{id:"api-resources",children:"Recursos de API"}),"\n",(0,r.jsxs)(s.p,{children:["Um ",(0,r.jsx)(s.strong,{children:"recurso de API (API resource)"})," \xe9 qualquer endpoint ou servi\xe7o protegido em sua aplica\xe7\xe3o\u2014como uma API REST, endpoint GraphQL ou outro servi\xe7o backend que requer autoriza\xe7\xe3o."]}),"\n",(0,r.jsxs)(s.p,{children:["O Logto modela recursos de API seguindo o ",(0,r.jsx)(s.a,{href:"https://www.rfc-editor.org/rfc/rfc8707",children:"RFC 8707: Resource Indicators for OAuth 2.0"}),".",(0,r.jsx)(s.br,{}),"\n","Cada recurso de API \xe9 identificado de forma \xfanica por um ",(0,r.jsx)(s.strong,{children:"indicador de recurso (resource indicator)"})," (um URI), que \xe9 usado para delimitar tokens de acesso e impor restri\xe7\xf5es de p\xfablico."]}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:(0,r.jsx)(s.strong,{children:"Nome da propriedade"})}),(0,r.jsx)(s.th,{children:(0,r.jsx)(s.strong,{children:"Descri\xe7\xe3o"})}),(0,r.jsx)(s.th,{children:(0,r.jsx)(s.strong,{children:"Obrigat\xf3rio"})})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"Nome da API"}),(0,r.jsx)(s.td,{children:"Um nome amig\xe1vel para identificar o recurso de API no Console e nos logs."}),(0,r.jsx)(s.td,{children:"Sim"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"Identificador da API"}),(0,r.jsxs)(s.td,{children:["O URI \xfanico do ",(0,r.jsx)(s.a,{href:"https://www.rfc-editor.org/rfc/rfc8707.html",children:"indicador de recurso"})," que representa o recurso de API."]}),(0,r.jsx)(s.td,{children:"Sim"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"Tempo de expira\xe7\xe3o do token"}),(0,r.jsxs)(s.td,{children:["O tempo de vida dos tokens de acesso emitidos para esta API (em segundos). O padr\xe3o \xe9 ",(0,r.jsx)(s.strong,{children:"3600"})," (1 hora)."]}),(0,r.jsx)(s.td,{children:"N\xe3o"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"API padr\xe3o"}),(0,r.jsxs)(s.td,{children:["Apenas um recurso de API pode ser definido como padr\xe3o por tenant Logto. Quando definido, o par\xe2metro ",(0,r.jsx)(s.code,{children:"resource"})," pode ser omitido das solicita\xe7\xf5es de autentica\xe7\xe3o."]}),(0,r.jsx)(s.td,{children:"N\xe3o"})]})]})]}),"\n",(0,r.jsx)(s.admonition,{type:"note",children:(0,r.jsxs)(s.p,{children:["Quando um recurso de API padr\xe3o \xe9 designado, o Logto o usar\xe1 como p\xfablico para os tokens quando o par\xe2metro ",(0,r.jsx)(s.code,{children:"resource"})," for omitido nas solicita\xe7\xf5es de autentica\xe7\xe3o."]})}),"\n",(0,r.jsx)(s.h4,{id:"default-api-resource-behavior",children:"Comportamento do recurso de API padr\xe3o"}),"\n",(0,r.jsx)(s.p,{children:"No Logto, toda permiss\xe3o global definida pelo usu\xe1rio (escopo) deve estar vinculada a um recurso de API. Caso contr\xe1rio, a permiss\xe3o \xe9 tratada como um escopo OpenID Connect (OIDC)."}),"\n",(0,r.jsxs)(s.p,{children:["Isso geralmente n\xe3o afeta a maioria das integra\xe7\xf5es, mas ao trabalhar com aplicativos de terceiros que ",(0,r.jsx)(s.strong,{children:"n\xe3o"})," suportam o ",(0,r.jsx)(s.a,{href:"https://www.rfc-editor.org/rfc/rfc8707.html",children:"RFC 8707"}),", a solicita\xe7\xe3o inicial de autoriza\xe7\xe3o pode n\xe3o incluir um par\xe2metro ",(0,r.jsx)(s.code,{children:"resource"}),". Nesses casos, o Logto emite ",(0,r.jsx)(s.a,{href:"https://blog.logto.io/opaque-token-vs-jwt#use-cases-in-oidc",children:"tokens de acesso opacos (opaque access tokens)"})," em vez de JWTs, o que pode complicar o controle de acesso."]}),"\n",(0,r.jsxs)(s.p,{children:["Para resolver isso, voc\xea pode definir um ",(0,r.jsx)(s.strong,{children:"recurso de API padr\xe3o"})," para seu tenant:"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsxs)(s.strong,{children:["Quando o par\xe2metro ",(0,r.jsx)(s.code,{children:"resource"})," estiver ausente na ",(0,r.jsx)(s.a,{href:"https://auth.wiki/authentication-request",children:"Solicita\xe7\xe3o de autentica\xe7\xe3o (Authentication request)"}),":"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"O Logto usa o recurso de API padr\xe3o como p\xfablico para os tokens de acesso."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsxs)(s.strong,{children:["Se o escopo ",(0,r.jsx)(s.code,{children:"openid"})," estiver inclu\xeddo:"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["O Logto emite um token de acesso opaco para o ",(0,r.jsx)(s.a,{href:"https://auth.wiki/userinfo-endpoint",children:"endpoint Userinfo"})," quando n\xe3o h\xe1 ",(0,r.jsx)(s.code,{children:"resource"})," presente na solicita\xe7\xe3o de token."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsxs)(s.strong,{children:["Se o escopo ",(0,r.jsx)(s.code,{children:"openid"})," n\xe3o estiver inclu\xeddo:"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"O Logto emite um token de acesso JWT para o recurso de API padr\xe3o como p\xfablico."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:"Definir um recurso de API padr\xe3o garante uma integra\xe7\xe3o mais suave com aplicativos que n\xe3o suportam o RFC 8707, mantendo controles de acesso seguros e baseados em padr\xf5es."}),"\n",(0,r.jsx)(s.h2,{id:"rbac-in-logto",children:"RBAC no Logto"}),"\n",(0,r.jsxs)(s.p,{children:["O Logto fornece RBAC flex\xedvel tanto em n\xedvel ",(0,r.jsx)(s.strong,{children:"global"})," quanto ",(0,r.jsx)(s.strong,{children:"organizacional"})," para suportar SaaS multi-tenant:"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Pap\xe9is globais (Global roles):"})," Atribu\xeddos em todo o tenant Logto. Ideal para permiss\xf5es em todo o produto, administradores ou superusu\xe1rios."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Pap\xe9is de organiza\xe7\xe3o (Organization roles):"})," Atribu\xeddos dentro de uma organiza\xe7\xe3o. Perfeito para acesso espec\xedfico da organiza\xe7\xe3o, como administradores de workspace, membros de projeto ou grupos personalizados."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Recursos de API (API resources):"})," APIs e funcionalidades registradas que requerem autoriza\xe7\xe3o."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Permiss\xf5es (escopos) (Permissions (scopes)):"})," Definidas por recurso de API ou no template da organiza\xe7\xe3o.","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Permiss\xf5es de recurso de API podem ser atribu\xeddas a pap\xe9is globais ou de organiza\xe7\xe3o."}),"\n",(0,r.jsx)(s.li,{children:"Permiss\xf5es de organiza\xe7\xe3o s\xf3 podem ser atribu\xeddas a pap\xe9is de organiza\xe7\xe3o."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:"Dependendo das necessidades do seu produto, voc\xea pode usar esses modelos RBAC separadamente ou em combina\xe7\xe3o."}),"\n",(0,r.jsx)(s.p,{children:"Abaixo est\xe3o tr\xeas exemplos ilustrativos com diagramas:"}),"\n",(0,r.jsx)(s.h3,{id:"model-1-global-api-resources",children:"Modelo 1: Recursos de API globais"}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Cen\xe1rio"})}),"\n",(0,r.jsx)(s.p,{children:"Um produto SaaS com APIs compartilhadas entre todos os usu\xe1rios, independentemente da organiza\xe7\xe3o.\nUse pap\xe9is globais para controlar o acesso a recursos de API em todo o produto."}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Diagrama"})}),"\n",(0,r.jsx)("img",{src:n.A,alt:"Global API resources RBAC",style:{maxWidth:"100%"}}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Pontos-chave"})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Usu\xe1rios"})," e ",(0,r.jsx)(s.strong,{children:"aplicativos M2M"})," recebem pap\xe9is globais (ex: Gerente de loja, Agente de servi\xe7o)."]}),"\n",(0,r.jsxs)(s.li,{children:["Pap\xe9is concedem permiss\xf5es (escopos), como ",(0,r.jsx)(s.code,{children:"read:store"}),", ",(0,r.jsx)(s.code,{children:"order:book"}),"."]}),"\n",(0,r.jsxs)(s.li,{children:["Permiss\xf5es s\xe3o vinculadas diretamente a recursos de API (ex: ",(0,r.jsx)(s.code,{children:"https://read.shop/stores"}),")."]}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Quando usar"})}),"\n",(0,r.jsx)(s.p,{children:"Quando o acesso n\xe3o \xe9 espec\xedfico da organiza\xe7\xe3o ou usu\xe1rios/clientes operam em todas as organiza\xe7\xf5es."}),"\n",(0,r.jsx)(s.admonition,{type:"note",children:(0,r.jsx)(s.p,{children:"O Logto n\xe3o suporta permiss\xf5es que n\xe3o sejam de API em n\xedvel global, pois este \xe9 reservado para escopos OpenID Connect (OIDC)."})}),"\n",(0,r.jsx)(s.admonition,{type:"tip",children:(0,r.jsxs)(s.p,{children:["Para um guia passo a passo de implementa\xe7\xe3o, veja ",(0,r.jsx)(s.a,{href:"/authorization/global-api-resources",children:"Proteger recursos de API globais"}),"."]})}),"\n",(0,r.jsx)(s.h3,{id:"model-2-organization-non-api-permissions",children:"Modelo 2: Permiss\xf5es de organiza\xe7\xe3o (n\xe3o-API)"}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Cen\xe1rio"})}),"\n",(0,r.jsx)(s.p,{children:"Controlando funcionalidades ou fluxos internos do aplicativo que n\xe3o s\xe3o aplicados na camada de API (como restringir recursos de UI, dashboards ou ferramentas internas) usando pap\xe9is e permiss\xf5es de organiza\xe7\xe3o."}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Diagrama"})}),"\n",(0,r.jsx)("img",{src:l.A,alt:"Organization permissions RBAC",style:{maxWidth:"800px",width:"100%"}}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Pontos-chave"})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Cada organiza\xe7\xe3o (A e B) tem suas pr\xf3prias atribui\xe7\xf5es, mas todas compartilham um conjunto comum de pap\xe9is definidos no ",(0,r.jsx)(s.a,{href:"/authorization/organization-template",children:"template da organiza\xe7\xe3o"}),"."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Usu\xe1rios"})," e ",(0,r.jsx)(s.strong,{children:"aplicativos M2M"})," podem ter pap\xe9is diferentes em cada organiza\xe7\xe3o."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Pap\xe9is de organiza\xe7\xe3o"})," (ex: Admin, Membro) concedem permiss\xf5es de organiza\xe7\xe3o como ",(0,r.jsx)(s.code,{children:"invite:member"}),", ",(0,r.jsx)(s.code,{children:"manage:billing"}),"."]}),"\n",(0,r.jsx)(s.li,{children:"Permiss\xf5es s\xe3o aplicadas na UI do app ou na l\xf3gica de neg\xf3cio, n\xe3o pelo gateway de API."}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Quando usar"})}),"\n",(0,r.jsx)(s.p,{children:"Quando voc\xea deseja gerenciar quem pode ver ou usar funcionalidades dentro de uma organiza\xe7\xe3o quando a aplica\xe7\xe3o na camada de API n\xe3o \xe9 necess\xe1ria."}),"\n",(0,r.jsx)(s.admonition,{type:"tip",children:(0,r.jsxs)(s.p,{children:["Para um guia passo a passo de implementa\xe7\xe3o, veja ",(0,r.jsx)(s.a,{href:"/authorization/organization-permissions",children:"Proteger permiss\xf5es de organiza\xe7\xe3o (n\xe3o-API)"}),"."]})}),"\n",(0,r.jsx)(s.h3,{id:"model-3-organization-level-api-resources",children:"Modelo 3: Recursos de API em n\xedvel de organiza\xe7\xe3o"}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Cen\xe1rio"})}),"\n",(0,r.jsxs)(s.p,{children:["Uma plataforma SaaS multi-tenant onde cada organiza\xe7\xe3o tem seus pr\xf3prios membros, dados e pap\xe9is.\nUse ",(0,r.jsx)(s.strong,{children:"pap\xe9is de organiza\xe7\xe3o"})," para conceder acesso \xe0 API dentro de cada organiza\xe7\xe3o."]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Diagrama"})}),"\n",(0,r.jsx)("img",{src:d.A,alt:"Organization-level API resources RBAC",style:{maxWidth:"100%"}}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Pontos-chave"})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Cada organiza\xe7\xe3o (A e B) tem suas pr\xf3prias atribui\xe7\xf5es, mas todas compartilham um conjunto comum de pap\xe9is definidos no ",(0,r.jsx)(s.a,{href:"/authorization/organization-template",children:"template da organiza\xe7\xe3o"}),"."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Usu\xe1rios"})," e ",(0,r.jsx)(s.strong,{children:"aplicativos M2M"})," podem ter pap\xe9is diferentes em cada organiza\xe7\xe3o."]}),"\n",(0,r.jsxs)(s.li,{children:["Permiss\xf5es (escopos), como ",(0,r.jsx)(s.code,{children:"invite:member"}),", ",(0,r.jsx)(s.code,{children:"manage:billing"})," s\xe3o vinculadas a recursos de API."]}),"\n",(0,r.jsx)(s.li,{children:"Permiss\xf5es s\xe3o aplicadas na camada de API quando o token de acesso inclui um contexto de organiza\xe7\xe3o."}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Quando usar"})}),"\n",(0,r.jsx)(s.p,{children:"Quando voc\xea precisa controlar o acesso \xe0 API com base no contexto da organiza\xe7\xe3o, como permitir que usu\xe1rios gerenciem os dados de sua pr\xf3pria organiza\xe7\xe3o."}),"\n",(0,r.jsx)(s.admonition,{type:"tip",children:(0,r.jsxs)(s.p,{children:["Para um guia passo a passo de implementa\xe7\xe3o, veja ",(0,r.jsx)(s.a,{href:"/authorization/organization-level-api-resources",children:"Proteger recursos de API em n\xedvel de organiza\xe7\xe3o"}),"."]})}),"\n",(0,r.jsx)(s.h2,{id:"design-and-implement-a-permission-model",children:"Projetar e implementar um modelo de permiss\xf5es"}),"\n",(0,r.jsx)(s.p,{children:"De acordo com a arquitetura do seu produto e as necessidades dos usu\xe1rios, voc\xea pode escolher um modelo RBAC adequado dos exemplos acima. Aqui est\xe1 um resumo para ajudar voc\xea a projetar e implementar seu modelo de permiss\xf5es de forma eficaz:"}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Modelo de permiss\xe3o"}),(0,r.jsx)(s.th,{children:"Definir recursos de API com permiss\xf5es?"}),(0,r.jsx)(s.th,{children:"Definir permiss\xf5es de organiza\xe7\xe3o?"}),(0,r.jsx)(s.th,{children:"Usar pap\xe9is globais?"}),(0,r.jsx)(s.th,{children:"Usar pap\xe9is de organiza\xe7\xe3o?"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"Recursos de API globais"}),(0,r.jsx)(s.td,{children:"\u2705"}),(0,r.jsx)(s.td,{children:"n/a"}),(0,r.jsx)(s.td,{children:"\u2705"}),(0,r.jsx)(s.td,{children:"n/a"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"Permiss\xf5es de organiza\xe7\xe3o (n\xe3o-API)"}),(0,r.jsx)(s.td,{children:"n/a"}),(0,r.jsx)(s.td,{children:"\u2705"}),(0,r.jsx)(s.td,{children:"n/a"}),(0,r.jsx)(s.td,{children:"\u2705"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"Recursos de API em n\xedvel de organiza\xe7\xe3o"}),(0,r.jsx)(s.td,{children:"\u2705"}),(0,r.jsx)(s.td,{children:"n/a"}),(0,r.jsx)(s.td,{children:"n/a"}),(0,r.jsx)(s.td,{children:"\u2705"})]})]})]}),"\n",(0,r.jsx)(s.h3,{id:"define-api-resources-with-permissions",children:"Definir recursos de API com permiss\xf5es"}),"\n",(0,r.jsxs)(s.p,{children:["Registre suas APIs no Logto Console ou ",(0,r.jsx)(s.a,{href:"https://openapi.logto.io/group/endpoint-resources",children:"via Management API"})," para definir os recursos de API e suas permiss\xf5es (escopos)."]}),"\n",(0,r.jsx)(s.admonition,{type:"note",children:(0,r.jsx)(s.p,{children:'No OAuth 2.0 e OIDC, um "recurso de API" \xe9 tecnicamente chamado de indicador de recurso, um URI \xfanico que identifica sua API ou servi\xe7o protegido.'})}),"\n",(0,r.jsx)(s.h4,{id:"register-api-resources-with-permissions-in-logto-console",children:"Registrar recursos de API com permiss\xf5es no Logto Console"}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["V\xe1 para ",(0,r.jsx)(o,{to:"/api-resources",children:"Console \u2192 Recursos de API"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["Clique em ",(0,r.jsx)(s.strong,{children:"Criar recurso de API"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"Forne\xe7a:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Nome da API:"})," Nome leg\xedvel para sua API."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Identificador da API:"})," Indicador do recurso de API (ex: ",(0,r.jsx)(s.code,{children:"https://api.yourapp.com/org"}),")."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["Na aba ",(0,r.jsx)(s.strong,{children:"Permiss\xf5es"}),", clique em ",(0,r.jsx)(s.strong,{children:"Criar permiss\xe3o"})," para criar permiss\xf5es (escopos) para este recurso de API."]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["Na aba ",(0,r.jsx)(s.strong,{children:"Geral"}),", voc\xea pode opcionalmente definir o seguinte:"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Tempo de expira\xe7\xe3o do token"}),": Defina por quanto tempo os tokens de acesso para este recurso de API ser\xe3o v\xe1lidos. Recomendamos manter curto (ex: 1 hora) por seguran\xe7a."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"API padr\xe3o"}),": Defina este recurso de API como padr\xe3o para restri\xe7\xe3o de p\xfablico e emiss\xe3o de tokens se nenhum ",(0,r.jsx)(s.code,{children:"resource"})," for especificado na solicita\xe7\xe3o OAuth. Isso \xe9 opcional e pode ser \xfatil para clientes que n\xe3o suportam o par\xe2metro ",(0,r.jsx)(s.code,{children:"resource"})," (por exemplo, algumas ferramentas ou plugins de terceiros)."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.h4,{id:"tips",children:"Dicas"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Mapeie indicadores de recurso de API para os endpoints reais da API para fornecer nomes intuitivos.","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Por exemplo, ",(0,r.jsx)(s.code,{children:"https://api.example.com/v1/users"}),"."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["Use nomes claros e baseados em a\xe7\xe3o (ex: ",(0,r.jsx)(s.code,{children:"invite:member"}),", ",(0,r.jsx)(s.code,{children:"manage:billing"}),", ",(0,r.jsx)(s.code,{children:"view:analytics"}),").","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Alternativamente, alguns g\xeaneros podem preferir um prefixo ou agrupar por funcionalidade para clareza (ex: ",(0,r.jsx)(s.code,{children:"billing:read"}),", ",(0,r.jsx)(s.code,{children:"billing:manage"}),")."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.li,{children:"Mantenha as permiss\xf5es orientadas ao neg\xf3cio, n\xe3o apenas a endpoints t\xe9cnicos."}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Exemplo"})}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Indicador de recurso de API"}),(0,r.jsx)(s.th,{children:"Permiss\xe3o"}),(0,r.jsx)(s.th,{children:"Descri\xe7\xe3o"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"https://api.example.com/users"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"invite:user"})}),(0,r.jsx)(s.td,{children:"Convidar novos usu\xe1rios"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"https://api.example.com/users"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"manage:user"})}),(0,r.jsx)(s.td,{children:"Atualizar ou excluir usu\xe1rios"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"https://api.example.com/billing"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"view:billing"})}),(0,r.jsx)(s.td,{children:"Visualizar detalhes de cobran\xe7a"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"https://api.example.com/billing"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"manage:billing"})}),(0,r.jsx)(s.td,{children:"Editar configura\xe7\xf5es de cobran\xe7a"})]})]})]}),"\n",(0,r.jsx)(s.h3,{id:"define-organization-permissions",children:"Definir permiss\xf5es de organiza\xe7\xe3o"}),"\n",(0,r.jsxs)(s.p,{children:["Registre permiss\xf5es de organiza\xe7\xe3o no Logto Console ou ",(0,r.jsx)(s.a,{href:"https://openapi.logto.io/group/endpoint-organization-scopes",children:"via Management API"})," para definir permiss\xf5es que se aplicam dentro de cada organiza\xe7\xe3o. As permiss\xf5es de organiza\xe7\xe3o s\xe3o definidas no ",(0,r.jsx)(s.a,{href:"/authorization/organization-template",children:"template da organiza\xe7\xe3o"}),"."]}),"\n",(0,r.jsx)(s.h4,{id:"register-organization-permissions-in-logto-console",children:"Registrar permiss\xf5es de organiza\xe7\xe3o no Logto Console"}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["V\xe1 para ",(0,r.jsx)(o,{to:"/organization-template/organization-permissions",children:"Console \u2192 Template da organiza\xe7\xe3o \u2192 Permiss\xf5es de organiza\xe7\xe3o"}),"."]}),"\n",(0,r.jsxs)(s.li,{children:["Clique em ",(0,r.jsx)(s.strong,{children:"Criar permiss\xe3o de organiza\xe7\xe3o"}),"."]}),"\n",(0,r.jsxs)(s.li,{children:["Forne\xe7a:","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Nome da permiss\xe3o:"})," Um nome claro e baseado em a\xe7\xe3o para a permiss\xe3o (ex: ",(0,r.jsx)(s.code,{children:"invite:member"}),", ",(0,r.jsx)(s.code,{children:"manage:billing"}),")."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Descri\xe7\xe3o:"}),' Uma breve descri\xe7\xe3o do que a permiss\xe3o permite (ex: "Convidar novos membros para a organiza\xe7\xe3o").']}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["Clique em ",(0,r.jsx)(s.strong,{children:"Criar permiss\xe3o"})," para salvar."]}),"\n"]}),"\n",(0,r.jsx)(s.h4,{id:"tips",children:"Dicas"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Use nomes claros e baseados em a\xe7\xe3o (ex: ",(0,r.jsx)(s.code,{children:"invite:member"}),", ",(0,r.jsx)(s.code,{children:"manage:billing"}),")."]}),"\n",(0,r.jsx)(s.li,{children:"Mantenha permiss\xf5es de organiza\xe7\xe3o distintas das permiss\xf5es de API para evitar confus\xe3o."}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Exemplo"})}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Permiss\xe3o de organiza\xe7\xe3o"}),(0,r.jsx)(s.th,{children:"Descri\xe7\xe3o"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"invite:member"})}),(0,r.jsx)(s.td,{children:"Convidar novos membros para a organiza\xe7\xe3o"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"manage:billing"})}),(0,r.jsx)(s.td,{children:"Editar configura\xe7\xf5es de cobran\xe7a da organiza\xe7\xe3o"})]})]})]}),"\n",(0,r.jsx)(s.h3,{id:"configure-global-roles",children:"Configurar pap\xe9is globais"}),"\n",(0,r.jsxs)(s.p,{children:["Crie e configure pap\xe9is globais no Logto Console ou ",(0,r.jsx)(s.a,{href:"https://openapi.logto.io/group/endpoint-roles",children:"via Management API"})," para agrupar permiss\xf5es que se aplicam em todo o tenant Logto."]}),"\n",(0,r.jsx)(s.p,{children:"Um papel global pode ser um dos seguintes:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Papel de usu\xe1rio:"})," Atribu\xeddo a usu\xe1rios finais, concedendo permiss\xf5es para acessar APIs e funcionalidades."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Papel m\xe1quina para m\xe1quina (M2M):"})," Atribu\xeddo a aplicativos M2M, concedendo permiss\xf5es para acessar APIs e funcionalidades, incluindo Logto Management API."]}),"\n"]}),"\n",(0,r.jsx)(s.admonition,{type:"note",children:(0,r.jsx)(s.p,{children:"Observe que esses dois tipos de pap\xe9is n\xe3o podem ser misturados ou atualizados ap\xf3s a cria\xe7\xe3o. Atribua usu\xe1rios ou aplicativos M2M ao papel, dependendo do tipo."})}),"\n",(0,r.jsx)(s.h4,{id:"create-global-roles-in-logto-console",children:"Criar pap\xe9is globais no Logto Console"}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["V\xe1 para ",(0,r.jsx)(o,{to:"/roles",children:"Console \u2192 Pap\xe9is"}),"."]}),"\n",(0,r.jsxs)(s.li,{children:["Clique em ",(0,r.jsx)(s.strong,{children:"Criar papel"}),"."]}),"\n",(0,r.jsxs)(s.li,{children:["Forne\xe7a:","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Nome do papel:"})," Um nome claro e descritivo para o papel (ex: ",(0,r.jsx)(s.code,{children:"admin"}),", ",(0,r.jsx)(s.code,{children:"viewer"}),", ",(0,r.jsx)(s.code,{children:"billing-manager"}),")."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Tipo de papel:"})," Escolha entre ",(0,r.jsx)(s.strong,{children:"Usu\xe1rio"})," ou ",(0,r.jsx)(s.strong,{children:"M\xe1quina para m\xe1quina (M2M)"}),". ",(0,r.jsx)(s.strong,{children:"Apenas pap\xe9is m\xe1quina para m\xe1quina (M2M) podem vincular ao Logto Management API"}),"."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Descri\xe7\xe3o:"}),' Uma breve descri\xe7\xe3o do prop\xf3sito do papel (ex: "Papel de admin com acesso total", "Papel de visualizador para acesso somente leitura").']}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Atribuir permiss\xf5es:"})," Selecione as permiss\xf5es (escopos) que este papel deve ter dos recursos de API dispon\xedveis. Voc\xea pode atualizar as permiss\xf5es depois, se necess\xe1rio."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["Clique em ",(0,r.jsx)(s.strong,{children:"Criar papel"})," para salvar."]}),"\n"]}),"\n",(0,r.jsx)(s.h4,{id:"assign-users-or-m2m-apps-to-global-roles",children:"Atribuir usu\xe1rios ou aplicativos M2M a pap\xe9is globais"}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["V\xe1 para ",(0,r.jsx)(o,{to:"/roles",children:"Console \u2192 Pap\xe9is"}),"."]}),"\n",(0,r.jsx)(s.li,{children:"Clique no papel ao qual deseja atribuir usu\xe1rios ou aplicativos M2M."}),"\n",(0,r.jsxs)(s.li,{children:["Para ",(0,r.jsx)(s.strong,{children:"Pap\xe9is de usu\xe1rio"}),", clique na aba ",(0,r.jsx)(s.strong,{children:"Usu\xe1rios"}),"; para ",(0,r.jsx)(s.strong,{children:"Pap\xe9is M2M"}),", clique na aba ",(0,r.jsx)(s.strong,{children:"aplicativos m\xe1quina para m\xe1quina"}),"."]}),"\n",(0,r.jsxs)(s.li,{children:["Clique em ",(0,r.jsx)(s.strong,{children:"Atribuir usu\xe1rios"})," ou ",(0,r.jsx)(s.strong,{children:"Atribuir aplicativos M2M"}),"."]}),"\n",(0,r.jsx)(s.li,{children:"Pesquise os usu\xe1rios ou aplicativos M2M que deseja atribuir a este papel."}),"\n",(0,r.jsxs)(s.li,{children:["Selecione os usu\xe1rios ou aplicativos M2M e clique em ",(0,r.jsx)(s.strong,{children:"Atribuir"}),"."]}),"\n"]}),"\n",(0,r.jsx)(s.h4,{id:"default-global-roles",children:"Pap\xe9is globais padr\xe3o"}),"\n",(0,r.jsxs)(s.p,{children:["Voc\xea pode definir um ou mais pap\xe9is globais como ",(0,r.jsx)(s.strong,{children:"pap\xe9is padr\xe3o"}),' para novos usu\xe1rios. Pap\xe9is padr\xe3o s\xe3o atribu\xeddos automaticamente quando os usu\xe1rios s\xe3o criados, seja por autoinscri\xe7\xe3o ou criados via Management API. Voc\xea pode ativar esta op\xe7\xe3o na aba "Geral" na p\xe1gina de detalhes em ',(0,r.jsx)(o,{to:"/roles",children:"Console > Pap\xe9is"}),"."]}),"\n",(0,r.jsx)(s.h3,{id:"configure-organization-roles",children:"Configurar pap\xe9is de organiza\xe7\xe3o"}),"\n",(0,r.jsxs)(s.p,{children:["Crie pap\xe9is de organiza\xe7\xe3o no Logto Console ou ",(0,r.jsx)(s.a,{href:"https://openapi.logto.io/group/endpoint-organization-roles",children:"via Management API"})," para agrupar permiss\xf5es que se aplicam dentro de cada organiza\xe7\xe3o. Pap\xe9is de organiza\xe7\xe3o s\xe3o definidos no ",(0,r.jsx)(s.a,{href:"/authorization/organization-template",children:"template da organiza\xe7\xe3o"}),"."]}),"\n",(0,r.jsx)(s.p,{children:"Um papel de organiza\xe7\xe3o pode ser um dos seguintes:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Papel de usu\xe1rio:"})," Atribu\xeddo a usu\xe1rios finais dentro de uma organiza\xe7\xe3o, concedendo permiss\xf5es para acessar APIs e funcionalidades."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Papel m\xe1quina para m\xe1quina (M2M):"})," Atribu\xeddo a aplicativos M2M dentro de uma organiza\xe7\xe3o, concedendo permiss\xf5es para acessar APIs e funcionalidades. Este papel ",(0,r.jsx)(s.strong,{children:"n\xe3o pode"})," vincular ao Logto Management API, pois \xe9 espec\xedfico da organiza\xe7\xe3o."]}),"\n"]}),"\n",(0,r.jsx)(s.admonition,{type:"note",children:(0,r.jsx)(s.p,{children:"Observe que esses dois tipos de pap\xe9is n\xe3o podem ser misturados ou atualizados ap\xf3s a cria\xe7\xe3o. Atribua usu\xe1rios ou aplicativos M2M ao papel, dependendo do tipo."})}),"\n",(0,r.jsx)(s.h4,{id:"create-organization-roles-in-logto-console",children:"Criar pap\xe9is de organiza\xe7\xe3o no Logto Console"}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["V\xe1 para ",(0,r.jsx)(o,{to:"/organization-template/organization-roles",children:"Console \u2192 Template da organiza\xe7\xe3o \u2192 Pap\xe9is de organiza\xe7\xe3o"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["Clique em ",(0,r.jsx)(s.strong,{children:"Criar papel de organiza\xe7\xe3o"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"Forne\xe7a:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Nome do papel:"})," Um nome claro e descritivo para o papel (ex: ",(0,r.jsx)(s.code,{children:"admin"}),", ",(0,r.jsx)(s.code,{children:"member"}),", ",(0,r.jsx)(s.code,{children:"billing-manager"}),")."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Tipo de papel:"})," Escolha entre ",(0,r.jsx)(s.strong,{children:"Usu\xe1rio"})," ou ",(0,r.jsx)(s.strong,{children:"M\xe1quina para m\xe1quina (M2M)"}),". ",(0,r.jsx)(s.strong,{children:"Apenas pap\xe9is m\xe1quina para m\xe1quina (M2M) podem vincular ao Logto Management API"}),"."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Descri\xe7\xe3o:"}),' Uma breve descri\xe7\xe3o do prop\xf3sito do papel (ex: "Papel de admin com acesso total", "Papel de membro para acesso b\xe1sico").']}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["Clique em ",(0,r.jsx)(s.strong,{children:"Criar papel"})," para salvar."]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["No modal ",(0,r.jsx)(s.strong,{children:"Atribuir permiss\xf5es"}),", selecione as permiss\xf5es de organiza\xe7\xe3o e/ou permiss\xf5es de recurso de API que este papel deve ter. Voc\xea pode atualizar as permiss\xf5es depois, se necess\xe1rio."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.h4,{id:"assign-users-or-m2m-apps-to-organization-roles",children:"Atribuir usu\xe1rios ou aplicativos M2M a pap\xe9is de organiza\xe7\xe3o"}),"\n",(0,r.jsx)(s.p,{children:"Como pap\xe9is de organiza\xe7\xe3o s\xe3o espec\xedficos da organiza\xe7\xe3o, voc\xea precisa atribuir usu\xe1rios ou aplicativos M2M a pap\xe9is de organiza\xe7\xe3o dentro do contexto de uma organiza\xe7\xe3o."}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["V\xe1 para ",(0,r.jsx)(o,{to:"/organizations",children:"Console \u2192 Organiza\xe7\xf5es"}),"."]}),"\n",(0,r.jsx)(s.li,{children:"Selecione a organiza\xe7\xe3o que deseja gerenciar."}),"\n",(0,r.jsxs)(s.li,{children:["Para ",(0,r.jsx)(s.strong,{children:"Pap\xe9is de usu\xe1rio"}),", clique na aba ",(0,r.jsx)(s.strong,{children:"Usu\xe1rios"}),"; para ",(0,r.jsx)(s.strong,{children:"Pap\xe9is M2M"}),", clique na aba ",(0,r.jsx)(s.strong,{children:"aplicativos m\xe1quina para m\xe1quina"}),"."]}),"\n",(0,r.jsxs)(s.li,{children:["Se o usu\xe1rio ou aplicativo M2M ainda n\xe3o for membro da organiza\xe7\xe3o, clique em ",(0,r.jsx)(s.strong,{children:"Adicionar membro"})," ou ",(0,r.jsx)(s.strong,{children:"Adicionar aplicativo M2M"})," para adicion\xe1-los \xe0 organiza\xe7\xe3o. Durante esse processo, voc\xea pode atribu\xed-los a um ou mais pap\xe9is de organiza\xe7\xe3o."]}),"\n",(0,r.jsxs)(s.li,{children:["Se o usu\xe1rio ou aplicativo M2M j\xe1 for membro, clique no menu de tr\xeas pontos ao lado do nome e selecione ",(0,r.jsx)(s.strong,{children:"Editar pap\xe9is de organiza\xe7\xe3o"}),"."]}),"\n",(0,r.jsx)(s.li,{children:"No modal aberto, selecione e salve os pap\xe9is de organiza\xe7\xe3o que deseja atribuir ao usu\xe1rio ou aplicativo M2M."}),"\n"]}),"\n",(0,r.jsx)(s.h4,{id:"just-in-time-jit-provisioning",children:"Provisionamento Just-in-time (JIT)"}),"\n",(0,r.jsxs)(s.p,{children:["Voc\xea tamb\xe9m pode atribuir pap\xe9is de organiza\xe7\xe3o a usu\xe1rios ou aplicativos M2M no momento em que eles ingressam em uma organiza\xe7\xe3o. Para isso, consulte ",(0,r.jsx)(s.a,{href:"/organizations/just-in-time-provisioning",children:"Provisionamento Just-in-time (JIT)"}),"."]}),"\n",(0,r.jsx)(s.h3,{id:"enforcing-authorization-in-your-backend-or-api",children:"Aplicando autoriza\xe7\xe3o no seu backend ou API"}),"\n",(0,r.jsxs)(s.p,{children:["O Logto emite ",(0,r.jsx)(s.a,{href:"https://auth.wiki/jwt",children:"JSON Web Tokens (JWTs)"})," que cont\xeam as reivindica\xe7\xf5es necess\xe1rias para aplicar autoriza\xe7\xe3o em sua aplica\xe7\xe3o ou API."]}),"\n",(0,r.jsx)(s.p,{children:"Para aplicar autoriza\xe7\xe3o, seu backend ou API deve:"}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["Exigir que o cliente apresente um token de acesso v\xe1lido no cabe\xe7alho da requisi\xe7\xe3o com o formato ",(0,r.jsx)(s.code,{children:"Authorization: Bearer <token>"}),"."]}),"\n",(0,r.jsx)(s.li,{children:"Validar o token de acesso para garantir que foi emitido pelo Logto, n\xe3o expirou e possui as permiss\xf5es (escopos) necess\xe1rias para a a\xe7\xe3o solicitada."}),"\n",(0,r.jsx)(s.li,{children:"Responder com um erro (ex: HTTP 401 Unauthorized ou HTTP 403 Forbidden) se o token estiver ausente, inv\xe1lido ou n\xe3o possuir as permiss\xf5es necess\xe1rias."}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:["Para guias passo a passo e espec\xedficos de linguagem, veja ",(0,r.jsx)(s.a,{href:"/authorization/validate-access-tokens",children:"Como validar tokens de acesso"}),"."]}),"\n",(0,r.jsx)(s.h3,{id:"integrate-logto-rbac-with-your-application",children:"Integrar o RBAC do Logto \xe0 sua aplica\xe7\xe3o"}),"\n",(0,r.jsx)(s.p,{children:"Voc\xea pode integrar o RBAC do Logto \xe0 sua aplica\xe7\xe3o usando uma das duas abordagens:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"SDKs Logto:"})," Use um ",(0,r.jsx)(s.a,{href:"/quick-starts",children:"SDK Logto"})," para lidar com os fluxos de autentica\xe7\xe3o e autoriza\xe7\xe3o integrados."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Bibliotecas padr\xe3o OAuth 2.0/OIDC:"})," Use sua biblioteca OAuth 2.0 ou OpenID Connect preferida para implementar os fluxos necess\xe1rios."]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:["Uma vez integrado, solicite tokens de acesso com os par\xe2metros corretos para o modelo RBAC escolhido. Adicione o token de acesso ao cabe\xe7alho ",(0,r.jsx)(s.code,{children:"Authorization"})," em suas requisi\xe7\xf5es de API para aplicar as permiss\xf5es."]}),"\n",(0,r.jsx)(s.p,{children:"Veja os guias de implementa\xe7\xe3o nas se\xe7\xf5es dos modelos acima para exemplos passo a passo."}),"\n",(0,r.jsx)(s.h2,{id:"advanced-scenarios",children:"Cen\xe1rios avan\xe7ados"}),"\n",(0,r.jsx)(s.p,{children:"Explore casos de uso RBAC mais sofisticados no Logto:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Combinando pap\xe9is globais e de organiza\xe7\xe3o:"})," Atribua ambos a usu\xe1rios/clientes quando necess\xe1rio; o Logto ir\xe1 resolver com base no contexto do token solicitado."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"M\xfaltiplos aplicativos:"})," Use recursos e escopos compartilhados para RBAC entre aplicativos."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Permiss\xf5es din\xe2micas:"})," Se necess\xe1rio, combine RBAC com verifica\xe7\xf5es em tempo de execu\xe7\xe3o (ex: propriedade, atributos) para cen\xe1rios avan\xe7ados."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Reivindica\xe7\xf5es personalizadas de token:"})," Use ",(0,r.jsx)(s.a,{href:"/developers/custom-token-claims",children:"reivindica\xe7\xf5es personalizadas"})," para enriquecer tokens conforme necess\xe1rio."]}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"best-practices-common-pitfalls",children:"Melhores pr\xe1ticas & armadilhas comuns"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Princ\xedpio do menor privil\xe9gio:"})," Conceda apenas as permiss\xf5es que cada papel precisa."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Evite dispers\xe3o de permiss\xf5es:"})," Mantenha seu modelo de permiss\xf5es simples e f\xe1cil de manter."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Revise e atualize pap\xe9is/permiss\xf5es:"})," Audite regularmente seu modelo RBAC conforme seu produto evolui."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Separa\xe7\xe3o de fun\xe7\xf5es:"})," Crie pap\xe9is distintos para a\xe7\xf5es sens\xedveis/admin."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Teste o RBAC em staging:"})," Valide limites e escalonamentos de permiss\xf5es."]}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"faqs",children:"Perguntas frequentes"}),"\n",(0,r.jsxs)(i,{children:[(0,r.jsx)("summary",{children:(0,r.jsx)(s.h3,{id:"how-do-i-update-roles-or-permissions-across-all-organizations",children:"Como atualizo pap\xe9is ou permiss\xf5es em todas as organiza\xe7\xf5es?"})}),(0,r.jsxs)(s.p,{children:["Atualize o ",(0,r.jsx)(s.a,{href:"/authorization/organization-template",children:"template da organiza\xe7\xe3o"})," para altera\xe7\xf5es globais; organiza\xe7\xf5es existentes podem herdar as atualiza\xe7\xf5es."]})]}),"\n",(0,r.jsxs)(i,{children:[(0,r.jsx)("summary",{children:(0,r.jsx)(s.h3,{id:"can-i-change-roles-permissions-dynamically",children:"Posso alterar pap\xe9is/permiss\xf5es dinamicamente?"})}),(0,r.jsx)(s.p,{children:"Sim, pap\xe9is e suas permiss\xf5es podem ser atualizados a qualquer momento."})]}),"\n",(0,r.jsxs)(i,{children:[(0,r.jsx)("summary",{children:(0,r.jsx)(s.h3,{id:"what-happens-if-i-remove-a-permission-from-a-role",children:"O que acontece se eu remover uma permiss\xe3o de um papel?"})}),(0,r.jsx)(s.p,{children:"Usu\xe1rios/clientes com esse papel perder\xe3o a permiss\xe3o imediatamente para novos tokens."})]}),"\n",(0,r.jsxs)(i,{children:[(0,r.jsx)("summary",{children:(0,r.jsx)(s.h3,{id:"how-can-i-audit-who-has-what-role",children:"Como posso auditar quem tem qual papel?"})}),(0,r.jsx)(s.p,{children:"Use o Logto Console ou API para listar as atribui\xe7\xf5es de pap\xe9is."})]}),"\n",(0,r.jsxs)(i,{children:[(0,r.jsx)("summary",{children:(0,r.jsx)(s.h3,{id:"can-roles-and-permissions-be-assigned-via-api",children:"Pap\xe9is e permiss\xf5es podem ser atribu\xeddos via API?"})}),(0,r.jsx)(s.p,{children:"Sim, tanto o Console quanto o Management API suportam o gerenciamento program\xe1tico de pap\xe9is e atribui\xe7\xf5es."})]}),"\n",(0,r.jsx)(s.h2,{id:"further-reading",children:"Leitura adicional"}),"\n",(0,r.jsx)(c,{href:"/authorization/organization-template",children:"Template da organiza\xe7\xe3o"}),"\n",(0,r.jsx)(c,{href:"/developers/custom-token-claims",children:"Personalizando reivindica\xe7\xf5es de token"}),"\n",(0,r.jsx)(c,{href:"/authorization/validate-access-tokens",children:"Como validar tokens de acesso"}),"\n",(0,r.jsx)(c,{href:"/authorization/global-api-resources",children:"Proteger recursos de API globais"}),"\n",(0,r.jsx)(c,{href:"/authorization/organization-permissions",children:(0,r.jsx)(s.p,{children:"Proteger permiss\xf5es de organiza\xe7\xe3o (n\xe3o-API)"})}),"\n",(0,r.jsx)(c,{href:"/authorization/organization-level-api-resources",children:(0,r.jsx)(s.p,{children:"Proteger recursos de API em n\xedvel de organiza\xe7\xe3o"})})]})}function m(e={}){const{wrapper:s}={...(0,a.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}function x(e,s){throw new Error("Expected "+(s?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},46643:(e,s,o)=>{o.d(s,{A:()=>i});const i=o.p+"assets/images/rbac-global-api-resources-33fafc263308d3f769c62cbcdb8d7829.png"},1242:(e,s,o)=>{o.d(s,{A:()=>i});const i=o.p+"assets/images/rbac-organization-level-api-resources-9533c281f3ee1cf52aefe821717e1fef.png"},93855:(e,s,o)=>{o.d(s,{A:()=>i});const i=o.p+"assets/images/rbac-organization-permissions-3302be06221b4399f73ddceac8ca17e3.png"},79621:(e,s,o)=>{o.d(s,{R:()=>n,x:()=>d});var i=o(58101);const r={},a=i.createContext(r);function n(e){const s=i.useContext(a);return i.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function d(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:n(e.components),i.createElement(a.Provider,{value:s},e.children)}}}]);