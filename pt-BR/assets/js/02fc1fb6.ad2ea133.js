"use strict";(self.webpackChunk_logto_docs=self.webpackChunk_logto_docs||[]).push([[7433],{62834:(e,n,o)=>{o.d(n,{Ay:()=>k,RM:()=>I});var s=o(25105),r=o(79621),a=o(9511),i=o(23328),t=o(43951),d=o(22821);const c=o.p+"assets/images/guide-focus-8b3e94dddfb8a3c19b5bdd8a343fc29f.png";var l=o(33435);function u(e){const n={a:"a",h2:"h2",h3:"h3",li:"li",p:"p",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"before-you-start",children:"Antes de come\xe7ar"}),"\n",(0,s.jsxs)(n.p,{children:["Seus aplicativos cliente precisam obter tokens de acesso (Access tokens) do Logto. Se voc\xea ainda n\xe3o configurou a integra\xe7\xe3o do cliente, confira nossos ",(0,s.jsx)(n.a,{href:"/quick-starts",children:"Guias r\xe1pidos"})," para React, Vue, Angular ou outros frameworks de cliente, ou veja nosso ",(0,s.jsx)(n.a,{href:"/quick-starts/m2m",children:"Guia m\xe1quina para m\xe1quina"})," para acesso servidor a servidor."]}),"\n",(0,s.jsxs)(n.p,{children:["Este guia foca na ",(0,s.jsx)(n.strong,{children:"valida\xe7\xe3o no lado do servidor"})," desses tokens em seu aplicativo ",(0,l.My)(e.framework),"."]}),"\n",(0,s.jsx)("img",{src:c,alt:"Uma figura mostrando o foco deste guia",style:{width:"100%",maxWidth:"480px",margin:"20px auto"}}),"\n",(0,s.jsx)(n.h3,{id:"what-you-will-learn",children:"O que voc\xea vai aprender"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Valida\xe7\xe3o de JWT:"})," Aprenda a validar tokens de acesso (Access tokens) e extrair informa\xe7\xf5es de autentica\xe7\xe3o (Authentication)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Implementa\xe7\xe3o de middleware:"})," Crie middleware reutiliz\xe1vel para prote\xe7\xe3o de API"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Modelos de permiss\xe3o:"})," Entenda e implemente diferentes padr\xf5es de autoriza\xe7\xe3o (Authorization):","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Recursos de API globais para endpoints de aplica\xe7\xe3o"}),"\n",(0,s.jsx)(n.li,{children:"Permiss\xf5es de organiza\xe7\xe3o para controle de funcionalidades espec\xedficas do locat\xe1rio"}),"\n",(0,s.jsx)(n.li,{children:"Recursos de API em n\xedvel de organiza\xe7\xe3o para acesso a dados multi-inquilino"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Integra\xe7\xe3o com RBAC:"})," Implemente permiss\xf5es e escopos baseados em papel (Role-based access control (RBAC)) em seus endpoints de API"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"prerequisites",children:"Pr\xe9-requisitos"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\xdaltima vers\xe3o est\xe1vel do ",(0,l.Id)(e.framework)," instalada"]}),"\n",(0,s.jsxs)(n.li,{children:["Compreens\xe3o b\xe1sica de ",(0,l.My)(e.framework)," e desenvolvimento de API web"]}),"\n",(0,s.jsxs)(n.li,{children:["Um aplicativo Logto configurado (veja ",(0,s.jsx)(n.a,{href:"/quick-starts",children:"Guias r\xe1pidos"})," se necess\xe1rio)"]}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(u,{...e})}):u(e)}function h(e){const n={h2:"h2",p:"p",...(0,r.R)(),...e.components},{Url:o}=n;return o||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Url",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"further-reading",children:"Leitura adicional"}),"\n",(0,s.jsx)(o,{href:"/use-cases/authorization/rbac-in-practice",children:(0,s.jsx)(n.p,{children:"RBAC na pr\xe1tica: Implementando autoriza\xe7\xe3o segura para seu aplicativo"})}),"\n",(0,s.jsx)(o,{href:"/use-cases/multi-tenancy/build-multi-tenant-saas-application",children:(0,s.jsx)(n.p,{children:"Construa um aplicativo SaaS multi-inquilino: Um guia completo do design \xe0 implementa\xe7\xe3o"})})]})}function g(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}var m=o(46643),x=o(1242),j=o(93855),f=o(38552),b=o(22002);function v(e){const n={a:"a",h2:"h2",li:"li",p:"p",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"permission-models-overview",children:"Vis\xe3o geral dos modelos de permiss\xe3o"}),"\n",(0,s.jsxs)(n.p,{children:["Antes de implementar a prote\xe7\xe3o, escolha o modelo de permiss\xe3o que se encaixa na arquitetura do seu aplicativo. Isso est\xe1 alinhado com os tr\xeas principais ",(0,s.jsx)(n.a,{href:"/authorization#authorization-scenarios",children:"cen\xe1rios de autoriza\xe7\xe3o"})," do Logto:"]}),"\n",(0,s.jsxs)(b.A,{groupId:"permission-models",children:[(0,s.jsxs)(f.A,{value:"global-api-resources",label:"Recursos globais de API",children:[(0,s.jsx)("img",{src:m.A,alt:"RBAC de recursos globais de API",style:{maxWidth:"100%"}}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Caso de uso:"})," Proteger recursos de API compartilhados em todo o seu aplicativo (n\xe3o espec\xedficos de organiza\xe7\xe3o)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Tipo de token:"})," Token de acesso (Access token) com p\xfablico global (global audience)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Exemplos:"})," APIs p\xfablicas, servi\xe7os principais do produto, endpoints de administra\xe7\xe3o"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Melhor para:"})," Produtos SaaS com APIs usadas por todos os clientes, microsservi\xe7os sem isolamento de locat\xe1rio"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Saiba mais:"})," ",(0,s.jsx)(n.a,{href:"/authorization/global-api-resources",children:"Proteger recursos globais de API"})]}),"\n"]})]}),(0,s.jsxs)(f.A,{value:"organization-permissions",label:"Permiss\xf5es de organiza\xe7\xe3o (n\xe3o-API)",children:[(0,s.jsx)("img",{src:j.A,alt:"RBAC de permiss\xf5es de organiza\xe7\xe3o",style:{maxWidth:"800px",width:"100%"}}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Caso de uso:"})," Controlar a\xe7\xf5es espec\xedficas da organiza\xe7\xe3o, recursos de UI ou l\xf3gica de neg\xf3cios (n\xe3o APIs)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Tipo de token:"})," Token de organiza\xe7\xe3o (Organization token) com p\xfablico espec\xedfico da organiza\xe7\xe3o"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Exemplos:"})," Libera\xe7\xe3o de recursos, permiss\xf5es de dashboard, controles de convite de membros"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Melhor para:"})," SaaS multi-inquilino com recursos e fluxos de trabalho espec\xedficos de organiza\xe7\xe3o"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Saiba mais:"})," ",(0,s.jsx)(n.a,{href:"/authorization/organization-permissions",children:"Proteger permiss\xf5es de organiza\xe7\xe3o (n\xe3o-API)"})]}),"\n"]})]}),(0,s.jsxs)(f.A,{value:"organization-level-api-resources",label:"Recursos de API em n\xedvel de organiza\xe7\xe3o",children:[(0,s.jsx)("img",{src:x.A,alt:"RBAC de recursos de API em n\xedvel de organiza\xe7\xe3o",style:{width:"100%"}}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Caso de uso:"})," Proteger recursos de API acess\xedveis dentro de um contexto espec\xedfico de organiza\xe7\xe3o"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Tipo de token:"})," Token de organiza\xe7\xe3o (Organization token) com p\xfablico de recurso de API + contexto de organiza\xe7\xe3o"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Exemplos:"})," APIs multi-inquilino, endpoints de dados com escopo de organiza\xe7\xe3o, microsservi\xe7os espec\xedficos de locat\xe1rio"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Melhor para:"})," SaaS multi-inquilino onde os dados da API t\xeam escopo de organiza\xe7\xe3o"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Saiba mais:"})," ",(0,s.jsx)(n.a,{href:"/authorization/organization-level-api-resources",children:"Proteger recursos de API em n\xedvel de organiza\xe7\xe3o"})]}),"\n"]})]})]}),"\n",(0,s.jsx)("br",{}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\ud83d\udca1 Escolha seu modelo antes de prosseguir"})," \u2013 a implementa\xe7\xe3o far\xe1 refer\xeancia \xe0 abordagem escolhida ao longo deste guia."]})]})}function A(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(v,{...e})}):v(e)}function z(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"quick-preparation-steps",children:"Passos r\xe1pidos de prepara\xe7\xe3o"}),"\n",(0,s.jsx)(n.h3,{id:"configure-logto-resources-permissions",children:"Configure recursos e permiss\xf5es do Logto"}),"\n",(0,s.jsxs)(b.A,{groupId:"permission-models",children:[(0,s.jsx)(f.A,{value:"global-api-resources",label:"Recursos globais de API",children:(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Criar recurso de API:"})," V\xe1 para ",(0,s.jsx)(n.a,{href:"https://cloud.logto.io/api-resources",children:"Console \u2192 Recursos de API"})," e registre sua API (ex: ",(0,s.jsx)(n.code,{children:"https://api.seuapp.com"}),")"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Definir permiss\xf5es:"})," Adicione escopos como ",(0,s.jsx)(n.code,{children:"read:products"}),", ",(0,s.jsx)(n.code,{children:"write:orders"})," \u2013 veja ",(0,s.jsx)(n.a,{href:"/authorization/role-based-access-control#define-api-resources-with-permissions",children:"Definir recursos de API com permiss\xf5es"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Criar pap\xe9is globais:"})," V\xe1 para ",(0,s.jsx)(n.a,{href:"https://cloud.logto.io/roles",children:"Console \u2192 Pap\xe9is"})," e crie pap\xe9is que incluam as permiss\xf5es da sua API \u2013 veja ",(0,s.jsx)(n.a,{href:"/authorization/role-based-access-control#configure-global-roles",children:"Configurar pap\xe9is globais"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Atribuir pap\xe9is:"})," Atribua pap\xe9is a usu\xe1rios ou aplicativos M2M que precisam de acesso \xe0 API"]}),"\n"]})}),(0,s.jsx)(f.A,{value:"organization-permissions",label:"Permiss\xf5es de organiza\xe7\xe3o (n\xe3o-API)",children:(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Definir permiss\xf5es da organiza\xe7\xe3o:"})," Crie permiss\xf5es de organiza\xe7\xe3o n\xe3o relacionadas \xe0 API como ",(0,s.jsx)(n.code,{children:"invite:member"}),", ",(0,s.jsx)(n.code,{children:"manage:billing"})," no template da organiza\xe7\xe3o"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Configurar pap\xe9is da organiza\xe7\xe3o:"})," Configure o template da organiza\xe7\xe3o com pap\xe9is espec\xedficos da organiza\xe7\xe3o e atribua permiss\xf5es a eles"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Atribuir pap\xe9is da organiza\xe7\xe3o:"})," Atribua usu\xe1rios aos pap\xe9is da organiza\xe7\xe3o dentro do contexto de cada organiza\xe7\xe3o"]}),"\n"]})}),(0,s.jsx)(f.A,{value:"organization-level-api-resources",label:"Recursos de API em n\xedvel de organiza\xe7\xe3o",children:(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Criar recurso de API:"})," Registre seu recurso de API como acima, mas ele ser\xe1 usado no contexto da organiza\xe7\xe3o"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Definir permiss\xf5es:"})," Adicione escopos como ",(0,s.jsx)(n.code,{children:"read:data"}),", ",(0,s.jsx)(n.code,{children:"write:settings"})," que s\xe3o restritos ao contexto da organiza\xe7\xe3o"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Configurar template da organiza\xe7\xe3o:"})," Configure pap\xe9is da organiza\xe7\xe3o que incluam as permiss\xf5es do seu recurso de API"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Atribuir pap\xe9is da organiza\xe7\xe3o:"})," Atribua usu\xe1rios ou aplicativos M2M a pap\xe9is da organiza\xe7\xe3o que incluam permiss\xf5es de API"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Configura\xe7\xe3o multi-tenant:"})," Certifique-se de que sua API pode lidar com dados e valida\xe7\xe3o com escopo de organiza\xe7\xe3o"]}),"\n"]})})]}),"\n",(0,s.jsx)(n.admonition,{title:"Novo no RBAC?",type:"tip",children:(0,s.jsxs)(n.p,{children:["Comece com nosso ",(0,s.jsx)(n.a,{href:"/authorization/role-based-access-control",children:"guia de controle de acesso baseado em papel"})," para instru\xe7\xf5es passo a passo de configura\xe7\xe3o."]})}),"\n",(0,s.jsx)(n.h3,{id:"update-your-client-application",children:"Atualize seu aplicativo cliente"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Solicite os escopos apropriados em seu cliente:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Autentica\xe7\xe3o de usu\xe1rio: ",(0,s.jsx)(n.a,{href:"/quick-starts",children:"Atualize seu app \u2192"})," para solicitar os escopos da sua API e/ou contexto de organiza\xe7\xe3o"]}),"\n",(0,s.jsxs)(n.li,{children:["M\xe1quina para m\xe1quina: ",(0,s.jsx)(n.a,{href:"/quick-starts/m2m",children:"Configure escopos M2M \u2192"})," para acesso servidor a servidor"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"O processo geralmente envolve atualizar a configura\xe7\xe3o do seu cliente para incluir um ou mais dos seguintes:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Par\xe2metro ",(0,s.jsx)(n.code,{children:"scope"})," nos fluxos OAuth"]}),"\n",(0,s.jsxs)(n.li,{children:["Par\xe2metro ",(0,s.jsx)(n.code,{children:"resource"})," para acesso a recursos de API"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"organization_id"})," para contexto de organiza\xe7\xe3o"]}),"\n"]}),"\n",(0,s.jsx)(n.admonition,{title:"Antes de codificar",type:"tip",children:(0,s.jsx)(n.p,{children:"Certifique-se de que o usu\xe1rio ou app M2M que voc\xea est\xe1 testando recebeu os pap\xe9is ou pap\xe9is de organiza\xe7\xe3o adequados que incluam as permiss\xf5es necess\xe1rias para sua API."})})]})}function y(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(z,{...e})}):z(e)}const I=[{value:"Antes de come\xe7ar",id:"before-you-start",level:2},{value:"O que voc\xea vai aprender",id:"what-you-will-learn",level:3},{value:"Pr\xe9-requisitos",id:"prerequisites",level:3},{value:"Vis\xe3o geral dos modelos de permiss\xe3o",id:"permission-models-overview",level:2},{value:"Passos r\xe1pidos de prepara\xe7\xe3o",id:"quick-preparation-steps",level:2},{value:"Configure recursos e permiss\xf5es do Logto",id:"configure-logto-resources-permissions",level:3},{value:"Atualize seu aplicativo cliente",id:"update-your-client-application",level:3},{value:"Inicialize seu projeto de API",id:"initialize-your-api-project",level:2},{value:"Inicialize constantes e utilit\xe1rios",id:"initialize-constants-and-utilities",level:2},...a.RM,{value:"Recupere informa\xe7\xf5es sobre seu tenant Logto",id:"retrieve-info-about-your-logto-tenant",level:2},...i.RM,{value:"Valide o token e as permiss\xf5es",id:"validate-the-token-and-permissions",level:2},...d.RM,{value:"Adicione a l\xf3gica de valida\xe7\xe3o",id:"add-the-validation-logic",level:3},{value:"Aplique o middleware \xe0 sua API",id:"apply-the-middleware-to-your-api",level:2},{value:"Teste sua API protegida",id:"test-your-protected-api",level:2},...t.RM,{value:"Leitura adicional",id:"further-reading",level:2}];function P(e){const n={h2:"h2",h3:"h3",p:"p",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(p,{framework:e.framework}),"\n",(0,s.jsx)(A,{}),"\n",(0,s.jsx)(y,{}),"\n",(0,s.jsx)(n.h2,{id:"initialize-your-api-project",children:"Inicialize seu projeto de API"}),"\n","\n",e.initializeProject,"\n",(0,s.jsx)(n.h2,{id:"initialize-constants-and-utilities",children:"Inicialize constantes e utilit\xe1rios"}),"\n",(0,s.jsx)(a.Ay,{}),"\n","\n",e.languageInit,"\n",(0,s.jsx)(n.h2,{id:"retrieve-info-about-your-logto-tenant",children:"Recupere informa\xe7\xf5es sobre seu tenant Logto"}),"\n",(0,s.jsx)(i.Ay,{}),"\n",(0,s.jsx)(n.h2,{id:"validate-the-token-and-permissions",children:"Valide o token e as permiss\xf5es"}),"\n",(0,s.jsx)(d.Ay,{}),"\n",(0,s.jsx)(n.h3,{id:"add-the-validation-logic",children:"Adicione a l\xf3gica de valida\xe7\xe3o"}),"\n","\n",e.addValidationLogic,"\n",(0,s.jsx)(n.h2,{id:"apply-the-middleware-to-your-api",children:"Aplique o middleware \xe0 sua API"}),"\n",(0,s.jsx)(n.p,{children:"Agora, aplique o middleware \xe0s suas rotas de API protegidas."}),"\n","\n",e.applyMiddleware,"\n",(0,s.jsx)(n.h2,{id:"test-your-protected-api",children:"Teste sua API protegida"}),"\n",(0,s.jsx)(t.Ay,{}),"\n",(0,s.jsx)(g,{})]})}function k(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(P,{...e})}):P(e)}},86157:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>g,contentTitle:()=>h,default:()=>j,frontMatter:()=>p,metadata:()=>s,toc:()=>m});const s=JSON.parse('{"id":"api-protection/ruby/grape/README","title":"Proteja sua API Grape com RBAC (controle de acesso baseado em papel) e valida\xe7\xe3o de JWT","description":"Este guia ir\xe1 ajud\xe1-lo a implementar autoriza\xe7\xe3o para proteger suas APIs Grape usando controle de acesso baseado em papel (RBAC) e JSON Web Tokens (JWTs) emitidos pelo Logto.","source":"@site/i18n/pt-BR/docusaurus-plugin-content-docs/current/api-protection/ruby/grape/README.mdx","sourceDirName":"api-protection/ruby/grape","slug":"/api-protection/ruby/grape/","permalink":"/pt-BR/api-protection/ruby/grape/","draft":false,"unlisted":false,"editUrl":"https://github.com/logto-io/docs/tree/master/i18n/pt-BR/docusaurus-plugin-content-docs/current/api-protection/ruby/grape/README.mdx","tags":[],"version":"current","frontMatter":{"sidebar_label":"Grape"},"sidebar":"apiProtectionSidebar","previous":{"title":"Proteja sua API Ruby com RBAC (controle de acesso baseado em papel) e valida\xe7\xe3o de JWT","permalink":"/pt-BR/api-protection/ruby/"},"next":{"title":"Ruby on Rails","permalink":"/pt-BR/api-protection/ruby/rails/"}}');var r=o(25105),a=o(79621),i=o(67837),t=o(74869),d=o(65280),c=o(62834);function l(e){const n={admonition:"admonition",code:"code",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"Para inicializar um novo projeto Grape API, crie um diret\xf3rio e configure a estrutura b\xe1sica:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"mkdir seu-nome-api\ncd seu-nome-api\n"})}),"\n",(0,r.jsx)(n.p,{children:"Crie um Gemfile:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ruby",metastring:'title="Gemfile"',children:"source 'https://rubygems.org'\n\ngem 'grape'\n"})}),"\n",(0,r.jsx)(n.p,{children:"Instale as depend\xeancias:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"bundle install\n"})}),"\n",(0,r.jsx)(n.p,{children:"Crie uma Grape API b\xe1sica:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ruby",metastring:'title="api.rb"',children:"require 'grape'\n\nclass API < Grape::API\n  format :json\n\n  get :hello do\n    { message: 'Hello from Grape API' }\n  end\nend\n"})}),"\n",(0,r.jsx)(n.p,{children:"Crie um arquivo config.ru:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ruby",metastring:'title="config.ru"',children:"require_relative 'api'\n\nrun API\n"})}),"\n",(0,r.jsx)(n.p,{children:"Inicie o servidor de desenvolvimento:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"bundle exec rackup\n"})}),"\n",(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsx)(n.p,{children:"Consulte a documenta\xe7\xe3o do Grape para mais detalhes sobre como configurar recursos, valida\xe7\xe3o de par\xe2metros e outros recursos."})})]})}function u(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}const p={sidebar_label:"Grape"},h="Proteja sua API Grape com RBAC (controle de acesso baseado em papel) e valida\xe7\xe3o de JWT",g={},m=[...c.RM];function x(e){const n={a:"a",h1:"h1",header:"header",p:"p",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"proteja-sua-api-grape-com-rbac-controle-de-acesso-baseado-em-papel-e-valida\xe7\xe3o-de-jwt",children:"Proteja sua API Grape com RBAC (controle de acesso baseado em papel) e valida\xe7\xe3o de JWT"})}),"\n",(0,r.jsxs)(n.p,{children:["Este guia ir\xe1 ajud\xe1-lo a implementar autoriza\xe7\xe3o para proteger suas APIs Grape usando ",(0,r.jsx)(n.a,{href:"/authorization/role-based-access-control",children:"controle de acesso baseado em papel (RBAC)"})," e ",(0,r.jsx)(n.a,{href:"https://auth.wiki/jwt",children:"JSON Web Tokens (JWTs)"})," emitidos pelo Logto."]}),"\n","\n",(0,r.jsx)(c.Ay,{framework:"grape",initializeProject:(0,r.jsx)(u,{}),languageInit:(0,r.jsx)(t.Ay,{}),applyMiddleware:(0,r.jsx)(d.Ay,{}),addValidationLogic:(0,r.jsx)(i.Ay,{framework:"grape"})})]})}function j(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(x,{...e})}):x(e)}},9511:(e,n,o)=>{o.d(n,{Ay:()=>t,RM:()=>a});var s=o(25105),r=o(79621);const a=[];function i(e){const n={code:"code",p:"p",...(0,r.R)(),...e.components};return(0,s.jsxs)(n.p,{children:["Defina as constantes e utilit\xe1rios necess\xe1rios em seu c\xf3digo para lidar com a extra\xe7\xe3o e valida\xe7\xe3o do token. Uma solicita\xe7\xe3o v\xe1lida deve incluir um cabe\xe7alho ",(0,s.jsx)(n.code,{children:"Authorization"})," no formato ",(0,s.jsx)(n.code,{children:"Bearer <token de acesso (access token)>"}),"."]})}function t(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(i,{...e})}):i(e)}},23328:(e,n,o)=>{o.d(n,{Ay:()=>t,RM:()=>a});var s=o(25105),r=o(79621);const a=[{value:"Buscar no endpoint de descoberta do OpenID Connect",id:"fetch-from-openid-connect-discovery-endpoint",level:3},{value:"Definir manualmente no seu c\xf3digo (n\xe3o recomendado)",id:"hardcode-in-your-code-not-recommended",level:3}];function i(e){const n={code:"code",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:"Voc\xea precisar\xe1 dos seguintes valores para validar tokens emitidos pelo Logto:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"URI do JSON Web Key Set (JWKS): A URL para as chaves p\xfablicas do Logto, usada para verificar assinaturas de JWT."}),"\n",(0,s.jsx)(n.li,{children:"Emissor (Issuer): O valor esperado do emissor (URL OIDC do Logto)."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Primeiro, encontre o endpoint do seu tenant Logto. Voc\xea pode encontr\xe1-lo em v\xe1rios lugares:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["No Logto Console, em ",(0,s.jsx)(n.strong,{children:"Configura\xe7\xf5es"})," \u2192 ",(0,s.jsx)(n.strong,{children:"Dom\xednios"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["Em qualquer configura\xe7\xe3o de aplicativo onde voc\xea configurou no Logto, ",(0,s.jsx)(n.strong,{children:"Configura\xe7\xf5es"})," \u2192 ",(0,s.jsx)(n.strong,{children:"Endpoints & Credenciais"}),"."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"fetch-from-openid-connect-discovery-endpoint",children:"Buscar no endpoint de descoberta do OpenID Connect"}),"\n",(0,s.jsx)(n.p,{children:"Esses valores podem ser obtidos no endpoint de descoberta do OpenID Connect do Logto:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"https://<seu-endpoint-logto>/oidc/.well-known/openid-configuration\n"})}),"\n",(0,s.jsx)(n.p,{children:"Aqui est\xe1 um exemplo de resposta (outros campos omitidos para brevidade):"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "jwks_uri": "https://your-tenant.logto.app/oidc/jwks",\n  "issuer": "https://your-tenant.logto.app/oidc"\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"hardcode-in-your-code-not-recommended",children:"Definir manualmente no seu c\xf3digo (n\xe3o recomendado)"}),"\n",(0,s.jsx)(n.p,{children:"Como o Logto n\xe3o permite personalizar o URI do JWKS ou o emissor, voc\xea pode definir esses valores manualmente no seu c\xf3digo. No entanto, isso n\xe3o \xe9 recomendado para aplica\xe7\xf5es em produ\xe7\xe3o, pois pode aumentar a sobrecarga de manuten\xe7\xe3o caso alguma configura\xe7\xe3o mude no futuro."}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["URI do JWKS: ",(0,s.jsx)(n.code,{children:"https://<seu-endpoint-logto>/oidc/jwks"})]}),"\n",(0,s.jsxs)(n.li,{children:["Emissor: ",(0,s.jsx)(n.code,{children:"https://<seu-endpoint-logto>/oidc"})]}),"\n"]})]})}function t(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(i,{...e})}):i(e)}},43951:(e,n,o)=>{o.d(n,{Ay:()=>c,RM:()=>t});var s=o(25105),r=o(79621),a=o(38552),i=o(22002);const t=[{value:"Obter tokens de acesso (Access tokens)",id:"get-access-tokens",level:3},{value:"Testar endpoints protegidos",id:"test-protected-endpoints",level:3},{value:"Testes espec\xedficos do modelo de permiss\xe3o",id:"permission-model-specific-testing",level:3}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components},{Details:o}=n;return o||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h3,{id:"get-access-tokens",children:"Obter tokens de acesso (Access tokens)"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Do seu aplicativo cliente:"}),"\nSe voc\xea configurou uma integra\xe7\xe3o de cliente, seu aplicativo pode obter tokens automaticamente. Extraia o token de acesso e use-o nas requisi\xe7\xf5es de API."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Para testes com curl / Postman:"})}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Tokens de usu\xe1rio:"})," Use as ferramentas de desenvolvedor do seu aplicativo cliente para copiar o token de acesso do localStorage ou da aba de rede."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Tokens m\xe1quina para m\xe1quina:"})," Use o fluxo de credenciais do cliente. Aqui est\xe1 um exemplo n\xe3o normativo usando curl:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'curl -X POST https://your-tenant.logto.app/oidc/token \\\n  -H "Content-Type: application/x-www-form-urlencoded" \\\n  -d "grant_type=client_credentials" \\\n  -d "client_id=your-m2m-client-id" \\\n  -d "client_secret=your-m2m-client-secret" \\\n  -d "resource=https://your-api-resource-indicator" \\\n  -d "scope=api:read api:write"\n'})}),"\n",(0,s.jsxs)(n.p,{children:["Pode ser necess\xe1rio ajustar os par\xe2metros ",(0,s.jsx)(n.code,{children:"resource"})," e ",(0,s.jsx)(n.code,{children:"scope"})," de acordo com seu recurso de API e permiss\xf5es; um par\xe2metro ",(0,s.jsx)(n.code,{children:"organization_id"})," tamb\xe9m pode ser exigido se sua API for voltada para organiza\xe7\xe3o."]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsxs)(n.p,{children:["Precisa inspecionar o conte\xfado do token? Use nosso ",(0,s.jsx)(n.a,{href:"https://logto.io/jwt-decoder",children:"decodificador de JWT"})," para decodificar e verificar seus JWTs."]})}),"\n",(0,s.jsx)(n.h3,{id:"test-protected-endpoints",children:"Testar endpoints protegidos"}),"\n",(0,s.jsxs)(o,{children:[(0,s.jsx)("summary",{children:(0,s.jsx)(n.strong,{children:"Requisi\xe7\xe3o com token v\xe1lido"})}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'curl -H "Authorization: Bearer eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9..." \\\n  http://localhost:3000/api/protected\n'})}),(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Resposta esperada:"})}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "auth": {\n    "sub": "user123",\n    "clientId": "app456",\n    "organizationId": "org789",\n    "scopes": ["api:read", "api:write"],\n    "audience": ["https://your-api-resource-indicator"]\n  }\n}\n'})})]}),"\n",(0,s.jsxs)(o,{children:[(0,s.jsx)("summary",{children:(0,s.jsx)(n.strong,{children:"Token ausente"})}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"curl http://localhost:3000/api/protected\n"})}),(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Resposta esperada (401):"})}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "error": "Authorization header is missing"\n}\n'})})]}),"\n",(0,s.jsxs)(o,{children:[(0,s.jsx)("summary",{children:(0,s.jsx)(n.strong,{children:"Token inv\xe1lido"})}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'curl -H "Authorization: Bearer invalid-token" \\\n  http://localhost:3000/api/protected\n'})}),(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Resposta esperada (401):"})}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "error": "Invalid token"\n}\n'})})]}),"\n",(0,s.jsx)(n.h3,{id:"permission-model-specific-testing",children:"Testes espec\xedficos do modelo de permiss\xe3o"}),"\n",(0,s.jsxs)(i.A,{groupId:"permission-models",children:[(0,s.jsxs)(a.A,{value:"global-api-resources",label:"Recursos de API globais",children:[(0,s.jsx)(n.p,{children:"Cen\xe1rios de teste para APIs protegidas com escopos globais:"}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Escopos v\xe1lidos:"})," Teste com tokens que incluam os escopos de API necess\xe1rios (por exemplo, ",(0,s.jsx)(n.code,{children:"api:read"}),", ",(0,s.jsx)(n.code,{children:"api:write"}),")"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Escopos ausentes:"})," Espere ",(0,s.jsx)(n.strong,{children:"403 Proibido"})," quando o token n\xe3o tiver os escopos necess\xe1rios"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"P\xfablico errado:"})," Espere ",(0,s.jsx)(n.strong,{children:"403 Proibido"})," quando o p\xfablico n\xe3o corresponder ao recurso de API"]}),"\n"]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'# Token sem escopos necess\xe1rios - espera-se 403\ncurl -H "Authorization: Bearer token-without-required-scopes" \\\n  http://localhost:3000/api/protected\n'})})]}),(0,s.jsxs)(a.A,{value:"organization-permissions",label:"Permiss\xf5es de organiza\xe7\xe3o (n\xe3o-API)",children:[(0,s.jsx)(n.p,{children:"Cen\xe1rios de teste para controle de acesso espec\xedfico de organiza\xe7\xe3o:"}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Token de organiza\xe7\xe3o v\xe1lido:"})," Teste com tokens que incluam o contexto correto da organiza\xe7\xe3o (ID da organiza\xe7\xe3o e escopos)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Escopos ausentes:"})," Espere ",(0,s.jsx)(n.strong,{children:"403 Proibido"})," quando o usu\xe1rio n\xe3o tiver permiss\xf5es para a a\xe7\xe3o solicitada"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Organiza\xe7\xe3o errada:"})," Espere ",(0,s.jsx)(n.strong,{children:"403 Proibido"})," quando o p\xfablico n\xe3o corresponder ao contexto da organiza\xe7\xe3o (",(0,s.jsx)(n.code,{children:"urn:logto:organization:<organization_id>"}),")"]}),"\n"]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'# Token para organiza\xe7\xe3o errada - espera-se 403\ncurl -H "Authorization: Bearer token-for-different-organization" \\\n  http://localhost:3000/api/protected\n'})})]}),(0,s.jsxs)(a.A,{value:"organization-level-api-resources",label:"Recursos de API em n\xedvel de organiza\xe7\xe3o",children:[(0,s.jsx)(n.p,{children:"Cen\xe1rios de teste combinando valida\xe7\xe3o de recurso de API com contexto de organiza\xe7\xe3o:"}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Organiza\xe7\xe3o v\xe1lida + escopos de API:"})," Teste com tokens que tenham tanto o contexto da organiza\xe7\xe3o quanto os escopos de API necess\xe1rios"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Escopos de API ausentes:"})," Espere ",(0,s.jsx)(n.strong,{children:"403 Proibido"})," quando o token de organiza\xe7\xe3o n\xe3o tiver as permiss\xf5es de API necess\xe1rias"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Organiza\xe7\xe3o errada:"})," Espere ",(0,s.jsx)(n.strong,{children:"403 Proibido"})," ao acessar a API com token de outra organiza\xe7\xe3o"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"P\xfablico errado:"})," Espere ",(0,s.jsx)(n.strong,{children:"403 Proibido"})," quando o p\xfablico n\xe3o corresponder ao recurso de API em n\xedvel de organiza\xe7\xe3o"]}),"\n"]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'# Token de organiza\xe7\xe3o sem escopos de API - espera-se 403\ncurl -H "Authorization: Bearer organization-token-without-api-scopes" \\\n  http://localhost:3000/api/protected\n'})})]})]})]})}function c(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},22821:(e,n,o)=>{o.d(n,{Ay:()=>c,RM:()=>t});var s=o(25105),r=o(79621),a=o(38552),i=o(22002);const t=[{value:"O que verificar para cada modelo de permiss\xe3o",id:"what-to-check-for-each-permission-model",level:3}];function d(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h3:"h3",li:"li",p:"p",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:"Ap\xf3s extrair o token e buscar a configura\xe7\xe3o OIDC, valide o seguinte:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Assinatura:"})," O JWT deve ser v\xe1lido e assinado pelo Logto (via JWKS)."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Emissor (Issuer):"})," Deve corresponder ao emissor do seu tenant Logto."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"P\xfablico (Audience):"})," Deve corresponder ao indicador de recurso da API registrado no Logto, ou ao contexto da organiza\xe7\xe3o se aplic\xe1vel."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Expira\xe7\xe3o:"})," O token n\xe3o pode estar expirado."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Permiss\xf5es (escopos) (Permissions (scopes)):"})," O token deve incluir os escopos necess\xe1rios para sua API / a\xe7\xe3o. Os escopos s\xe3o strings separadas por espa\xe7o na reivindica\xe7\xe3o ",(0,s.jsx)(n.code,{children:"scope"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Contexto da organiza\xe7\xe3o:"})," Se estiver protegendo recursos de API em n\xedvel de organiza\xe7\xe3o, valide a reivindica\xe7\xe3o ",(0,s.jsx)(n.code,{children:"organization_id"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["Veja ",(0,s.jsx)(n.a,{href:"https://auth.wiki/jwt",children:"JSON Web Token"})," para saber mais sobre a estrutura e reivindica\xe7\xf5es do JWT."]}),"\n",(0,s.jsx)(n.h3,{id:"what-to-check-for-each-permission-model",children:"O que verificar para cada modelo de permiss\xe3o"}),"\n",(0,s.jsx)(n.p,{children:"As reivindica\xe7\xf5es e regras de valida\xe7\xe3o diferem conforme o modelo de permiss\xe3o:"}),"\n",(0,s.jsxs)(i.A,{groupId:"permission-models",children:[(0,s.jsx)(a.A,{value:"global-api-resources",label:"Recursos de API globais",children:(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsxs)(n.strong,{children:["Reivindica\xe7\xe3o de p\xfablico (",(0,s.jsx)(n.code,{children:"aud"}),"):"]})," Indicador de recurso de API"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsxs)(n.strong,{children:["Reivindica\xe7\xe3o de organiza\xe7\xe3o (",(0,s.jsx)(n.code,{children:"organization_id"}),"):"]})," ",(0,s.jsx)(n.em,{children:"N\xe3o presente"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsxs)(n.strong,{children:["Escopos (permiss\xf5es) a verificar (",(0,s.jsx)(n.code,{children:"scope"}),"):"]})," Permiss\xf5es do recurso de API"]}),"\n"]})}),(0,s.jsx)(a.A,{value:"organization-permissions",label:"Permiss\xf5es de organiza\xe7\xe3o (n\xe3o-API)",children:(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsxs)(n.strong,{children:["Reivindica\xe7\xe3o de p\xfablico (",(0,s.jsx)(n.code,{children:"aud"}),"):"]})," ",(0,s.jsx)(n.code,{children:"urn:logto:organization:<id>"})," (contexto da organiza\xe7\xe3o est\xe1 em ",(0,s.jsx)(n.code,{children:"aud"}),")"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsxs)(n.strong,{children:["Reivindica\xe7\xe3o de organiza\xe7\xe3o (",(0,s.jsx)(n.code,{children:"organization_id"}),"):"]})," ",(0,s.jsx)(n.em,{children:"N\xe3o presente"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsxs)(n.strong,{children:["Escopos (permiss\xf5es) a verificar (",(0,s.jsx)(n.code,{children:"scope"}),"):"]})," Permiss\xf5es da organiza\xe7\xe3o"]}),"\n"]})}),(0,s.jsx)(a.A,{value:"organization-level-api-resources",label:"Recursos de API em n\xedvel de organiza\xe7\xe3o",children:(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsxs)(n.strong,{children:["Reivindica\xe7\xe3o de p\xfablico (",(0,s.jsx)(n.code,{children:"aud"}),"):"]})," Indicador de recurso de API"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsxs)(n.strong,{children:["Reivindica\xe7\xe3o de organiza\xe7\xe3o (",(0,s.jsx)(n.code,{children:"organization_id"}),"):"]})," ID da organiza\xe7\xe3o (deve corresponder \xe0 requisi\xe7\xe3o)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsxs)(n.strong,{children:["Escopos (permiss\xf5es) a verificar (",(0,s.jsx)(n.code,{children:"scope"}),"):"]})," Permiss\xf5es do recurso de API"]}),"\n"]})})]}),"\n",(0,s.jsx)("small",{children:(0,s.jsxs)(n.p,{children:["Para permiss\xf5es de organiza\xe7\xe3o que n\xe3o s\xe3o de API, o contexto da organiza\xe7\xe3o \xe9 representado pela\nreivindica\xe7\xe3o ",(0,s.jsx)(n.code,{children:"aud"})," (por exemplo, ",(0,s.jsx)(n.code,{children:"urn:logto:organization:abc123"}),"). A reivindica\xe7\xe3o\n",(0,s.jsx)(n.code,{children:"organization_id"})," s\xf3 est\xe1 presente para tokens de recursos de API em n\xedvel de organiza\xe7\xe3o."]})}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsx)(n.p,{children:"Sempre valide tanto as permiss\xf5es (escopos) quanto o contexto (p\xfablico, organiza\xe7\xe3o) para APIs multi-tenant seguras."})})]})}function c(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},67837:(e,n,o)=>{o.d(n,{Ay:()=>g,RM:()=>p});var s=o(25105),r=o(79621),a=o(33435),i=o(38552),t=o(22002);function d(e){const n={code:"code",pre:"pre",...(0,r.R)(),...e.components};return(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ruby",metastring:'title="auth_helpers.rb"',children:"module GrapeAuthHelpers\n  include AuthHelpers\n\n  def authenticate_user!\n    begin\n      token = extract_bearer_token(request)\n      decoded_token = JwtValidator.validate_jwt(token)\n\n      # Armazene as informa\xe7\xf5es de autentica\xe7\xe3o para uso gen\xe9rico\n      @auth = JwtValidator.create_auth_info(decoded_token)\n\n    rescue AuthorizationError => e\n      error!({ error: e.message }, e.status)\n    rescue JWT::DecodeError, JWT::VerificationError, JWT::ExpiredSignature => e\n      error!({ error: 'Token inv\xe1lido' }, 401)\n    end\n  end\n\n  def auth\n    @auth\n  end\nend\n"})})}function c(e){const n={code:"code",pre:"pre",...(0,r.R)(),...e.components};return(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ruby",metastring:'title="app/controllers/concerns/jwt_authentication.rb"',children:"module JwtAuthentication\n  extend ActiveSupport::Concern\n  include AuthHelpers\n\n  included do\n    before_action :verify_access_token, only: [:protected_action] # Adicione a\xe7\xf5es espec\xedficas\n  end\n\n  private\n\n  def verify_access_token\n    begin\n      token = extract_bearer_token(request)\n      decoded_token = JwtValidator.validate_jwt(token)\n\n      # Armazene as informa\xe7\xf5es de autentica\xe7\xe3o para uso gen\xe9rico\n      @auth = JwtValidator.create_auth_info(decoded_token)\n\n    rescue AuthorizationError => e\n      render json: { error: e.message }, status: e.status\n    rescue JWT::DecodeError, JWT::VerificationError, JWT::ExpiredSignature => e\n      render json: { error: 'Token inv\xe1lido' }, status: 401\n    end\n  end\nend\n"})})}function l(e){const n={code:"code",pre:"pre",...(0,r.R)(),...e.components};return(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ruby",metastring:'title="auth_middleware.rb"',children:"class AuthMiddleware\n  include AuthHelpers\n\n  def initialize(app)\n    @app = app\n  end\n\n  def call(env)\n    request = Rack::Request.new(env)\n\n    # Proteger apenas rotas espec\xedficas\n    if request.path.start_with?('/api/protected')\n      begin\n        token = extract_bearer_token(request)\n        decoded_token = JwtValidator.validate_jwt(token)\n\n        # Armazenar informa\xe7\xf5es de autentica\xe7\xe3o no env para uso gen\xe9rico\n        env['auth'] = JwtValidator.create_auth_info(decoded_token)\n\n      rescue AuthorizationError => e\n        return [e.status, { 'Content-Type' => 'application/json' }, [{ error: e.message }.to_json]]\n      rescue JWT::DecodeError, JWT::VerificationError, JWT::ExpiredSignature => e\n        return [401, { 'Content-Type' => 'application/json' }, [{ error: 'Token inv\xe1lido' }.to_json]]\n      end\n    end\n\n    @app.call(env)\n  end\nend\n"})})}const u=Object.freeze({rails:(0,s.jsx)((function(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}),{}),sinatra:(0,s.jsx)((function(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}),{}),grape:(0,s.jsx)((function(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}),{})}),p=[];function h(e){const n={a:"a",code:"code",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.p,{children:["Usamos a gem ",(0,s.jsx)(n.a,{href:"https://github.com/jwt/ruby-jwt",children:"jwt"})," para validar JWTs. Adicione-a ao seu Gemfile:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ruby",metastring:'title="Gemfile"',children:"gem 'jwt'\n# net-http faz parte da biblioteca padr\xe3o do Ruby desde o Ruby 2.7, n\xe3o \xe9 necess\xe1rio adicionar explicitamente\n"})}),"\n",(0,s.jsx)(n.p,{children:"Depois, execute:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"bundle install\n"})}),"\n",(0,s.jsx)(n.p,{children:"Primeiro, adicione estas utilidades compartilhadas para lidar com JWKS e valida\xe7\xe3o de token:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ruby",metastring:'title="jwt_validator.rb"',children:"require 'jwt'\nrequire 'net/http'\nrequire 'json'\n\nclass JwtValidator\n  include AuthHelpers\n\n  def self.fetch_jwks\n    @jwks ||= begin\n      uri = URI(AuthConstants::JWKS_URI)\n      response = Net::HTTP.get_response(uri)\n      raise AuthorizationError.new('Falha ao buscar JWKS', 401) unless response.is_a?(Net::HTTPSuccess)\n\n      jwks_data = JSON.parse(response.body)\n      JWT::JWK::Set.new(jwks_data)\n    end\n  end\n\n  def self.validate_jwt(token)\n    jwks = fetch_jwks\n\n    # Deixe a biblioteca JWT lidar com a detec\xe7\xe3o do algoritmo a partir do JWKS\n    decoded_token = JWT.decode(token, nil, true, {\n      iss: AuthConstants::ISSUER,\n      verify_iss: true,\n      verify_aud: false, # Vamos verificar o p\xfablico manualmente com base no modelo de permiss\xe3o\n      jwks: jwks\n    })[0]\n\n    verify_payload(decoded_token)\n    decoded_token\n  end\n\n  def self.create_auth_info(payload)\n    scopes = payload['scope']&.split(' ') || []\n    audience = payload['aud'] || []\n\n    AuthInfo.new(\n      payload['sub'],\n      payload['client_id'],\n      payload['organization_id'],\n      scopes,\n      audience\n    )\n  end\n\n  def self.verify_payload(payload)\n    # Implemente sua l\xf3gica de verifica\xe7\xe3o aqui com base no modelo de permiss\xe3o\n    # Isso ser\xe1 mostrado na se\xe7\xe3o de modelos de permiss\xe3o abaixo\n  end\nend\n"})}),"\n",(0,s.jsx)(n.p,{children:"Depois, implemente o middleware para verificar o token de acesso:"}),"\n",e.framework?u[e.framework]:(0,s.jsx)(t.A,{groupId:"api-framework",children:Object.entries(u).map((([e,n])=>(0,s.jsx)(i.A,{value:e,label:(0,a.My)(e),children:n},e)))}),"\n",(0,s.jsxs)(n.p,{children:["De acordo com seu modelo de permiss\xe3o, implemente a l\xf3gica de verifica\xe7\xe3o apropriada em ",(0,s.jsx)(n.code,{children:"JwtValidator"}),":"]}),"\n",(0,s.jsxs)(t.A,{groupId:"permission-models",children:[(0,s.jsx)(i.A,{value:"global-api-resources",label:"Recursos globais de API",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ruby",metastring:'title="jwt_validator.rb"',children:"def self.verify_payload(payload)\n  # Verifique se a reivindica\xe7\xe3o de p\xfablico corresponde ao seu indicador de recurso de API\n  audiences = payload['aud'] || []\n  unless audiences.include?('https://your-api-resource-indicator')\n    raise AuthorizationError.new('P\xfablico inv\xe1lido')\n  end\n\n  # Verifique os escopos necess\xe1rios para recursos globais de API\n  required_scopes = ['api:read', 'api:write'] # Substitua pelos escopos necess\xe1rios no seu caso\n  token_scopes = payload['scope']&.split(' ') || []\n\n  unless required_scopes.all? { |scope| token_scopes.include?(scope) }\n    raise AuthorizationError.new('Escopo insuficiente')\n  end\nend\n"})})}),(0,s.jsx)(i.A,{value:"organization-permissions",label:"Permiss\xf5es de organiza\xe7\xe3o (n\xe3o-API)",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ruby",metastring:'title="jwt_validator.rb"',children:"def self.verify_payload(payload)\n  # Verifique se a reivindica\xe7\xe3o de p\xfablico corresponde ao formato da organiza\xe7\xe3o\n  audiences = payload['aud'] || []\n  has_org_audience = audiences.any? { |aud| aud.start_with?('urn:logto:organization:') }\n\n  unless has_org_audience\n    raise AuthorizationError.new('P\xfablico inv\xe1lido para permiss\xf5es de organiza\xe7\xe3o')\n  end\n\n  # Verifique se o ID da organiza\xe7\xe3o corresponde ao contexto (voc\xea pode precisar extrair isso do contexto da requisi\xe7\xe3o)\n  expected_org_id = 'your-organization-id' # Extraia do contexto da requisi\xe7\xe3o\n  expected_aud = \"urn:logto:organization:#{expected_org_id}\"\n  unless audiences.include?(expected_aud)\n    raise AuthorizationError.new('ID da organiza\xe7\xe3o n\xe3o corresponde')\n  end\n\n  # Verifique os escopos necess\xe1rios para a organiza\xe7\xe3o\n  required_scopes = ['invite:users', 'manage:settings'] # Substitua pelos escopos necess\xe1rios no seu caso\n  token_scopes = payload['scope']&.split(' ') || []\n\n  unless required_scopes.all? { |scope| token_scopes.include?(scope) }\n    raise AuthorizationError.new('Escopo de organiza\xe7\xe3o insuficiente')\n  end\nend\n"})})}),(0,s.jsx)(i.A,{value:"organization-level-api-resources",label:"Recursos de API no n\xedvel da organiza\xe7\xe3o",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ruby",metastring:'title="jwt_validator.rb"',children:"def self.verify_payload(payload)\n  # Verifique se a reivindica\xe7\xe3o de p\xfablico corresponde ao seu indicador de recurso de API\n  audiences = payload['aud'] || []\n  unless audiences.include?('https://your-api-resource-indicator')\n    raise AuthorizationError.new('P\xfablico inv\xe1lido para recursos de API no n\xedvel da organiza\xe7\xe3o')\n  end\n\n  # Verifique se o ID da organiza\xe7\xe3o corresponde ao contexto (voc\xea pode precisar extrair isso do contexto da requisi\xe7\xe3o)\n  expected_org_id = 'your-organization-id' # Extraia do contexto da requisi\xe7\xe3o\n  org_id = payload['organization_id']\n  unless expected_org_id == org_id\n    raise AuthorizationError.new('ID da organiza\xe7\xe3o n\xe3o corresponde')\n  end\n\n  # Verifique os escopos necess\xe1rios para recursos de API no n\xedvel da organiza\xe7\xe3o\n  required_scopes = ['api:read', 'api:write'] # Substitua pelos escopos necess\xe1rios no seu caso\n  token_scopes = payload['scope']&.split(' ') || []\n\n  unless required_scopes.all? { |scope| token_scopes.include?(scope) }\n    raise AuthorizationError.new('Escopos insuficientes para recursos de API no n\xedvel da organiza\xe7\xe3o')\n  end\nend\n"})})})]})]})}function g(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},74869:(e,n,o)=>{o.d(n,{Ay:()=>t,RM:()=>a});var s=o(25105),r=o(79621);const a=[];function i(e){const n={code:"code",pre:"pre",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ruby",metastring:'title="auth_constants.rb"',children:"module AuthConstants\n  JWKS_URI = 'https://your-tenant.logto.app/oidc/jwks'\n  ISSUER = 'https://your-tenant.logto.app/oidc'\nend\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ruby",metastring:'title="auth_info.rb"',children:"class AuthInfo\n  attr_accessor :sub, :client_id, :organization_id, :scopes, :audience\n\n  def initialize(sub, client_id = nil, organization_id = nil, scopes = [], audience = [])\n    @sub = sub\n    @client_id = client_id\n    @organization_id = organization_id\n    @scopes = scopes\n    @audience = audience\n  end\n\n  def to_h\n    {\n      sub: @sub,\n      client_id: @client_id,\n      organization_id: @organization_id,\n      scopes: @scopes,\n      audience: @audience\n    }\n  end\nend\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ruby",metastring:'title="authorization_error.rb"',children:"class AuthorizationError < StandardError\n  attr_reader :status\n\n  def initialize(message, status = 403)\n    super(message)\n    @status = status\n  end\nend\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ruby",metastring:'title="auth_helpers.rb"',children:"module AuthHelpers\n  def extract_bearer_token(request)\n    authorization = request.headers['Authorization']\n\n    raise AuthorizationError.new('O cabe\xe7alho Authorization est\xe1 ausente (Authorization header is missing)', 401) unless authorization\n    raise AuthorizationError.new('O cabe\xe7alho Authorization deve come\xe7ar com \"Bearer \" (Authorization header must start with \"Bearer \")', 401) unless authorization.start_with?('Bearer ')\n\n    authorization[7..-1] # Remove o prefixo 'Bearer '\n  end\nend\n"})})]})}function t(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(i,{...e})}):i(e)}},65280:(e,n,o)=>{o.d(n,{Ay:()=>t,RM:()=>a});var s=o(25105),r=o(79621);const a=[];function i(e){const n={code:"code",pre:"pre",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ruby",metastring:'title="api.rb"',children:"require 'grape'\nrequire_relative 'auth_helpers'\nrequire_relative 'auth_constants'\nrequire_relative 'auth_info'\nrequire_relative 'authorization_error'\nrequire_relative 'jwt_validator'\n\nclass API < Grape::API\n  format :json\n\n  helpers GrapeAuthHelpers\n\n  namespace :api do\n    namespace :protected do\n      before do\n        authenticate_user!\n      end\n\n      get do\n        # Acesse as informa\xe7\xf5es de autentica\xe7\xe3o a partir do helper de autentica\xe7\xe3o (Access auth information from auth helper)\n        { auth: auth.to_h }\n      end\n    end\n  end\n\n  # Endpoint p\xfablico (n\xe3o protegido) (Public endpoint (not protected))\n  get :public do\n    { message: \"Endpoint p\xfablico (Public endpoint)\" }\n  end\nend\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ruby",metastring:'title="config.ru"',children:"require_relative 'api'\n\nrun API\n"})})]})}function t(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(i,{...e})}):i(e)}},38552:(e,n,o)=>{o.d(n,{A:()=>i});o(58101);var s=o(13526);const r={tabItem:"tabItem_dgSZ"};var a=o(25105);function i(e){let{children:n,hidden:o,className:i}=e;return(0,a.jsx)("div",{role:"tabpanel",className:(0,s.A)(r.tabItem,i),hidden:o,children:n})}},22002:(e,n,o)=>{o.d(n,{A:()=>z});var s=o(58101),r=o(13526),a=o(60755),i=o(55234),t=o(6635),d=o(4100),c=o(35661),l=o(42752);function u(e){return s.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,s.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function p(e){const{values:n,children:o}=e;return(0,s.useMemo)((()=>{const e=n??function(e){return u(e).map((e=>{let{props:{value:n,label:o,attributes:s,default:r}}=e;return{value:n,label:o,attributes:s,default:r}}))}(o);return function(e){const n=(0,c.XI)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,o])}function h(e){let{value:n,tabValues:o}=e;return o.some((e=>e.value===n))}function g(e){let{queryString:n=!1,groupId:o}=e;const r=(0,i.W6)(),a=function(e){let{queryString:n=!1,groupId:o}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!o)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return o??null}({queryString:n,groupId:o});return[(0,d.aZ)(a),(0,s.useCallback)((e=>{if(!a)return;const n=new URLSearchParams(r.location.search);n.set(a,e),r.replace({...r.location,search:n.toString()})}),[a,r])]}function m(e){const{defaultValue:n,queryString:o=!1,groupId:r}=e,a=p(e),[i,d]=(0,s.useState)((()=>function(e){let{defaultValue:n,tabValues:o}=e;if(0===o.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!h({value:n,tabValues:o}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${o.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const s=o.find((e=>e.default))??o[0];if(!s)throw new Error("Unexpected error: 0 tabValues");return s.value}({defaultValue:n,tabValues:a}))),[c,u]=g({queryString:o,groupId:r}),[m,x]=function(e){let{groupId:n}=e;const o=function(e){return e?`docusaurus.tab.${e}`:null}(n),[r,a]=(0,l.Dv)(o);return[r,(0,s.useCallback)((e=>{o&&a.set(e)}),[o,a])]}({groupId:r}),j=(()=>{const e=c??m;return h({value:e,tabValues:a})?e:null})();(0,t.A)((()=>{j&&d(j)}),[j]);return{selectedValue:i,selectValue:(0,s.useCallback)((e=>{if(!h({value:e,tabValues:a}))throw new Error(`Can't select invalid tab value=${e}`);d(e),u(e),x(e)}),[u,x,a]),tabValues:a}}var x=o(21929);const j={tabList:"tabList_osvQ",tabItem:"tabItem_dc4O"};var f=o(25105);function b(e){let{className:n,block:o,selectedValue:s,selectValue:i,tabValues:t}=e;const d=[],{blockElementScrollPositionUntilNextRender:c}=(0,a.a_)(),l=e=>{const n=e.currentTarget,o=d.indexOf(n),r=t[o].value;r!==s&&(c(n),i(r))},u=e=>{let n=null;switch(e.key){case"Enter":l(e);break;case"ArrowRight":{const o=d.indexOf(e.currentTarget)+1;n=d[o]??d[0];break}case"ArrowLeft":{const o=d.indexOf(e.currentTarget)-1;n=d[o]??d[d.length-1];break}}n?.focus()};return(0,f.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.A)("tabs",{"tabs--block":o},n),children:t.map((e=>{let{value:n,label:o,attributes:a}=e;return(0,f.jsx)("li",{role:"tab",tabIndex:s===n?0:-1,"aria-selected":s===n,ref:e=>{d.push(e)},onKeyDown:u,onClick:l,...a,className:(0,r.A)("tabs__item",j.tabItem,a?.className,{"tabs__item--active":s===n}),children:o??n},n)}))})}function v(e){let{lazy:n,children:o,selectedValue:a}=e;const i=(Array.isArray(o)?o:[o]).filter(Boolean);if(n){const e=i.find((e=>e.props.value===a));return e?(0,s.cloneElement)(e,{className:(0,r.A)("margin-top--md",e.props.className)}):null}return(0,f.jsx)("div",{className:"margin-top--md",children:i.map(((e,n)=>(0,s.cloneElement)(e,{key:n,hidden:e.props.value!==a})))})}function A(e){const n=m(e);return(0,f.jsxs)("div",{className:(0,r.A)("tabs-container",j.tabList),children:[(0,f.jsx)(b,{...n,...e}),(0,f.jsx)(v,{...n,...e})]})}function z(e){const n=(0,x.A)();return(0,f.jsx)(A,{...e,children:u(e.children)},String(n))}},33435:(e,n,o)=>{o.d(n,{Id:()=>i,My:()=>a});const s=Object.freeze({dotnet:{name:".NET"},go:{name:"Go"},java:{name:"Java"},nodejs:{name:"Node.js"},php:{name:"PHP"},python:{name:"Python"},ruby:{name:"Ruby"},rust:{name:"Rust"}}),r=Object.freeze({express:{name:"Express.js",language:"nodejs"},koa:{name:"Koa.js",language:"nodejs"},fastify:{name:"Fastify",language:"nodejs"},hapi:{name:"Hapi.js",language:"nodejs"},nestjs:{name:"NestJS",language:"nodejs"},gin:{name:"Gin",language:"go"},fiber:{name:"Fiber",language:"go"},echo:{name:"Echo",language:"go"},chi:{name:"Chi",language:"go"},"spring-boot":{name:"Spring Boot",language:"java"},quarkus:{name:"Quarkus",language:"java"},micronaut:{name:"Micronaut",language:"java"},"vertx-web":{name:"Vert.x Web",language:"java"},laravel:{name:"Laravel",language:"php"},symfony:{name:"Symfony",language:"php"},slim:{name:"Slim",language:"php"},rails:{name:"Ruby on Rails",language:"ruby"},sinatra:{name:"Sinatra",language:"ruby"},grape:{name:"Grape",language:"ruby"},fastapi:{name:"FastAPI",language:"python"},flask:{name:"Flask",language:"python"},django:{name:"Django",language:"python"},"django-rest":{name:"Django REST Framework",language:"python"},axum:{name:"Axum",language:"rust"},"actix-web":{name:"Actix Web",language:"rust"},rocket:{name:"Rocket",language:"rust"},"aspnet-core":{name:"ASP.NET Core",language:"dotnet"}}),a=e=>r[e].name,i=e=>s[r[e].language].name},46643:(e,n,o)=>{o.d(n,{A:()=>s});const s=o.p+"assets/images/rbac-global-api-resources-33fafc263308d3f769c62cbcdb8d7829.png"},1242:(e,n,o)=>{o.d(n,{A:()=>s});const s=o.p+"assets/images/rbac-organization-level-api-resources-9533c281f3ee1cf52aefe821717e1fef.png"},93855:(e,n,o)=>{o.d(n,{A:()=>s});const s=o.p+"assets/images/rbac-organization-permissions-3302be06221b4399f73ddceac8ca17e3.png"},79621:(e,n,o)=>{o.d(n,{R:()=>i,x:()=>t});var s=o(58101);const r={},a=s.createContext(r);function i(e){const n=s.useContext(a);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),s.createElement(a.Provider,{value:n},e.children)}}}]);