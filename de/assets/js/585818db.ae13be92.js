"use strict";(self.webpackChunk_logto_docs=self.webpackChunk_logto_docs||[]).push([[2562],{67437:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>c,frontMatter:()=>a,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"end-user-flows/organization-experience/invite-organization-members","title":"Organisationsmitglieder einladen","description":"Als Multi-Organisations-Anwendung ist es eine h\xe4ufige Anforderung, Mitglieder zu deiner Organisation einzuladen. In dieser Anleitung f\xfchren wir dich durch die Schritte und technischen Details, um dieses Feature in deiner Anwendung zu implementieren.","source":"@site/i18n/de/docusaurus-plugin-content-docs/current/end-user-flows/organization-experience/invite-organization-members.mdx","sourceDirName":"end-user-flows/organization-experience","slug":"/end-user-flows/organization-experience/invite-organization-members","permalink":"/de/end-user-flows/organization-experience/invite-organization-members","draft":false,"unlisted":false,"editUrl":"https://github.com/logto-io/docs/tree/master/i18n/de/docusaurus-plugin-content-docs/current/end-user-flows/organization-experience/invite-organization-members.mdx","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"docsSidebar","previous":{"title":"Organisation erstellen","permalink":"/de/end-user-flows/organization-experience/create-organization"},"next":{"title":"Organisationsverwaltung","permalink":"/de/end-user-flows/organization-experience/organization-management"}}');var t=i(25105),s=i(79621);const a={sidebar_position:2},l="Organisationsmitglieder einladen",d={},o=[{value:"Ablauf\xfcbersicht",id:"flow-overview",level:2},{value:"Organisationsrollen erstellen",id:"create-organization-roles",level:2},{value:"E-Mail-Connector konfigurieren",id:"configure-your-email-connector",level:2},{value:"Einladungen mit Logto Management API verwalten",id:"handle-invitations-with-logto-management-api",level:2},{value:"F\xfcr Cloud- und OSS v1.27.0+ Nutzer",id:"for-cloud-and-oss-v1-27-0-users",level:3},{value:"F\xfcr OSS v1.26.0- Nutzer",id:"for-oss-v1-26-0--users",level:3},{value:"Organisation rollenbasierte Zugangskontrolle (RBAC) zur Verwaltung von Benutzerberechtigungen verwenden",id:"use-organization-role-based-access-control-rbac-to-manage-user-permissions",level:2},{value:"Scope-Updates in Organisationstokens verwalten",id:"handle-scope-updates-in-organization-tokens",level:2},{value:"Bestehende Berechtigungen entziehen",id:"revoking-existing-scopes",level:3},{value:"Neue Berechtigungen gew\xe4hren",id:"granting-new-scopes",level:3},{value:"Neue Berechtigungen gew\xe4hren, die bereits im Auth-System definiert sind",id:"grant-new-scopes-that-already-defined-in-your-auth-system",level:4},{value:"Neue Berechtigungen gew\xe4hren, die neu im Auth-System eingef\xfchrt wurden",id:"grant-new-scopes-that-are-newly-introduced-your-auth-system",level:4},{value:"Echtzeit-Berechtigungspr\xfcfung implementieren und Organisationstoken aktualisieren",id:"implement-real-time-permission-check-and-update-organization-token",level:3},{value:"Verwandte Ressourcen",id:"related-resources",level:2}];function u(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",mermaid:"mermaid",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components},{Url:i}=n;return i||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Url",!0),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"organisationsmitglieder-einladen",children:"Organisationsmitglieder einladen"})}),"\n",(0,t.jsx)(n.p,{children:"Als Multi-Organisations-Anwendung ist es eine h\xe4ufige Anforderung, Mitglieder zu deiner Organisation einzuladen. In dieser Anleitung f\xfchren wir dich durch die Schritte und technischen Details, um dieses Feature in deiner Anwendung zu implementieren."}),"\n",(0,t.jsx)(n.h2,{id:"flow-overview",children:"Ablauf\xfcbersicht"}),"\n",(0,t.jsx)(n.p,{children:"Der gesamte Prozess wird im folgenden Diagramm dargestellt:"}),"\n",(0,t.jsx)(n.mermaid,{value:"sequenceDiagram\n\tParticipant U as Endbenutzer\n  Participant A as Organisationsadministrator\n  Participant C as Deine Multi-Organisations-App\n\tParticipant L as Logto\n\n  A ->> C: E-Mail und Rolle des Eingeladenen eingeben\n  C ->> L: Organisationseinladung mit Management API erstellen\n  L --\x3e> C: Einladung-ID zur\xfcckgeben\n  C ->> C: Einladungslink mit Einladung-ID erstellen\n  C ->> L: Versand der Einladungsemail mit Einladungslink anfordern\n  L --\x3e> U: Einladungsemail mit Einladungslink senden\n  U ->> C: Klick auf Einladungslink und Navigation zu deiner Landingpage,<br /> Einladung annehmen oder ablehnen\n  C ->> L: Einladungsstatus mit Management API aktualisieren"}),"\n",(0,t.jsx)(n.h2,{id:"create-organization-roles",children:"Organisationsrollen erstellen"}),"\n",(0,t.jsxs)(n.p,{children:["Bevor du Mitglieder zu deiner Organisation einl\xe4dst, musst du Organisationsrollen erstellen. Sieh dir die ",(0,t.jsx)(n.a,{href:"/authorization/organization-template",children:"Organisationstemplate"})," an, um mehr \xfcber Organisationsrollen und Berechtigungen zu erfahren."]}),"\n",(0,t.jsxs)(n.p,{children:["In dieser Anleitung erstellen wir zwei typische Organisationsrollen: ",(0,t.jsx)(n.code,{children:"admin"})," und ",(0,t.jsx)(n.code,{children:"member"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["Die ",(0,t.jsx)(n.code,{children:"admin"}),"-Rolle hat vollen Zugriff auf alle Ressourcen der Organisation, w\xe4hrend die ",(0,t.jsx)(n.code,{children:"member"}),"-Rolle eingeschr\xe4nkten Zugriff hat. Zum Beispiel kann jede Rolle einen Satz von Berechtigungen wie folgt haben:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"admin"}),"-Rolle:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"read:data"})," \u2013 Lesezugriff auf alle Organisationsdatenressourcen."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"write:data"})," \u2013 Schreibzugriff auf alle Organisationsdatenressourcen."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"delete:data"})," \u2013 L\xf6schzugriff auf alle Organisationsdatenressourcen."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"invite:member"})," \u2013 Mitglieder zur Organisation einladen."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"manage:member"})," \u2013 Mitglieder in der Organisation verwalten."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"delete:member"})," \u2013 Mitglieder aus der Organisation entfernen."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"member"}),"-Rolle:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"read:data"})," \u2013 Lesezugriff auf alle Organisationsdatenressourcen."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"write:data"})," \u2013 Schreibzugriff auf alle Organisationsdatenressourcen."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"invite:member"})," \u2013 Mitglieder zur Organisation einladen."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["Dies kann einfach in der ",(0,t.jsx)(n.a,{href:"https://cloud.logto.io/",children:"Logto Console"})," erledigt werden. Du kannst auch die ",(0,t.jsx)(n.a,{href:"https://openapi.logto.io/operation/operation-createorganizationrole",children:"Logto Management API"})," verwenden, um Organisationsrollen programmatisch zu erstellen."]}),"\n",(0,t.jsx)(n.h2,{id:"configure-your-email-connector",children:"E-Mail-Connector konfigurieren"}),"\n",(0,t.jsxs)(n.p,{children:["Da Einladungen per E-Mail versendet werden, stelle sicher, dass dein ",(0,t.jsx)(n.a,{href:"/connectors/email-connectors",children:"E-Mail-Connector"})," korrekt konfiguriert ist. Um Einladungen zu versenden, musst du einen ",(0,t.jsx)(n.a,{href:"/connectors/email-connectors/email-templates#email-template-types",children:"E-Mail-Template"})," Nutzungstyp \u2013 ",(0,t.jsx)(n.code,{children:"OrganizationInvitation"})," \u2013 konfigurieren. Du kannst auch Organisations- (z. B. Organisationsname, Logo) und Einladenden- (z. B. E-Mail, Name des Einladenden) ",(0,t.jsx)(n.a,{href:"/connectors/email-connectors/email-templates#email-template-variables",children:"Variablen"})," im Inhalt verwenden oder ",(0,t.jsx)(n.a,{href:"/connectors/email-connectors/email-templates#email-template-localization",children:"mehrsprachige Templates"})," nach Bedarf anpassen."]}),"\n",(0,t.jsxs)(n.p,{children:["Ein Beispiel f\xfcr ein E-Mail-Template f\xfcr den Nutzungstyp ",(0,t.jsx)(n.code,{children:"OrganizationInvitation"})," ist unten dargestellt:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "subject": "Willkommen in meiner Organisation",\n  "content": "<p>Tritt {{organization.name}} \xfcber diesen <a href=\\"{{link}}\\" target=\\"_blank\\">Link</a> bei.</p>",\n  "usageType": "OrganizationInvitation",\n  "type": "text/html"\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:["Der Platzhalter ",(0,t.jsx)(n.code,{children:"{{link}}"})," im E-Mail-Inhalt wird beim Versand der E-Mail durch den tats\xe4chlichen Einladungslink ersetzt. In dieser Anleitung nehmen wir an, dass dies ",(0,t.jsx)(n.code,{children:"https://your-app.com/invitation/accept/{your-invitation-id}"})," w\xe4re."]}),"\n",(0,t.jsx)(n.admonition,{type:"note",children:(0,t.jsxs)(n.p,{children:["Der integrierte \u201eLogto E-Mail-Service\u201c von Logto Cloud unterst\xfctzt derzeit nicht den Nutzungstyp ",(0,t.jsx)(n.code,{children:"OrganizationInvitation"}),". Stattdessen musst du deinen eigenen E-Mail-Connector (z. B. Sendgrid) konfigurieren und das ",(0,t.jsx)(n.code,{children:"OrganizationInvitation"}),"-Template einrichten."]})}),"\n",(0,t.jsx)(n.h2,{id:"handle-invitations-with-logto-management-api",children:"Einladungen mit Logto Management API verwalten"}),"\n",(0,t.jsx)(n.admonition,{type:"note",children:(0,t.jsxs)(n.p,{children:["Falls du die Logto Management API noch nicht eingerichtet hast, sieh dir ",(0,t.jsx)(n.a,{href:"/integrate-logto/interact-with-management-api",children:"Mit Management API interagieren"})," f\xfcr Details an."]})}),"\n",(0,t.jsx)(n.h3,{id:"for-cloud-and-oss-v1-27-0-users",children:"F\xfcr Cloud- und OSS v1.27.0+ Nutzer"}),"\n",(0,t.jsxs)(n.p,{children:["Wir k\xf6nnen jetzt das ",(0,t.jsx)(n.a,{href:"/end-user-flows/one-time-token",children:"Magic Link (Einmal-Token)"})," Feature verwenden, um den Einladungsablauf zu handhaben."]}),"\n",(0,t.jsxs)(n.p,{children:["Rufe einfach die Management API auf, um ein Einmal-Token zu erstellen, und erstelle einen Einladungs-Magic-Link mit dem Token und der E-Mail des Eingeladenen.\nF\xfcge den Link in den ",(0,t.jsx)(n.code,{children:"{{link}}"}),"-Platzhalter im obigen E-Mail-Template ein und sende die E-Mail an den Eingeladenen.\nDu kannst einen Link wie ",(0,t.jsx)(n.code,{children:"https://your-app.com/landing-page?token={your-one-time-token}&email={invitee-email}"})," anstelle eines Links mit der Einladung-ID erstellen."]}),"\n",(0,t.jsx)(n.p,{children:"Dies ist der empfohlene Ansatz, da der Eingeladene mit dem Magic Link automatisch registriert wird, falls er noch kein Konto hat."}),"\n",(0,t.jsxs)(n.p,{children:["Sieh dir die Seite ",(0,t.jsx)(n.a,{href:"/end-user-flows/one-time-token",children:"Magic Link (Einmal-Token)"})," f\xfcr weitere Details an."]}),"\n",(0,t.jsx)(n.h3,{id:"for-oss-v1-26-0--users",children:"F\xfcr OSS v1.26.0- Nutzer"}),"\n",(0,t.jsx)(n.p,{children:"Wir haben eine Reihe von einladungsbezogenen Management APIs im Organisations-Feature bereitgestellt. Mit diesen APIs kannst du:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"POST /api/organization-invitations"})," eine Organisationseinladung mit zugewiesener Organisationsrolle erstellen."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"POST /api/organization-invitations/{id}/message"})," die Organisationseinladung per E-Mail an den Eingeladenen senden.\nHinweis: Diese API-Payload unterst\xfctzt eine ",(0,t.jsx)(n.code,{children:"link"}),"-Eigenschaft, du kannst deinen Einladungslink basierend auf der Einladung-ID erstellen. Zum Beispiel:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "link": "https://your-app.com/invitation/accept/{your-invitation-id}"\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:"Dementsprechend musst du eine Landingpage implementieren, wenn dein Eingeladener \xfcber den Einladungslink zu deiner Anwendung navigiert."}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"GET /api/organization-invitations"})," & ",(0,t.jsx)(n.code,{children:"GET /api/organization-invitations/{id}"})," alle deine Einladungen oder eine bestimmte Einladung per ID abrufen.\nAuf deiner Landingpage kannst du diese APIs verwenden, um alle Einladungen oder Details einer Einladung anzuzeigen, die ein Benutzer erhalten hat."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"PUT /api/organization-invitations/{id}/status"})," die Einladung annehmen oder ablehnen, indem du den Einladungsstatus aktualisierst.\nVerwende diese API, um auf die Antwort des Benutzers auf die Einladung zu reagieren."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"use-organization-role-based-access-control-rbac-to-manage-user-permissions",children:"Organisation rollenbasierte Zugangskontrolle (RBAC) zur Verwaltung von Benutzerberechtigungen verwenden"}),"\n",(0,t.jsx)(n.p,{children:"Mit den obigen Einstellungen kannst du nun Einladungen per E-Mail versenden, und Eingeladene k\xf6nnen der Organisation mit der zugewiesenen Rolle beitreten."}),"\n",(0,t.jsx)(n.p,{children:"Benutzer mit unterschiedlichen Organisationsrollen haben unterschiedliche Berechtigungen (Scopes) in ihren Organisationstokens. Daher sollten sowohl deine Client-App als auch Backend-Services diese Berechtigungen pr\xfcfen, um sichtbare Funktionen und erlaubte Aktionen zu bestimmen."}),"\n",(0,t.jsx)(n.h2,{id:"handle-scope-updates-in-organization-tokens",children:"Scope-Updates in Organisationstokens verwalten"}),"\n",(0,t.jsx)(n.admonition,{type:"note",children:(0,t.jsxs)(n.p,{children:["Dieser Abschnitt behandelt fortgeschrittene Themen zur Verwaltung von Organisationstemplates und Autorisierungsszenarien. Wenn du mit diesen Konzepten nicht vertraut bist, lies bitte zuerst ",(0,t.jsx)(n.a,{href:"/authorization",children:"Autorisierung"})," und ",(0,t.jsx)(n.a,{href:"/authorization/organization-template",children:"Organisationstemplate"}),"."]})}),"\n",(0,t.jsx)(n.p,{children:"Die Verwaltung von Scope-Updates in Organisationstokens umfasst:"}),"\n",(0,t.jsx)(n.h3,{id:"revoking-existing-scopes",children:"Bestehende Berechtigungen entziehen"}),"\n",(0,t.jsx)(n.p,{children:"Wenn z. B. ein Admin zu einem Nicht-Admin-Mitglied herabgestuft wird, sollten Berechtigungen vom Benutzer entfernt werden. In diesem Fall kannst du einfach das zwischengespeicherte Organisationstoken l\xf6schen und mit dem Auffrischungstoken ein neues abrufen. Die reduzierten Berechtigungen werden sofort im neu ausgestellten Organisationstoken reflektiert."}),"\n",(0,t.jsx)(n.h3,{id:"granting-new-scopes",children:"Neue Berechtigungen gew\xe4hren"}),"\n",(0,t.jsx)(n.p,{children:"Dies kann weiter in zwei Szenarien unterteilt werden:"}),"\n",(0,t.jsx)(n.h4,{id:"grant-new-scopes-that-already-defined-in-your-auth-system",children:"Neue Berechtigungen gew\xe4hren, die bereits im Auth-System definiert sind"}),"\n",(0,t.jsx)(n.p,{children:"\xc4hnlich wie beim Entziehen von Berechtigungen kannst du, wenn die neu gew\xe4hrte Berechtigung bereits beim Auth-Server registriert ist, einfach ein neues Organisationstoken ausstellen, und die neuen Berechtigungen werden sofort reflektiert."}),"\n",(0,t.jsx)(n.h4,{id:"grant-new-scopes-that-are-newly-introduced-your-auth-system",children:"Neue Berechtigungen gew\xe4hren, die neu im Auth-System eingef\xfchrt wurden"}),"\n",(0,t.jsxs)(n.p,{children:["In diesem Fall musst du einen erneuten Login- oder Zustimmungsprozess ausl\xf6sen, um das Organisationstoken des Benutzers zu aktualisieren. Zum Beispiel durch Aufruf der ",(0,t.jsx)(n.code,{children:"signIn"}),"-Methode im Logto SDK."]}),"\n",(0,t.jsx)(n.h3,{id:"implement-real-time-permission-check-and-update-organization-token",children:"Echtzeit-Berechtigungspr\xfcfung implementieren und Organisationstoken aktualisieren"}),"\n",(0,t.jsx)(n.p,{children:"Logto stellt eine Management API bereit, um die Echtzeit-Benutzerberechtigungen in der Organisation abzurufen."}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"GET /api/organizations/{id}/users/{userId}/scopes"})," (",(0,t.jsx)(n.a,{href:"https://openapi.logto.io/operation/operation-listorganizationuserscopes",children:"API-Referenzen"}),")"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Du kannst dann die Berechtigungen im Organisationstoken des Benutzers mit den Echtzeit-Berechtigungen vergleichen, um festzustellen, ob der Benutzer bef\xf6rdert oder herabgestuft wurde."}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Wenn herabgestuft, kannst du einfach das zwischengespeicherte Organisationstoken l\xf6schen und das SDK stellt automatisch ein neues mit den aktualisierten Berechtigungen aus."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"const { clearAccessToken } = useLogto();\n\n...\n// Wenn die abgerufenen Echtzeit-Berechtigungen weniger Berechtigungen als das Organisationstoken haben\nawait clearAccessToken();\n"})}),"\n",(0,t.jsx)(n.p,{children:"Dies erfordert keinen erneuten Login- oder Zustimmungsprozess. Neue Organisationstokens werden automatisch vom Logto SDK ausgestellt."}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Wenn eine neue Berechtigung in dein Auth-System eingef\xfchrt wird, l\xf6se einen erneuten Login- oder Zustimmungsprozess aus, um das Organisationstoken des Benutzers zu aktualisieren. Zum Beispiel mit dem React SDK:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"const { clearAllTokens, signIn } = useLogto();\n\n...\n// Wenn die abgerufenen Echtzeit-Berechtigungen neu zugewiesene Berechtigungen enthalten, die das Organisationstoken nicht hat\nawait clearAllTokens();\nsignIn({\n  redirectUri: '<your-sign-in-redirect-uri>',\n  prompt: 'consent',\n});\n"})}),"\n",(0,t.jsx)(n.p,{children:"Der obige Code l\xf6st eine Seitennavigation zum Zustimmungsbildschirm aus und leitet automatisch zur\xfcck zu deiner App, mit aktualisierten Berechtigungen im Organisationstoken des Benutzers."}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"related-resources",children:"Verwandte Ressourcen"}),"\n",(0,t.jsx)(i,{href:"https://blog.logto.io/implement-user-collaboration-in-your-app",children:(0,t.jsx)(n.p,{children:"Wie wir Benutzerzusammenarbeit in einer Multi-Tenant-App implementieren"})})]})}function c(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(u,{...e})}):u(e)}},79621:(e,n,i)=>{i.d(n,{R:()=>a,x:()=>l});var r=i(58101);const t={},s=r.createContext(t);function a(e){const n=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);