"use strict";(self.webpackChunk_logto_docs=self.webpackChunk_logto_docs||[]).push([[5796],{14076:(e,n,i)=>{i.d(n,{Ay:()=>o,RM:()=>s});var r=i(25105),t=i(79621);const s=[];function d(e){const n={p:"p",...(0,t.R)(),...e.components};return(0,r.jsxs)(n.p,{children:["M\xf6glicherweise fehlen einige Benutzerinformationen im zur\xfcckgegebenen Objekt von ",(0,r.jsx)("code",{children:e.method}),". Dies liegt daran, dass OAuth 2.0 und OpenID Connect (OIDC) so konzipiert sind, dass sie dem Prinzip der minimalen Rechte (PoLP) folgen, und Logto auf diesen Standards basiert."]})}function o(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},99409:(e,n,i)=>{i.d(n,{Ay:()=>o,RM:()=>s});var r=i(25105),t=i(79621);const s=[];function d(e){const{Url:n}={...(0,t.R)(),...e.components};return n||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Url",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n,{href:"/end-user-flows",children:" Endbenutzerfl\xfcsse: Authentifizierungsfl\xfcsse, Kontofl\xfcsse und Organisationsfl\xfcsse "}),"\n",(0,r.jsx)(n,{href:"/connectors",children:" Connectors konfigurieren "}),"\n",(0,r.jsx)(n,{href:"/authorization",children:" Autorisierung (Authorization) "})]})}function o(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},88423:(e,n,i)=>{i.d(n,{Ay:()=>o,RM:()=>s});var r=i(25105),t=i(79621);const s=[{value:"Bez\xfcglich der umleitungsbasierten Anmeldung",id:"regarding-redirect-based-sign-in",level:3}];function d(e){const n={a:"a",h3:"h3",li:"li",ol:"ol",p:"p",...(0,t.R)(),...e.components},{Details:i,MainSiteUrl:s}=n;return i||c("Details",!0),s||c("MainSiteUrl",!0),(0,r.jsxs)(i,{children:[(0,r.jsx)("summary",{children:(0,r.jsx)(n.h3,{id:"regarding-redirect-based-sign-in",children:"Bez\xfcglich der umleitungsbasierten Anmeldung"})}),(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Dieser Authentifizierungsprozess folgt dem ",(0,r.jsx)(n.a,{href:"https://openid.net/specs/openid-connect-core-1_0.html",children:"OpenID Connect (OIDC)"})," Protokoll, und Logto erzwingt strenge Sicherheitsma\xdfnahmen, um die Benutzeranmeldung zu sch\xfctzen."]}),"\n",(0,r.jsx)(n.li,{children:"Wenn du mehrere Apps hast, kannst du denselben Identit\xe4tsanbieter (Logto) verwenden. Sobald sich der Benutzer bei einer App anmeldet, wird Logto den Anmeldeprozess automatisch abschlie\xdfen, wenn der Benutzer auf eine andere App zugreift."}),"\n"]}),(0,r.jsxs)(n.p,{children:["Um mehr \xfcber die Gr\xfcnde und Vorteile der umleitungsbasierten Anmeldung zu erfahren, siehe ",(0,r.jsx)(s,{href:"/concepts/sign-in-experience",children:"Logto-Anmeldeerfahrung erkl\xe4rt"}),"."]})]})}function o(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}function c(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},49993:(e,n,i)=>{i.d(n,{Ay:()=>o,RM:()=>s});var r=i(25105),t=i(79621);const s=[];function d(e){const n={a:"a",admonition:"admonition",code:"code",hr:"hr",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"Hier ist die Liste der unterst\xfctzten Berechtigungen (Scopes) und der entsprechenden Anspr\xfcche (Claims):"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"openid"})})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Anspruchsname"}),(0,r.jsx)(n.th,{children:"Typ"}),(0,r.jsx)(n.th,{children:"Beschreibung"}),(0,r.jsx)(n.th,{children:"Ben\xf6tigt userinfo?"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"sub"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"string"})}),(0,r.jsx)(n.td,{children:"Der eindeutige Identifikator des Benutzers"}),(0,r.jsx)(n.td,{children:"Nein"})]})})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"profile"})})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Anspruchsname"}),(0,r.jsx)(n.th,{children:"Typ"}),(0,r.jsx)(n.th,{children:"Beschreibung"}),(0,r.jsx)(n.th,{children:"Ben\xf6tigt userinfo?"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"name"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"string"})}),(0,r.jsx)(n.td,{children:"Der vollst\xe4ndige Name des Benutzers"}),(0,r.jsx)(n.td,{children:"Nein"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"username"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"string"})}),(0,r.jsx)(n.td,{children:"Der Benutzername des Benutzers"}),(0,r.jsx)(n.td,{children:"Nein"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"picture"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"string"})}),(0,r.jsx)(n.td,{children:"URL des Profilbildes des Endbenutzers. Diese URL MUSS auf eine Bilddatei (zum Beispiel eine PNG-, JPEG- oder GIF-Bilddatei) verweisen, anstatt auf eine Webseite, die ein Bild enth\xe4lt. Beachte, dass diese URL speziell auf ein Profilfoto des Endbenutzers verweisen SOLLTE, das geeignet ist, den Endbenutzer zu beschreiben, anstatt auf ein beliebiges vom Endbenutzer aufgenommenes Foto."}),(0,r.jsx)(n.td,{children:"Nein"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"created_at"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"number"})}),(0,r.jsx)(n.td,{children:"Zeitpunkt, zu dem der Endbenutzer erstellt wurde. Die Zeit wird als Anzahl der Millisekunden seit dem Unix-Epoch (1970-01-01T00:00:00Z) dargestellt."}),(0,r.jsx)(n.td,{children:"Nein"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"updated_at"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"number"})}),(0,r.jsx)(n.td,{children:"Zeitpunkt, zu dem die Informationen des Endbenutzers zuletzt aktualisiert wurden. Die Zeit wird als Anzahl der Millisekunden seit dem Unix-Epoch (1970-01-01T00:00:00Z) dargestellt."}),(0,r.jsx)(n.td,{children:"Nein"})]})]})]}),"\n",(0,r.jsxs)(n.p,{children:["Andere ",(0,r.jsx)(n.a,{href:"https://openid.net/specs/openid-connect-core-1_0.html#StandardClaims",children:"Standardanspr\xfcche"})," wie ",(0,r.jsx)(n.code,{children:"family_name"}),", ",(0,r.jsx)(n.code,{children:"given_name"}),", ",(0,r.jsx)(n.code,{children:"middle_name"}),", ",(0,r.jsx)(n.code,{children:"nickname"}),", ",(0,r.jsx)(n.code,{children:"preferred_username"}),", ",(0,r.jsx)(n.code,{children:"profile"}),", ",(0,r.jsx)(n.code,{children:"website"}),", ",(0,r.jsx)(n.code,{children:"gender"}),", ",(0,r.jsx)(n.code,{children:"birthdate"}),", ",(0,r.jsx)(n.code,{children:"zoneinfo"})," und ",(0,r.jsx)(n.code,{children:"locale"})," werden ebenfalls im ",(0,r.jsx)(n.code,{children:"profile"}),"-Scope enthalten sein, ohne dass der userinfo-Endpunkt angefordert werden muss. Ein Unterschied im Vergleich zu den obigen Anspr\xfcchen besteht darin, dass diese Anspr\xfcche nur zur\xfcckgegeben werden, wenn ihre Werte nicht leer sind, w\xe4hrend die obigen Anspr\xfcche ",(0,r.jsx)(n.code,{children:"null"})," zur\xfcckgeben, wenn die Werte leer sind."]}),"\n",(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsxs)(n.p,{children:["Im Gegensatz zu den Standardanspr\xfcchen verwenden die Anspr\xfcche ",(0,r.jsx)(n.code,{children:"created_at"})," und ",(0,r.jsx)(n.code,{children:"updated_at"})," Millisekunden anstelle von Sekunden."]})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"email"})})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Anspruchsname"}),(0,r.jsx)(n.th,{children:"Typ"}),(0,r.jsx)(n.th,{children:"Beschreibung"}),(0,r.jsx)(n.th,{children:"Ben\xf6tigt userinfo?"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"email"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"string"})}),(0,r.jsx)(n.td,{children:"Die E-Mail-Adresse des Benutzers"}),(0,r.jsx)(n.td,{children:"Nein"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"email_verified"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"boolean"})}),(0,r.jsx)(n.td,{children:"Ob die E-Mail-Adresse verifiziert wurde"}),(0,r.jsx)(n.td,{children:"Nein"})]})]})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"phone"})})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Anspruchsname"}),(0,r.jsx)(n.th,{children:"Typ"}),(0,r.jsx)(n.th,{children:"Beschreibung"}),(0,r.jsx)(n.th,{children:"Ben\xf6tigt userinfo?"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"phone_number"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"string"})}),(0,r.jsx)(n.td,{children:"Die Telefonnummer des Benutzers"}),(0,r.jsx)(n.td,{children:"Nein"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"phone_number_verified"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"boolean"})}),(0,r.jsx)(n.td,{children:"Ob die Telefonnummer verifiziert wurde"}),(0,r.jsx)(n.td,{children:"Nein"})]})]})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"address"})})}),"\n",(0,r.jsxs)(n.p,{children:["Bitte siehe ",(0,r.jsx)(n.a,{href:"https://openid.net/specs/openid-connect-core-1_0.html#AddressClaim",children:"OpenID Connect Core 1.0"})," f\xfcr die Details des Adressanspruchs."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"custom_data"})})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Anspruchsname"}),(0,r.jsx)(n.th,{children:"Typ"}),(0,r.jsx)(n.th,{children:"Beschreibung"}),(0,r.jsx)(n.th,{children:"Ben\xf6tigt userinfo?"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"custom_data"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"object"})}),(0,r.jsx)(n.td,{children:"Die benutzerdefinierten Daten des Benutzers"}),(0,r.jsx)(n.td,{children:"Ja"})]})})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"identities"})})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Anspruchsname"}),(0,r.jsx)(n.th,{children:"Typ"}),(0,r.jsx)(n.th,{children:"Beschreibung"}),(0,r.jsx)(n.th,{children:"Ben\xf6tigt userinfo?"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"identities"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"object"})}),(0,r.jsx)(n.td,{children:"Die verkn\xfcpften Identit\xe4ten des Benutzers"}),(0,r.jsx)(n.td,{children:"Ja"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"sso_identities"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"array"})}),(0,r.jsx)(n.td,{children:"Die verkn\xfcpften SSO-Identit\xe4ten des Benutzers"}),(0,r.jsx)(n.td,{children:"Ja"})]})]})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"roles"})})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Anspruchsname"}),(0,r.jsx)(n.th,{children:"Typ"}),(0,r.jsx)(n.th,{children:"Beschreibung"}),(0,r.jsx)(n.th,{children:"Ben\xf6tigt userinfo?"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"roles"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"string[]"})}),(0,r.jsx)(n.td,{children:"Die Rollen des Benutzers"}),(0,r.jsx)(n.td,{children:"Nein"})]})})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"urn:logto:scope:organizations"})})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Anspruchsname"}),(0,r.jsx)(n.th,{children:"Typ"}),(0,r.jsx)(n.th,{children:"Beschreibung"}),(0,r.jsx)(n.th,{children:"Ben\xf6tigt userinfo?"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"organizations"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"string[]"})}),(0,r.jsx)(n.td,{children:"Die Organisations-IDs, denen der Benutzer angeh\xf6rt"}),(0,r.jsx)(n.td,{children:"Nein"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"organization_data"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"object[]"})}),(0,r.jsx)(n.td,{children:"Die Organisationsdaten, denen der Benutzer angeh\xf6rt"}),(0,r.jsx)(n.td,{children:"Ja"})]})]})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"urn:logto:scope:organization_roles"})})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Anspruchsname"}),(0,r.jsx)(n.th,{children:"Typ"}),(0,r.jsx)(n.th,{children:"Beschreibung"}),(0,r.jsx)(n.th,{children:"Ben\xf6tigt userinfo?"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"organization_roles"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"string[]"})}),(0,r.jsxs)(n.td,{children:["Die Organisationsrollen, denen der Benutzer angeh\xf6rt, im Format ",(0,r.jsx)(n.code,{children:"<organization_id>:<role_name>"})]}),(0,r.jsx)(n.td,{children:"Nein"})]})})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsxs)(n.p,{children:['In Anbetracht der Leistung und der Datengr\xf6\xdfe bedeutet "Ben\xf6tigt userinfo?" "Ja", dass der Anspruch nicht im ID-Token angezeigt wird, sondern in der Antwort des ',(0,r.jsx)(n.a,{href:"https://openid.net/specs/openid-connect-core-1_0.html#UserInfo",children:"userinfo-Endpunkts"})," zur\xfcckgegeben wird."]})]})}function o(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},59141:(e,n,i)=>{i.d(n,{Ay:()=>o,RM:()=>s});var r=i(25105),t=i(79621);const s=[];function d(e){const n={admonition:"admonition",code:"code",mermaid:"mermaid",p:"p",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"Standardm\xe4\xdfig werden begrenzte Anspr\xfcche zur\xfcckgegeben. Wenn du mehr Informationen ben\xf6tigst, kannst du zus\xe4tzliche Berechtigungen anfordern, um auf mehr Anspr\xfcche zuzugreifen."}),"\n",(0,r.jsx)(n.admonition,{type:"info",children:(0,r.jsx)(n.p,{children:'Ein "Anspruch (Claim)" ist eine Behauptung \xfcber ein Subjekt; eine "Berechtigung (Scope)" ist eine Gruppe von Anspr\xfcchen. Im aktuellen Fall ist ein Anspruch ein Informationsst\xfcck \xfcber den Benutzer.'})}),"\n",(0,r.jsx)(n.p,{children:"Hier ist ein nicht-normatives Beispiel f\xfcr die Beziehung zwischen Berechtigung und Anspruch:"}),"\n",(0,r.jsx)(n.mermaid,{value:"classDiagram\n  class openid {\n    +sub\n  }\n\n  class profile {\n    +name\n    +username\n    +picture\n    +...\n  }\n\n  class email {\n    +email\n    +email_verified\n  }\n\n  class phone {\n    +phone_number\n    +phone_number_verified\n  }"}),"\n",(0,r.jsx)(n.admonition,{type:"tip",children:(0,r.jsx)(n.p,{children:'Der "sub"-Anspruch bedeutet "Subjekt", was der eindeutige Identifikator des Benutzers ist (d. h. Benutzer-ID).'})}),"\n",(0,r.jsxs)(n.p,{children:["Das Logto SDK wird immer drei Berechtigungen anfordern: ",(0,r.jsx)(n.code,{children:"openid"}),", ",(0,r.jsx)(n.code,{children:"profile"})," und ",(0,r.jsx)(n.code,{children:"offline_access"}),"."]})]})}function o(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},61221:(e,n,i)=>{i.d(n,{Ay:()=>l,Ip:()=>s,RM:()=>o,YF:()=>d});var r=i(25105),t=i(79621);const s="http://localhost:3000/",d=`${s}callback`,o=[{value:"Redirect-URIs konfigurieren",id:"configure-redirect-uris",level:4}];function c(e){const n={h4:"h4",p:"p",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:["\n","\n",(0,r.jsx)(n.h4,{id:"configure-redirect-uris",children:"Redirect-URIs konfigurieren"}),"\n",(0,r.jsxs)(n.p,{children:["Wechsle zur Anwendungsdetailseite der Logto-Konsole. F\xfcge eine Redirect-URI ",(0,r.jsx)("code",{children:e.redirectUri??"http://localhost:3000/callback"})," hinzu."]}),"\n",(0,r.jsx)("img",{alt:"Redirect-URI in der Logto-Konsole",src:"/img/assets/web-redirect-uri.png",width:"600px"}),"\n",(0,r.jsxs)(n.p,{children:["Genau wie beim Anmelden sollten Benutzer zu Logto weitergeleitet werden, um sich von der gemeinsamen Sitzung abzumelden. Sobald dies abgeschlossen ist, w\xe4re es ideal, den Benutzer zur\xfcck zu deiner Website zu leiten. F\xfcge zum Beispiel ",(0,r.jsx)("code",{children:s})," als Redirect-URI nach dem Abmelden hinzu."]}),"\n",(0,r.jsx)(n.p,{children:'Klicke dann auf "Speichern", um die \xc4nderungen zu speichern.'})]})}function l(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},71725:(e,n,i)=>{i.d(n,{Ay:()=>c,RM:()=>d});var r=i(25105),t=i(79621),s=i(88423);const d=[...s.RM];function o(e){const n={hr:"hr",li:"li",mermaid:"mermaid",ol:"ol",p:"p",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"Bevor wir in die Details eintauchen, hier ein kurzer \xdcberblick \xfcber die Endbenutzererfahrung. Der Anmeldeprozess kann wie folgt vereinfacht werden:"}),"\n",(0,r.jsx)(n.mermaid,{value:"graph LR\n    A(Deine App) --\x3e|1. Anmeldung aufrufen| B(Logto)\n    B --\x3e|2. Anmeldung abschlie\xdfen| A"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Deine App ruft die Anmeldemethode auf."}),"\n",(0,r.jsx)(n.li,{children:"Der Benutzer wird zur Logto-Anmeldeseite umgeleitet. Bei nativen Apps wird der Systembrowser ge\xf6ffnet."}),"\n",(0,r.jsx)(n.li,{children:"Der Benutzer meldet sich an und wird zur\xfcck zu deiner App umgeleitet (konfiguriert als die Redirect-URI)."}),"\n"]}),"\n",(0,r.jsx)(s.Ay,{}),"\n",(0,r.jsx)(n.hr,{})]})}function c(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},59336:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>x,contentTitle:()=>m,default:()=>z,frontMatter:()=>j,metadata:()=>r,toc:()=>f});const r=JSON.parse('{"id":"quick-starts/framework/java-spring-boot/README","title":"Authentifizierung zu deiner Java Spring Boot-Anwendung hinzuf\xfcgen","description":"Dieser Leitfaden zeigt dir, wie du Logto in deine Java Spring Boot-Anwendung integrieren kannst.","source":"@site/i18n/de/docusaurus-plugin-content-docs/current/quick-starts/framework/java-spring-boot/README.mdx","sourceDirName":"quick-starts/framework/java-spring-boot","slug":"/quick-starts/java-spring-boot","permalink":"/de/quick-starts/java-spring-boot","draft":false,"unlisted":false,"editUrl":"https://github.com/logto-io/docs/tree/master/i18n/de/docusaurus-plugin-content-docs/current/quick-starts/framework/java-spring-boot/README.mdx","tags":[],"version":"current","frontMatter":{"slug":"/quick-starts/java-spring-boot","sidebar_label":"Java Spring Boot","sidebar_custom_props":{"description":"Spring Boot ist ein Web-Framework f\xfcr Java, das Entwicklern erm\xf6glicht, sichere, schnelle und skalierbare Serveranwendungen mit der Java-Programmiersprache zu erstellen.","logoFilename":"spring-boot.svg"}},"sidebar":"quickStartSidebar","previous":{"title":"Go","permalink":"/de/quick-starts/go"},"next":{"title":"Next.js (Pages Router)","permalink":"/de/quick-starts/next"}}');var t=i(25105),s=i(79621),d=i(14076),o=i(99409),c=i(59141),l=i(61221),a=i(71725),u=i(49993);const h=[...u.RM];function g(e){const n={a:"a",code:"code",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.p,{children:["Logto verwendet OIDC ",(0,t.jsx)(n.a,{href:"https://openid.net/specs/openid-connect-core-1_0.html#Claims",children:"Berechtigungen und Anspr\xfcche Konventionen"}),", um die Berechtigungen und Anspr\xfcche f\xfcr das Abrufen von Benutzerinformationen aus dem ID-Token und dem OIDC ",(0,t.jsx)("a",{href:"https://openid.net/specs/openid-connect-core-1_0.html#UserInfo",children:"userinfo endpoint"}),' zu definieren. Sowohl "Berechtigung (Scope)" als auch "Anspruch (Claim)" sind Begriffe aus den OAuth 2.0 und OpenID Connect (OIDC) Spezifikationen.']}),"\n",(0,t.jsxs)(n.p,{children:["Kurz gesagt, wenn du eine Berechtigung anforderst, erh\xe4ltst du die entsprechenden Anspr\xfcche in den Benutzerinformationen. Zum Beispiel, wenn du die ",(0,t.jsx)(n.code,{children:"email"})," Berechtigung anforderst, erh\xe4ltst du die ",(0,t.jsx)(n.code,{children:"email"})," und ",(0,t.jsx)(n.code,{children:"email_verified"})," Daten des Benutzers."]}),"\n",(0,t.jsx)(u.Ay,{}),"\n",(0,t.jsxs)(n.p,{children:["F\xfcge zus\xe4tzliche Berechtigungen und Anspr\xfcche in der ",(0,t.jsx)(n.code,{children:"application.properties"})," Datei hinzu, um mehr Benutzerinformationen anzufordern. Zum Beispiel, um die ",(0,t.jsx)(n.code,{children:"urn:logto:scope:organizations"})," Berechtigung anzufordern, f\xfcge die folgende Zeile zur ",(0,t.jsx)(n.code,{children:"application.properties"})," Datei hinzu:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-properties",metastring:'title="application.properties"',children:"spring.security.oauth2.client.registration.logto.scope=openid,profile,offline_access,urn:logto:scope:organizations\n"})}),"\n",(0,t.jsx)(n.p,{children:"Benutzerorganisation Anspr\xfcche werden im Autorisierungstoken enthalten sein."})]})}function p(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(g,{...e})}):g(e)}const j={slug:"/quick-starts/java-spring-boot",sidebar_label:"Java Spring Boot",sidebar_custom_props:{description:"Spring Boot ist ein Web-Framework f\xfcr Java, das Entwicklern erm\xf6glicht, sichere, schnelle und skalierbare Serveranwendungen mit der Java-Programmiersprache zu erstellen.",logoFilename:"spring-boot.svg"}},m="Authentifizierung zu deiner Java Spring Boot-Anwendung hinzuf\xfcgen",x={},f=[{value:"Voraussetzungen",id:"prerequisites",level:2},{value:"Konfiguriere deine Java Spring Boot-Anwendung",id:"configure-your-java-spring-boot-application",level:2},{value:"Abh\xe4ngigkeiten hinzuf\xfcgen",id:"adding-dependencies",level:3},{value:"OAuth2 Client-Konfiguration",id:"oauth2-client-configuration",level:3},{value:"Implementierung",id:"implementation",level:2},...a.RM,...l.RM,{value:"Implementiere die WebSecurityConfig",id:"implement-the-websecurityconfig",level:3},{value:"Erstelle eine neue Klasse <code>WebSecurityConfig</code> in deinem Projekt",id:"create-a-new-class-websecurityconfig-in-your-project",level:4},{value:"Erstelle einen <code>idTokenDecoderFactory</code> Bean",id:"create-a-idtokendecoderfactory-bean",level:4},{value:"Erstelle eine LoginSuccessHandler-Klasse, um das Login-Erfolg-Ereignis zu handhaben",id:"create-a-loginsuccesshandler-class-to-handle-the-login-success-event",level:4},{value:"Erstelle eine LogoutSuccessHandler-Klasse, um das Logout-Erfolg-Ereignis zu handhaben",id:"create-a-logoutsuccesshandler-class-to-handle-the-logout-success-event",level:4},{value:"Aktualisiere die <code>WebSecurityConfig</code> Klasse mit einer <code>securityFilterChain</code>",id:"update-the-websecurityconfig-class-with-a-securityfilterchain",level:4},{value:"Erstelle eine Startseite",id:"create-a-home-page",level:3},{value:"Erstelle eine Benutzerseite",id:"create-a-user-page",level:3},{value:"Zus\xe4tzliche Anspr\xfcche anfordern",id:"request-additional-claims",level:4},...d.RM,...c.RM,{value:"Anwendung ausf\xfchren und testen",id:"run-and-test-the-application",level:3},{value:"Berechtigungen und Anspr\xfcche",id:"scopes-and-claims",level:2},...h,{value:"Weiterf\xfchrende Lekt\xfcre",id:"further-readings",level:2},...o.RM];function b(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"authentifizierung-zu-deiner-java-spring-boot-anwendung-hinzuf\xfcgen",children:"Authentifizierung zu deiner Java Spring Boot-Anwendung hinzuf\xfcgen"})}),"\n",(0,t.jsx)(n.p,{children:"Dieser Leitfaden zeigt dir, wie du Logto in deine Java Spring Boot-Anwendung integrieren kannst."}),"\n",(0,t.jsx)(n.admonition,{type:"tip",children:(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Du findest den Beispielcode f\xfcr diesen Leitfaden in unserem ",(0,t.jsx)(n.a,{href:"https://github.com/logto-io/spring-boot-sample",children:"spring-boot-sample"})," GitHub-Repository."]}),"\n",(0,t.jsxs)(n.li,{children:["Es ist kein offizielles SDK erforderlich, um Logto mit deiner Java Spring Boot-Anwendung zu integrieren. Wir werden die Bibliotheken ",(0,t.jsx)(n.a,{href:"https://spring.io/projects/spring-security",children:"Spring Security"})," und ",(0,t.jsx)(n.a,{href:"https://spring.io/guides/tutorials/spring-boot-oauth2",children:"Spring Security OAuth2"})," verwenden, um den OIDC-Authentifizierungsfluss mit Logto zu handhaben."]}),"\n"]})}),"\n",(0,t.jsx)(n.h2,{id:"prerequisites",children:"Voraussetzungen"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Ein ",(0,t.jsx)(n.a,{href:"https://cloud.logto.io",children:"Logto Cloud"})," Konto oder ein ",(0,t.jsx)(n.a,{href:"/introduction/set-up-logto-oss",children:"selbst gehostetes Logto"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["Unser Beispielcode wurde mit dem Spring Boot ",(0,t.jsx)(n.a,{href:"https://spring.io/guides/gs/securing-web",children:"securing web starter"})," erstellt. Folge den Anweisungen, um eine neue Webanwendung zu starten, falls du noch keine hast."]}),"\n",(0,t.jsxs)(n.li,{children:["In diesem Leitfaden verwenden wir die Bibliotheken ",(0,t.jsx)(n.a,{href:"https://spring.io/projects/spring-security",children:"Spring Security"})," und ",(0,t.jsx)(n.a,{href:"https://spring.io/guides/tutorials/spring-boot-oauth2",children:"Spring Security OAuth2"}),", um den OIDC-Authentifizierungsfluss mit Logto zu handhaben. Bitte gehe die offizielle Dokumentation durch, um die Konzepte zu verstehen."]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"configure-your-java-spring-boot-application",children:"Konfiguriere deine Java Spring Boot-Anwendung"}),"\n",(0,t.jsx)(n.h3,{id:"adding-dependencies",children:"Abh\xe4ngigkeiten hinzuf\xfcgen"}),"\n",(0,t.jsxs)(n.p,{children:["F\xfcr ",(0,t.jsx)(n.a,{href:"https://spring.io/guides/gs/gradle",children:"gradle"})," Benutzer, f\xfcge die folgenden Abh\xe4ngigkeiten zu deiner ",(0,t.jsx)(n.code,{children:"build.gradle"})," Datei hinzu:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-groovy",metastring:'title="build.gradle"',children:"dependencies {\n  implementation 'org.springframework.boot:spring-boot-starter-thymeleaf'\n\timplementation 'org.springframework.boot:spring-boot-starter-web'\n  implementation 'org.springframework.boot:spring-boot-starter-security'\n\timplementation 'org.springframework.boot:spring-boot-starter-oauth2-client'\n}\n"})}),"\n",(0,t.jsxs)(n.p,{children:["F\xfcr ",(0,t.jsx)(n.a,{href:"https://spring.io/guides/gs/maven",children:"maven"})," Benutzer, f\xfcge die folgenden Abh\xe4ngigkeiten zu deiner ",(0,t.jsx)(n.code,{children:"pom.xml"})," Datei hinzu:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-xml",metastring:'title="pom.xml"',children:"<dependency>\n  <groupId>org.springframework.boot</groupId>\n  <artifactId>spring-boot-starter-thymeleaf</artifactId>\n</dependency>\n<dependency>\n  <groupId>org.springframework.boot</groupId>\n  <artifactId>spring-boot-starter-web</artifactId>\n</dependency>\n<dependency>\n  <groupId>org.springframework.boot</groupId>\n  <artifactId>spring-boot-starter-security</artifactId>\n</dependency>\n<dependency>\n  <groupId>org.springframework.boot</groupId>\n  <artifactId>spring-boot-starter-oauth2-client</artifactId>\n</dependency>\n"})}),"\n",(0,t.jsx)(n.h3,{id:"oauth2-client-configuration",children:"OAuth2 Client-Konfiguration"}),"\n",(0,t.jsxs)(n.p,{children:["Registriere eine neue ",(0,t.jsx)(n.code,{children:"Java Spring Boot"})," Anwendung in der Logto-Konsole und erhalte die Client-Anmeldeinformationen und IdP-Konfigurationen f\xfcr deine Webanwendung."]}),"\n",(0,t.jsxs)(n.p,{children:["F\xfcge die folgende Konfiguration zu deiner ",(0,t.jsx)(n.code,{children:"application.properties"})," Datei hinzu:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-properties",metastring:'title="application.properties"',children:"spring.security.oauth2.client.registration.logto.client-name=logto\nspring.security.oauth2.client.registration.logto.client-id={{YOUR_CLIENT_ID}}\nspring.security.oauth2.client.registration.logto.client-secret={{YOUR_CLIENT_ID}}\nspring.security.oauth2.client.registration.logto.redirect-uri={baseUrl}/login/oauth2/code/{registrationId}\nspring.security.oauth2.client.registration.logto.authorization-grant-type=authorization_code\nspring.security.oauth2.client.registration.logto.scope=openid,profile,offline_access\nspring.security.oauth2.client.registration.logto.provider=logto\n\nspring.security.oauth2.client.provider.logto.issuer-uri={{LOGTO_ENDPOINT}}/oidc\nspring.security.oauth2.client.provider.logto.authorization-uri={{LOGTO_ENDPOINT}}/oidc/auth\nspring.security.oauth2.client.provider.logto.jwk-set-uri={{LOGTO_ENDPOINT}}/oidc/jwks\n"})}),"\n",(0,t.jsx)(n.h2,{id:"implementation",children:"Implementierung"}),"\n",(0,t.jsx)(a.Ay,{}),"\n",(0,t.jsxs)(n.p,{children:["Um Benutzer nach der Anmeldung zur\xfcck zu deiner Anwendung umzuleiten, musst du die Redirect-URI mit der Eigenschaft ",(0,t.jsx)(n.code,{children:"client.registration.logto.redirect-uri"})," im vorherigen Schritt festlegen."]}),"\n",(0,t.jsx)(l.Ay,{}),"\n",(0,t.jsx)(n.h3,{id:"implement-the-websecurityconfig",children:"Implementiere die WebSecurityConfig"}),"\n",(0,t.jsxs)(n.h4,{id:"create-a-new-class-websecurityconfig-in-your-project",children:["Erstelle eine neue Klasse ",(0,t.jsx)(n.code,{children:"WebSecurityConfig"})," in deinem Projekt"]}),"\n",(0,t.jsxs)(n.p,{children:["Die ",(0,t.jsx)(n.code,{children:"WebSecurityConfig"})," Klasse wird verwendet, um die Sicherheitseinstellungen f\xfcr deine Anwendung zu konfigurieren. Sie ist die Schl\xfcsselklasse, die den Authentifizierungs- und Autorisierungsfluss handhaben wird. Bitte \xfcberpr\xfcfe die ",(0,t.jsx)(n.a,{href:"https://spring.io/guides/topicals/spring-security-architecture",children:"Spring Security Dokumentation"})," f\xfcr weitere Details."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",metastring:'title="WebSecurityConfig.java"',children:"package com.example.securingweb;\n\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\n\n@Configuration\n@EnableWebSecurity\n\npublic class WebSecurityConfig {\n // ...\n}\n"})}),"\n",(0,t.jsxs)(n.h4,{id:"create-a-idtokendecoderfactory-bean",children:["Erstelle einen ",(0,t.jsx)(n.code,{children:"idTokenDecoderFactory"})," Bean"]}),"\n",(0,t.jsxs)(n.p,{children:["Dies ist erforderlich, da Logto ",(0,t.jsx)(n.code,{children:"ES384"})," als Standardalgorithmus verwendet. Wir m\xfcssen den Standard ",(0,t.jsx)(n.code,{children:"OidcIdTokenDecoderFactory"})," \xfcberschreiben, um denselben Algorithmus zu verwenden."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",metastring:'title="WebSecurityConfig.java"',children:"import org.springframework.context.annotation.Bean;\nimport org.springframework.security.oauth2.client.oidc.authentication.OidcIdTokenDecoderFactory;\nimport org.springframework.security.oauth2.client.registration.ClientRegistration;\nimport org.springframework.security.oauth2.jose.jws.SignatureAlgorithm;\nimport org.springframework.security.oauth2.jwt.JwtDecoderFactory;\n\npublic class WebSecurityConfig {\n  // ...\n\n  @Bean\n  public JwtDecoderFactory<ClientRegistration> idTokenDecoderFactory() {\n    OidcIdTokenDecoderFactory idTokenDecoderFactory = new OidcIdTokenDecoderFactory();\n    idTokenDecoderFactory.setJwsAlgorithmResolver(clientRegistration -> SignatureAlgorithm.ES384);\n    return idTokenDecoderFactory;\n  }\n}\n"})}),"\n",(0,t.jsx)(n.h4,{id:"create-a-loginsuccesshandler-class-to-handle-the-login-success-event",children:"Erstelle eine LoginSuccessHandler-Klasse, um das Login-Erfolg-Ereignis zu handhaben"}),"\n",(0,t.jsxs)(n.p,{children:["Wir werden den Benutzer nach einem erfolgreichen Login zur ",(0,t.jsx)(n.code,{children:"/user"})," Seite umleiten."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",metastring:'title="CustomSuccessHandler.java"',children:'package com.example.securingweb;\n\nimport java.io.IOException;\n\nimport org.springframework.security.core.Authentication;\nimport org.springframework.security.web.authentication.AuthenticationSuccessHandler;\n\nimport jakarta.servlet.ServletException;\nimport jakarta.servlet.http.HttpServletRequest;\nimport jakarta.servlet.http.HttpServletResponse;\n\npublic class CustomSuccessHandler implements AuthenticationSuccessHandler {\n  @Override\n  public void onAuthenticationSuccess(HttpServletRequest request, HttpServletResponse response,\n      Authentication authentication) throws IOException, ServletException {\n    response.sendRedirect("/user");\n  }\n}\n'})}),"\n",(0,t.jsx)(n.h4,{id:"create-a-logoutsuccesshandler-class-to-handle-the-logout-success-event",children:"Erstelle eine LogoutSuccessHandler-Klasse, um das Logout-Erfolg-Ereignis zu handhaben"}),"\n",(0,t.jsx)(n.p,{children:"L\xf6sche die Sitzung und leite den Benutzer zur Startseite um."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",metastring:'title="CustomLogoutHandler.java"',children:'package com.example.securingweb;\n\nimport java.io.IOException;\n\nimport org.springframework.security.core.Authentication;\nimport org.springframework.security.web.authentication.logout.LogoutSuccessHandler;\n\nimport jakarta.servlet.ServletException;\nimport jakarta.servlet.http.HttpServletRequest;\nimport jakarta.servlet.http.HttpServletResponse;\nimport jakarta.servlet.http.HttpSession;\n\npublic class CustomLogoutHandler implements LogoutSuccessHandler {\n  @Override\n  public void onLogoutSuccess(HttpServletRequest request, HttpServletResponse response, Authentication authentication)\n      throws IOException, ServletException {\n    HttpSession session = request.getSession();\n\n    if (session != null) {\n      session.invalidate();\n    }\n\n    response.sendRedirect("/home");\n  }\n}\n'})}),"\n",(0,t.jsxs)(n.h4,{id:"update-the-websecurityconfig-class-with-a-securityfilterchain",children:["Aktualisiere die ",(0,t.jsx)(n.code,{children:"WebSecurityConfig"})," Klasse mit einer ",(0,t.jsx)(n.code,{children:"securityFilterChain"})]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.a,{href:"https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/web/DefaultSecurityFilterChain.html",children:"securityFilterChain"})," ist eine Kette von Filtern, die f\xfcr die Verarbeitung der eingehenden Anfragen und Antworten verantwortlich sind."]}),"\n",(0,t.jsxs)(n.p,{children:["Wir werden die ",(0,t.jsx)(n.code,{children:"securityFilterChain"})," konfigurieren, um den Zugriff auf die Startseite zu erlauben und f\xfcr alle anderen Anfragen eine Authentifizierung zu verlangen. Verwende den ",(0,t.jsx)(n.code,{children:"CustomSuccessHandler"})," und ",(0,t.jsx)(n.code,{children:"CustomLogoutHandler"}),", um die Login- und Logout-Ereignisse zu handhaben."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",metastring:'title="WebSecurityConfig.java"',children:'import org.springframework.context.annotation.Bean;\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\nimport org.springframework.security.web.DefaultSecurityFilterChain;\n\npublic class WebSecurityConfig {\n  // ...\n\n  @Bean\n  public DefaultSecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\n    http\n      .authorizeRequests(authorizeRequests ->\n        authorizeRequests\n          .antMatchers("/", "/home").permitAll() // Erlaube den Zugriff auf die Startseite\n          .anyRequest().authenticated() // Alle anderen Anfragen erfordern Authentifizierung\n      )\n      .oauth2Login(oauth2Login ->\n        oauth2Login\n          .successHandler(new CustomSuccessHandler())\n      )\n      .logout(logout ->\n        logout\n          .logoutSuccessHandler(new CustomLogoutHandler())\n      );\n    return http.build();\n  }\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"create-a-home-page",children:"Erstelle eine Startseite"}),"\n",(0,t.jsx)(n.p,{children:"(Du kannst diesen Schritt \xfcberspringen, wenn du bereits eine Startseite in deinem Projekt hast)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",metastring:'title="HomeController.java"',children:'package com.example.securingweb;\n\nimport java.security.Principal;\n\nimport org.springframework.stereotype.Controller;\nimport org.springframework.web.bind.annotation.GetMapping;\n\n@Controller\npublic class HomeController {\n  @GetMapping({ "/", "/home" })\n  public String home(Principal principal) {\n    return principal != null ? "redirect:/user" : "home";\n  }\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:"Dieser Controller wird den Benutzer zur Benutzerseite umleiten, wenn der Benutzer authentifiziert ist, andernfalls wird die Startseite angezeigt. F\xfcge einen Anmeldelink zur Startseite hinzu."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-html",metastring:'title="resources/templates/home.html"',children:'<body>\n  <h1>Willkommen!</h1>\n\n  <p><a th:href="@{/oauth2/authorization/logto}">Mit Logto anmelden</a></p>\n</body>\n'})}),"\n",(0,t.jsx)(n.h3,{id:"create-a-user-page",children:"Erstelle eine Benutzerseite"}),"\n",(0,t.jsx)(n.p,{children:"Erstelle einen neuen Controller, um die Benutzerseite zu handhaben:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",metastring:'title="UserController.java"',children:'package com.example.securingweb;\n\nimport java.security.Principal;\nimport java.util.Map;\n\nimport org.springframework.security.oauth2.client.authentication.OAuth2AuthenticationToken;\nimport org.springframework.security.oauth2.core.user.OAuth2User;\nimport org.springframework.stereotype.Controller;\nimport org.springframework.ui.Model;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.RequestMapping;\n\n@Controller\n@RequestMapping("/user")\npublic class UserController {\n\n  @GetMapping\n  public String user(Model model, Principal principal) {\n    if (principal instanceof OAuth2AuthenticationToken) {\n      OAuth2AuthenticationToken token = (OAuth2AuthenticationToken) principal;\n      OAuth2User oauth2User = token.getPrincipal();\n      Map<String, Object> attributes = oauth2User.getAttributes();\n\n      model.addAttribute("username", attributes.get("username"));\n      model.addAttribute("email", attributes.get("email"));\n      model.addAttribute("sub", attributes.get("sub"));\n    }\n\n    return "user";\n  }\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:["Sobald der Benutzer authentifiziert ist, werden wir die ",(0,t.jsx)(n.code,{children:"OAuth2User"})," Daten aus dem authentifizierten Principal-Objekt abrufen. Bitte siehe ",(0,t.jsx)(n.a,{href:"https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/oauth2/client/authentication/OAuth2AuthenticationToken.html",children:"OAuth2AuthenticationToken"})," und ",(0,t.jsx)(n.a,{href:"https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/oauth2/core/user/OAuth2User.html",children:"OAuth2User"})," f\xfcr weitere Details."]}),"\n",(0,t.jsxs)(n.p,{children:["Lese die Benutzerdaten und \xfcbergebe sie an das ",(0,t.jsx)(n.code,{children:"user.html"})," Template."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-html",metastring:'title="resources/templates/user.html"',children:'<body>\n  <h1>Benutzerdetails</h1>\n  <div>\n    <p>\n    <div><strong>Name:</strong> <span th:text="${username}"></span></div>\n    <div><strong>E-Mail:</strong> <span th:text="${email}"></span></div>\n    <div><strong>ID:</strong> <span th:text="${sub}"></span></div>\n    </p>\n  </div>\n\n  <form th:action="@{/logout}" method="post">\n    <input type="submit" value="Abmelden" />\n  </form>\n</body>\n'})}),"\n",(0,t.jsx)(n.h4,{id:"request-additional-claims",children:"Zus\xe4tzliche Anspr\xfcche anfordern"}),"\n",(0,t.jsx)(d.Ay,{method:"principal (OAuth2AuthenticationToken)"}),"\n",(0,t.jsx)(c.Ay,{}),"\n",(0,t.jsxs)(n.p,{children:["Um zus\xe4tzliche Benutzerinformationen abzurufen, kannst du zus\xe4tzliche Berechtigungen zur ",(0,t.jsx)(n.code,{children:"application.properties"})," Datei hinzuf\xfcgen. Zum Beispiel, um die ",(0,t.jsx)(n.code,{children:"email"}),", ",(0,t.jsx)(n.code,{children:"phone"})," und ",(0,t.jsx)(n.code,{children:"urn:logto:scope:organizations"})," Berechtigung anzufordern, f\xfcge die folgende Zeile zur ",(0,t.jsx)(n.code,{children:"application.properties"})," Datei hinzu:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-properties",metastring:'title="application.properties"',children:"  spring.security.oauth2.client.registration.logto.scope=openid,profile,offline_access,email,phone,urn:logto:scope:organizations\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Dann kannst du auf die zus\xe4tzlichen Anspr\xfcche im ",(0,t.jsx)(n.code,{children:"OAuth2User"})," Objekt zugreifen."]}),"\n",(0,t.jsx)(n.h3,{id:"run-and-test-the-application",children:"Anwendung ausf\xfchren und testen"}),"\n",(0,t.jsxs)(n.p,{children:["F\xfchre die Anwendung aus und navigiere zu ",(0,t.jsx)(n.code,{children:"http://localhost:8080"}),"."]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Du wirst die Startseite mit einem Anmeldelink sehen."}),"\n",(0,t.jsx)(n.li,{children:"Klicke auf den Link, um dich mit Logto anzumelden."}),"\n",(0,t.jsx)(n.li,{children:"Nach erfolgreicher Authentifizierung wirst du zur Benutzerseite mit deinen Benutzerdetails weitergeleitet."}),"\n",(0,t.jsx)(n.li,{children:"Klicke auf den Abmeldebutton, um dich abzumelden. Du wirst zur\xfcck zur Startseite geleitet."}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"scopes-and-claims",children:"Berechtigungen und Anspr\xfcche"}),"\n",(0,t.jsx)(p,{}),"\n",(0,t.jsx)(n.h2,{id:"further-readings",children:"Weiterf\xfchrende Lekt\xfcre"}),"\n",(0,t.jsx)(o.Ay,{})]})}function z(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(b,{...e})}):b(e)}},79621:(e,n,i)=>{i.d(n,{R:()=>d,x:()=>o});var r=i(58101);const t={},s=r.createContext(t);function d(e){const n=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:d(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);