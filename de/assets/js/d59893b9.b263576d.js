"use strict";(self.webpackChunk_logto_docs=self.webpackChunk_logto_docs||[]).push([[1422],{44466:(e,n,t)=>{t.d(n,{Ay:()=>d,RM:()=>s});var r=t(25105),i=t(79621);const s=[];function o(e){const n={a:"a",p:"p",...(0,i.R)(),...e.components};return(0,r.jsxs)(n.p,{children:["Wir empfehlen, zuerst ",(0,r.jsx)(n.a,{href:"/authorization/role-based-access-control",children:"\ud83d\udd10 Rollenbasierte Zugangskontrolle (RBAC)"})," zu lesen, um die grundlegenden Konzepte von Logto RBAC zu verstehen und wie man API-Ressourcen richtig einrichtet."]})}function d(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},67725:(e,n,t)=>{t.d(n,{Ay:()=>d,RM:()=>s});var r=t(25105),i=t(79621);const s=[{value:"Checkpoint: Teste deine Anwendung",id:"checkpoint-test-your-application",level:3}];function o(e){const n={h3:"h3",li:"li",ol:"ol",p:"p",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h3,{id:"checkpoint-test-your-application",children:"Checkpoint: Teste deine Anwendung"}),"\n",(0,r.jsx)(n.p,{children:"Jetzt kannst du deine Anwendung testen:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Starte deine Anwendung, du wirst den Anmeldebutton sehen."}),"\n",(0,r.jsx)(n.li,{children:"Klicke auf den Anmeldebutton, das SDK wird den Anmeldeprozess initiieren und dich zur Logto-Anmeldeseite weiterleiten."}),"\n",(0,r.jsx)(n.li,{children:"Nachdem du dich angemeldet hast, wirst du zur\xfcck zu deiner Anwendung geleitet und siehst den Abmeldebutton."}),"\n",(0,r.jsx)(n.li,{children:"Klicke auf den Abmeldebutton, um den Token-Speicher zu leeren und dich abzumelden."}),"\n"]})]})}function d(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},67882:(e,n,t)=>{t.d(n,{Ay:()=>d,RM:()=>s});var r=t(25105),i=t(79621);const s=[{value:"Anspr\xfcche, die Netzwerk-Anfragen ben\xf6tigen",id:"claims-that-need-network-requests",level:3}];function o(e){const n={code:"code",h3:"h3",p:"p",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[e.type?null:(()=>{throw new Error("props.type is required when importing _claims-need-network-request.mdx")})(),"\n",(0,r.jsx)(n.h3,{id:"claims-that-need-network-requests",children:"Anspr\xfcche, die Netzwerk-Anfragen ben\xf6tigen"}),"\n",(0,r.jsxs)(n.p,{children:["Um das ID-Token nicht aufzubl\xe4hen, erfordern einige Anspr\xfcche Netzwerk-Anfragen, um abgerufen zu werden. Zum Beispiel ist der ",(0,r.jsx)(n.code,{children:"custom_data"})," Anspruch nicht im Benutzerobjekt enthalten, selbst wenn er in den Berechtigungen angefordert wird. Um auf diese Anspr\xfcche zuzugreifen, ",(0,r.jsxs)("span",{children:["method"===e.type&&(0,r.jsxs)(r.Fragment,{children:["kannst du die ",(0,r.jsx)("code",{children:e.method})," Methode verwenden"]}),"option"===e.type&&(0,r.jsxs)(r.Fragment,{children:["kannst du die ",(0,r.jsx)("code",{children:e.configOption})," Option konfigurieren"]})]}),":"]}),"\n",e.codeSnippet,"\n","method"===e.type&&(0,r.jsxs)(r.Fragment,{children:["Diese Methode wird die Benutzerinformationen abrufen, indem sie eine Anfrage an den"," ",(0,r.jsx)("a",{href:"https://openid.net/specs/openid-connect-core-1_0.html#UserInfo",children:"Userinfo-Endpunkt"})," ","stellt. Um mehr \xfcber die verf\xfcgbaren Berechtigungen und Anspr\xfcche zu erfahren, siehe den"," ",(0,r.jsx)("a",{href:"#scopes-and-claims",children:"Berechtigungen und Anspr\xfcche"})," Abschnitt."]}),"\n","option"===e.type&&(0,r.jsxs)(r.Fragment,{children:["Durch die Konfiguration von ",(0,r.jsx)("code",{children:e.configOption})," wird das SDK die Benutzerinformationen abrufen, indem es eine Anfrage an den"," ",(0,r.jsx)("a",{href:"https://openid.net/specs/openid-connect-core-1_0.html#UserInfo",children:"Userinfo-Endpunkt"})," ","stellt, nachdem der Benutzer angemeldet ist, und ",(0,r.jsx)("code",{children:e.value??"user.custom_data"})," ","wird verf\xfcgbar sein, sobald die Anfrage abgeschlossen ist."]})]})}function d(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},3622:(e,n,t)=>{t.d(n,{Ay:()=>d,RM:()=>s});var r=t(25105),i=t(79621);const s=[];function o(e){const n={a:"a",admonition:"admonition",code:"code",p:"p",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"Sobald du die API-Ressourcen eingerichtet hast, kannst du sie bei der Konfiguration von Logto in deiner App hinzuf\xfcgen:"}),"\n",e.configResourcesCode,"\n",(0,r.jsx)(n.p,{children:"Jede API-Ressource hat ihre eigenen Berechtigungen (Berechtigungen)."}),"\n",(0,r.jsxs)(n.p,{children:["Zum Beispiel hat die Ressource ",(0,r.jsx)(n.code,{children:"https://shopping.your-app.com/api"})," die Berechtigungen ",(0,r.jsx)(n.code,{children:"shopping:read"})," und ",(0,r.jsx)(n.code,{children:"shopping:write"}),", und die Ressource ",(0,r.jsx)(n.code,{children:"https://store.your-app.com/api"})," hat die Berechtigungen ",(0,r.jsx)(n.code,{children:"store:read"})," und ",(0,r.jsx)(n.code,{children:"store:write"}),"."]}),"\n",(0,r.jsx)(n.p,{children:"Um diese Berechtigungen anzufordern, kannst du sie bei der Konfiguration von Logto in deiner App hinzuf\xfcgen:"}),"\n",e.configResourcesWithScopesCode,"\n",(0,r.jsxs)(n.p,{children:["Du wirst bemerken, dass Berechtigungen separat von API-Ressourcen definiert sind. Dies liegt daran, dass ",(0,r.jsx)(n.a,{href:"https://www.rfc-editor.org/rfc/rfc8707.html",children:"Resource Indicators for OAuth 2.0"})," spezifiziert, dass die endg\xfcltigen Berechtigungen f\xfcr die Anfrage das kartesische Produkt aller Berechtigungen bei allen Zielservices sein werden."]}),"\n",e.configResourcesWithSharedScopesCode&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("p",{children:["Somit k\xf6nnen im obigen Fall die Berechtigungen aus der Definition in Logto vereinfacht werden, beide API-Ressourcen k\xf6nnen ",(0,r.jsx)("code",{children:"read"})," und ",(0,r.jsx)("code",{children:"write"})," Berechtigungen ohne Pr\xe4fix haben. Dann, in der Logto-Konfiguration:"]}),e.configResourcesWithSharedScopesCode,(0,r.jsxs)("p",{children:["F\xfcr jede API-Ressource wird sowohl ",(0,r.jsx)("code",{children:"read"})," als auch ",(0,r.jsx)("code",{children:"write"})," Berechtigungen angefordert."]})]}),"\n",(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsxs)(n.p,{children:["Es ist in Ordnung, Berechtigungen anzufordern, die in den API-Ressourcen nicht definiert sind. Zum Beispiel kannst du die Berechtigung ",(0,r.jsx)(n.code,{children:"email"})," anfordern, auch wenn die API-Ressourcen die Berechtigung ",(0,r.jsx)(n.code,{children:"email"})," nicht verf\xfcgbar haben. Nicht verf\xfcgbare Berechtigungen werden sicher ignoriert."]})}),"\n",(0,r.jsx)(n.p,{children:"Nach der erfolgreichen Anmeldung wird Logto die entsprechenden Berechtigungen an API-Ressourcen gem\xe4\xdf den Rollen des Benutzers ausstellen."})]})}function d(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},60077:(e,n,t)=>{t.d(n,{Ay:()=>d,RM:()=>s});var r=t(25105),i=t(79621);const s=[];function o(e){const n={p:"p",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.p,{children:["Um das Zugangstoken f\xfcr eine spezifische API-Ressource abzurufen, kannst du die Methode ",(0,r.jsx)("code",{children:e.getAccessTokenApi})," verwenden:"]}),"\n",e.getAccessTokenCode,"\n",(0,r.jsx)(n.p,{children:"Diese Methode gibt ein JWT-Zugangstoken zur\xfcck, das verwendet werden kann, um auf die API-Ressource zuzugreifen, wenn der Benutzer die entsprechenden Berechtigungen hat. Wenn das aktuell zwischengespeicherte Zugangstoken abgelaufen ist, versucht diese Methode automatisch, ein Auffrischungstoken zu verwenden, um ein neues Zugangstoken zu erhalten."})]})}function d(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},80217:(e,n,t)=>{t.d(n,{Ay:()=>d,RM:()=>s});var r=t(25105),i=t(79621);const s=[];function o(e){const n={a:"a",p:"p",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.p,{children:["Wenn Organisationen neu f\xfcr dich sind, lies bitte ",(0,r.jsx)(n.a,{href:"/organizations",children:"\ud83c\udfe2 Organisationen (Multi-Tenancy)"}),", um loszulegen."]}),"\n",(0,r.jsxs)(n.p,{children:["Du musst die Berechtigung ",(0,r.jsx)("code",{children:e.organizationScope})," hinzuf\xfcgen, wenn du den Logto-Client konfigurierst:"]}),"\n",e.configOrganizationCode,"\n",(0,r.jsx)(n.p,{children:"Sobald der Benutzer angemeldet ist, kannst du das Organisationstoken f\xfcr den Benutzer abrufen:"}),"\n",e.getOrganizationAccessTokenCode]})}function d(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},14076:(e,n,t)=>{t.d(n,{Ay:()=>d,RM:()=>s});var r=t(25105),i=t(79621);const s=[];function o(e){const n={p:"p",...(0,i.R)(),...e.components};return(0,r.jsxs)(n.p,{children:["M\xf6glicherweise fehlen einige Benutzerinformationen im zur\xfcckgegebenen Objekt von ",(0,r.jsx)("code",{children:e.method}),". Dies liegt daran, dass OAuth 2.0 und OpenID Connect (OIDC) so konzipiert sind, dass sie dem Prinzip der minimalen Rechte (PoLP) folgen, und Logto auf diesen Standards basiert."]})}function d(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},99409:(e,n,t)=>{t.d(n,{Ay:()=>d,RM:()=>s});var r=t(25105),i=t(79621);const s=[];function o(e){const{Url:n}={...(0,i.R)(),...e.components};return n||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Url",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n,{href:"/end-user-flows",children:" Endbenutzerfl\xfcsse: Authentifizierungsfl\xfcsse, Kontofl\xfcsse und Organisationsfl\xfcsse "}),"\n",(0,r.jsx)(n,{href:"/connectors",children:" Connectors konfigurieren "}),"\n",(0,r.jsx)(n,{href:"/authorization",children:" Autorisierung (Authorization) "})]})}function d(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},42865:(e,n,t)=>{t.d(n,{Ay:()=>a,RM:()=>d});var r=t(25105),i=t(79621),s=t(38552),o=t(22002);const d=[];function c(e){const n={p:"p",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[e.packageName?null:(()=>{throw new Error("props.packageName is required when importing _npm_like_installation.mdx")})(),"\n",(0,r.jsx)(n.p,{children:"Installiere das Logto SDK \xfcber deinen bevorzugten Paketmanager:"}),"\n",(0,r.jsxs)(o.A,{children:[(0,r.jsx)(s.A,{value:"npm",label:"npm",children:(0,r.jsx)("pre",{children:(0,r.jsxs)("code",{className:"language-bash",children:["npm i ",e.packageName]})})}),(0,r.jsx)(s.A,{value:"pnpm",label:"pnpm",children:(0,r.jsx)("pre",{children:(0,r.jsxs)("code",{className:"language-bash",children:["pnpm add ",e.packageName]})})}),(0,r.jsx)(s.A,{value:"yarn",label:"yarn",children:(0,r.jsx)("pre",{children:(0,r.jsxs)("code",{className:"language-bash",children:["yarn add ",e.packageName]})})})]})]})}function a(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},88423:(e,n,t)=>{t.d(n,{Ay:()=>d,RM:()=>s});var r=t(25105),i=t(79621);const s=[{value:"Bez\xfcglich der umleitungsbasierten Anmeldung",id:"regarding-redirect-based-sign-in",level:3}];function o(e){const n={a:"a",h3:"h3",li:"li",ol:"ol",p:"p",...(0,i.R)(),...e.components},{Details:t,MainSiteUrl:s}=n;return t||c("Details",!0),s||c("MainSiteUrl",!0),(0,r.jsxs)(t,{children:[(0,r.jsx)("summary",{children:(0,r.jsx)(n.h3,{id:"regarding-redirect-based-sign-in",children:"Bez\xfcglich der umleitungsbasierten Anmeldung"})}),(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Dieser Authentifizierungsprozess folgt dem ",(0,r.jsx)(n.a,{href:"https://openid.net/specs/openid-connect-core-1_0.html",children:"OpenID Connect (OIDC)"})," Protokoll, und Logto erzwingt strenge Sicherheitsma\xdfnahmen, um die Benutzeranmeldung zu sch\xfctzen."]}),"\n",(0,r.jsx)(n.li,{children:"Wenn du mehrere Apps hast, kannst du denselben Identit\xe4tsanbieter (Logto) verwenden. Sobald sich der Benutzer bei einer App anmeldet, wird Logto den Anmeldeprozess automatisch abschlie\xdfen, wenn der Benutzer auf eine andere App zugreift."}),"\n"]}),(0,r.jsxs)(n.p,{children:["Um mehr \xfcber die Gr\xfcnde und Vorteile der umleitungsbasierten Anmeldung zu erfahren, siehe ",(0,r.jsx)(s,{href:"/concepts/sign-in-experience",children:"Logto-Anmeldeerfahrung erkl\xe4rt"}),"."]})]})}function d(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}function c(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},49993:(e,n,t)=>{t.d(n,{Ay:()=>d,RM:()=>s});var r=t(25105),i=t(79621);const s=[];function o(e){const n={a:"a",admonition:"admonition",code:"code",hr:"hr",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"Hier ist die Liste der unterst\xfctzten Berechtigungen (Scopes) und der entsprechenden Anspr\xfcche (Claims):"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"openid"})})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Anspruchsname"}),(0,r.jsx)(n.th,{children:"Typ"}),(0,r.jsx)(n.th,{children:"Beschreibung"}),(0,r.jsx)(n.th,{children:"Ben\xf6tigt userinfo?"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"sub"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"string"})}),(0,r.jsx)(n.td,{children:"Der eindeutige Identifikator des Benutzers"}),(0,r.jsx)(n.td,{children:"Nein"})]})})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"profile"})})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Anspruchsname"}),(0,r.jsx)(n.th,{children:"Typ"}),(0,r.jsx)(n.th,{children:"Beschreibung"}),(0,r.jsx)(n.th,{children:"Ben\xf6tigt userinfo?"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"name"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"string"})}),(0,r.jsx)(n.td,{children:"Der vollst\xe4ndige Name des Benutzers"}),(0,r.jsx)(n.td,{children:"Nein"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"username"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"string"})}),(0,r.jsx)(n.td,{children:"Der Benutzername des Benutzers"}),(0,r.jsx)(n.td,{children:"Nein"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"picture"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"string"})}),(0,r.jsx)(n.td,{children:"URL des Profilbildes des Endbenutzers. Diese URL MUSS auf eine Bilddatei (zum Beispiel eine PNG-, JPEG- oder GIF-Bilddatei) verweisen, anstatt auf eine Webseite, die ein Bild enth\xe4lt. Beachte, dass diese URL speziell auf ein Profilfoto des Endbenutzers verweisen SOLLTE, das geeignet ist, den Endbenutzer zu beschreiben, anstatt auf ein beliebiges vom Endbenutzer aufgenommenes Foto."}),(0,r.jsx)(n.td,{children:"Nein"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"created_at"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"number"})}),(0,r.jsx)(n.td,{children:"Zeitpunkt, zu dem der Endbenutzer erstellt wurde. Die Zeit wird als Anzahl der Millisekunden seit dem Unix-Epoch (1970-01-01T00:00:00Z) dargestellt."}),(0,r.jsx)(n.td,{children:"Nein"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"updated_at"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"number"})}),(0,r.jsx)(n.td,{children:"Zeitpunkt, zu dem die Informationen des Endbenutzers zuletzt aktualisiert wurden. Die Zeit wird als Anzahl der Millisekunden seit dem Unix-Epoch (1970-01-01T00:00:00Z) dargestellt."}),(0,r.jsx)(n.td,{children:"Nein"})]})]})]}),"\n",(0,r.jsxs)(n.p,{children:["Andere ",(0,r.jsx)(n.a,{href:"https://openid.net/specs/openid-connect-core-1_0.html#StandardClaims",children:"Standardanspr\xfcche"})," wie ",(0,r.jsx)(n.code,{children:"family_name"}),", ",(0,r.jsx)(n.code,{children:"given_name"}),", ",(0,r.jsx)(n.code,{children:"middle_name"}),", ",(0,r.jsx)(n.code,{children:"nickname"}),", ",(0,r.jsx)(n.code,{children:"preferred_username"}),", ",(0,r.jsx)(n.code,{children:"profile"}),", ",(0,r.jsx)(n.code,{children:"website"}),", ",(0,r.jsx)(n.code,{children:"gender"}),", ",(0,r.jsx)(n.code,{children:"birthdate"}),", ",(0,r.jsx)(n.code,{children:"zoneinfo"})," und ",(0,r.jsx)(n.code,{children:"locale"})," werden ebenfalls im ",(0,r.jsx)(n.code,{children:"profile"}),"-Scope enthalten sein, ohne dass der userinfo-Endpunkt angefordert werden muss. Ein Unterschied im Vergleich zu den obigen Anspr\xfcchen besteht darin, dass diese Anspr\xfcche nur zur\xfcckgegeben werden, wenn ihre Werte nicht leer sind, w\xe4hrend die obigen Anspr\xfcche ",(0,r.jsx)(n.code,{children:"null"})," zur\xfcckgeben, wenn die Werte leer sind."]}),"\n",(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsxs)(n.p,{children:["Im Gegensatz zu den Standardanspr\xfcchen verwenden die Anspr\xfcche ",(0,r.jsx)(n.code,{children:"created_at"})," und ",(0,r.jsx)(n.code,{children:"updated_at"})," Millisekunden anstelle von Sekunden."]})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"email"})})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Anspruchsname"}),(0,r.jsx)(n.th,{children:"Typ"}),(0,r.jsx)(n.th,{children:"Beschreibung"}),(0,r.jsx)(n.th,{children:"Ben\xf6tigt userinfo?"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"email"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"string"})}),(0,r.jsx)(n.td,{children:"Die E-Mail-Adresse des Benutzers"}),(0,r.jsx)(n.td,{children:"Nein"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"email_verified"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"boolean"})}),(0,r.jsx)(n.td,{children:"Ob die E-Mail-Adresse verifiziert wurde"}),(0,r.jsx)(n.td,{children:"Nein"})]})]})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"phone"})})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Anspruchsname"}),(0,r.jsx)(n.th,{children:"Typ"}),(0,r.jsx)(n.th,{children:"Beschreibung"}),(0,r.jsx)(n.th,{children:"Ben\xf6tigt userinfo?"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"phone_number"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"string"})}),(0,r.jsx)(n.td,{children:"Die Telefonnummer des Benutzers"}),(0,r.jsx)(n.td,{children:"Nein"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"phone_number_verified"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"boolean"})}),(0,r.jsx)(n.td,{children:"Ob die Telefonnummer verifiziert wurde"}),(0,r.jsx)(n.td,{children:"Nein"})]})]})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"address"})})}),"\n",(0,r.jsxs)(n.p,{children:["Bitte siehe ",(0,r.jsx)(n.a,{href:"https://openid.net/specs/openid-connect-core-1_0.html#AddressClaim",children:"OpenID Connect Core 1.0"})," f\xfcr die Details des Adressanspruchs."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"custom_data"})})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Anspruchsname"}),(0,r.jsx)(n.th,{children:"Typ"}),(0,r.jsx)(n.th,{children:"Beschreibung"}),(0,r.jsx)(n.th,{children:"Ben\xf6tigt userinfo?"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"custom_data"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"object"})}),(0,r.jsx)(n.td,{children:"Die benutzerdefinierten Daten des Benutzers"}),(0,r.jsx)(n.td,{children:"Ja"})]})})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"identities"})})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Anspruchsname"}),(0,r.jsx)(n.th,{children:"Typ"}),(0,r.jsx)(n.th,{children:"Beschreibung"}),(0,r.jsx)(n.th,{children:"Ben\xf6tigt userinfo?"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"identities"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"object"})}),(0,r.jsx)(n.td,{children:"Die verkn\xfcpften Identit\xe4ten des Benutzers"}),(0,r.jsx)(n.td,{children:"Ja"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"sso_identities"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"array"})}),(0,r.jsx)(n.td,{children:"Die verkn\xfcpften SSO-Identit\xe4ten des Benutzers"}),(0,r.jsx)(n.td,{children:"Ja"})]})]})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"roles"})})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Anspruchsname"}),(0,r.jsx)(n.th,{children:"Typ"}),(0,r.jsx)(n.th,{children:"Beschreibung"}),(0,r.jsx)(n.th,{children:"Ben\xf6tigt userinfo?"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"roles"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"string[]"})}),(0,r.jsx)(n.td,{children:"Die Rollen des Benutzers"}),(0,r.jsx)(n.td,{children:"Nein"})]})})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"urn:logto:scope:organizations"})})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Anspruchsname"}),(0,r.jsx)(n.th,{children:"Typ"}),(0,r.jsx)(n.th,{children:"Beschreibung"}),(0,r.jsx)(n.th,{children:"Ben\xf6tigt userinfo?"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"organizations"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"string[]"})}),(0,r.jsx)(n.td,{children:"Die Organisations-IDs, denen der Benutzer angeh\xf6rt"}),(0,r.jsx)(n.td,{children:"Nein"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"organization_data"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"object[]"})}),(0,r.jsx)(n.td,{children:"Die Organisationsdaten, denen der Benutzer angeh\xf6rt"}),(0,r.jsx)(n.td,{children:"Ja"})]})]})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"urn:logto:scope:organization_roles"})})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Anspruchsname"}),(0,r.jsx)(n.th,{children:"Typ"}),(0,r.jsx)(n.th,{children:"Beschreibung"}),(0,r.jsx)(n.th,{children:"Ben\xf6tigt userinfo?"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"organization_roles"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"string[]"})}),(0,r.jsxs)(n.td,{children:["Die Organisationsrollen, denen der Benutzer angeh\xf6rt, im Format ",(0,r.jsx)(n.code,{children:"<organization_id>:<role_name>"})]}),(0,r.jsx)(n.td,{children:"Nein"})]})})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsxs)(n.p,{children:['In Anbetracht der Leistung und der Datengr\xf6\xdfe bedeutet "Ben\xf6tigt userinfo?" "Ja", dass der Anspruch nicht im ID-Token angezeigt wird, sondern in der Antwort des ',(0,r.jsx)(n.a,{href:"https://openid.net/specs/openid-connect-core-1_0.html#UserInfo",children:"userinfo-Endpunkts"})," zur\xfcckgegeben wird."]})]})}function d(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},68612:(e,n,t)=>{t.d(n,{Ay:()=>c,RM:()=>o});var r=t(25105),i=t(79621),s=t(49993);const o=[...s.RM];function d(e){const n={a:"a",p:"p",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.p,{children:["Logto verwendet OIDC ",(0,r.jsx)(n.a,{href:"https://openid.net/specs/openid-connect-core-1_0.html#Claims",children:"Berechtigungen und Anspr\xfcche Konventionen"}),", um die Berechtigungen und Anspr\xfcche f\xfcr das Abrufen von Benutzerinformationen aus dem ID-Token und dem OIDC ",(0,r.jsx)("a",{href:"https://openid.net/specs/openid-connect-core-1_0.html#UserInfo",children:"userinfo endpoint"}),' zu definieren. Sowohl "Berechtigung (Scope)" als auch "Anspruch (Claim)" sind Begriffe aus den OAuth 2.0 und OpenID Connect (OIDC) Spezifikationen.']}),"\n","\n",e.configScopesCode&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{children:"Kurz gesagt, wenn du eine Berechtigung anforderst, erh\xe4ltst du die entsprechenden Anspr\xfcche in den Benutzerinformationen. Zum Beispiel, wenn du die `email` Berechtigung anforderst, erh\xe4ltst du die `email` und `email_verified` Daten des Benutzers."}),(0,r.jsx)("p",{children:"Standardm\xe4\xdfig fordert das Logto SDK immer drei Berechtigungen an: `openid`, `profile` und `offline_access`, und es gibt keine M\xf6glichkeit, diese Standardberechtigungen zu entfernen. Aber du kannst weitere Berechtigungen hinzuf\xfcgen, wenn du Logto konfigurierst:"}),e.configScopesCode]}),"\n",(0,r.jsx)(s.Ay,{})]})}function c(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},59141:(e,n,t)=>{t.d(n,{Ay:()=>d,RM:()=>s});var r=t(25105),i=t(79621);const s=[];function o(e){const n={admonition:"admonition",code:"code",mermaid:"mermaid",p:"p",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"Standardm\xe4\xdfig werden begrenzte Anspr\xfcche zur\xfcckgegeben. Wenn du mehr Informationen ben\xf6tigst, kannst du zus\xe4tzliche Berechtigungen anfordern, um auf mehr Anspr\xfcche zuzugreifen."}),"\n",(0,r.jsx)(n.admonition,{type:"info",children:(0,r.jsx)(n.p,{children:'Ein "Anspruch (Claim)" ist eine Behauptung \xfcber ein Subjekt; eine "Berechtigung (Scope)" ist eine Gruppe von Anspr\xfcchen. Im aktuellen Fall ist ein Anspruch ein Informationsst\xfcck \xfcber den Benutzer.'})}),"\n",(0,r.jsx)(n.p,{children:"Hier ist ein nicht-normatives Beispiel f\xfcr die Beziehung zwischen Berechtigung und Anspruch:"}),"\n",(0,r.jsx)(n.mermaid,{value:"classDiagram\n  class openid {\n    +sub\n  }\n\n  class profile {\n    +name\n    +username\n    +picture\n    +...\n  }\n\n  class email {\n    +email\n    +email_verified\n  }\n\n  class phone {\n    +phone_number\n    +phone_number_verified\n  }"}),"\n",(0,r.jsx)(n.admonition,{type:"tip",children:(0,r.jsx)(n.p,{children:'Der "sub"-Anspruch bedeutet "Subjekt", was der eindeutige Identifikator des Benutzers ist (d. h. Benutzer-ID).'})}),"\n",(0,r.jsxs)(n.p,{children:["Das Logto SDK wird immer drei Berechtigungen anfordern: ",(0,r.jsx)(n.code,{children:"openid"}),", ",(0,r.jsx)(n.code,{children:"profile"})," und ",(0,r.jsx)(n.code,{children:"offline_access"}),"."]})]})}function d(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},95343:(e,n,t)=>{t.d(n,{Ay:()=>c,Ip:()=>s,RM:()=>o});var r=t(25105),i=t(79621);const s="http://localhost:3000/",o=[];function d(e){const n={admonition:"admonition",p:"p",...(0,i.R)(),...e.components};return(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsxs)(n.p,{children:["In den folgenden Code-Snippets gehen wir davon aus, dass deine App unter ",(0,r.jsx)("code",{children:s})," l\xe4uft."]})})}function c(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},61221:(e,n,t)=>{t.d(n,{Ay:()=>a,Ip:()=>s,RM:()=>d,YF:()=>o});var r=t(25105),i=t(79621);const s="http://localhost:3000/",o=`${s}callback`,d=[{value:"Redirect-URIs konfigurieren",id:"configure-redirect-uris",level:4}];function c(e){const n={h4:"h4",p:"p",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:["\n","\n",(0,r.jsx)(n.h4,{id:"configure-redirect-uris",children:"Redirect-URIs konfigurieren"}),"\n",(0,r.jsxs)(n.p,{children:["Wechsle zur Anwendungsdetailseite der Logto-Konsole. F\xfcge eine Redirect-URI ",(0,r.jsx)("code",{children:e.redirectUri??"http://localhost:3000/callback"})," hinzu."]}),"\n",(0,r.jsx)("img",{alt:"Redirect-URI in der Logto-Konsole",src:"/img/assets/web-redirect-uri.png",width:"600px"}),"\n",(0,r.jsxs)(n.p,{children:["Genau wie beim Anmelden sollten Benutzer zu Logto weitergeleitet werden, um sich von der gemeinsamen Sitzung abzumelden. Sobald dies abgeschlossen ist, w\xe4re es ideal, den Benutzer zur\xfcck zu deiner Website zu leiten. F\xfcge zum Beispiel ",(0,r.jsx)("code",{children:s})," als Redirect-URI nach dem Abmelden hinzu."]}),"\n",(0,r.jsx)(n.p,{children:'Klicke dann auf "Speichern", um die \xc4nderungen zu speichern.'})]})}function a(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},71725:(e,n,t)=>{t.d(n,{Ay:()=>c,RM:()=>o});var r=t(25105),i=t(79621),s=t(88423);const o=[...s.RM];function d(e){const n={hr:"hr",li:"li",mermaid:"mermaid",ol:"ol",p:"p",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"Bevor wir ins Detail gehen, hier ein schneller \xdcberblick \xfcber die Endbenutzererfahrung. Der Anmeldeprozess l\xe4sst sich wie folgt vereinfachen:"}),"\n",(0,r.jsx)(n.mermaid,{value:"graph LR\n    A(Deine App) --\x3e|1\\. Anmeldung ausl\xf6sen| B(Logto)\n    B --\x3e|2\\. Anmeldung abschlie\xdfen| A"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Deine App l\xf6st die Anmeldemethode aus."}),"\n",(0,r.jsx)(n.li,{children:"Der Benutzer wird auf die Logto-Anmeldeseite umgeleitet. Bei nativen Apps wird der Systembrowser ge\xf6ffnet."}),"\n",(0,r.jsx)(n.li,{children:"Der Benutzer meldet sich an und wird zur\xfcck zu deiner App umgeleitet (konfiguriert als Redirect-URI)."}),"\n"]}),"\n",(0,r.jsx)(s.Ay,{}),"\n",(0,r.jsx)(n.hr,{})]})}function c(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},36369:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>te,contentTitle:()=>ne,default:()=>se,frontMatter:()=>ee,metadata:()=>r,toc:()=>re});const r=JSON.parse('{"id":"quick-starts/framework/next-app-router/README","title":"Authentifizierung zu deiner Next.js (App Router)-Anwendung hinzuf\xfcgen","description":"Voraussetzungen \\\\","source":"@site/i18n/de/docusaurus-plugin-content-docs/current/quick-starts/framework/next-app-router/README.mdx","sourceDirName":"quick-starts/framework/next-app-router","slug":"/quick-starts/next-app-router","permalink":"/de/quick-starts/next-app-router","draft":false,"unlisted":false,"editUrl":"https://github.com/logto-io/docs/tree/master/i18n/de/docusaurus-plugin-content-docs/current/quick-starts/framework/next-app-router/README.mdx","tags":[],"version":"current","frontMatter":{"slug":"/quick-starts/next-app-router","sidebar_label":"Next.js (App Router)","sidebar_custom_props":{"logoFilename":"next.svg","darkLogoFilename":"next-dark.svg","description":"Next.js App Router ist ein neues Paradigma zum Erstellen von Anwendungen mit den neuesten Funktionen von React."}},"sidebar":"quickStartSidebar","previous":{"title":"Next.js (Pages Router)","permalink":"/de/quick-starts/next"},"next":{"title":"Auth.js (Next Auth)","permalink":"/de/quick-starts/next-auth"}}');var i=t(25105),s=t(79621),o=t(44466),d=t(99409),c=t(43711),a=t(11110),l=t(80173),u=t(67882),h=t(14076),p=t(68612),g=t(59141);const x=[{value:"Benutzerinformationen anzeigen",id:"display-user-information",level:3},{value:"Benutzerinformationen in API-Routenhandlern abrufen",id:"get-user-information-in-api-route-handlers",level:3},{value:"Zus\xe4tzliche Anspr\xfcche anfordern",id:"request-additional-claims",level:3},...h.RM,...g.RM,...u.RM,{value:"Berechtigungen und Anspr\xfcche",id:"scopes-and-claims",level:3},...p.RM];function m(e){const n={a:"a",code:"code",h3:"h3",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h3,{id:"display-user-information",children:"Benutzerinformationen anzeigen"}),"\n",(0,i.jsxs)(n.p,{children:["Wenn der Benutzer angemeldet ist, wird der R\xfcckgabewert von ",(0,i.jsx)(n.code,{children:"getLogtoContext()"})," ein Objekt sein, das die Informationen des Benutzers enth\xe4lt. Du kannst diese Informationen in deiner App anzeigen:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",metastring:'title="app/page.tsx"',children:"import { getLogtoContext } from '@logto/next/server-actions';\nimport { logtoConfig } from './logto';\n\nexport default async function Home() {\n  const { claims } = await getLogtoContext(logtoConfig);\n\n  return (\n    <main>\n      {claims && (\n        <div>\n          <h2>Anspr\xfcche (Claims):</h2>\n          <table>\n            <thead>\n              <tr>\n                <th>Name</th>\n                <th>Wert</th>\n              </tr>\n            </thead>\n            <tbody>\n              {Object.entries(claims).map(([key, value]) => (\n                <tr key={key}>\n                  <td>{key}</td>\n                  <td>{String(value)}</td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      )}\n    </main>\n  );\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"get-user-information-in-api-route-handlers",children:"Benutzerinformationen in API-Routenhandlern abrufen"}),"\n",(0,i.jsxs)(n.p,{children:["Du kannst auch Benutzerinformationen in API-",(0,i.jsx)(n.a,{href:"https://nextjs.org/docs/app/building-your-application/routing/route-handlers",children:"Routenhandlern"})," abrufen:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",metastring:'title="app/api/profile/route.ts"',children:"import { getLogtoContext } from '@logto/next/server-actions';\nimport { logtoConfig } from '../../logto';\n\nexport const dynamic = 'force-dynamic';\n\nexport async function GET() {\n  const { claims } = await getLogtoContext(logtoConfig);\n\n  return Response.json({ claims });\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"request-additional-claims",children:"Zus\xe4tzliche Anspr\xfcche anfordern"}),"\n",(0,i.jsx)(h.Ay,{method:"getLogtoContext"}),"\n",(0,i.jsx)(g.Ay,{}),"\n",(0,i.jsx)(n.p,{children:"Um zus\xe4tzliche Berechtigungen anzufordern, kannst du die Parameter konfigurieren, wenn du den Logto-Client initialisierst:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",metastring:'title="app/logto.ts"',children:"import { UserScope, LogtoNextConfig } from '@logto/next';\n\nexport const logtoConfig: LogtoNextConfig = {\n  // highlight-next-line\n  scopes: [UserScope.Email, UserScope.Phone], // F\xfcge bei Bedarf weitere Berechtigungen hinzu\n  // ...andere Konfigurationen\n});\n"})}),"\n",(0,i.jsx)(n.p,{children:"Dann kannst du auf die zus\xe4tzlichen Anspr\xfcche in der Kontextantwort zugreifen:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",metastring:'title="app/page.tsx"',children:"export default async function Home() {\n  const { claims: { email } = {}, } = await getLogtoContext(logtoConfig);\n\n  return (\n    <div>\n      {email && <p>Email: {email}</p>}\n    </div>\n  );\n};\n\nexport default Home;\n"})}),"\n",(0,i.jsx)(u.Ay,{type:"option",configOption:"fetchUserInfo",value:"userInfo",codeSnippet:(0,i.jsx)(l.A,{language:"ts",title:"app/page.tsx",children:"export default async function Home() {\nconst { userInfo } = await getLogtoContext(logtoConfig, { fetchUserInfo: true });\nreturn (\n  <div>\n    {userInfo && <p>Email: {userInfo.email}</p>}\n  </div>\n);\n};\n\nexport default Home;"})}),"\n",(0,i.jsx)(n.h3,{id:"scopes-and-claims",children:"Berechtigungen und Anspr\xfcche"}),"\n",(0,i.jsx)(p.Ay,{})]})}function j(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(m,{...e})}):m(e)}function f(e){const n={a:"a",admonition:"admonition",li:"li",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsx)(n.admonition,{type:"tip",children:(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Das Beispielprojekt ist in unserem ",(0,i.jsx)(n.a,{href:"https://github.com/logto-io/js/tree/master/packages/next-server-actions-sample",children:"SDK-Repository"})," verf\xfcgbar."]}),"\n",(0,i.jsxs)(n.li,{children:["Das Beispiel basiert auf dem Next.js ",(0,i.jsx)(n.a,{href:"https://nextjs.org/docs",children:"App Router"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Das Tutorial-Video ist auf unserem ",(0,i.jsx)(n.a,{href:"https://youtu.be/Y2UYvH83Kk4",children:"YouTube-Kanal"})," verf\xfcgbar."]}),"\n"]})})}function b(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(f,{...e})}):f(e)}var k=t(67725),z=t(95343),v=t(61221),A=t(71725);const w=[];function R(e){const n={admonition:"admonition",p:"p",...(0,s.R)(),...e.components};return(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsx)(n.p,{children:'Es ist nicht erlaubt, inline "use server" annotierte Server Actions in Client Components zu definieren. Wir m\xfcssen sie \xfcber Props von einem Server Component weitergeben.'})})}function y(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(R,{...e})}):R(e)}const B=[{value:"Konfigurationen vorbereiten",id:"prepare-configs",level:3},{value:"Redirect-URIs konfigurieren",id:"configure-redirect-uris",level:3},...A.RM,...z.RM,...v.RM,{value:"Callback behandeln",id:"handle-callback",level:3},{value:"Sign-In und Sign-Out implementieren",id:"implement-sign-in-and-sign-out",level:3},{value:"Sign-In- und Sign-Out-Button implementieren",id:"implement-sign-in-and-sign-out-button",level:4},{value:"Buttons zur Startseite hinzuf\xfcgen",id:"add-buttons-to-home-page",level:4},...w,...k.RM];function S(e){const n={br:"br",code:"code",h3:"h3",h4:"h4",p:"p",pre:"pre",strong:"strong",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h3,{id:"prepare-configs",children:"Konfigurationen vorbereiten"}),"\n",(0,i.jsx)(n.p,{children:"Bereite die Konfiguration f\xfcr den Logto-Client vor:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",metastring:'title="app/logto.ts"',children:"import { LogtoNextConfig } from '@logto/next';\n\nexport const logtoConfig: LogtoNextConfig = {\n  appId: '<your-application-id>',\n  appSecret: '<your-app-secret-copied-from-console>',\n  endpoint: '<your-logto-endpoint>', // Z. B. http://localhost:3001\n  baseUrl: '<your-nextjs-app-base-url>', // Z. B. http://localhost:3000\n  cookieSecret: 'complex_password_at_least_32_characters_long',\n  cookieSecure: process.env.NODE_ENV === 'production',\n};\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Hinweis:"}),(0,i.jsx)(n.br,{}),"\n","Wenn du eine Umgebungsvariable f\xfcr ",(0,i.jsx)(n.code,{children:"cookieSecret"})," verwendest (z. B. ",(0,i.jsx)(n.code,{children:"process.env.LOGTO_COOKIE_SECRET"}),"), stelle sicher, dass der Wert mindestens 32 Zeichen lang ist. Wenn diese Anforderung nicht erf\xfcllt ist, wirft Logto w\xe4hrend des Builds oder zur Laufzeit folgenden Fehler:"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"TypeError: Either sessionWrapper or encryptionKey must be provided for CookieStorage"})}),"\n",(0,i.jsx)(n.p,{children:"Um diesen Fehler zu vermeiden, stelle sicher, dass die Umgebungsvariable korrekt gesetzt ist oder gib einen Fallback-Wert mit einer Mindestl\xe4nge von 32 Zeichen an."}),"\n",(0,i.jsx)(n.h3,{id:"configure-redirect-uris",children:"Redirect-URIs konfigurieren"}),"\n",(0,i.jsx)(A.Ay,{}),"\n",(0,i.jsx)(z.Ay,{}),"\n",(0,i.jsx)(v.Ay,{}),"\n",(0,i.jsx)(n.h3,{id:"handle-callback",children:"Callback behandeln"}),"\n",(0,i.jsx)(n.p,{children:"Nachdem sich der Benutzer angemeldet hat, leitet Logto den Benutzer zur\xfcck zur oben konfigurierten Redirect-URI. Es gibt jedoch noch Dinge zu tun, damit deine Anwendung richtig funktioniert."}),"\n",(0,i.jsxs)(n.p,{children:["Wir stellen eine Hilfsfunktion ",(0,i.jsx)(n.code,{children:"handleSignIn"})," bereit, um den Sign-In-Callback zu behandeln:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",metastring:'title="app/callback/route.ts"',children:"import { handleSignIn } from '@logto/next/server-actions';\nimport { redirect } from 'next/navigation';\nimport { NextRequest } from 'next/server';\nimport { logtoConfig } from '../logto';\n\nexport async function GET(request: NextRequest) {\n  const searchParams = request.nextUrl.searchParams;\n  await handleSignIn(logtoConfig, searchParams);\n\n  redirect('/');\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"implement-sign-in-and-sign-out",children:"Sign-In und Sign-Out implementieren"}),"\n",(0,i.jsx)(n.h4,{id:"implement-sign-in-and-sign-out-button",children:"Sign-In- und Sign-Out-Button implementieren"}),"\n",(0,i.jsxs)(n.p,{children:["Im Next.js App Router werden Ereignisse in Client-Komponenten behandelt, daher m\xfcssen wir zuerst zwei Komponenten erstellen: ",(0,i.jsx)(n.code,{children:"SignIn"})," und ",(0,i.jsx)(n.code,{children:"SignOut"}),"."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",metastring:'title="app/sign-in.tsx"',children:"'use client';\n\ntype Props = {\n  onSignIn: () => Promise<void>;\n};\n\nconst SignIn = ({ onSignIn }: Props) => {\n  return (\n    <button\n      onClick={() => {\n        onSignIn();\n      }}\n    >\n      Sign In\n    </button>\n  );\n};\n\nexport default SignIn;\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",metastring:'title="app/sign-out.tsx"',children:"'use client';\n\ntype Props = {\n  onSignOut: () => Promise<void>;\n};\n\nconst SignOut = ({ onSignOut }: Props) => {\n  return (\n    <button\n      onClick={() => {\n        onSignOut();\n      }}\n    >\n      Sign Out\n    </button>\n  );\n};\n\nexport default SignOut;\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Denke daran, ",(0,i.jsx)(n.code,{children:"'use client'"})," am Anfang der Datei hinzuzuf\xfcgen, um anzugeben, dass diese Komponenten Client-Komponenten sind."]}),"\n",(0,i.jsx)(n.h4,{id:"add-buttons-to-home-page",children:"Buttons zur Startseite hinzuf\xfcgen"}),"\n",(0,i.jsx)(y,{}),"\n",(0,i.jsxs)(n.p,{children:["F\xfcgen wir nun die Sign-In- und Sign-Out-Buttons auf deiner Startseite hinzu. Wir m\xfcssen die Serveraktionen im SDK bei Bedarf aufrufen. Um dabei zu helfen, verwende ",(0,i.jsx)(n.code,{children:"getLogtoContext"}),", um den Authentifizierungsstatus abzurufen."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",metastring:'title="app/page.tsx"',children:"import { getLogtoContext, signIn, signOut } from '@logto/next/server-actions';\nimport SignIn from './sign-in';\nimport SignOut from './sign-out';\nimport { logtoConfig } from './logto';\n\nconst Home = () => {\n  const { isAuthenticated, claims } = await getLogtoContext(logtoConfig);\n\n  return (\n    <nav>\n      {isAuthenticated ? (\n        <p>\n          Hallo, {claims?.sub},\n          <SignOut\n            onSignOut={async () => {\n              'use server';\n\n              await signOut(logtoConfig);\n            }}\n          />\n        </p>\n      ) : (\n        <p>\n          <SignIn\n            onSignIn={async () => {\n              'use server';\n\n              await signIn(logtoConfig);\n            }}\n          />\n        </p>\n      )}\n    </nav>\n  );\n};\n\nexport default Home;\n"})}),"\n",(0,i.jsx)(k.Ay,{})]})}function C(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(S,{...e})}):S(e)}var I=t(3622);function N(e){const n={code:"code",pre:"pre",...(0,s.R)(),...e.components};return(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",metastring:'title="app/logto.ts"',children:"export const logtoConfig = {\n  // ...other configs\n  // highlight-next-line\n  resources: ['https://shopping.your-app.com/api', 'https://store.your-app.com/api'], // API-Ressourcen hinzuf\xfcgen\n};\n"})})}function D(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(N,{...e})}):N(e)}function T(e){const n={code:"code",pre:"pre",...(0,s.R)(),...e.components};return(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",metastring:'title="app/logto.ts"',children:"export const logtoConfig = {\n  // ...other configs\n  // highlight-start\n  scopes: ['shopping:read', 'shopping:write', 'store:read', 'store:write'],\n  resources: ['https://shopping.your-app.com/api', 'https://store.your-app.com/api'],\n  // highlight-end\n};\n"})})}function O(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(T,{...e})}):T(e)}function L(e){const n={code:"code",pre:"pre",...(0,s.R)(),...e.components};return(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",metastring:'title="app/logto.ts"',children:"export const logtoConfig = {\n  // ...other configs\n  // highlight-start\n  scopes: ['read', 'write'],\n  resources: ['https://shopping.your-app.com/api', 'https://store.your-app.com/api'],\n  // highlight-end\n};\n"})})}function _(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(L,{...e})}):L(e)}const E=[...I.RM];function M(e){return(0,i.jsx)(I.Ay,{configResourcesCode:(0,i.jsx)(D,{}),configResourcesWithScopesCode:(0,i.jsx)(O,{}),configResourcesWithSharedScopesCode:(0,i.jsx)(_,{})})}function P(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(M,{...e})}):M()}var U=t(60077);function F(e){const n={code:"code",pre:"pre",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(y,{}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",metastring:'title="app/page.ts"',children:"import { getAccessToken } from '@logto/next/server-actions';\nimport { logtoConfig } from './logto';\nimport GetAccessToken from './get-access-token';\n\nexport default async function Home() {\n  return (\n    <main>\n      <GetAccessToken\n        onGetAccessToken={async () => {\n          'use server';\n\n          return getAccessToken(logtoConfig, 'https://shopping.your-app.com/api');\n        }}\n      />\n    </main>\n  );\n}\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",metastring:'title="app/get-access-token.ts"',children:"'use client';\n\ntype Props = {\n  onGetAccessToken: () => Promise<string>;\n};\n\nconst GetAccessToken = ({ onGetAccessToken }: Props) => {\n  return (\n    <button\n      onClick={async () => {\n        const token = await onGetAccessToken();\n        console.log(token);\n      }}\n    >\n      Zugangstoken abrufen (siehe Konsolenprotokoll)\n    </button>\n  );\n};\n\nexport default GetAccessToken;\n"})})]})}function W(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(F,{...e})}):F(e)}const K=[...U.RM];function q(e){return(0,i.jsx)(U.Ay,{getAccessTokenApi:"getAccessToken",getAccessTokenCode:(0,i.jsx)(W,{})})}function Z(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(q,{...e})}):q()}var G=t(80217);function V(e){const n={code:"code",pre:"pre",...(0,s.R)(),...e.components};return(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",metastring:'title="app/logto.ts"',children:"import { UserScope } from '@logto/next';\n\nexport const logtoConfig = {\n  // ...other configs\n  // highlight-next-line\n  scopes: [UserScope.Organizations],\n};\n"})})}function H(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(V,{...e})}):V(e)}function J(e){const n={code:"code",pre:"pre",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(y,{}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",metastring:'title="app/page.ts"',children:"import { getOrganizationToken } from '@logto/next/server-actions';\nimport { logtoConfig } from './logto';\nimport GetOrganizationToken from './get-organization-token';\n\nexport default async function Home() {\n  return (\n    <main>\n      <GetOrganizationToken\n        onGetOrganizationToken={async () => {\n          'use server';\n\n          return getOrganizationToken(logtoConfig, 'organization-id');\n        }}\n      />\n    </main>\n  );\n}\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",metastring:'title="app/get-organization-token.ts"',children:"'use client';\n\ntype Props = {\n  onGetOrganizationToken: () => Promise<string>;\n};\n\nconst GetOrganizationToken = ({ onGetOrganizationToken }: Props) => {\n  return (\n    <button\n      onClick={async () => {\n        const token = await onGetOrganizationToken();\n        console.log(token);\n      }}\n    >\n      Organisationstoken abrufen (siehe Konsolenprotokoll)\n    </button>\n  );\n};\n\nexport default GetOrganizationToken;\n"})})]})}function $(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(J,{...e})}):J(e)}const Y=[...G.RM];function Q(e){return(0,i.jsx)(G.Ay,{organizationScope:"UserScope.Organizations",configOrganizationCode:(0,i.jsx)(H,{}),getOrganizationAccessTokenCode:(0,i.jsx)($,{})})}function X(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(Q,{...e})}):Q()}const ee={slug:"/quick-starts/next-app-router",sidebar_label:"Next.js (App Router)",sidebar_custom_props:{logoFilename:"next.svg",darkLogoFilename:"next-dark.svg",description:"Next.js App Router ist ein neues Paradigma zum Erstellen von Anwendungen mit den neuesten Funktionen von React."}},ne="Authentifizierung zu deiner Next.js (App Router)-Anwendung hinzuf\xfcgen",te={},re=[{value:"Voraussetzungen",id:"prerequisites",level:2},{value:"Installation",id:"installation",level:2},...a.RM,{value:"Integration",id:"integration",level:2},...B,{value:"Benutzerinformationen abrufen",id:"fetch-user-information",level:2},...x,{value:"API-Ressourcen",id:"api-resources",level:2},...o.RM,{value:"Logto-Client konfigurieren",id:"configure-logto-client",level:3},...E,{value:"Zugangstoken f\xfcr die API-Ressource abrufen",id:"fetch-access-token-for-the-api-resource",level:3},...K,{value:"Organisationstokens abrufen",id:"fetch-organization-tokens",level:3},...Y,{value:"Externen Sitzungspeicher verwenden",id:"use-external-session-storage",level:2},...c.RM,{value:"Weiterf\xfchrende Lekt\xfcre",id:"further-readings",level:2},...d.RM];function ie(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"authentifizierung-zu-deiner-nextjs-app-router-anwendung-hinzuf\xfcgen",children:"Authentifizierung zu deiner Next.js (App Router)-Anwendung hinzuf\xfcgen"})}),"\n",(0,i.jsx)(b,{}),"\n",(0,i.jsx)(n.h2,{id:"prerequisites",children:"Voraussetzungen"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Ein ",(0,i.jsx)(n.a,{href:"https://cloud.logto.io",children:"Logto Cloud"}),"-Konto oder ein ",(0,i.jsx)(n.a,{href:"/introduction/set-up-logto-oss",children:"selbst gehostetes Logto"}),"."]}),"\n",(0,i.jsx)(n.li,{children:"Eine Logto traditionelle Anwendung erstellt."}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,i.jsx)(a.Ay,{}),"\n",(0,i.jsx)(n.h2,{id:"integration",children:"Integration"}),"\n",(0,i.jsx)(C,{}),"\n",(0,i.jsx)(n.h2,{id:"fetch-user-information",children:"Benutzerinformationen abrufen"}),"\n",(0,i.jsx)(j,{}),"\n",(0,i.jsx)(n.h2,{id:"api-resources",children:"API-Ressourcen"}),"\n",(0,i.jsx)(o.Ay,{}),"\n",(0,i.jsx)(n.h3,{id:"configure-logto-client",children:"Logto-Client konfigurieren"}),"\n",(0,i.jsx)(P,{}),"\n",(0,i.jsx)(n.h3,{id:"fetch-access-token-for-the-api-resource",children:"Zugangstoken f\xfcr die API-Ressource abrufen"}),"\n",(0,i.jsx)(Z,{}),"\n",(0,i.jsxs)(n.p,{children:["Wenn du ein Zugangstoken in der Serverkomponente abrufen musst, kannst du die Funktion ",(0,i.jsx)(n.code,{children:"getAccessTokenRSC"})," verwenden:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",metastring:'title="app/page.tsx"',children:"import { getAccessTokenRSC } from '@logto/next/server-actions';\nimport { logtoConfig } from './logto';\n\nexport default async function Home() {\n  const accessToken = await getAccessTokenRSC(logtoConfig, 'https://shopping.your-app.com/api');\n\n  return (\n    <main>\n      <p>Zugangstoken: {accessToken}</p>\n    </main>\n  );\n}\n"})}),"\n",(0,i.jsx)(n.admonition,{type:"tip",children:(0,i.jsxs)(n.p,{children:["HTTP erlaubt es nicht, Cookies nach Beginn des Streamings zu setzen, ",(0,i.jsx)(n.code,{children:"getAccessTokenRSC"})," kann den Cookie-Wert nicht aktualisieren, sodass, wenn das Zugangstoken aktualisiert wird, es nicht in der Sitzung gespeichert wird. Es wird empfohlen, die Funktion ",(0,i.jsx)(n.code,{children:"getAccessToken"})," auf der Client-Seite oder in Routen-Handlern zu verwenden."]})}),"\n",(0,i.jsx)(n.h3,{id:"fetch-organization-tokens",children:"Organisationstokens abrufen"}),"\n",(0,i.jsx)(X,{}),"\n",(0,i.jsxs)(n.p,{children:["Wenn du ein Organisationstoken in der Serverkomponente abrufen musst, kannst du die Funktion ",(0,i.jsx)(n.code,{children:"getOrganizationTokenRSC"})," verwenden:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",metastring:'title="app/page.tsx"',children:"import { getOrganizationTokenRSC } from '@logto/next/server-actions';\nimport { logtoConfig } from './logto';\n\nexport default async function Home() {\n  const token = await getOrganizationTokenRSC(logtoConfig, 'organization-id');\n\n  return (\n    <main>\n      <p>Organisationstoken: {token}</p>\n    </main>\n  );\n}\n"})}),"\n",(0,i.jsx)(n.admonition,{type:"tip",children:(0,i.jsxs)(n.p,{children:["HTTP erlaubt es nicht, Cookies nach Beginn des Streamings zu setzen, ",(0,i.jsx)(n.code,{children:"getOrganizationTokenRSC"})," kann den Cookie-Wert nicht aktualisieren, sodass, wenn das Zugangstoken aktualisiert wird, es nicht in der Sitzung gespeichert wird. Es wird empfohlen, die Funktion ",(0,i.jsx)(n.code,{children:"getOrganizationToken"})," auf der Client-Seite oder in Routen-Handlern zu verwenden."]})}),"\n",(0,i.jsx)(n.h2,{id:"use-external-session-storage",children:"Externen Sitzungspeicher verwenden"}),"\n",(0,i.jsx)(c.Ay,{}),"\n",(0,i.jsx)(n.h2,{id:"further-readings",children:"Weiterf\xfchrende Lekt\xfcre"}),"\n",(0,i.jsx)(d.Ay,{})]})}function se(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(ie,{...e})}):ie(e)}},43711:(e,n,t)=>{t.d(n,{Ay:()=>d,RM:()=>s});var r=t(25105),i=t(79621);const s=[];function o(e){const n={code:"code",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"Das SDK verwendet standardm\xe4\xdfig Cookies, um verschl\xfcsselte Sitzungsdaten zu speichern. Dieser Ansatz ist sicher, erfordert keine zus\xe4tzliche Infrastruktur und funktioniert besonders gut in serverlosen Umgebungen wie Vercel."}),"\n",(0,r.jsxs)(n.p,{children:["Es gibt jedoch Zeiten, in denen du Sitzungsdaten extern speichern musst. Zum Beispiel, wenn deine Sitzungsdaten zu gro\xdf f\xfcr Cookies werden, insbesondere wenn du mehrere aktive Organisation-Sitzungen gleichzeitig aufrechterhalten musst. In diesen F\xe4llen kannst du eine externe Sitzungspeicherung mit der Option ",(0,r.jsx)(n.code,{children:"sessionWrapper"})," implementieren:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"import { MemorySessionWrapper } from './storage';\n\nexport const config = {\n  // ...\n  sessionWrapper: new MemorySessionWrapper(),\n};\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"import { randomUUID } from 'node:crypto';\n\nimport { type SessionWrapper, type SessionData } from '@logto/next';\n\nexport class MemorySessionWrapper implements SessionWrapper {\n  private readonly storage = new Map<string, unknown>();\n\n  async wrap(data: unknown, _key: string): Promise<string> {\n    const sessionId = randomUUID();\n    this.storage.set(sessionId, data);\n    return sessionId;\n  }\n\n  async unwrap(value: string, _key: string): Promise<SessionData> {\n    if (!value) {\n      return {};\n    }\n\n    const data = this.storage.get(value);\n    return data ?? {};\n  }\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:"Die obige Implementierung verwendet einen einfachen In-Memory-Speicher. In einer Produktionsumgebung m\xf6chtest du m\xf6glicherweise eine best\xe4ndigere Speicherl\xf6sung verwenden, wie Redis oder eine Datenbank."})]})}function d(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},11110:(e,n,t)=>{t.d(n,{Ay:()=>c,RM:()=>o});var r=t(25105),i=t(79621),s=t(42865);const o=[...s.RM];function d(e){return(0,r.jsx)(s.Ay,{packageName:"@logto/next"})}function c(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d()}},38552:(e,n,t)=>{t.d(n,{A:()=>o});t(58101);var r=t(13526);const i={tabItem:"tabItem_dgSZ"};var s=t(25105);function o(e){let{children:n,hidden:t,className:o}=e;return(0,s.jsx)("div",{role:"tabpanel",className:(0,r.A)(i.tabItem,o),hidden:t,children:n})}},22002:(e,n,t)=>{t.d(n,{A:()=>v});var r=t(58101),i=t(13526),s=t(60755),o=t(55234),d=t(6635),c=t(4100),a=t(35661),l=t(42752);function u(e){return r.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function h(e){const{values:n,children:t}=e;return(0,r.useMemo)((()=>{const e=n??function(e){return u(e).map((e=>{let{props:{value:n,label:t,attributes:r,default:i}}=e;return{value:n,label:t,attributes:r,default:i}}))}(t);return function(e){const n=(0,a.XI)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,t])}function p(e){let{value:n,tabValues:t}=e;return t.some((e=>e.value===n))}function g(e){let{queryString:n=!1,groupId:t}=e;const i=(0,o.W6)(),s=function(e){let{queryString:n=!1,groupId:t}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:n,groupId:t});return[(0,c.aZ)(s),(0,r.useCallback)((e=>{if(!s)return;const n=new URLSearchParams(i.location.search);n.set(s,e),i.replace({...i.location,search:n.toString()})}),[s,i])]}function x(e){const{defaultValue:n,queryString:t=!1,groupId:i}=e,s=h(e),[o,c]=(0,r.useState)((()=>function(e){let{defaultValue:n,tabValues:t}=e;if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!p({value:n,tabValues:t}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${t.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const r=t.find((e=>e.default))??t[0];if(!r)throw new Error("Unexpected error: 0 tabValues");return r.value}({defaultValue:n,tabValues:s}))),[a,u]=g({queryString:t,groupId:i}),[x,m]=function(e){let{groupId:n}=e;const t=function(e){return e?`docusaurus.tab.${e}`:null}(n),[i,s]=(0,l.Dv)(t);return[i,(0,r.useCallback)((e=>{t&&s.set(e)}),[t,s])]}({groupId:i}),j=(()=>{const e=a??x;return p({value:e,tabValues:s})?e:null})();(0,d.A)((()=>{j&&c(j)}),[j]);return{selectedValue:o,selectValue:(0,r.useCallback)((e=>{if(!p({value:e,tabValues:s}))throw new Error(`Can't select invalid tab value=${e}`);c(e),u(e),m(e)}),[u,m,s]),tabValues:s}}var m=t(21929);const j={tabList:"tabList_osvQ",tabItem:"tabItem_dc4O"};var f=t(25105);function b(e){let{className:n,block:t,selectedValue:r,selectValue:o,tabValues:d}=e;const c=[],{blockElementScrollPositionUntilNextRender:a}=(0,s.a_)(),l=e=>{const n=e.currentTarget,t=c.indexOf(n),i=d[t].value;i!==r&&(a(n),o(i))},u=e=>{let n=null;switch(e.key){case"Enter":l(e);break;case"ArrowRight":{const t=c.indexOf(e.currentTarget)+1;n=c[t]??c[0];break}case"ArrowLeft":{const t=c.indexOf(e.currentTarget)-1;n=c[t]??c[c.length-1];break}}n?.focus()};return(0,f.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,i.A)("tabs",{"tabs--block":t},n),children:d.map((e=>{let{value:n,label:t,attributes:s}=e;return(0,f.jsx)("li",{role:"tab",tabIndex:r===n?0:-1,"aria-selected":r===n,ref:e=>{c.push(e)},onKeyDown:u,onClick:l,...s,className:(0,i.A)("tabs__item",j.tabItem,s?.className,{"tabs__item--active":r===n}),children:t??n},n)}))})}function k(e){let{lazy:n,children:t,selectedValue:s}=e;const o=(Array.isArray(t)?t:[t]).filter(Boolean);if(n){const e=o.find((e=>e.props.value===s));return e?(0,r.cloneElement)(e,{className:(0,i.A)("margin-top--md",e.props.className)}):null}return(0,f.jsx)("div",{className:"margin-top--md",children:o.map(((e,n)=>(0,r.cloneElement)(e,{key:n,hidden:e.props.value!==s})))})}function z(e){const n=x(e);return(0,f.jsxs)("div",{className:(0,i.A)("tabs-container",j.tabList),children:[(0,f.jsx)(b,{...n,...e}),(0,f.jsx)(k,{...n,...e})]})}function v(e){const n=(0,m.A)();return(0,f.jsx)(z,{...e,children:u(e.children)},String(n))}},55138:(e,n,t)=>{t.d(n,{A:()=>x});var r=t(28259),i=t(6097),s=t(58574),o=t(9484),d=t(76566),c=t(26346),a=t(17867),l=t(17510),u=t(13526),h=t(72355);const p={codeBlockContent:"codeBlockContent_m3Ux",codeBlockTitle:"codeBlockTitle_P25_",codeBlock:"codeBlock_qGQc",codeBlockStandalone:"codeBlockStandalone_zC50",codeBlockLines:"codeBlockLines_p187",codeBlockLinesWithNumbering:"codeBlockLinesWithNumbering_OFgW",buttonGroup:"buttonGroup_6DOT"};var g=t(25105);function x(e){let{children:n,className:t="",metastring:x,title:m,showLineNumbers:j,language:f}=e;const{prism:{defaultLanguage:b,magicComments:k}}=(0,r.p)(),z=function(e){return e?.toLowerCase()}(f??(0,s.Op)(t)??b),v=(0,i.A)(),A=(0,o.f)(),w=(0,s.wt)(x)||m,{lineClassNames:R,code:y}=(0,s.Li)(n,{metastring:x,language:z,magicComments:k}),B=j??(0,s._u)(x);return(0,g.jsxs)(d.A,{as:"div",className:(0,u.A)(t,z&&!t.includes(`language-${z}`)&&`language-${z}`),children:[w&&(0,g.jsx)("div",{className:p.codeBlockTitle,children:w}),(0,g.jsxs)("div",{className:p.codeBlockContent,children:[(0,g.jsx)(h.f4,{theme:v,code:y,language:z??"text",children:e=>{let{className:n,tokens:t,getLineProps:r,getTokenProps:i}=e;return(0,g.jsx)("pre",{ref:A.codeBlockRef,tabIndex:0,className:(0,u.A)(n,p.codeBlock,"thin-scrollbar"),children:(0,g.jsx)("code",{className:(0,u.A)(p.codeBlockLines,B&&p.codeBlockLinesWithNumbering),children:t.map(((e,n)=>(0,g.jsx)(a.A,{line:e,getLineProps:r,getTokenProps:i,classNames:R[n],showLineNumbers:B},n)))})})}}),(0,g.jsxs)("div",{className:p.buttonGroup,children:[(A.isEnabled||A.isCodeScrollable)&&(0,g.jsx)(l.A,{className:p.codeButton,isEnabled:A.isEnabled,onClick:()=>{A.toggle()}}),(0,g.jsx)(c.A,{className:p.codeButton,code:y})]})]})]})}}}]);