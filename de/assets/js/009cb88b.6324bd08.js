"use strict";(self.webpackChunk_logto_docs=self.webpackChunk_logto_docs||[]).push([[7359],{48484:(e,n,i)=>{i.d(n,{Ay:()=>a,RM:()=>s});var r=i(25105),t=i(79621);const s=[];function o(e){const n={admonition:"admonition",code:"code",p:"p",...(0,t.R)(),...e.components};return(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsxs)(n.p,{children:["\xdcberpr\xfcfe den ",(0,r.jsx)(n.code,{children:"organizations"}),"-Anspruch im ID-Token, um eine Liste der Organisations-IDs zu erhalten, denen der Benutzer angeh\xf6rt. Dieser Anspruch listet alle Organisationen auf, bei denen der Benutzer Mitglied ist, was es einfach macht, Organisationen in deiner App aufzulisten oder zu wechseln."]})})}function a(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},54183:(e,n,i)=>{i.d(n,{Ay:()=>a,RM:()=>s});var r=i(25105),t=i(79621);const s=[];function o(e){const n={admonition:"admonition",p:"p",...(0,t.R)(),...e.components};return(0,r.jsx)(n.admonition,{type:"warning",children:(0,r.jsx)(n.p,{children:"Derzeit unterst\xfctzt Logto nicht das direkte Abrufen von Organisationstoken (Organization token) aus dem Autorisierungscode-Flow. Du musst den Auffrischungstoken-Flow (Refresh token) verwenden, um ein Organisationstoken (Organization token) zu erhalten."})})}function a(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},13572:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>f,contentTitle:()=>m,default:()=>b,frontMatter:()=>p,metadata:()=>r,toc:()=>x});const r=JSON.parse('{"id":"authorization/organization-permissions","title":"Organisation (Nicht-API) Berechtigungen sch\xfctzen","description":"Verwende die Organisation-Vorlage, um organisationsweite Rollen und Berechtigungen in Logto zu verwalten und durchzusetzen. So steuerst du den Zugriff auf In-App-Funktionen und Workflows im Kontext einer Organisation.","source":"@site/i18n/de/docusaurus-plugin-content-docs/current/authorization/organization-permissions.mdx","sourceDirName":"authorization","slug":"/authorization/organization-permissions","permalink":"/de/authorization/organization-permissions","draft":false,"unlisted":false,"editUrl":"https://github.com/logto-io/docs/tree/master/i18n/de/docusaurus-plugin-content-docs/current/authorization/organization-permissions.mdx","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4},"sidebar":"docsSidebar","previous":{"title":"Globale API-Ressourcen sch\xfctzen","permalink":"/de/authorization/global-api-resources"},"next":{"title":"Organisationsebene API-Ressourcen sch\xfctzen","permalink":"/de/authorization/organization-level-api-resources"}}');var t=i(25105),s=i(79621),o=i(93855),a=i(39088),l=i(78506),c=i(42372),d=i(38552),u=i(22002),h=i(48484),g=i(54183);const p={sidebar_position:4},m="Organisation (Nicht-API) Berechtigungen sch\xfctzen",f={},x=[{value:"Was sind Organisation (Nicht-API) Berechtigungen?",id:"what-are-organization-non-api-permissions",level:2},{value:"So funktioniert es in Logto",id:"how-it-works-in-logto",level:2},{value:"\xdcberblick zur Implementierung",id:"implementation-overview",level:3},{value:"Autorisierungsablauf: Authentifizierung und Absicherung von Organisationsberechtigungen",id:"authorization-flow-authenticating-and-securing-organization-permissions",level:3},{value:"Implementierungsschritte",id:"implementation-steps",level:2},{value:"Organisationsberechtigungen registrieren",id:"register-organization-permissions",level:3},{value:"Organisationsrollen einrichten",id:"set-up-organization-roles",level:3},{value:"Organisationstokens (Nicht-API) erhalten",id:"obtain-organization-tokens-non-api",level:3},{value:"Auffrischungstoken-Flow",id:"refresh-token-flow",level:4},...h.RM,...g.RM,...h.RM,{value:"Client-Credentials-Flow",id:"client-credentials-flow",level:4},{value:"Organisationstokens validieren",id:"validate-organization-tokens",level:3},{value:"Best Practices und Sicherheitstipps",id:"best-practices-and-security-tips",level:2},{value:"FAQs",id:"faqs",level:2},{value:"Kann ich Organisations- und Nicht-Organisationsberechtigungen in einer Rolle mischen?",id:"can-i-mix-organization-and-non-organization-permissions-in-a-single-role",level:3},{value:"Wo sollte ich Nicht-API-Berechtigungen durchsetzen?",id:"where-should-i-enforce-non-api-permissions",level:3},{value:"Weiterf\xfchrende Literatur",id:"further-reading",level:2}];function j(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",mermaid:"mermaid",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,s.R)(),...e.components},{CloudLink:i,Details:r,Url:p}=n;return i||k("CloudLink",!0),r||k("Details",!0),p||k("Url",!0),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"organisation-nicht-api-berechtigungen-sch\xfctzen",children:"Organisation (Nicht-API) Berechtigungen sch\xfctzen"})}),"\n",(0,t.jsx)(n.p,{children:"Verwende die Organisation-Vorlage, um organisationsweite Rollen und Berechtigungen in Logto zu verwalten und durchzusetzen. So steuerst du den Zugriff auf In-App-Funktionen und Workflows im Kontext einer Organisation."}),"\n",(0,t.jsx)(n.h2,{id:"what-are-organization-non-api-permissions",children:"Was sind Organisation (Nicht-API) Berechtigungen?"}),"\n",(0,t.jsxs)(n.p,{children:["Organisationsberechtigungen (Nicht-API) steuern, was Benutzer ",(0,t.jsx)(n.strong,{children:"im Kontext einer Organisation"})," tun k\xf6nnen, werden aber ",(0,t.jsx)(n.strong,{children:"nicht auf API-Ebene durchgesetzt"}),". Stattdessen regeln sie den Zugriff auf App-Funktionen, UI-Elemente, Workflows oder Gesch\xe4ftsaktionen und nicht auf Backend-APIs."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Anwendungsf\xe4lle sind unter anderem"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Mitglieder innerhalb einer Organisation einladen oder verwalten"}),"\n",(0,t.jsx)(n.li,{children:"Organisationsrollen zuweisen oder \xe4ndern"}),"\n",(0,t.jsx)(n.li,{children:"Abrechnung, Einstellungen oder administrative Funktionen f\xfcr eine Organisation verwalten"}),"\n",(0,t.jsx)(n.li,{children:"Zugriff auf Dashboards, Analysen oder interne Tools, die keine API-Endpunkte haben"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Logto erm\xf6glicht es dir, diese Organisationsberechtigungen mit OAuth 2.1 und rollenbasierter Zugangskontrolle (RBAC) abzusichern und unterst\xfctzt dabei Multi-Tenant-SaaS-Architekturen."}),"\n",(0,t.jsxs)(n.p,{children:["Diese Berechtigungen werden \xfcber ",(0,t.jsx)(n.strong,{children:"Organisationsrollen"})," verwaltet, die in der ",(0,t.jsx)(n.a,{href:"/authorization/organization-template",children:"Organisation-Vorlage"})," definiert sind. Jede Organisation verwendet die gleiche Vorlage, was ein konsistentes Berechtigungsmodell \xfcber alle Organisationen hinweg sicherstellt."]}),"\n",(0,t.jsx)(n.h2,{id:"how-it-works-in-logto",children:"So funktioniert es in Logto"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Organisationsebene RBAC:"})," Rollen und Berechtigungen werden in der Organisation-Vorlage definiert. Wenn ein Benutzer einer Organisation beitritt, werden ihm eine oder mehrere Rollen zugewiesen, die bestimmte Berechtigungen gew\xe4hren."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Nicht-API-Durchsetzung:"})," Berechtigungen werden in der UI deiner App, im Workflow oder in der Backend-Logik gepr\xfcft und durchgesetzt, nicht zwingend durch ein API-Gateway."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Trennung vom API-Schutz:"})," Organisation (Nicht-API) Berechtigungen sind von API-Ressourcenberechtigungen getrennt. Du kannst beide f\xfcr fortgeschrittene Szenarien kombinieren."]}),"\n"]}),"\n",(0,t.jsx)("center",{children:(0,t.jsx)("img",{src:o.A,alt:"Organisation Berechtigungen RBAC",style:{maxWidth:"800px",width:"100%"}})}),"\n",(0,t.jsx)(n.h3,{id:"implementation-overview",children:"\xdcberblick zur Implementierung"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Definiere Organisationsberechtigungen"})," in Logto unter der Organisation-Vorlage."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Erstelle Organisationsrollen"}),", die die notwendigen Berechtigungen f\xfcr deine organisationsspezifischen Aktionen b\xfcndeln."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Weise Rollen"})," Benutzern oder Clients innerhalb jeder Organisation zu."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Erhalte ein Organisationstoken (JWT)"})," f\xfcr die aktuelle Organisation entweder \xfcber das Auffrischungstoken oder den Client-Credentials-Flow."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Validiere Zugangstokens"})," in der UI oder im Backend deiner App, um Organisationsberechtigungen durchzusetzen."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"authorization-flow-authenticating-and-securing-organization-permissions",children:"Autorisierungsablauf: Authentifizierung und Absicherung von Organisationsberechtigungen"}),"\n",(0,t.jsx)(n.p,{children:"Der folgende Ablauf zeigt, wie ein Client (Web, Mobile oder Backend) Organisationstokens f\xfcr die Durchsetzung von Nicht-API-Berechtigungen erh\xe4lt und verwendet."}),"\n",(0,t.jsx)(n.p,{children:"Beachte, dass der Ablauf keine vollst\xe4ndigen Details zu den erforderlichen Parametern oder Headern enth\xe4lt, sondern sich auf die wichtigsten Schritte konzentriert. Lies weiter, um zu sehen, wie der Ablauf in der Praxis funktioniert."}),"\n",(0,t.jsx)(n.mermaid,{value:"sequenceDiagram\n    participant Client\n    participant Logto\n    participant App as App/UI/Backend\n\n    alt Benutzer-Authentifizierung\n        Client->>Logto: GET /oidc/auth\n        Logto->>Logto: Leitet Benutzer zur Anmeldeseite weiter\n        Logto->>Client: Leitet zur\xfcck mit `authorization_code`\n        Client->>Logto: POST /oidc/token mit `grant_type=authorization_code`\n        Logto->>Client: Gibt Auffrischungstoken zur\xfcck\n        Client->>Logto: POST /oidc/token mit `grant_type=refresh_token` + Organisationsparameter\n    else M2M-Client-Authentifizierung\n        Client->>Logto: POST /oidc/token mit `grant_type=client_credentials` + Organisationsparameter\n    end\n\n    Logto->>Client: Gibt Organisationstoken (JWT) zur\xfcck\n    Client->>App: Anfrage mit Bearer-Token\n    App->>App: Validiert Organisationstoken, pr\xfcft Organisationskontext und Berechtigungen\n\n    alt Token ist g\xfcltig\n        App->>Client: Erlaubt organisationsspezifische Aktionen/Daten\n    else Token ist ung\xfcltig\n        App->>Client: 401 Nicht autorisiert oder verweigert UI-Zugriff\n    end"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.em,{children:"Benutzer-Authentifizierung = Browser/App. M2M = Backend-Service oder Skript mit Client-Credentials + Organisationskontext."})}),"\n",(0,t.jsx)(n.h2,{id:"implementation-steps",children:"Implementierungsschritte"}),"\n",(0,t.jsx)(n.h3,{id:"register-organization-permissions",children:"Organisationsberechtigungen registrieren"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Gehe zu ",(0,t.jsx)(i,{to:"/organization-template/organization-permissions",children:"Konsole \u2192 Organisation-Vorlage \u2192 Organisationsberechtigungen"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["Definiere die ben\xf6tigten Organisationsberechtigungen (z. B. ",(0,t.jsx)(n.code,{children:"invite:member"}),", ",(0,t.jsx)(n.code,{children:"manage:billing"}),", ",(0,t.jsx)(n.code,{children:"view:analytics"}),")."]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["F\xfcr vollst\xe4ndige Konfigurationsschritte siehe ",(0,t.jsx)(n.a,{href:"/authorization/role-based-access-control#define-organization-permissions",children:"Organisationsberechtigungen definieren"}),"."]}),"\n",(0,t.jsx)(n.h3,{id:"set-up-organization-roles",children:"Organisationsrollen einrichten"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Gehe zu ",(0,t.jsx)(i,{to:"/organization-template/organization-roles",children:"Konsole \u2192 Organisation-Vorlage \u2192 Organisationsrollen"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["Erstelle Rollen, die die zuvor definierten Organisationsberechtigungen b\xfcndeln (z. B. ",(0,t.jsx)(n.code,{children:"admin"}),", ",(0,t.jsx)(n.code,{children:"member"}),", ",(0,t.jsx)(n.code,{children:"billing"}),")."]}),"\n",(0,t.jsx)(n.li,{children:"Weise diese Rollen Benutzern oder Clients innerhalb jeder Organisation zu."}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["F\xfcr vollst\xe4ndige Konfigurationsschritte siehe ",(0,t.jsx)(n.a,{href:"/authorization/role-based-access-control#configure-organization-roles",children:"Organisationsrollen verwenden"}),"."]}),"\n",(0,t.jsx)(n.h3,{id:"obtain-organization-tokens-non-api",children:"Organisationstokens (Nicht-API) erhalten"}),"\n",(0,t.jsxs)(n.p,{children:["Dein Client/App sollte ein Organisationstoken (Nicht-API) erhalten, um auf Organisationsberechtigungen zuzugreifen. Logto stellt Organisationstokens als ",(0,t.jsx)(n.a,{href:"https://auth.wiki/jwt",children:"JSON Web Tokens (JWTs)"})," aus. Du kannst diese entweder \xfcber den ",(0,t.jsx)(n.a,{href:"https://auth.wiki/refresh-token",children:"Auffrischungstoken-Flow"})," oder den ",(0,t.jsx)(n.a,{href:"https://auth.wiki/client-credentials-flow",children:"Client-Credentials-Flow"})," erhalten."]}),"\n",(0,t.jsx)(n.h4,{id:"refresh-token-flow",children:"Auffrischungstoken-Flow"}),"\n",(0,t.jsx)(n.p,{children:"Fast alle offiziellen Logto SDKs unterst\xfctzen das Abrufen von Organisationstokens \xfcber den Auffrischungstoken-Flow direkt. Eine Standard-OAuth 2.0 / OIDC-Client-Bibliothek kann ebenfalls verwendet werden, um diesen Flow zu implementieren."}),"\n",(0,t.jsxs)(u.A,{groupId:"user-client",children:[(0,t.jsxs)(d.A,{value:"logto-sdk",label:"Logto SDK",children:[(0,t.jsxs)(n.p,{children:["Beim Initialisieren des Logto SDK f\xfcge ",(0,t.jsx)(n.code,{children:"urn:logto:scope:organizations"})," und die gew\xfcnschten Organisationsberechtigungen (Berechtigungen) zum ",(0,t.jsx)(n.code,{children:"scopes"}),"-Parameter hinzu."]}),(0,t.jsxs)(n.p,{children:["Einige Logto SDKs haben einen vordefinierten Scope f\xfcr Organisationen, wie ",(0,t.jsx)(n.code,{children:"UserScope.Organizations"})," in JavaScript SDKs."]}),(0,t.jsx)(h.Ay,{}),(0,t.jsxs)(n.p,{children:["Verwende ",(0,t.jsx)(n.code,{children:"getOrganizationToken"})," oder eine \xe4hnliche Methode (wie ",(0,t.jsx)(n.code,{children:"getAccessToken"})," mit einer Organisations-ID), um ein Organisationstoken f\xfcr eine bestimmte Organisation anzufordern."]}),(0,t.jsxs)(n.p,{children:["F\xfcr Details zu jedem SDK siehe ",(0,t.jsx)(n.a,{href:"/quick-starts",children:"Quick starts"}),"."]})]}),(0,t.jsxs)(d.A,{value:"oauth-client",label:"OAuth 2.0 / OIDC client library",children:[(0,t.jsx)(n.p,{children:"Beim Konfigurieren deines OAuth 2.0 Clients oder beim Initialisieren des Authorization-Code-Flows stelle sicher, dass du folgende Parameter einf\xfcgst:"}),(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"resource"}),": Setze auf ",(0,t.jsx)(n.code,{children:"urn:logto:resource:organizations"}),", um anzugeben, dass du ein Organisationstoken m\xf6chtest."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"scope"}),": F\xfcge den vordefinierten Organisation-Scope (",(0,t.jsx)(n.code,{children:"urn:logto:scope:organizations"}),"), ",(0,t.jsx)(n.code,{children:"offline_access"})," (um Auffrischungstokens zu erhalten) und alle spezifischen Organisationsberechtigungen hinzu, die du ben\xf6tigst (z. B. ",(0,t.jsx)(n.code,{children:"invite:member"}),", ",(0,t.jsx)(n.code,{children:"manage:billing"}),")."]}),"\n"]}),(0,t.jsxs)(n.p,{children:["Einige Bibliotheken unterst\xfctzen den ",(0,t.jsx)(n.code,{children:"resource"}),"-Parameter nicht nativ, erlauben aber in der Regel das \xdcbergeben zus\xe4tzlicher Parameter in der Autorisierungsanfrage. Pr\xfcfe die Dokumentation deiner Bibliothek f\xfcr Details."]}),(0,t.jsx)(n.p,{children:"Hier ist ein nicht-normatives Beispiel, wie die Autorisierungsanfrage aussehen k\xf6nnte:"}),(0,t.jsx)(a.A,{scope:"urn:logto:scope:organizations invite:member manage:billing",resource:"urn:logto:resource:organizations"}),(0,t.jsxs)(n.p,{children:["Sobald der Benutzer authentifiziert ist, erh\xe4ltst du einen Authorization-Code. Verwende diesen Code, indem du eine POST-Anfrage an Logtos ",(0,t.jsx)(n.code,{children:"/oidc/token"}),"-Endpunkt stellst."]}),(0,t.jsx)(n.p,{children:"Hier ist ein nicht-normatives Beispiel f\xfcr die Token-Anfrage:"}),(0,t.jsx)(c.A,{grantType:"authorization_code"}),(0,t.jsx)(g.Ay,{}),(0,t.jsx)(n.p,{children:"Du erh\xe4ltst ein Auffrischungstoken, das verwendet werden kann, um Organisationstokens zu erhalten."}),(0,t.jsx)(h.Ay,{}),(0,t.jsxs)(n.p,{children:["Verwende schlie\xdflich das Auffrischungstoken, um ein Organisationstoken zu erhalten, indem du eine POST-Anfrage an Logtos ",(0,t.jsx)(n.code,{children:"/oidc/token"}),"-Endpunkt stellst. Denke daran, Folgendes einzuschlie\xdfen:"]}),(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Den ",(0,t.jsx)(n.code,{children:"organization_id"}),"-Parameter, gesetzt auf die gew\xfcnschte Organisations-ID."]}),"\n",(0,t.jsxs)(n.li,{children:["(Optional) Den ",(0,t.jsx)(n.code,{children:"scope"}),"-Parameter, um die ben\xf6tigten Berechtigungen weiter einzuschr\xe4nken (z. B. ",(0,t.jsx)(n.code,{children:"manage:members view:reports"}),")."]}),"\n"]}),(0,t.jsx)(n.p,{children:"Hier ist ein nicht-normatives Beispiel, wie die Token-Anfrage aussehen k\xf6nnte:"}),(0,t.jsx)(c.A,{grantType:"refresh_token",organizationId:"your-organization-id"})]})]}),"\n",(0,t.jsx)(n.h4,{id:"client-credentials-flow",children:"Client-Credentials-Flow"}),"\n",(0,t.jsxs)(n.p,{children:["F\xfcr Maschine-zu-Maschine (M2M)-Szenarien kannst du den Client-Credentials-Flow verwenden, um ein Zugangstoken f\xfcr Organisationsberechtigungen zu erhalten. Durch eine POST-Anfrage an Logtos ",(0,t.jsx)(n.code,{children:"/oidc/token"}),"-Endpunkt mit Organisationsparametern kannst du ein Organisationstoken mit deiner Client-ID und deinem Secret anfordern."]}),"\n",(0,t.jsx)(n.p,{children:"Hier sind die wichtigsten Parameter, die in der Anfrage enthalten sein sollten:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"organization_id"}),": Die ID der Organisation, f\xfcr die du das Token m\xf6chtest."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"scope"}),": Die Organisationsberechtigungen, die du anfordern m\xf6chtest (z. B. ",(0,t.jsx)(n.code,{children:"invite:member"}),", ",(0,t.jsx)(n.code,{children:"manage:billing"}),")."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Hier ist ein nicht-normatives Beispiel f\xfcr die Token-Anfrage mit dem Client-Credentials-Grant-Typ:"}),"\n",(0,t.jsx)(l.A,{organizationId:"your-organization-id",scope:"invite:member manage:billing"}),"\n",(0,t.jsx)(n.h3,{id:"validate-organization-tokens",children:"Organisationstokens validieren"}),"\n",(0,t.jsx)(n.p,{children:"Von Logto ausgestellte Organisationstokens (JWTs) enthalten Anspr\xfcche, die deine App/UI/Backend zur Durchsetzung des organisationsweiten Zugriffs verwenden kann."}),"\n",(0,t.jsx)(n.p,{children:"Wenn deine App ein Organisationstoken erh\xe4lt, solltest du:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Die Token-Signatur \xfcberpr\xfcfen (mit Logtos JWKs)."}),"\n",(0,t.jsxs)(n.li,{children:["Pr\xfcfen, dass das Token nicht abgelaufen ist (",(0,t.jsx)(n.code,{children:"exp"}),"-Anspruch)."]}),"\n",(0,t.jsxs)(n.li,{children:["Sicherstellen, dass der ",(0,t.jsx)(n.code,{children:"iss"})," (Aussteller) mit deinem Logto-Endpunkt \xfcbereinstimmt."]}),"\n",(0,t.jsxs)(n.li,{children:["Sicherstellen, dass der ",(0,t.jsx)(n.code,{children:"aud"})," (Zielgruppe) mit dem formatierten Organisationsbezeichner \xfcbereinstimmt (z. B. ",(0,t.jsx)(n.code,{children:"urn:logto:organization:{organization_id}"}),")."]}),"\n",(0,t.jsxs)(n.li,{children:["Den ",(0,t.jsx)(n.code,{children:"scope"}),"-Anspruch (durch Leerzeichen getrennt) auf erforderliche Berechtigungen pr\xfcfen."]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["F\xfcr Schritt-f\xfcr-Schritt- und sprachspezifische Anleitungen siehe ",(0,t.jsx)(n.a,{href:"/authorization/validate-access-tokens",children:"Wie man Zugangstokens validiert"}),"."]}),"\n",(0,t.jsx)(n.h2,{id:"best-practices-and-security-tips",children:"Best Practices und Sicherheitstipps"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Verlasse dich niemals ausschlie\xdflich auf die UI-Durchsetzung:"})," Pr\xfcfe Berechtigungen f\xfcr kritische Aktionen immer auch im Backend."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Verwende Zielgruppenbeschr\xe4nkungen:"})," Pr\xfcfe immer den ",(0,t.jsx)(n.code,{children:"aud"}),"-Anspruch, um sicherzustellen, dass das Token f\xfcr die beabsichtigte Organisation ist."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Halte Berechtigungen gesch\xe4ftsgetrieben:"})," Verwende klare Namen, die echten Aktionen entsprechen; gew\xe4hre nur das, was f\xfcr jede Organisationsrolle ben\xf6tigt wird."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Trenne API- und Nicht-API-Berechtigungen"}),", wo m\xf6glich (beide k\xf6nnen aber in einer Rolle enthalten sein)."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\xdcberpr\xfcfe die Organisation-Vorlage regelm\xe4\xdfig"}),", w\xe4hrend sich dein Produkt weiterentwickelt."]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"faqs",children:"FAQs"}),"\n",(0,t.jsxs)(r,{children:[(0,t.jsx)("summary",{children:(0,t.jsx)(n.h3,{id:"can-i-mix-organization-and-non-organization-permissions-in-a-single-role",children:"Kann ich Organisations- und Nicht-Organisationsberechtigungen in einer Rolle mischen?"})}),(0,t.jsx)(n.p,{children:"Nein, Organisationsberechtigungen (einschlie\xdflich organisationsbezogener API-Berechtigungen) werden durch die Organisation-Vorlage definiert und k\xf6nnen nicht mit globalen API-Berechtigungen gemischt werden. Du kannst jedoch Rollen erstellen, die sowohl Organisationsberechtigungen als auch organisationsbezogene API-Berechtigungen enthalten."})]}),"\n",(0,t.jsxs)(r,{children:[(0,t.jsx)("summary",{children:(0,t.jsx)(n.h3,{id:"where-should-i-enforce-non-api-permissions",children:"Wo sollte ich Nicht-API-Berechtigungen durchsetzen?"})}),(0,t.jsx)(n.p,{children:"Pr\xfcfe Nicht-API-Berechtigungen sowohl in der UI (f\xfcr Feature-Gating) als auch in deiner serverseitigen Logik f\xfcr sensible Aktionen."})]}),"\n",(0,t.jsx)(n.h2,{id:"further-reading",children:"Weiterf\xfchrende Literatur"}),"\n",(0,t.jsx)(p,{href:"/authorization/validate-access-tokens",children:"Wie man Zugangstokens validiert"}),"\n",(0,t.jsx)(p,{href:"/developers/custom-token-claims",children:"Token-Anspr\xfcche anpassen"}),"\n",(0,t.jsx)(p,{href:"/use-cases/multi-tenancy/build-multi-tenant-saas-application",children:(0,t.jsx)(n.p,{children:"Anwendungsfall: Multi-Tenant-SaaS-Anwendung bauen"})})]})}function b(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(j,{...e})}):j(e)}function k(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},39088:(e,n,i)=>{i.d(n,{A:()=>s});var r=i(80173),t=i(25105);const s=e=>{let{resource:n,scope:i}=e;return(0,t.jsx)(r.A,{language:"http",children:`GET /oidc/auth?response_type=code\n&client_id=your-client-id\n&redirect_uri=https://your-app.com/callback\n&scope=openid profile offline_access ${i}\n&resource=${n}\n&code_challenge=abc123\n&code_challenge_method=S256\n&state=xyz\nHTTP/1.1\nHost: your.logto.endpoint\n`})}},78506:(e,n,i)=>{i.d(n,{A:()=>s});var r=i(80173),t=i(25105);const s=e=>{let{resource:n,organizationId:i,scope:s}=e;return(0,t.jsxs)(r.A,{language:"http",children:["POST /oidc/token HTTP/1.1\nHost: your.logto.endpoint\nContent-Type: application/x-www-form-urlencoded\nAuthorization: Basic base64(client_id:client_secret)\n\ngrant_type=client_credentials\n",n&&`&resource=${n}\n`,i&&`&organization_id=${i}\n`,`&scope=${s}\n`]})}},42372:(e,n,i)=>{i.d(n,{A:()=>s});var r=i(80173),t=i(25105);const s=e=>{let{grantType:n,resource:i,organizationId:s}=e;const o=[`grant_type=${n}`,"authorization_code"===n&&"code=authorization-code-received","authorization_code"===n&&"redirect_uri=https://your-app.com/callback","refresh_token"===n&&"refresh_token=your-refresh-token",i&&`resource=${i}`,s&&`organization_id=${s}`].filter(Boolean);return(0,t.jsx)(r.A,{language:"http",children:`POST /oidc/token HTTP/1.1\nHost: your.logto.endpoint\nContent-Type: application/x-www-form-urlencoded\nAuthorization: Basic base64(client_id:client_secret)\n\n${o.join("\n&")}`})}},38552:(e,n,i)=>{i.d(n,{A:()=>o});i(58101);var r=i(13526);const t={tabItem:"tabItem_dgSZ"};var s=i(25105);function o(e){let{children:n,hidden:i,className:o}=e;return(0,s.jsx)("div",{role:"tabpanel",className:(0,r.A)(t.tabItem,o),hidden:i,children:n})}},22002:(e,n,i)=>{i.d(n,{A:()=>A});var r=i(58101),t=i(13526),s=i(60755),o=i(55234),a=i(6635),l=i(4100),c=i(35661),d=i(42752);function u(e){return r.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function h(e){const{values:n,children:i}=e;return(0,r.useMemo)((()=>{const e=n??function(e){return u(e).map((e=>{let{props:{value:n,label:i,attributes:r,default:t}}=e;return{value:n,label:i,attributes:r,default:t}}))}(i);return function(e){const n=(0,c.XI)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,i])}function g(e){let{value:n,tabValues:i}=e;return i.some((e=>e.value===n))}function p(e){let{queryString:n=!1,groupId:i}=e;const t=(0,o.W6)(),s=function(e){let{queryString:n=!1,groupId:i}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!i)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return i??null}({queryString:n,groupId:i});return[(0,l.aZ)(s),(0,r.useCallback)((e=>{if(!s)return;const n=new URLSearchParams(t.location.search);n.set(s,e),t.replace({...t.location,search:n.toString()})}),[s,t])]}function m(e){const{defaultValue:n,queryString:i=!1,groupId:t}=e,s=h(e),[o,l]=(0,r.useState)((()=>function(e){let{defaultValue:n,tabValues:i}=e;if(0===i.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!g({value:n,tabValues:i}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${i.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const r=i.find((e=>e.default))??i[0];if(!r)throw new Error("Unexpected error: 0 tabValues");return r.value}({defaultValue:n,tabValues:s}))),[c,u]=p({queryString:i,groupId:t}),[m,f]=function(e){let{groupId:n}=e;const i=function(e){return e?`docusaurus.tab.${e}`:null}(n),[t,s]=(0,d.Dv)(i);return[t,(0,r.useCallback)((e=>{i&&s.set(e)}),[i,s])]}({groupId:t}),x=(()=>{const e=c??m;return g({value:e,tabValues:s})?e:null})();(0,a.A)((()=>{x&&l(x)}),[x]);return{selectedValue:o,selectValue:(0,r.useCallback)((e=>{if(!g({value:e,tabValues:s}))throw new Error(`Can't select invalid tab value=${e}`);l(e),u(e),f(e)}),[u,f,s]),tabValues:s}}var f=i(21929);const x={tabList:"tabList_osvQ",tabItem:"tabItem_dc4O"};var j=i(25105);function b(e){let{className:n,block:i,selectedValue:r,selectValue:o,tabValues:a}=e;const l=[],{blockElementScrollPositionUntilNextRender:c}=(0,s.a_)(),d=e=>{const n=e.currentTarget,i=l.indexOf(n),t=a[i].value;t!==r&&(c(n),o(t))},u=e=>{let n=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const i=l.indexOf(e.currentTarget)+1;n=l[i]??l[0];break}case"ArrowLeft":{const i=l.indexOf(e.currentTarget)-1;n=l[i]??l[l.length-1];break}}n?.focus()};return(0,j.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,t.A)("tabs",{"tabs--block":i},n),children:a.map((e=>{let{value:n,label:i,attributes:s}=e;return(0,j.jsx)("li",{role:"tab",tabIndex:r===n?0:-1,"aria-selected":r===n,ref:e=>{l.push(e)},onKeyDown:u,onClick:d,...s,className:(0,t.A)("tabs__item",x.tabItem,s?.className,{"tabs__item--active":r===n}),children:i??n},n)}))})}function k(e){let{lazy:n,children:i,selectedValue:s}=e;const o=(Array.isArray(i)?i:[i]).filter(Boolean);if(n){const e=o.find((e=>e.props.value===s));return e?(0,r.cloneElement)(e,{className:(0,t.A)("margin-top--md",e.props.className)}):null}return(0,j.jsx)("div",{className:"margin-top--md",children:o.map(((e,n)=>(0,r.cloneElement)(e,{key:n,hidden:e.props.value!==s})))})}function z(e){const n=m(e);return(0,j.jsxs)("div",{className:(0,t.A)("tabs-container",x.tabList),children:[(0,j.jsx)(b,{...n,...e}),(0,j.jsx)(k,{...n,...e})]})}function A(e){const n=(0,f.A)();return(0,j.jsx)(z,{...e,children:u(e.children)},String(n))}},55138:(e,n,i)=>{i.d(n,{A:()=>m});var r=i(28259),t=i(6097),s=i(58574),o=i(9484),a=i(76566),l=i(26346),c=i(17867),d=i(17510),u=i(13526),h=i(72355);const g={codeBlockContent:"codeBlockContent_m3Ux",codeBlockTitle:"codeBlockTitle_P25_",codeBlock:"codeBlock_qGQc",codeBlockStandalone:"codeBlockStandalone_zC50",codeBlockLines:"codeBlockLines_p187",codeBlockLinesWithNumbering:"codeBlockLinesWithNumbering_OFgW",buttonGroup:"buttonGroup_6DOT"};var p=i(25105);function m(e){let{children:n,className:i="",metastring:m,title:f,showLineNumbers:x,language:j}=e;const{prism:{defaultLanguage:b,magicComments:k}}=(0,r.p)(),z=function(e){return e?.toLowerCase()}(j??(0,s.Op)(i)??b),A=(0,t.A)(),v=(0,o.f)(),w=(0,s.wt)(m)||f,{lineClassNames:O,code:B}=(0,s.Li)(n,{metastring:m,language:z,magicComments:k}),I=x??(0,s._u)(m);return(0,p.jsxs)(a.A,{as:"div",className:(0,u.A)(i,z&&!i.includes(`language-${z}`)&&`language-${z}`),children:[w&&(0,p.jsx)("div",{className:g.codeBlockTitle,children:w}),(0,p.jsxs)("div",{className:g.codeBlockContent,children:[(0,p.jsx)(h.f4,{theme:A,code:B,language:z??"text",children:e=>{let{className:n,tokens:i,getLineProps:r,getTokenProps:t}=e;return(0,p.jsx)("pre",{ref:v.codeBlockRef,tabIndex:0,className:(0,u.A)(n,g.codeBlock,"thin-scrollbar"),children:(0,p.jsx)("code",{className:(0,u.A)(g.codeBlockLines,I&&g.codeBlockLinesWithNumbering),children:i.map(((e,n)=>(0,p.jsx)(c.A,{line:e,getLineProps:r,getTokenProps:t,classNames:O[n],showLineNumbers:I},n)))})})}}),(0,p.jsxs)("div",{className:g.buttonGroup,children:[(v.isEnabled||v.isCodeScrollable)&&(0,p.jsx)(d.A,{className:g.codeButton,isEnabled:v.isEnabled,onClick:()=>{v.toggle()}}),(0,p.jsx)(l.A,{className:g.codeButton,code:B})]})]})]})}},93855:(e,n,i)=>{i.d(n,{A:()=>r});const r=i.p+"assets/images/rbac-organization-permissions-3302be06221b4399f73ddceac8ca17e3.png"}}]);