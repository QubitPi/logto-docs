"use strict";(self.webpackChunk_logto_docs=self.webpackChunk_logto_docs||[]).push([[11572],{20390:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>u,contentTitle:()=>c,default:()=>g,frontMatter:()=>o,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"logto-oss/using-cli/rotate-signing-keys","title":"Signaturschl\xfcssel rotieren (OSS)","description":"Wenn du Logto Cloud verwendest, kannst du Signaturschl\xfcssel in der Console-UI rotieren. Bitte sieh dir dieses Tutorial an.","source":"@site/i18n/de/docusaurus-plugin-content-docs/current/logto-oss/using-cli/rotate-signing-keys.mdx","sourceDirName":"logto-oss/using-cli","slug":"/logto-oss/using-cli/rotate-signing-keys","permalink":"/de/logto-oss/using-cli/rotate-signing-keys","draft":false,"unlisted":false,"editUrl":"https://github.com/logto-io/docs/tree/master/i18n/de/docusaurus-plugin-content-docs/current/logto-oss/using-cli/rotate-signing-keys.mdx","tags":[],"version":"current","frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"Konfigurationen aus der Umgebung migrieren","permalink":"/de/logto-oss/using-cli/migrate-from-env"},"next":{"title":"CLI \xfcbersetzen","permalink":"/de/logto-oss/translate-cli"}}');var t=r(25105),l=r(79621),i=r(3768),a=r(11043);const o={},c="Signaturschl\xfcssel rotieren (OSS)",u={},d=[{value:"OIDC private Signaturschl\xfcssel rotieren",id:"rotate-oidc-private-signing-keys",level:2},{value:"OIDC Cookie-Schl\xfcssel rotieren",id:"rotate-oidc-cookie-keys",level:2},{value:"Was ist mit den vorherigen Schl\xfcsseln?",id:"what-about-the-previous-keys",level:2},{value:"Fehlerbehebung",id:"troubleshooting",level:2},{value:"Logto als OIDC-Anbieter in Cloudflare Zero Trust verwenden",id:"using-logto-as-oidc-provider-in-cloudflare-zero-trust",level:3}];function h(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,l.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"signaturschl\xfcssel-rotieren-oss",children:"Signaturschl\xfcssel rotieren (OSS)"})}),"\n",(0,t.jsx)(n.admonition,{type:"note",children:(0,t.jsxs)(n.p,{children:["Wenn du Logto Cloud verwendest, kannst du Signaturschl\xfcssel in der Console-UI rotieren. Bitte sieh dir ",(0,t.jsx)(n.a,{href:"/developers/signing-keys/#rotate-signing-keys-from-console-ui",children:"dieses Tutorial"})," an."]})}),"\n",(0,t.jsx)(n.p,{children:"Logto OSS unterst\xfctzt das Rotieren von Signaturschl\xfcsseln seit Version 1.8."}),"\n",(0,t.jsx)(n.p,{children:"Logto OIDC Signaturschl\xfcssel, auch bekannt als \u201eOIDC private keys\u201c und \u201eOIDC cookie keys\u201c, sind die Signaturschl\xfcssel, die verwendet werden, um JWT-Tokens (Zugangstokens und ID-Tokens) und Browser-Cookies in Logto-Anmeldesitzungen zu verschl\xfcsseln."}),"\n",(0,t.jsx)(n.p,{children:"Das regelm\xe4\xdfige Rotieren deiner Signaturschl\xfcssel kann das Risiko eines m\xf6glichen Schl\xfcsselkompromisses verringern. Logto empfiehlt, deine Signaturschl\xfcssel mindestens einmal im Jahr zu rotieren."}),"\n",(0,t.jsx)(n.h2,{id:"rotate-oidc-private-signing-keys",children:"OIDC private Signaturschl\xfcssel rotieren"}),"\n",(0,t.jsx)(n.p,{children:"Verwende den folgenden CLI-Befehl, um einen neuen OIDC private Signaturschl\xfcssel zu generieren. Der neue Schl\xfcssel wird nach dem Neustart automatisch verwendet."}),"\n",(0,t.jsx)(n.p,{children:"Verf\xfcgbare Optionen:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'--type    (Optional) Der Signaturschl\xfcssel-Algorithmus f\xfcr deine JWT-Tokens.\n          Werte sind "rsa" oder "ec". Standard ist "ec".\n'})}),"\n",(0,t.jsxs)(a.A,{groupId:"cmd",children:[(0,t.jsx)(i.A,{value:"cli",label:"CLI",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"logto db config rotate oidc.privateKeys --type rsa\n"})})}),(0,t.jsx)(i.A,{value:"Local",label:"lokal",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"npm run cli db config rotate oidc.privateKeys -- --type rsa\n"})})}),(0,t.jsx)(i.A,{value:"npx",label:"npx",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"npx @logto/cli db config rotate oidc.privateKeys -- --type rsa\n"})})})]}),"\n",(0,t.jsx)(n.h2,{id:"rotate-oidc-cookie-keys",children:"OIDC Cookie-Schl\xfcssel rotieren"}),"\n",(0,t.jsx)(n.p,{children:"Verwende den folgenden CLI-Befehl, um einen neuen OIDC Cookie-Schl\xfcssel zu generieren. Der neue Schl\xfcssel wird nach dem Neustart automatisch verwendet."}),"\n",(0,t.jsxs)(a.A,{groupId:"cmd",children:[(0,t.jsx)(i.A,{value:"cli",label:"CLI",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"logto db config rotate oidc.cookieKeys\n"})})}),(0,t.jsx)(i.A,{value:"Local",label:"lokal",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"npm run cli db config rotate oidc.cookieKeys\n"})})}),(0,t.jsx)(i.A,{value:"npx",label:"npx",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"npx @logto/cli db config rotate oidc.cookieKeys\n"})})})]}),"\n",(0,t.jsx)(n.h2,{id:"what-about-the-previous-keys",children:"Was ist mit den vorherigen Schl\xfcsseln?"}),"\n",(0,t.jsx)(n.p,{children:"Die Logto-Schl\xfcsselrotationsbefehle l\xf6schen deine vorherigen Signaturschl\xfcssel nicht, und sie werden in der Datenbank aufbewahrt, es sei denn, du l\xf6schst sie manuell."}),"\n",(0,t.jsx)(n.p,{children:"Sei auch vorsichtig beim L\xf6schen deiner vorherigen Schl\xfcssel, da dies unerwartete Probleme verursachen kann. Es wird empfohlen, sowohl den neuen Schl\xfcssel als auch den vorherigen Schl\xfcssel f\xfcr einen bestimmten Zeitraum (z. B. 2 Wochen) aufzubewahren, bis du sicher bist, dass alle deine Benutzer auf den neuen Schl\xfcssel migriert sind."}),"\n",(0,t.jsx)(n.h2,{id:"troubleshooting",children:"Fehlerbehebung"}),"\n",(0,t.jsx)(n.h3,{id:"using-logto-as-oidc-provider-in-cloudflare-zero-trust",children:"Logto als OIDC-Anbieter in Cloudflare Zero Trust verwenden"}),"\n",(0,t.jsxs)(n.p,{children:["Wenn du Logto als OIDC-Anbieter mit Cloudflare Zero Trust verwenden m\xf6chtest, beachte bitte, dass es keine OIDC-Anbieter unterst\xfctzt, die ECDSA-Algorithmen verwenden. Beim Rotieren von OIDC private Signaturschl\xfcsseln stelle sicher, dass du den RSA-Algorithmus verwendest, indem du ",(0,t.jsx)(n.code,{children:"--type rsa"})," im Rotationsbefehl angibst:"]}),"\n",(0,t.jsxs)(a.A,{groupId:"cmd-cloudflare-zero-trust",children:[(0,t.jsx)(i.A,{value:"cli",label:"CLI",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"logto db config rotate oidc.privateKeys --type rsa\n"})})}),(0,t.jsx)(i.A,{value:"Local",label:"lokal",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"npm run cli db config rotate oidc.privateKeys -- --type rsa\n"})})}),(0,t.jsx)(i.A,{value:"npx",label:"npx",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"npx @logto/cli db config rotate oidc.privateKeys -- --type rsa\n"})})})]})]})}function g(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(h,{...e})}):h(e)}},3768:(e,n,r)=>{r.d(n,{A:()=>i});r(58101);var s=r(13526);const t={tabItem:"tabItem_y6LR"};var l=r(25105);function i(e){let{children:n,hidden:r,className:i}=e;return(0,l.jsx)("div",{role:"tabpanel",className:(0,s.A)(t.tabItem,i),hidden:r,children:n})}},11043:(e,n,r)=>{r.d(n,{A:()=>y});var s=r(58101),t=r(13526),l=r(32571),i=r(55234),a=r(87394),o=r(87276),c=r(31637),u=r(16063);function d(e){return s.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,s.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function h(e){const{values:n,children:r}=e;return(0,s.useMemo)((()=>{const e=n??function(e){return d(e).map((e=>{let{props:{value:n,label:r,attributes:s,default:t}}=e;return{value:n,label:r,attributes:s,default:t}}))}(r);return function(e){const n=(0,c.XI)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,r])}function g(e){let{value:n,tabValues:r}=e;return r.some((e=>e.value===n))}function p(e){let{queryString:n=!1,groupId:r}=e;const t=(0,i.W6)(),l=function(e){let{queryString:n=!1,groupId:r}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!r)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return r??null}({queryString:n,groupId:r});return[(0,o.aZ)(l),(0,s.useCallback)((e=>{if(!l)return;const n=new URLSearchParams(t.location.search);n.set(l,e),t.replace({...t.location,search:n.toString()})}),[l,t])]}function b(e){const{defaultValue:n,queryString:r=!1,groupId:t}=e,l=h(e),[i,o]=(0,s.useState)((()=>function(e){let{defaultValue:n,tabValues:r}=e;if(0===r.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!g({value:n,tabValues:r}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${r.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const s=r.find((e=>e.default))??r[0];if(!s)throw new Error("Unexpected error: 0 tabValues");return s.value}({defaultValue:n,tabValues:l}))),[c,d]=p({queryString:r,groupId:t}),[b,m]=function(e){let{groupId:n}=e;const r=function(e){return e?`docusaurus.tab.${e}`:null}(n),[t,l]=(0,u.Dv)(r);return[t,(0,s.useCallback)((e=>{r&&l.set(e)}),[r,l])]}({groupId:t}),f=(()=>{const e=c??b;return g({value:e,tabValues:l})?e:null})();(0,a.A)((()=>{f&&o(f)}),[f]);return{selectedValue:i,selectValue:(0,s.useCallback)((e=>{if(!g({value:e,tabValues:l}))throw new Error(`Can't select invalid tab value=${e}`);o(e),d(e),m(e)}),[d,m,l]),tabValues:l}}var m=r(27034);const f={tabList:"tabList_swUI",tabItem:"tabItem_BXZ5"};var v=r(25105);function x(e){let{className:n,block:r,selectedValue:s,selectValue:i,tabValues:a}=e;const o=[],{blockElementScrollPositionUntilNextRender:c}=(0,l.a_)(),u=e=>{const n=e.currentTarget,r=o.indexOf(n),t=a[r].value;t!==s&&(c(n),i(t))},d=e=>{let n=null;switch(e.key){case"Enter":u(e);break;case"ArrowRight":{const r=o.indexOf(e.currentTarget)+1;n=o[r]??o[0];break}case"ArrowLeft":{const r=o.indexOf(e.currentTarget)-1;n=o[r]??o[o.length-1];break}}n?.focus()};return(0,v.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,t.A)("tabs",{"tabs--block":r},n),children:a.map((e=>{let{value:n,label:r,attributes:l}=e;return(0,v.jsx)("li",{role:"tab",tabIndex:s===n?0:-1,"aria-selected":s===n,ref:e=>o.push(e),onKeyDown:d,onClick:u,...l,className:(0,t.A)("tabs__item",f.tabItem,l?.className,{"tabs__item--active":s===n}),children:r??n},n)}))})}function j(e){let{lazy:n,children:r,selectedValue:l}=e;const i=(Array.isArray(r)?r:[r]).filter(Boolean);if(n){const e=i.find((e=>e.props.value===l));return e?(0,s.cloneElement)(e,{className:(0,t.A)("margin-top--md",e.props.className)}):null}return(0,v.jsx)("div",{className:"margin-top--md",children:i.map(((e,n)=>(0,s.cloneElement)(e,{key:n,hidden:e.props.value!==l})))})}function k(e){const n=b(e);return(0,v.jsxs)("div",{className:(0,t.A)("tabs-container",f.tabList),children:[(0,v.jsx)(x,{...n,...e}),(0,v.jsx)(j,{...n,...e})]})}function y(e){const n=(0,m.A)();return(0,v.jsx)(k,{...e,children:d(e.children)},String(n))}},79621:(e,n,r)=>{r.d(n,{R:()=>i,x:()=>a});var s=r(58101);const t={},l=s.createContext(t);function i(e){const n=s.useContext(l);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),s.createElement(l.Provider,{value:n},e.children)}}}]);