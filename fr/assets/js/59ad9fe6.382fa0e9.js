"use strict";(self.webpackChunk_logto_docs=self.webpackChunk_logto_docs||[]).push([[7426],{95719:(e,n,t)=>{t.d(n,{Ay:()=>a,RM:()=>i});var s=t(25105),r=t(79621);const i=[];function o(e){const n={a:"a",p:"p",...(0,r.R)(),...e.components};return(0,s.jsxs)(n.p,{children:["Nous vous recommandons de lire d'abord ",(0,s.jsx)(n.a,{href:"/authorization/role-based-access-control",children:"\ud83d\udd10 Contr\xf4le d\u2019acc\xe8s bas\xe9 sur les r\xf4les (RBAC)"})," pour comprendre les concepts de base de Logto RBAC et comment configurer correctement les ressources API."]})}function a(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}},38235:(e,n,t)=>{t.d(n,{Ay:()=>a,RM:()=>i});var s=t(25105),r=t(79621);const i=[];function o(e){const n={a:"a",admonition:"admonition",code:"code",p:"p",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:"Une fois que vous avez configur\xe9 les ressources API, vous pouvez les ajouter lors de la configuration de Logto dans votre application :"}),"\n",e.configResourcesCode,"\n",(0,s.jsx)(n.p,{children:"Chaque ressource API a ses propres permissions (port\xe9es)."}),"\n",(0,s.jsxs)(n.p,{children:["Par exemple, la ressource ",(0,s.jsx)(n.code,{children:"https://shopping.your-app.com/api"})," a les permissions ",(0,s.jsx)(n.code,{children:"shopping:read"})," et ",(0,s.jsx)(n.code,{children:"shopping:write"}),", et la ressource ",(0,s.jsx)(n.code,{children:"https://store.your-app.com/api"})," a les permissions ",(0,s.jsx)(n.code,{children:"store:read"})," et ",(0,s.jsx)(n.code,{children:"store:write"}),"."]}),"\n",(0,s.jsx)(n.p,{children:"Pour demander ces permissions, vous pouvez les ajouter lors de la configuration de Logto dans votre application :"}),"\n",e.configResourcesWithScopesCode,"\n",(0,s.jsxs)(n.p,{children:["Vous pouvez remarquer que les port\xe9es sont d\xe9finies s\xe9par\xe9ment des ressources API. Cela est d\xfb au fait que les ",(0,s.jsx)(n.a,{href:"https://www.rfc-editor.org/rfc/rfc8707.html",children:"Indicateurs de ressource pour OAuth 2.0"})," sp\xe9cifient que les port\xe9es finales pour la requ\xeate seront le produit cart\xe9sien de toutes les port\xe9es de tous les services cibles."]}),"\n",e.configResourcesWithSharedScopesCode&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("p",{children:["Ainsi, dans le cas ci-dessus, les port\xe9es peuvent \xeatre simplifi\xe9es \xe0 partir de la d\xe9finition dans Logto, les deux ressources API peuvent avoir les port\xe9es ",(0,s.jsx)("code",{children:"read"})," et ",(0,s.jsx)("code",{children:"write"})," ","sans le pr\xe9fixe. Ensuite, dans la configuration de Logto :"]}),e.configResourcesWithSharedScopesCode,(0,s.jsxs)("p",{children:["Pour chaque ressource API, il demandera \xe0 la fois les port\xe9es ",(0,s.jsx)("code",{children:"read"})," et"," ",(0,s.jsx)("code",{children:"write"}),"."]})]}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsxs)(n.p,{children:["Il est acceptable de demander des port\xe9es qui ne sont pas d\xe9finies dans les ressources API. Par exemple, vous pouvez demander la port\xe9e ",(0,s.jsx)(n.code,{children:"email"})," m\xeame si les ressources API n'ont pas la port\xe9e ",(0,s.jsx)(n.code,{children:"email"})," disponible. Les port\xe9es non disponibles seront ignor\xe9es en toute s\xe9curit\xe9."]})}),"\n",(0,s.jsx)(n.p,{children:"Apr\xe8s une connexion r\xe9ussie, Logto \xe9mettra les port\xe9es appropri\xe9es aux ressources API en fonction des r\xf4les de l'utilisateur."})]})}function a(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}},75254:(e,n,t)=>{t.d(n,{Ay:()=>a,RM:()=>i});var s=t(25105),r=t(79621);const i=[];function o(e){const n={p:"p",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.p,{children:["Passons \xe0 la page des d\xe9tails de l'application de Logto Console. Ajoutez une URI de redirection ",(0,s.jsx)("code",{children:e.redirectUri}),' et cliquez sur "Enregistrer les modifications".']}),"\n",(0,s.jsx)("img",{alt:"URI de redirection dans Logto Console",src:e.figureSrc,width:"600px"})]})}function a(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}},41366:(e,n,t)=>{t.d(n,{Ay:()=>a,RM:()=>i});var s=t(25105),r=t(79621);const i=[];function o(e){const n={a:"a",p:"p",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.p,{children:["Si l'Organisation est nouvelle pour vous, veuillez lire ",(0,s.jsx)(n.a,{href:"/organizations",children:"\ud83c\udfe2 Organisations (Multi-tenancy)"})," pour commencer."]}),"\n",(0,s.jsxs)(n.p,{children:["Vous devez ajouter la port\xe9e ",(0,s.jsx)("code",{children:e.organizationScope})," lors de la configuration du client Logto :"]}),"\n",e.configOrganizationCode,"\n",(0,s.jsx)(n.p,{children:"Une fois l'utilisateur connect\xe9, vous pouvez r\xe9cup\xe9rer le jeton d\u2019organisation pour l'utilisateur :"}),"\n",e.getOrganizationAccessTokenCode]})}function a(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}},99225:(e,n,t)=>{t.d(n,{Ay:()=>a,RM:()=>i});var s=t(25105),r=t(79621);const i=[];function o(e){const n={p:"p",...(0,r.R)(),...e.components};return(0,s.jsxs)(n.p,{children:["Il se peut que certaines informations utilisateur soient manquantes dans l'objet retourn\xe9 par ",(0,s.jsx)("code",{children:e.method}),". Cela est d\xfb au fait que OAuth 2.0 et OpenID Connect (OIDC) sont con\xe7us pour suivre le principe du moindre privil\xe8ge (PoLP), et Logto est construit sur ces normes."]})}function a(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}},62990:(e,n,t)=>{t.d(n,{Ay:()=>a,RM:()=>i});var s=t(25105),r=t(79621);const i=[];function o(e){const{Url:n}={...(0,r.R)(),...e.components};return n||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Url",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n,{href:"/end-user-flows",children:" Parcours utilisateur final : flux d\u2019authentification, flux de compte et flux d\u2019organisation "}),"\n",(0,s.jsx)(n,{href:"/connectors",children:" Configurer les connecteurs "}),"\n",(0,s.jsx)(n,{href:"/authorization",children:" Autorisation (Authorization) "})]})}function a(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}},11233:(e,n,t)=>{t.d(n,{Ay:()=>a,RM:()=>i});var s=t(25105),r=t(79621);const i=[];function o(e){const n={admonition:"admonition",p:"p",...(0,r.R)(),...e.components};return(0,s.jsxs)(n.admonition,{type:"tip",children:[(0,s.jsx)("p",{children:(0,s.jsx)(n.p,{children:"Vous pouvez trouver et copier le \"Secret de l'application\" depuis la page des d\xe9tails de\nl'application dans la Console d'administration :"})}),(0,s.jsx)("img",{alt:"Secret de l'application",src:"/img/assets/app-secret.png",width:"586px"})]})}function a(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}},42142:(e,n,t)=>{t.d(n,{Ay:()=>a,RM:()=>i});var s=t(25105),r=t(79621);const i=[{value:"Concernant la connexion bas\xe9e sur la redirection",id:"regarding-redirect-based-sign-in",level:3}];function o(e){const n={a:"a",h3:"h3",li:"li",ol:"ol",p:"p",...(0,r.R)(),...e.components},{Details:t,MainSiteUrl:i}=n;return t||c("Details",!0),i||c("MainSiteUrl",!0),(0,s.jsxs)(t,{children:[(0,s.jsx)("summary",{children:(0,s.jsx)(n.h3,{id:"regarding-redirect-based-sign-in",children:"Concernant la connexion bas\xe9e sur la redirection"})}),(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Ce processus d'authentification (Authentication) suit le protocole ",(0,s.jsx)(n.a,{href:"https://openid.net/specs/openid-connect-core-1_0.html",children:"OpenID Connect (OIDC)"}),", et Logto applique des mesures de s\xe9curit\xe9 strictes pour prot\xe9ger la connexion utilisateur."]}),"\n",(0,s.jsx)(n.li,{children:"Si vous avez plusieurs applications, vous pouvez utiliser le m\xeame fournisseur d\u2019identit\xe9 (Logto). Une fois que l'utilisateur se connecte \xe0 une application, Logto compl\xe9tera automatiquement le processus de connexion lorsque l'utilisateur acc\xe8de \xe0 une autre application."}),"\n"]}),(0,s.jsxs)(n.p,{children:["Pour en savoir plus sur la logique et les avantages de la connexion bas\xe9e sur la redirection, consultez ",(0,s.jsx)(i,{href:"/concepts/sign-in-experience",children:"Exp\xe9rience de connexion Logto expliqu\xe9e"}),"."]})]})}function a(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}function c(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},28730:(e,n,t)=>{t.d(n,{Ay:()=>a,RM:()=>i});var s=t(25105),r=t(79621);const i=[];function o(e){const n={a:"a",admonition:"admonition",code:"code",hr:"hr",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:"Voici la liste des port\xe9es prises en charge et les revendications correspondantes :"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"openid"})})}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Nom de la revendication"}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{children:"Description"}),(0,s.jsx)(n.th,{children:"Besoin de userinfo ?"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"sub"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"string"})}),(0,s.jsx)(n.td,{children:"L'identifiant unique de l'utilisateur"}),(0,s.jsx)(n.td,{children:"Non"})]})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"profile"})})}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Nom de la revendication"}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{children:"Description"}),(0,s.jsx)(n.th,{children:"Besoin de userinfo ?"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"name"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"string"})}),(0,s.jsx)(n.td,{children:"Le nom complet de l'utilisateur"}),(0,s.jsx)(n.td,{children:"Non"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"username"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"string"})}),(0,s.jsx)(n.td,{children:"Le nom d'utilisateur de l'utilisateur"}),(0,s.jsx)(n.td,{children:"Non"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"picture"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"string"})}),(0,s.jsx)(n.td,{children:"URL de la photo de profil de l'utilisateur final. Cette URL DOIT faire r\xe9f\xe9rence \xe0 un fichier image (par exemple, un fichier PNG, JPEG ou GIF), plut\xf4t qu'\xe0 une page Web contenant une image. Notez que cette URL DOIT sp\xe9cifiquement r\xe9f\xe9rencer une photo de profil de l'utilisateur final adapt\xe9e \xe0 l'affichage lors de la description de l'utilisateur final, plut\xf4t qu'une photo arbitraire prise par l'utilisateur final."}),(0,s.jsx)(n.td,{children:"Non"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"created_at"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"number"})}),(0,s.jsx)(n.td,{children:"Heure \xe0 laquelle l'utilisateur final a \xe9t\xe9 cr\xe9\xe9. Le temps est repr\xe9sent\xe9 comme le nombre de millisecondes \xe9coul\xe9es depuis l'\xe9poque Unix (1970-01-01T00:00:00Z)."}),(0,s.jsx)(n.td,{children:"Non"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"updated_at"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"number"})}),(0,s.jsx)(n.td,{children:"Heure \xe0 laquelle les informations de l'utilisateur final ont \xe9t\xe9 mises \xe0 jour pour la derni\xe8re fois. Le temps est repr\xe9sent\xe9 comme le nombre de millisecondes \xe9coul\xe9es depuis l'\xe9poque Unix (1970-01-01T00:00:00Z)."}),(0,s.jsx)(n.td,{children:"Non"})]})]})]}),"\n",(0,s.jsxs)(n.p,{children:["D'autres ",(0,s.jsx)(n.a,{href:"https://openid.net/specs/openid-connect-core-1_0.html#StandardClaims",children:"revendications standard"})," incluent ",(0,s.jsx)(n.code,{children:"family_name"}),", ",(0,s.jsx)(n.code,{children:"given_name"}),", ",(0,s.jsx)(n.code,{children:"middle_name"}),", ",(0,s.jsx)(n.code,{children:"nickname"}),", ",(0,s.jsx)(n.code,{children:"preferred_username"}),", ",(0,s.jsx)(n.code,{children:"profile"}),", ",(0,s.jsx)(n.code,{children:"website"}),", ",(0,s.jsx)(n.code,{children:"gender"}),", ",(0,s.jsx)(n.code,{children:"birthdate"}),", ",(0,s.jsx)(n.code,{children:"zoneinfo"}),", et ",(0,s.jsx)(n.code,{children:"locale"})," seront \xe9galement incluses dans la port\xe9e ",(0,s.jsx)(n.code,{children:"profile"})," sans avoir besoin de demander le point de terminaison userinfo. Une diff\xe9rence par rapport aux revendications ci-dessus est que ces revendications ne seront renvoy\xe9es que lorsque leurs valeurs ne sont pas vides, tandis que les revendications ci-dessus renverront ",(0,s.jsx)(n.code,{children:"null"})," si les valeurs sont vides."]}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsxs)(n.p,{children:["Contrairement aux revendications standard, les revendications ",(0,s.jsx)(n.code,{children:"created_at"})," et ",(0,s.jsx)(n.code,{children:"updated_at"})," utilisent des millisecondes au lieu de secondes."]})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"email"})})}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Nom de la revendication"}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{children:"Description"}),(0,s.jsx)(n.th,{children:"Besoin de userinfo ?"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"email"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"string"})}),(0,s.jsx)(n.td,{children:"L'adresse e-mail de l'utilisateur"}),(0,s.jsx)(n.td,{children:"Non"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"email_verified"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"boolean"})}),(0,s.jsx)(n.td,{children:"Si l'adresse e-mail a \xe9t\xe9 v\xe9rifi\xe9e"}),(0,s.jsx)(n.td,{children:"Non"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"phone"})})}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Nom de la revendication"}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{children:"Description"}),(0,s.jsx)(n.th,{children:"Besoin de userinfo ?"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"phone_number"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"string"})}),(0,s.jsx)(n.td,{children:"Le num\xe9ro de t\xe9l\xe9phone de l'utilisateur"}),(0,s.jsx)(n.td,{children:"Non"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"phone_number_verified"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"boolean"})}),(0,s.jsx)(n.td,{children:"Si le num\xe9ro de t\xe9l\xe9phone a \xe9t\xe9 v\xe9rifi\xe9"}),(0,s.jsx)(n.td,{children:"Non"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"address"})})}),"\n",(0,s.jsxs)(n.p,{children:["Veuillez vous r\xe9f\xe9rer \xe0 ",(0,s.jsx)(n.a,{href:"https://openid.net/specs/openid-connect-core-1_0.html#AddressClaim",children:"OpenID Connect Core 1.0"})," pour les d\xe9tails de la revendication d'adresse."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"custom_data"})})}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Nom de la revendication"}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{children:"Description"}),(0,s.jsx)(n.th,{children:"Besoin de userinfo ?"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"custom_data"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"object"})}),(0,s.jsx)(n.td,{children:"Les donn\xe9es personnalis\xe9es de l'utilisateur"}),(0,s.jsx)(n.td,{children:"Oui"})]})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"identities"})})}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Nom de la revendication"}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{children:"Description"}),(0,s.jsx)(n.th,{children:"Besoin de userinfo ?"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"identities"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"object"})}),(0,s.jsx)(n.td,{children:"Les identit\xe9s li\xe9es de l'utilisateur"}),(0,s.jsx)(n.td,{children:"Oui"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"sso_identities"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"array"})}),(0,s.jsx)(n.td,{children:"Les identit\xe9s SSO li\xe9es de l'utilisateur"}),(0,s.jsx)(n.td,{children:"Oui"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"roles"})})}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Nom de la revendication"}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{children:"Description"}),(0,s.jsx)(n.th,{children:"Besoin de userinfo ?"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"roles"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"string[]"})}),(0,s.jsx)(n.td,{children:"Les r\xf4les de l'utilisateur"}),(0,s.jsx)(n.td,{children:"Non"})]})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"urn:logto:scope:organizations"})})}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Nom de la revendication"}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{children:"Description"}),(0,s.jsx)(n.th,{children:"Besoin de userinfo ?"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"organizations"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"string[]"})}),(0,s.jsx)(n.td,{children:"Les identifiants d'organisation auxquels l'utilisateur appartient"}),(0,s.jsx)(n.td,{children:"Non"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"organization_data"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"object[]"})}),(0,s.jsx)(n.td,{children:"Les donn\xe9es d'organisation auxquelles l'utilisateur appartient"}),(0,s.jsx)(n.td,{children:"Oui"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"urn:logto:scope:organization_roles"})})}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Nom de la revendication"}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{children:"Description"}),(0,s.jsx)(n.th,{children:"Besoin de userinfo ?"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"organization_roles"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"string[]"})}),(0,s.jsxs)(n.td,{children:["Les r\xf4les d'organisation auxquels l'utilisateur appartient avec le format ",(0,s.jsx)(n.code,{children:"<organization_id>:<role_name>"})]}),(0,s.jsx)(n.td,{children:"Non"})]})})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsxs)(n.p,{children:['En consid\xe9rant la performance et la taille des donn\xe9es, si "Besoin de userinfo ?" est "Oui", cela signifie que la revendication n\'appara\xeetra pas dans le jeton d\u2019identifiant, mais sera renvoy\xe9e dans la r\xe9ponse du ',(0,s.jsx)(n.a,{href:"https://openid.net/specs/openid-connect-core-1_0.html#UserInfo",children:"point de terminaison userinfo"}),"."]})]})}function a(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}},17979:(e,n,t)=>{t.d(n,{Ay:()=>c,RM:()=>o});var s=t(25105),r=t(79621),i=t(28730);const o=[...i.RM];function a(e){const n={a:"a",p:"p",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.p,{children:["Logto utilise les conventions de ",(0,s.jsx)(n.a,{href:"https://openid.net/specs/openid-connect-core-1_0.html#Claims",children:"port\xe9es et revendications"})," OIDC pour d\xe9finir les Port\xe9es et Revendications pour r\xe9cup\xe9rer les informations utilisateur \xe0 partir du Jeton d\u2019identifiant et du point de terminaison OIDC ",(0,s.jsx)("a",{href:"https://openid.net/specs/openid-connect-core-1_0.html#UserInfo",children:"userinfo"}),'. Les termes "Port\xe9e" et "Revendication" proviennent des sp\xe9cifications OAuth 2.0 et OpenID Connect (OIDC).']}),"\n","\n",e.configScopesCode&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("p",{children:"En bref, lorsque vous demandez une Port\xe9e, vous obtiendrez les Revendications correspondantes dans les informations utilisateur. Par exemple, si vous demandez la port\xe9e `email`, vous obtiendrez les donn\xe9es `email` et `email_verified` de l'utilisateur."}),(0,s.jsx)("p",{children:"Par d\xe9faut, le SDK Logto demandera toujours trois Port\xe9es : `openid`, `profile` et `offline_access`, et il n'est pas possible de supprimer ces Port\xe9es par d\xe9faut. Mais vous pouvez ajouter plus de Port\xe9es lors de la configuration de Logto :"}),e.configScopesCode]}),"\n",(0,s.jsx)(i.Ay,{})]})}function c(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}},75934:(e,n,t)=>{t.d(n,{Ay:()=>a,RM:()=>i});var s=t(25105),r=t(79621);const i=[];function o(e){const n={admonition:"admonition",code:"code",mermaid:"mermaid",p:"p",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:"Par d\xe9faut, des revendications limit\xe9es sont retourn\xe9es. Si vous avez besoin de plus d'informations, vous pouvez demander des port\xe9es suppl\xe9mentaires pour acc\xe9der \xe0 plus de revendications."}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsx)(n.p,{children:'Une "revendication" est une affirmation faite \xe0 propos d\'un sujet ; une "port\xe9e" est un groupe de revendications. Dans le cas actuel, une revendication est une information sur l\'utilisateur.'})}),"\n",(0,s.jsx)(n.p,{children:"Voici un exemple non normatif de la relation port\xe9e - revendication :"}),"\n",(0,s.jsx)(n.mermaid,{value:"classDiagram\n  class openid {\n    +sub\n  }\n\n  class profile {\n    +name\n    +username\n    +picture\n    +...\n  }\n\n  class email {\n    +email\n    +email_verified\n  }\n\n  class phone {\n    +phone_number\n    +phone_number_verified\n  }"}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsx)(n.p,{children:"La revendication \"sub\" signifie \"sujet\", qui est l'identifiant unique de l'utilisateur (c'est-\xe0-dire l'ID utilisateur)."})}),"\n",(0,s.jsxs)(n.p,{children:["Le SDK Logto demandera toujours trois port\xe9es : ",(0,s.jsx)(n.code,{children:"openid"}),", ",(0,s.jsx)(n.code,{children:"profile"}),", et ",(0,s.jsx)(n.code,{children:"offline_access"}),"."]})]})}function a(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}},12446:(e,n,t)=>{t.d(n,{Ay:()=>c,Ip:()=>i,RM:()=>o});var s=t(25105),r=t(79621);const i="http://localhost:3000/",o=[];function a(e){const n={admonition:"admonition",p:"p",...(0,r.R)(),...e.components};return(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsxs)(n.p,{children:["Dans les extraits de code suivants, nous supposons que votre application fonctionne sur ",(0,s.jsx)("code",{children:i}),"."]})})}function c(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}},60348:(e,n,t)=>{t.d(n,{Ay:()=>c,RM:()=>o});var s=t(25105),r=t(79621),i=t(42142);const o=[...i.RM];function a(e){const n={hr:"hr",li:"li",mermaid:"mermaid",ol:"ol",p:"p",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:"Avant d\u2019entrer dans les d\xe9tails, voici un aper\xe7u rapide de l\u2019exp\xe9rience utilisateur finale. Le processus de connexion peut \xeatre simplifi\xe9 comme suit :"}),"\n",(0,s.jsx)(n.mermaid,{value:"graph LR\n    A(Votre application) --\x3e|1\\. Lancer la connexion| B(Logto)\n    B --\x3e|2\\. Connexion termin\xe9e| A"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Votre application lance la m\xe9thode de connexion."}),"\n",(0,s.jsx)(n.li,{children:"L\u2019utilisateur est redirig\xe9 vers la page de connexion Logto. Pour les applications natives, le navigateur syst\xe8me est ouvert."}),"\n",(0,s.jsx)(n.li,{children:"L\u2019utilisateur se connecte et est redirig\xe9 vers votre application (configur\xe9e comme l\u2019URI de redirection)."}),"\n"]}),"\n",(0,s.jsx)(i.Ay,{}),"\n",(0,s.jsx)(n.hr,{})]})}function c(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}},17028:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>X,contentTitle:()=>Q,default:()=>ne,frontMatter:()=>J,metadata:()=>s,toc:()=>Y});const s=JSON.parse('{"id":"quick-starts/framework/next-auth/README","title":"Ajoutez l\u2019authentification \xe0 votre application Auth.js (Next Auth)","description":"Ce guide vous montrera comment int\xe9grer Logto dans votre application Next.js avec Auth.js, pr\xe9c\xe9demment connu sous le nom de Next Auth.","source":"@site/i18n/fr/docusaurus-plugin-content-docs/current/quick-starts/framework/next-auth/README.mdx","sourceDirName":"quick-starts/framework/next-auth","slug":"/quick-starts/next-auth","permalink":"/fr/quick-starts/next-auth","draft":false,"unlisted":false,"editUrl":"https://github.com/logto-io/docs/tree/master/i18n/fr/docusaurus-plugin-content-docs/current/quick-starts/framework/next-auth/README.mdx","tags":[],"version":"current","frontMatter":{"slug":"/quick-starts/next-auth","sidebar_label":"Auth.js (Next Auth)","sidebar_custom_props":{"logoFilename":"next-auth.svg","description":"Authentification pour Next.js."}},"sidebar":"quickStartSidebar","previous":{"title":"Next.js (App Router)","permalink":"/fr/quick-starts/next-app-router"},"next":{"title":"Nuxt","permalink":"/fr/quick-starts/nuxt"}}');var r=t(25105),i=t(79621),o=t(95719),a=t(62990),c=t(99225),l=t(17979),d=t(75934);const u=[{value:"Afficher les informations de l&#39;utilisateur",id:"display-user-information",level:3},{value:"Demander des revendications suppl\xe9mentaires",id:"request-additional-claims",level:3},...c.RM,...d.RM,{value:"Revendications n\xe9cessitant des requ\xeates r\xe9seau",id:"claims-that-need-network-requests",level:3},{value:"Obtenir le jeton d\u2019acc\xe8s",id:"get-access-token",level:4},{value:"R\xe9cup\xe9rer les informations de l&#39;utilisateur",id:"fetch-user-info",level:4},{value:"Rafra\xeechissement du jeton d\u2019acc\xe8s",id:"access-token-refresh",level:4},{value:"Port\xe9es et revendications",id:"scopes-and-claims",level:3},...l.RM];function p(e){const n={a:"a",code:"code",h3:"h3",h4:"h4",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h3,{id:"display-user-information",children:"Afficher les informations de l'utilisateur"}),"\n",(0,r.jsxs)(n.p,{children:["Lorsque l'utilisateur est connect\xe9, la valeur de retour de ",(0,r.jsx)(n.code,{children:"auth()"})," sera un objet contenant les informations de l'utilisateur. Vous pouvez afficher ces informations dans votre application :"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",metastring:'title="app/page.tsx"',children:"import { auth } from '@/auth';\n\nexport default async function Home() {\n  const session = await auth();\n\n  return (\n    <main>\n      {session?.user && (\n        <div>\n          <h2>Revendications :</h2>\n          <table>\n            <thead>\n              <tr>\n                <th>Nom</th>\n                <th>Valeur</th>\n              </tr>\n            </thead>\n            <tbody>\n              {Object.entries(session.user).map(([key, value]) => (\n                <tr key={key}>\n                  <td>{key}</td>\n                  <td>{String(value)}</td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      )}\n    </main>\n  );\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"request-additional-claims",children:"Demander des revendications suppl\xe9mentaires"}),"\n",(0,r.jsx)(c.Ay,{method:"auth()"}),"\n",(0,r.jsx)(d.Ay,{hideDefaultScopes:!0}),"\n",(0,r.jsx)(n.p,{children:"Pour demander des port\xe9es suppl\xe9mentaires, vous pouvez configurer les param\xe8tres du fournisseur Logto :"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",metastring:'title="./auth.ts"',children:"import NextAuth from 'next-auth';\nimport Logto from 'next-auth/providers/logto';\n\nexport const { handlers, signIn, signOut, auth } = NextAuth({\n  providers: [\n    Logto({\n      // ...\n      authorization: {\n        params: {\n          // highlight-next-line\n          scope: 'openid offline_access profile email',\n        },\n      },\n      // ...\n    }),\n  ],\n});\n"})}),"\n",(0,r.jsx)(n.h3,{id:"claims-that-need-network-requests",children:"Revendications n\xe9cessitant des requ\xeates r\xe9seau"}),"\n",(0,r.jsxs)(n.p,{children:["Pour \xe9viter de surcharger le jeton d\u2019identifiant, certaines revendications n\xe9cessitent des requ\xeates r\xe9seau pour \xeatre r\xe9cup\xe9r\xe9es. Par exemple, la revendication ",(0,r.jsx)(n.code,{children:"custom_data"})," n'est pas incluse dans l'objet utilisateur m\xeame si elle est demand\xe9e dans les port\xe9es. Pour acc\xe9der \xe0 ces revendications, vous devez effectuer une requ\xeate r\xe9seau pour r\xe9cup\xe9rer les informations de l'utilisateur."]}),"\n",(0,r.jsx)(n.h4,{id:"get-access-token",children:"Obtenir le jeton d\u2019acc\xe8s"}),"\n",(0,r.jsxs)(n.p,{children:["Mettez \xe0 jour la configuration ",(0,r.jsx)(n.code,{children:"NextAuth"})," pour que nous puissions obtenir le jeton d\u2019acc\xe8s :"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",metastring:'title="./auth.ts"',children:"export const { handlers, signIn, signOut, auth } = NextAuth({\n  // ...\n  callbacks: {\n    async jwt({ token, account }) {\n      if (account) {\n        token.accessToken = account.access_token;\n      }\n      return token;\n    },\n    async session({ session, token }) {\n      // Injecter le jeton d\u2019acc\xe8s dans l'objet session\n      session.accessToken = token.accessToken;\n      return session;\n    },\n  },\n});\n"})}),"\n",(0,r.jsx)(n.h4,{id:"fetch-user-info",children:"R\xe9cup\xe9rer les informations de l'utilisateur"}),"\n",(0,r.jsx)(n.p,{children:"Acc\xe9dez maintenant au point de terminaison des informations utilisateur OIDC avec le jeton d\u2019acc\xe8s :"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",metastring:'title="./app/page.tsx"',children:"// ...\n\nexport default async function Home() {\n  const session = await auth();\n  // Remplacez l'URL par votre point de terminaison Logto, doit se terminer par `/oidc/me`\n  const response = await fetch('https://xxx.logto.app/oidc/me', {\n    headers: {\n      Authorization: `Bearer ${session?.accessToken}`,\n    },\n  });\n  const user = await response.json();\n  console.log(user);\n\n  // ...\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:"Ci-dessus est un exemple simple. N'oubliez pas de g\xe9rer les cas d'erreur."}),"\n",(0,r.jsx)(n.h4,{id:"access-token-refresh",children:"Rafra\xeechissement du jeton d\u2019acc\xe8s"}),"\n",(0,r.jsxs)(n.p,{children:["Un jeton d\u2019acc\xe8s est valide pour une courte p\xe9riode de temps. Par d\xe9faut, Next.js n'en r\xe9cup\xe9rera qu'un lorsque la session est cr\xe9\xe9e. Pour impl\xe9menter le rafra\xeechissement automatique du jeton d\u2019acc\xe8s, voir ",(0,r.jsx)(n.a,{href:"https://next-auth.js.org/v3/tutorials/refresh-token-rotation",children:"Rotation du jeton de rafra\xeechissement"}),"."]}),"\n",(0,r.jsx)(n.h3,{id:"scopes-and-claims",children:"Port\xe9es et revendications"}),"\n",(0,r.jsx)(l.Ay,{})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(p,{...e})}):p(e)}function x(e){const n={a:"a",admonition:"admonition",li:"li",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsx)(n.admonition,{type:"tip",children:(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Dans ce guide, nous supposons que vous avez configur\xe9 Next Auth dans votre projet Next.js. Si ce n'est pas le cas, consultez la ",(0,r.jsx)(n.a,{href:"https://next-auth.js.org/getting-started/introduction",children:"documentation de Next Auth"})," pour commencer."]}),"\n"]})})}function j(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(x,{...e})}):x(e)}var m=t(38552),f=t(22002);function g(e){const n={a:"a",p:"p",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"Installez Auth.js via votre gestionnaire de paquets pr\xe9f\xe9r\xe9 :"}),"\n",(0,r.jsxs)(f.A,{children:[(0,r.jsx)(m.A,{value:"npm",label:"npm",children:(0,r.jsx)("pre",{children:(0,r.jsx)("code",{className:"language-bash",children:"npm i next-auth@beta"})})}),(0,r.jsx)(m.A,{value:"pnpm",label:"pnpm",children:(0,r.jsx)("pre",{children:(0,r.jsx)("code",{className:"language-bash",children:"pnpm add next-auth@beta"})})}),(0,r.jsx)(m.A,{value:"yarn",label:"yarn",children:(0,r.jsx)("pre",{children:(0,r.jsx)("code",{className:"language-bash",children:"yarn add next-auth@beta"})})})]}),"\n",(0,r.jsxs)(n.p,{children:["Voir la ",(0,r.jsx)(n.a,{href:"https://authjs.dev/getting-started/installation",children:"documentation Auth.js"})," pour plus de d\xe9tails."]})]})}function v(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(g,{...e})}):g(e)}var b=t(75254),A=t(11233),R=t(12446),y=t(60348);const w=[{value:"Configurer le fournisseur Auth.js",id:"set-up-authjs-provider",level:3},...A.RM,{value:"Configurer l&#39;URI de redirection de connexion",id:"configure-sign-in-redirect-uri",level:3},...y.RM,...R.RM,...b.RM,{value:"Impl\xe9menter la connexion et la d\xe9connexion",id:"implement-sign-in-and-sign-out",level:3},{value:"Impl\xe9menter le bouton de connexion et de d\xe9connexion",id:"implement-sign-in-and-sign-out-button",level:4},{value:"Afficher le bouton de connexion et de d\xe9connexion sur la page",id:"show-sign-in-and-sign-out-button-in-the-page",level:4},{value:"Point de contr\xf4le",id:"checkpoint",level:3}];function N(e){const n={a:"a",code:"code",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h3,{id:"set-up-authjs-provider",children:"Configurer le fournisseur Auth.js"}),"\n",(0,r.jsx)(A.Ay,{}),"\n",(0,r.jsx)(n.p,{children:"Modifiez votre configuration de route API de Auth.js, ajoutez Logto en tant que fournisseur OIDC :"}),"\n",(0,r.jsxs)(f.A,{children:[(0,r.jsxs)(m.A,{value:"v5",label:"Auth.js v5",children:[(0,r.jsx)(n.p,{children:"Configurer les variables d'environnement :"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-env",children:"AUTH_LOGTO_ISSUER=https://xxxx.logto.app/oidc\nAUTH_LOGTO_ID=your-logto-app-id\nAUTH_LOGTO_SECRET=your-logto-app-secret\n"})}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",metastring:'title="./app/api/auth/[...nextauth]/route.ts"',children:"import { handlers } from '@/auth';\nexport const { GET, POST } = handlers;\n"})}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",metastring:'title="./auth.ts"',children:"import NextAuth from 'next-auth';\nimport Logto from 'next-auth/providers/logto';\n\nexport const { handlers, signIn, signOut, auth } = NextAuth({\n  providers: [Logto],\n});\n"})}),(0,r.jsx)(n.p,{children:"Ensuite, vous pouvez \xe9galement ajouter un Middleware optionnel pour maintenir la session active :"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",metastring:'title="./middleware.ts"',children:"export { auth as middleware } from '@/auth';\n"})})]}),(0,r.jsxs)(m.A,{value:"v4",label:"Next Auth v4",children:[(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",metastring:'title="app/api/auth/[...nextauth]/route.ts"',children:"import NextAuth from 'next-auth';\n\nconst handler = NextAuth({\n  providers: [\n    {\n      id: 'logto',\n      name: 'Logto',\n      type: 'oauth',\n      // Vous pouvez obtenir l'URL bien connue depuis la page D\xe9tails de l'application Logto,\n      // dans le champ \"OpenID Provider configuration endpoint\"\n      wellKnown: 'https://xxxx.logto.app/oidc/.well-known/openid-configuration',\n      authorization: { params: { scope: 'openid offline_access profile email' } },\n      clientId: '<logto-app-id>',\n      clientSecret: '<logto-app-secret>',\n      client: {\n        id_token_signed_response_alg: 'ES384',\n      },\n      profile(profile) {\n        // Vous pouvez personnaliser le mappage du profil utilisateur ici\n        return {\n          id: profile.sub,\n          name: profile.name ?? profile.username,\n          email: profile.email,\n          image: profile.picture,\n        };\n      },\n    },\n  ],\n});\n\nexport { handler as GET, handler as POST };\n"})}),(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Remplacez l'URL ",(0,r.jsx)(n.code,{children:"wellKnown"}),' par le "OpenID Provider configuration endpoint" de votre application Logto.']}),"\n",(0,r.jsxs)(n.li,{children:["Remplacez le ",(0,r.jsx)(n.code,{children:"clientId"})," et le ",(0,r.jsx)(n.code,{children:"clientSecret"})," par l'ID et le secret de votre application Logto."]}),"\n",(0,r.jsxs)(n.li,{children:["Personnalisez la fonction ",(0,r.jsx)(n.code,{children:"profile"})," pour mapper le profil utilisateur \xe0 l'objet utilisateur Next Auth, le mappage par d\xe9faut est montr\xe9 dans l'exemple."]}),"\n",(0,r.jsxs)(n.li,{children:["N'oubliez pas de d\xe9finir ",(0,r.jsx)(n.code,{children:"id_token_signed_response_alg"})," sur ",(0,r.jsx)(n.code,{children:"ES384"}),"."]}),"\n"]})]})]}),"\n",(0,r.jsxs)(n.p,{children:["Vous pouvez trouver plus de d\xe9tails dans la ",(0,r.jsx)(n.a,{href:"https://authjs.dev/getting-started/installation",children:"documentation Auth.js"}),"."]}),"\n",(0,r.jsx)(n.h3,{id:"configure-sign-in-redirect-uri",children:"Configurer l'URI de redirection de connexion"}),"\n",(0,r.jsx)(y.Ay,{}),"\n",(0,r.jsx)(R.Ay,{}),"\n",(0,r.jsx)(b.Ay,{figureSrc:"/img/assets/next-auth-redirect-uri.png",redirectUri:"http://localhost:3000/api/auth/callback/logto"}),"\n",(0,r.jsx)(n.h3,{id:"implement-sign-in-and-sign-out",children:"Impl\xe9menter la connexion et la d\xe9connexion"}),"\n",(0,r.jsx)(n.h4,{id:"implement-sign-in-and-sign-out-button",children:"Impl\xe9menter le bouton de connexion et de d\xe9connexion"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",metastring:'title="app/components/sign-in.tsx"',children:"import { signIn } from '@/auth';\n\nexport default function SignIn() {\n  return (\n    <form\n      action={async () => {\n        'use server';\n        await signIn('logto');\n      }}\n    >\n      <button type=\"submit\">Sign In</button>\n    </form>\n  );\n}\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",metastring:'title="app/components/sign-out.tsx"',children:"import { signOut } from '@/auth';\n\nexport function SignOut() {\n  return (\n    <form\n      action={async () => {\n        'use server';\n        await signOut();\n      }}\n    >\n      <button type=\"submit\">Sign Out</button>\n    </form>\n  );\n}\n"})}),"\n",(0,r.jsx)(n.h4,{id:"show-sign-in-and-sign-out-button-in-the-page",children:"Afficher le bouton de connexion et de d\xe9connexion sur la page"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",metastring:'title="app/page.tsx"',children:"import SignIn from './components/sign-in';\nimport SignOut from './components/sign-out';\nimport { auth } from '@/auth';\n\nexport default function Home() {\n  const session = await auth();\n\n  return <div>{session?.user ? <SignOut /> : <SignIn />}</div>;\n}\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Ci-dessus est un exemple simple, vous pouvez consulter la ",(0,r.jsx)(n.a,{href:"https://authjs.dev/getting-started/session-management/login",children:"documentation Auth.js"})," pour plus de d\xe9tails."]}),"\n",(0,r.jsx)(n.h3,{id:"checkpoint",children:"Point de contr\xf4le"}),"\n",(0,r.jsx)(n.p,{children:"Maintenant, vous pouvez tester votre application pour voir si l'authentification fonctionne comme pr\xe9vu."})]})}function k(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(N,{...e})}):N(e)}var I=t(38235);function z(e){const n={code:"code",pre:"pre",...(0,i.R)(),...e.components};return(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",metastring:'title="./auth.ts"',children:"import NextAuth from 'next-auth';\nimport Logto from 'next-auth/providers/logto';\n\nexport const { handlers, signIn, signOut, auth } = NextAuth({\n  providers: [\n    Logto({\n      // ...\n      authorization: {\n        params: {\n          scope: 'openid offline_access profile email',\n          // highlight-next-line\n          resource: 'https://shopping.your-app.com/api',\n        },\n      },\n      // ...\n    }),\n  ],\n});\n"})})}function L(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(z,{...e})}):z(e)}function _(e){const n={code:"code",pre:"pre",...(0,i.R)(),...e.components};return(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",metastring:'title="./auth.ts"',children:"import NextAuth from 'next-auth';\nimport Logto from 'next-auth/providers/logto';\n\nexport const { handlers, signIn, signOut, auth } = NextAuth({\n  providers: [\n    Logto({\n      // ...\n      authorization: {\n        params: {\n          // highlight-next-line\n          scope: 'openid offline_access profile email shopping:read shopping:write',\n          resource: 'https://shopping.your-app.com/api',\n        },\n      },\n      // ...\n    }),\n  ],\n});\n"})})}function q(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(_,{...e})}):_(e)}function S(e){const n={code:"code",pre:"pre",...(0,i.R)(),...e.components};return(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",metastring:'title="./auth.ts"',children:"import NextAuth from 'next-auth';\nimport Logto from 'next-auth/providers/logto';\n\nexport const { handlers, signIn, signOut, auth } = NextAuth({\n  providers: [\n    Logto({\n      // ...\n      authorization: {\n        params: {\n          // highlight-next-line\n          scope: 'openid offline_access profile read write',\n          resource: 'https://shopping.your-app.com/api',\n        },\n      },\n      // ...\n    }),\n  ],\n});\n"})})}function C(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(S,{...e})}):S(e)}const O=[...I.RM];function P(e){return(0,r.jsx)(I.Ay,{configResourcesCode:(0,r.jsx)(L,{}),configResourcesWithScopesCode:(0,r.jsx)(q,{}),configResourcesWithSharedScopesCode:(0,r.jsx)(C,{})})}function T(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(P,{...e})}):P()}function D(e){const n={code:"code",h4:"h4",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"Auth.js ne r\xe9cup\xe9rera le jeton d\u2019acc\xe8s qu'une seule fois sans param\xe8tre de ressource. Nous devons impl\xe9menter nous-m\xeames la r\xe9cup\xe9ration du jeton d\u2019acc\xe8s."}),"\n",(0,r.jsx)(n.h4,{id:"get-refresh-token",children:"Obtenir le jeton de rafra\xeechissement"}),"\n",(0,r.jsxs)(n.p,{children:['Mettez \xe0 jour la configuration du fournisseur Logto, ajoutez le param\xe8tre "prompt" et d\xe9finissez-le sur ',(0,r.jsx)(n.code,{children:"consent"}),", et assurez-vous que la port\xe9e ",(0,r.jsx)(n.code,{children:"offline_access"})," est incluse :"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",metastring:'title="./auth.ts"',children:"import NextAuth from 'next-auth';\n\nexport const { handlers, signIn, signOut, auth } = NextAuth({\n  // ...\n  authorization: {\n    params: {\n      // highlight-next-line\n      prompt: 'consent',\n      scope: 'openid offline_access shopping:read shopping:write',\n      resource: 'https://shopping.your-app.com/api',\n      // ...\n    },\n  },\n  // ...\n});\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Ajoutez ensuite un callback pour enregistrer le ",(0,r.jsx)(n.code,{children:"refresh_token"})," dans la session :"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",metastring:'title="./auth.ts"',children:"export const { handlers, signIn, signOut, auth } = NextAuth({\n  // ...\n  callbacks: {\n    async jwt({ token, account }) {\n      if (account) {\n        // ...\n        // highlight-next-line\n        token.refreshToken = account.refresh_token;\n      }\n      return token;\n    },\n    async session({ session, token }) {\n      // ...\n      // highlight-next-line\n      session.refreshToken = token.refreshToken;\n      return session;\n    },\n  },\n});\n"})}),"\n",(0,r.jsx)(n.h4,{id:"fetch-access-token",children:"R\xe9cup\xe9rer le jeton d\u2019acc\xe8s"}),"\n",(0,r.jsxs)(n.p,{children:["Avec le ",(0,r.jsx)(n.code,{children:"refresh_token"}),", nous pouvons r\xe9cup\xe9rer le jeton d\u2019acc\xe8s \xe0 partir du point de terminaison de jeton OIDC de Logto."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",metastring:'title="./app/page.tsx"',children:"// ...\n\nexport default async function Home() {\n  const session = await auth();\n\n  if (session?.refreshToken) {\n    // Remplacez l'ID et le secret de l'application par les v\xf4tres, vous pouvez v\xe9rifier la section \"Integration\".\n    const basicAuth = Buffer.from('<logto-app-id>:<logto-app-secret>').toString('base64');\n\n    // Remplacez l'URL par votre point de terminaison Logto, doit se terminer par `/oidc/token`\n    const response = await fetch('https://xxx.logto.app/oidc/token', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded',\n        Authorization: `Basic ${basicAuth}`,\n      },\n      body: new URLSearchParams({\n        grant_type: 'refresh_token',\n        refresh_token: session.refreshToken,\n        resource: 'https://shopping.your-app.com/api',\n      }).toString(),\n    });\n\n    const data = await response.json();\n    console.log(data.access_token);\n  }\n\n  // ...\n}\n"})})]})}function U(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(D,{...e})}):D(e)}const M=[{value:"Obtenir le jeton de rafra\xeechissement",id:"get-refresh-token",level:4},{value:"R\xe9cup\xe9rer le jeton d\u2019acc\xe8s",id:"fetch-access-token",level:4}];function E(e){return(0,r.jsx)(U,{})}function V(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(E,{...e})}):E()}var B=t(41366);function F(e){const n={code:"code",pre:"pre",...(0,i.R)(),...e.components};return(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",metastring:'title="./auth.ts"',children:"import NextAuth from 'next-auth';\nimport Logto from 'next-auth/providers/logto';\n\nexport const { handlers, signIn, signOut, auth } = NextAuth({\n  providers: [\n    Logto({\n      // ...\n      authorization: {\n        params: {\n          // highlight-next-line\n          scope: 'openid offline_access urn:logto:scope:organizations',\n        },\n      },\n      // ...\n    }),\n  ],\n});\n"})})}function H(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(F,{...e})}):F(e)}function $(e){const n={code:"code",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"Similaire au jeton d\u2019acc\xe8s pour les ressources API, nous pouvons utiliser le jeton de rafra\xeechissement pour r\xe9cup\xe9rer le jeton d\u2019acc\xe8s de l\u2019organisation."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",metastring:'title="./app/page.tsx"',children:"// ...\n\nexport default async function Home() {\n  const session = await auth();\n\n  if (session?.refreshToken) {\n    // Remplacez l'ID et le secret de l'application par les v\xf4tres, vous pouvez v\xe9rifier la section \"Integration\".\n    const basicAuth = Buffer.from('<logto-app-id>:<logto-app-secret>').toString('base64');\n\n    // Remplacez l'URL par votre point de terminaison Logto, elle doit se terminer par `/oidc/token`\n    const response = await fetch('https://xxx.logto.app/oidc/token', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded',\n        Authorization: `Basic ${basicAuth}`,\n      },\n      body: new URLSearchParams({\n        grant_type: 'refresh_token',\n        refresh_token: session.refreshToken,\n        // highlight-next-line\n        resource: 'urn:logto:scope:organizations',\n        // highlight-next-line\n        organization_id: 'organization-id',\n      }).toString(),\n    });\n\n    const data = await response.json();\n    console.log(data.access_token);\n  }\n\n  // ...\n}\n"})})]})}function G(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)($,{...e})}):$(e)}const W=[...B.RM];function K(e){return(0,r.jsx)(B.Ay,{organizationScope:"urn:logto:scope:organizations",configOrganizationCode:(0,r.jsx)(H,{}),getOrganizationAccessTokenCode:(0,r.jsx)(G,{})})}function Z(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(K,{...e})}):K()}const J={slug:"/quick-starts/next-auth",sidebar_label:"Auth.js (Next Auth)",sidebar_custom_props:{logoFilename:"next-auth.svg",description:"Authentification pour Next.js."}},Q="Ajoutez l\u2019authentification \xe0 votre application Auth.js (Next Auth)",X={},Y=[{value:"Pr\xe9requis",id:"prerequisites",level:2},{value:"Installation",id:"installation",level:2},{value:"Int\xe9gration",id:"integration",level:2},...w,{value:"R\xe9cup\xe9rer les informations de l&#39;utilisateur",id:"fetch-user-information",level:2},...u,{value:"Ressources API",id:"api-resources",level:2},...o.RM,{value:"Configurer le fournisseur Logto",id:"configure-logto-provider",level:3},...O,{value:"R\xe9cup\xe9rer le jeton d\u2019acc\xe8s pour la ressource API",id:"fetch-access-token-for-the-api-resource",level:3},...M,{value:"R\xe9cup\xe9rer les jetons d\u2019organisation",id:"fetch-organization-tokens",level:3},...W,{value:"Lectures compl\xe9mentaires",id:"further-readings",level:2},...a.RM];function ee(e){const n={a:"a",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",ul:"ul",...(0,i.R)(),...e.components},{Url:t}=n;return t||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Url",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"ajoutez-lauthentification-\xe0-votre-application-authjs-next-auth",children:"Ajoutez l\u2019authentification \xe0 votre application Auth.js (Next Auth)"})}),"\n",(0,r.jsxs)(n.p,{children:["Ce guide vous montrera comment int\xe9grer Logto dans votre application Next.js avec ",(0,r.jsx)(n.a,{href:"https://authjs.dev/",children:"Auth.js"}),", pr\xe9c\xe9demment connu sous le nom de Next Auth."]}),"\n",(0,r.jsx)(j,{}),"\n",(0,r.jsx)(n.h2,{id:"prerequisites",children:"Pr\xe9requis"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Un compte ",(0,r.jsx)(n.a,{href:"https://cloud.logto.io",children:"Logto Cloud"})," ou un ",(0,r.jsx)(n.a,{href:"/introduction/set-up-logto-oss",children:"Logto auto-h\xe9berg\xe9"}),"."]}),"\n",(0,r.jsx)(n.li,{children:"Une application traditionnelle Logto cr\xe9\xe9e."}),"\n",(0,r.jsxs)(n.li,{children:["Un projet Next.js avec Auth.js, consultez la ",(0,r.jsx)(n.a,{href:"https://authjs.dev/getting-started/installation",children:"documentation Auth.js"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,r.jsx)(v,{}),"\n",(0,r.jsx)(n.h2,{id:"integration",children:"Int\xe9gration"}),"\n",(0,r.jsx)(k,{}),"\n",(0,r.jsx)(n.h2,{id:"fetch-user-information",children:"R\xe9cup\xe9rer les informations de l'utilisateur"}),"\n",(0,r.jsx)(h,{}),"\n",(0,r.jsx)(n.h2,{id:"api-resources",children:"Ressources API"}),"\n",(0,r.jsx)(o.Ay,{}),"\n",(0,r.jsx)(n.h3,{id:"configure-logto-provider",children:"Configurer le fournisseur Logto"}),"\n",(0,r.jsx)(T,{}),"\n",(0,r.jsx)(n.h3,{id:"fetch-access-token-for-the-api-resource",children:"R\xe9cup\xe9rer le jeton d\u2019acc\xe8s pour la ressource API"}),"\n",(0,r.jsx)(V,{}),"\n",(0,r.jsx)(n.h3,{id:"fetch-organization-tokens",children:"R\xe9cup\xe9rer les jetons d\u2019organisation"}),"\n",(0,r.jsx)(Z,{}),"\n",(0,r.jsx)(n.h2,{id:"further-readings",children:"Lectures compl\xe9mentaires"}),"\n",(0,r.jsx)(a.Ay,{}),"\n",(0,r.jsx)(t,{href:"https://blog.logto.io/next-auth-v5",children:(0,r.jsx)(n.p,{children:"Migration de l'int\xe9gration Logto de NextAuth.js v4 \xe0 v5"})})]})}function ne(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(ee,{...e})}):ee(e)}},38552:(e,n,t)=>{t.d(n,{A:()=>o});t(58101);var s=t(13526);const r={tabItem:"tabItem_dgSZ"};var i=t(25105);function o(e){let{children:n,hidden:t,className:o}=e;return(0,i.jsx)("div",{role:"tabpanel",className:(0,s.A)(r.tabItem,o),hidden:t,children:n})}},22002:(e,n,t)=>{t.d(n,{A:()=>R});var s=t(58101),r=t(13526),i=t(60755),o=t(55234),a=t(6635),c=t(4100),l=t(35661),d=t(42752);function u(e){return s.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,s.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function p(e){const{values:n,children:t}=e;return(0,s.useMemo)((()=>{const e=n??function(e){return u(e).map((e=>{let{props:{value:n,label:t,attributes:s,default:r}}=e;return{value:n,label:t,attributes:s,default:r}}))}(t);return function(e){const n=(0,l.XI)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,t])}function h(e){let{value:n,tabValues:t}=e;return t.some((e=>e.value===n))}function x(e){let{queryString:n=!1,groupId:t}=e;const r=(0,o.W6)(),i=function(e){let{queryString:n=!1,groupId:t}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:n,groupId:t});return[(0,c.aZ)(i),(0,s.useCallback)((e=>{if(!i)return;const n=new URLSearchParams(r.location.search);n.set(i,e),r.replace({...r.location,search:n.toString()})}),[i,r])]}function j(e){const{defaultValue:n,queryString:t=!1,groupId:r}=e,i=p(e),[o,c]=(0,s.useState)((()=>function(e){let{defaultValue:n,tabValues:t}=e;if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!h({value:n,tabValues:t}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${t.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const s=t.find((e=>e.default))??t[0];if(!s)throw new Error("Unexpected error: 0 tabValues");return s.value}({defaultValue:n,tabValues:i}))),[l,u]=x({queryString:t,groupId:r}),[j,m]=function(e){let{groupId:n}=e;const t=function(e){return e?`docusaurus.tab.${e}`:null}(n),[r,i]=(0,d.Dv)(t);return[r,(0,s.useCallback)((e=>{t&&i.set(e)}),[t,i])]}({groupId:r}),f=(()=>{const e=l??j;return h({value:e,tabValues:i})?e:null})();(0,a.A)((()=>{f&&c(f)}),[f]);return{selectedValue:o,selectValue:(0,s.useCallback)((e=>{if(!h({value:e,tabValues:i}))throw new Error(`Can't select invalid tab value=${e}`);c(e),u(e),m(e)}),[u,m,i]),tabValues:i}}var m=t(21929);const f={tabList:"tabList_osvQ",tabItem:"tabItem_dc4O"};var g=t(25105);function v(e){let{className:n,block:t,selectedValue:s,selectValue:o,tabValues:a}=e;const c=[],{blockElementScrollPositionUntilNextRender:l}=(0,i.a_)(),d=e=>{const n=e.currentTarget,t=c.indexOf(n),r=a[t].value;r!==s&&(l(n),o(r))},u=e=>{let n=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const t=c.indexOf(e.currentTarget)+1;n=c[t]??c[0];break}case"ArrowLeft":{const t=c.indexOf(e.currentTarget)-1;n=c[t]??c[c.length-1];break}}n?.focus()};return(0,g.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.A)("tabs",{"tabs--block":t},n),children:a.map((e=>{let{value:n,label:t,attributes:i}=e;return(0,g.jsx)("li",{role:"tab",tabIndex:s===n?0:-1,"aria-selected":s===n,ref:e=>{c.push(e)},onKeyDown:u,onClick:d,...i,className:(0,r.A)("tabs__item",f.tabItem,i?.className,{"tabs__item--active":s===n}),children:t??n},n)}))})}function b(e){let{lazy:n,children:t,selectedValue:i}=e;const o=(Array.isArray(t)?t:[t]).filter(Boolean);if(n){const e=o.find((e=>e.props.value===i));return e?(0,s.cloneElement)(e,{className:(0,r.A)("margin-top--md",e.props.className)}):null}return(0,g.jsx)("div",{className:"margin-top--md",children:o.map(((e,n)=>(0,s.cloneElement)(e,{key:n,hidden:e.props.value!==i})))})}function A(e){const n=j(e);return(0,g.jsxs)("div",{className:(0,r.A)("tabs-container",f.tabList),children:[(0,g.jsx)(v,{...n,...e}),(0,g.jsx)(b,{...n,...e})]})}function R(e){const n=(0,m.A)();return(0,g.jsx)(A,{...e,children:u(e.children)},String(n))}},79621:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>a});var s=t(58101);const r={},i=s.createContext(r);function o(e){const n=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);