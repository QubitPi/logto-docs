"use strict";(self.webpackChunk_logto_docs=self.webpackChunk_logto_docs||[]).push([[4505],{64653:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>j,contentTitle:()=>x,default:()=>k,frontMatter:()=>f,metadata:()=>r,toc:()=>v});const r=JSON.parse('{"id":"quick-starts/framework/flutterflow/README","title":"Personnaliser le FlutterFlow CustomAuthManager en utilisant le Logto SDK","description":"FlutterFlow dispose d\'une fonctionnalit\xe9 int\xe9gr\xe9e de custom authentication qui vous permet d\'authentifier les utilisateurs en utilisant votre propre backend. Cependant, le flux d\'authentification personnalis\xe9 int\xe9gr\xe9 a \xe9t\xe9 con\xe7u pour fonctionner avec un seul appel API d\'authentification. Si vous utilisez un fournisseur d\'identit\xe9 tiers (IdP), la requ\xeate d\u2019authentification ne peut \xeatre effectu\xe9e qu\'en utilisant le type de subvention Resource Owner Password Credentials, ce qui n\'est pas recommand\xe9 pour une utilisation en production. Voir Deprecated ropc grant type pour plus de d\xe9tails.","source":"@site/i18n/fr/docusaurus-plugin-content-docs/current/quick-starts/framework/flutterflow/README.mdx","sourceDirName":"quick-starts/framework/flutterflow","slug":"/quick-starts/flutter-flow","permalink":"/fr/quick-starts/flutter-flow","draft":false,"unlisted":false,"editUrl":"https://github.com/logto-io/docs/tree/master/i18n/fr/docusaurus-plugin-content-docs/current/quick-starts/framework/flutterflow/README.mdx","tags":[],"version":"current","frontMatter":{"slug":"/quick-starts/flutter-flow","sidebar_label":"FlutterFlow","sidebar_custom_props":{"description":"FlutterFlow est un framework low code pour cr\xe9er des applications hybrides flutter."}},"sidebar":"quickStartSidebar","previous":{"title":"Flutter","permalink":"/fr/quick-starts/flutter"},"next":{"title":"Go","permalink":"/fr/quick-starts/go"}}');var i=n(25105),o=n(79621);function l(e){const t={code:"code",pre:"pre",...(0,o.R)(),...e.components};return(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-dart",children:"// lib/auth/custom_auth/custom_auth_manager.dart\n\nimport 'dart:async';\n\nimport 'package:flutter/foundation.dart';\nimport 'package:http/http.dart' as http;\nimport 'package:logto_dart_sdk/logto_client.dart';\nimport 'package:logto_dart_sdk/src/modules/id_token.dart';\n\nimport 'custom_auth_user_provider.dart';\n\nexport 'custom_auth_manager.dart';\n\n\nclass CustomAuthManager {\n  late LogtoClient logtoClient;\n\n  final logtoConfig = const LogtoConfig(\n      appId: '<YOUR-APP-ID>',\n      endpoint: '<YOUR-LOGTO-ENDPOINT>');\n\n\n  // ...\n\n  FlutterFlowAuthAuthUser? _updateCurrentUser(\n      {bool loggedIn = false, String? uid, OpenIdClaims? idToken}) {\n    // Mettre \xe0 jour le flux de l'utilisateur actuel.\n    final updatedUser = FlutterFlowAuthAuthUser(\n      loggedIn: loggedIn,\n      uid: uid,\n      idToken: idToken,\n    );\n\n    flutterFlowAuthAuthUserSubject.add(updatedUser);\n\n    return updatedUser;\n  }\n\n  Future initialize() async {\n    logtoClient = LogtoClient(config: logtoConfig, httpClient: http.Client());\n\n    late OpenIdClaims? idToken;\n\n    try {\n      idToken = await logtoClient.idTokenClaims;\n    } catch (e) {\n      if (kDebugMode) {\n        print('Erreur lors de l\\'initialisation de l\\'authentification : $e');\n      }\n    }\n\n    _updateCurrentUser(\n        loggedIn: idToken != null, uid: idToken?.subject, idToken: idToken);\n  }\n}\n\nFlutterFlowAuthAuthUser? currentUser;\nbool get loggedIn => currentUser?.loggedIn ?? false;\n\n"})})}function a(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}function s(e){const t={code:"code",pre:"pre",...(0,o.R)(),...e.components};return(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-dart",children:"// lib/auth/custom_auth/custom_auth_user_provider.dart\n\nimport 'package:logto_dart_sdk/src/modules/id_token.dart';\nimport 'package:rxdart/rxdart.dart';\n\nimport 'custom_auth_manager.dart';\n\nclass FlutterFlowAuthAuthUser {\n  FlutterFlowAuthAuthUser({required this.loggedIn, this.uid, this.idToken});\n\n  bool loggedIn;\n  String? uid;\n  OpenIdClaims? idToken;\n}\n\n/// G\xe9n\xe8re un flux de l'utilisateur authentifi\xe9.\nBehaviorSubject<FlutterFlowAuthAuthUser> flutterFlowAuthAuthUserSubject =\n    BehaviorSubject.seeded(FlutterFlowAuthAuthUser(loggedIn: false));\nStream<FlutterFlowAuthAuthUser> flutterFlowAuthAuthUserStream() =>\n    flutterFlowAuthAuthUserSubject\n        .asBroadcastStream()\n        .map((user) => currentUser = user);\n\n"})})}function u(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(s,{...e})}):s(e)}function d(e){const t={a:"a",admonition:"admonition",code:"code",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...e.components},{Details:n}=t;return n||function(e,t){throw new Error("Expected "+(t?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,i.jsxs)(n,{children:[(0,i.jsx)("summary",{children:(0,i.jsx)(t.h3,{id:"flutter_secure_storage",children:"flutter_secure_storage"})}),(0,i.jsxs)(t.p,{children:["Nous utilisons ",(0,i.jsx)(t.a,{href:"https://pub.dev/packages/flutter_secure_storage",children:"flutter_secure_storage"})," pour impl\xe9menter le stockage s\xe9curis\xe9 persistant de jetons multiplateforme. Sous le capot :"]}),(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"Keychain est utilis\xe9 pour iOS"}),"\n",(0,i.jsx)(t.li,{children:"Le chiffrement AES est utilis\xe9 pour Android."}),"\n"]}),(0,i.jsx)(t.h3,{id:"config-android-version",children:"Configurer la version Android :"}),(0,i.jsx)(t.p,{children:"Dans [project]/android/app/build.gradle, d\xe9finissez minSdkVersion sur >= 18."}),(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-kotlin",children:"  android {\n      ...\n\n      defaultConfig {\n          ...\n          minSdkVersion 18\n          ...\n      }\n  }\n"})}),(0,i.jsx)(t.h3,{id:"disable-autobackup",children:"D\xe9sactiver la sauvegarde automatique :"}),(0,i.jsx)(t.admonition,{type:"note",children:(0,i.jsxs)(t.p,{children:["Par d\xe9faut, Android sauvegarde les donn\xe9es sur Google Drive. Cela peut provoquer l'exception java.security.InvalidKeyException",":Failed"," to unwrap key."]})}),(0,i.jsx)(t.p,{children:"Pour \xe9viter cela, vous pouvez d\xe9sactiver la sauvegarde automatique pour votre application ou exclure sharedprefs de FlutterSecureStorage."}),(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsxs)(t.p,{children:["Pour d\xe9sactiver la sauvegarde automatique, allez dans le fichier manifeste de votre application et d\xe9finissez la valeur bool\xe9enne android",":allowBackup"," :"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-xml",children:'<manifest ... >\n    ...\n    <application\n      android:allowBackup="false"\n      android:fullBackupContent="false"\n      ...\n    >\n        ...\n    </application>\n</manifest>\n\n'})}),"\n"]}),"\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsx)(t.p,{children:"Exclure sharedprefs de FlutterSecureStorage."}),"\n",(0,i.jsxs)(t.p,{children:["Si vous devez activer android",":fullBackupContent"," pour votre application. Configurez une r\xe8gle de sauvegarde pour ",(0,i.jsx)(t.a,{href:"https://developer.android.com/guide/topics/data/autobackup#IncludingFiles",children:"exclure"})," les prefs utilis\xe9es par le plugin :"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-xml",children:'<application ...\n  android:fullBackupContent="@xml/backup_rules">\n</application>\n'})}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-xml",children:'<?xml version="1.0" encoding="utf-8"?>\n<full-backup-content>\n  <exclude domain="sharedpref" path="FlutterSecureStorage"/>\n</full-backup-content>\n'})}),"\n",(0,i.jsxs)(t.p,{children:["Veuillez consulter ",(0,i.jsx)(t.a,{href:"https://pub.dev/packages/flutter_secure_storage#configure-android-version",children:"flutter_secure_storage"})," pour plus de d\xe9tails."]}),"\n"]}),"\n"]})]})}function c(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}function p(e){const t={a:"a",admonition:"admonition",code:"code",h3:"h3",p:"p",pre:"pre",...(0,o.R)(),...e.components},{Details:n}=t;return n||function(e,t){throw new Error("Expected "+(t?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,i.jsxs)(n,{children:[(0,i.jsx)("summary",{children:(0,i.jsx)(t.h3,{id:"flutter_web_auth",children:"flutter_web_auth"})}),(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.a,{href:"https://pub.dev/packages/flutter_web_auth",children:"flutter_web_auth"})," est utilis\xe9 derri\xe8re le SDK flutter de Logto. Nous nous appuyons sur son interface d'interaction bas\xe9e sur webview pour ouvrir les pages d'Autorisation (Authorization) de Logto."]}),(0,i.jsx)(t.admonition,{type:"note",children:(0,i.jsx)(t.p,{children:"Ce plugin utilise ASWebAuthenticationSession sur iOS 12+ et macOS 10.15+, SFAuthenticationSession sur iOS 11, Chrome Custom Tabs sur Android et ouvre une nouvelle fen\xeatre sur le Web.\nVous pouvez le construire avec iOS 8+, mais il est actuellement uniquement pris en charge par iOS 11 ou sup\xe9rieur."})}),(0,i.jsx)(t.h3,{id:"register-the-callback-url-on-android",children:"Enregistrer l'URL de rappel sur Android"}),(0,i.jsx)(t.p,{children:"Afin de capturer l'URL de rappel depuis la page de connexion de Logto, vous devrez enregistrer votre redirectUri de connexion dans le fichier AndroidManifest.xml."}),(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-xml",children:'<activity android:name="com.linusu.flutter_web_auth.CallbackActivity" android:exported="true">\n    <intent-filter android:label="flutter_web_auth">\n        <action android:name="android.intent.action.VIEW"/>\n        <category android:name="android.intent.category.DEFAULT"/>\n        <category android:name="android.intent.category.BROWSABLE"/>\n        <data android:scheme="io.logto"/>\n    </intent-filter>\n</activity>\n'})})]})}function h(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(p,{...e})}):p(e)}const g=n.p+"assets/images/flutter-flow-custom-authentication-29ea475c8e52fe77ef9348d6a769ffa8.png",m=n.p+"assets/images/flutter-flow-github-push-ac7fd20f25760f669a19dd9fe61906b3.png",f={slug:"/quick-starts/flutter-flow",sidebar_label:"FlutterFlow",sidebar_custom_props:{description:"FlutterFlow est un framework low code pour cr\xe9er des applications hybrides flutter."}},x="Personnaliser le FlutterFlow CustomAuthManager en utilisant le Logto SDK",j={},v=[{value:"Pr\xe9requis",id:"prerequisites",level:2},{value:"Activer le code personnalis\xe9 FlutterFlow",id:"enable-flutterflow-custom-code",level:2},{value:"Cr\xe9ez votre interface utilisateur dans FlutterFlow",id:"create-your-ui-in-flutterflow",level:2},{value:"Personnaliser le CustomAuthManager",id:"customize-the-customauthmanager",level:2},{value:"Installer la d\xe9pendance Logto SDK",id:"install-logto-sdk-dependency",level:3},{value:"Mettre \xe0 jour le UserProvider",id:"update-the-userprovider",level:3},{value:"Initialiser le client logto dans CustomAuthManager",id:"init-the-logto-client-in-customauthmanager",level:3},{value:"Impl\xe9menter la m\xe9thode de connexion",id:"implement-the-sign-in-method",level:3},{value:"Impl\xe9menter la m\xe9thode de d\xe9connexion",id:"implement-the-sign-out-method",level:3},{value:"Mettre \xe0 jour les m\xe9thodes utilitaires d&#39;authentification",id:"update-the-auth-util-methods",level:3},{value:"Int\xe9grer l&#39;authentification personnalis\xe9e dans votre interface utilisateur",id:"integrate-the-custom-authentication-in-your-ui",level:2},{value:"Page d&#39;accueil",id:"home-page",level:3},{value:"Page de profil utilisateur",id:"user-profile-page",level:3},{value:"Lectures compl\xe9mentaires",id:"further-readings",level:2},{value:"D\xe9pannage des d\xe9pendances",id:"dependency-troubleshooting",level:2},{value:"flutter_secure_storage",id:"flutter_secure_storage",level:3},{value:"Configurer la version Android :",id:"config-android-version",level:3},{value:"D\xe9sactiver la sauvegarde automatique :",id:"disable-autobackup",level:3},{value:"flutter_web_auth",id:"flutter_web_auth",level:3},{value:"Enregistrer l&#39;URL de rappel sur Android",id:"register-the-callback-url-on-android",level:3}];function b(e){const t={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.header,{children:(0,i.jsx)(t.h1,{id:"personnaliser-le-flutterflow-customauthmanager-en-utilisant-le-logto-sdk",children:"Personnaliser le FlutterFlow CustomAuthManager en utilisant le Logto SDK"})}),"\n",(0,i.jsxs)(t.p,{children:["FlutterFlow dispose d'une fonctionnalit\xe9 int\xe9gr\xe9e de ",(0,i.jsx)(t.a,{href:"https://docs.flutterflow.io/data-and-backend/custom-authentication",children:"custom authentication"})," qui vous permet d'authentifier les utilisateurs en utilisant votre propre backend. Cependant, le flux d'authentification personnalis\xe9 int\xe9gr\xe9 a \xe9t\xe9 con\xe7u pour fonctionner avec un seul appel API d'authentification. Si vous utilisez un fournisseur d'identit\xe9 tiers (IdP), la requ\xeate d\u2019authentification ne peut \xeatre effectu\xe9e qu'en utilisant le type de subvention ",(0,i.jsx)(t.code,{children:"Resource Owner Password Credentials"}),", ce qui n'est pas recommand\xe9 pour une utilisation en production. Voir ",(0,i.jsx)(t.a,{href:"https://blog.logto.io/deprecated-ropc-grant-type/",children:"Deprecated ropc grant type"})," pour plus de d\xe9tails."]}),"\n",(0,i.jsxs)(t.p,{children:["Un flux d'authentification OpenID Connect (OIDC) standard implique plusieurs \xe9tapes, telles que l'Autorisation (Authorization), l'\xe9change de jetons et la r\xe9cup\xe9ration d'informations utilisateur. Pour impl\xe9menter un flux d'authentification OIDC standard avec un IdP comme Logto, vous devez personnaliser la classe ",(0,i.jsx)(t.code,{children:"CustomAuthManager"})," dans FlutterFlow."]}),"\n",(0,i.jsxs)(t.p,{children:["Ce tutoriel vous montrera comment personnaliser la classe ",(0,i.jsx)(t.code,{children:"CustomAuthManager"})," dans FlutterFlow en utilisant le Logto ",(0,i.jsx)(t.a,{href:"/fr/quick-starts/flutter",children:"Flutter SDK"}),". Vous pouvez tirer parti du Logto SDK pour le flux d'authentification OIDC standard tout en conservant les avantages du constructeur d'interface utilisateur FlutterFlow."]}),"\n",(0,i.jsx)(t.admonition,{type:"tip",children:(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:["Le package Logto SDK est disponible sur ",(0,i.jsx)(t.a,{href:"https://pub.dev/packages/logto_dart_sdk",children:"pub.dev"})," et le ",(0,i.jsx)(t.a,{href:"https://github.com/logto-io/dart",children:"d\xe9p\xf4t GitHub"})," de Logto."]}),"\n",(0,i.jsx)(t.li,{children:"Le SDK est actuellement uniquement adapt\xe9 aux plateformes Android et iOS."}),"\n"]})}),"\n",(0,i.jsx)(t.h2,{id:"prerequisites",children:"Pr\xe9requis"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:["Un compte ",(0,i.jsx)(t.a,{href:"https://cloud.logto.io",children:"Logto Cloud"})," ou un ",(0,i.jsx)(t.a,{href:"/introduction/set-up-logto-oss",children:"Logto auto-h\xe9berg\xe9"}),"."]}),"\n",(0,i.jsx)(t.li,{children:"Cr\xe9ez une application Logto Flutter."}),"\n",(0,i.jsx)(t.li,{children:"Un projet FlutterFlow."}),"\n"]}),"\n",(0,i.jsx)(t.h2,{id:"enable-flutterflow-custom-code",children:"Activer le code personnalis\xe9 FlutterFlow"}),"\n",(0,i.jsxs)(t.p,{children:["Pour personnaliser la classe ",(0,i.jsx)(t.code,{children:"CustomAuthManager"}),", vous devez activer la fonctionnalit\xe9 de code personnalis\xe9 dans FlutterFlow. Suivez le guide ",(0,i.jsx)(t.a,{href:"https://docs.flutterflow.io/customizing-your-app/manage-custom-code-in-github",children:"Manage Custom Code In GitHub"})," pour synchroniser votre projet FlutterFlow avec GitHub."]}),"\n",(0,i.jsx)(t.admonition,{type:"note",children:(0,i.jsx)(t.p,{children:"G\xe9rer le code personnalis\xe9 dans GitHub est une fonctionnalit\xe9 premium dans FlutterFlow. Vous devez mettre \xe0 niveau votre FlutterFlow vers le plan pro pour activer cette fonctionnalit\xe9."})}),"\n",(0,i.jsx)(t.p,{children:"Une fois cela fait, vous aurez trois branches diff\xe9rentes sous votre d\xe9p\xf4t GitHub FlutterFlow :"}),"\n",(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"main"})," : La branche principale pour le projet flutter. Vous aurez besoin de cette branche pour d\xe9ployer votre projet."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"flutterflow"})," : La branche o\xf9 le ",(0,i.jsx)(t.code,{children:"FlutterFlow"})," synchronisera les modifications depuis l'\xe9diteur FlutterFlow."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"develop"})," : La branche o\xf9 vous pouvez modifier votre code personnalis\xe9."]}),"\n"]}),"\n",(0,i.jsx)(t.h2,{id:"create-your-ui-in-flutterflow",children:"Cr\xe9ez votre interface utilisateur dans FlutterFlow"}),"\n",(0,i.jsxs)(t.p,{children:["Tout d'abord, cr\xe9ez votre interface utilisateur dans FlutterFlow. Vous pouvez suivre la ",(0,i.jsx)(t.a,{href:"https://docs.flutterflow.io/",children:"documentation FlutterFlow"})," pour cr\xe9er votre interface utilisateur en fonction de vos besoins. Pour ce tutoriel, pour le minimum requis, nous cr\xe9erons deux pages :"]}),"\n",(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsx)(t.li,{children:"Une page d'accueil simple avec un bouton de connexion."}),"\n",(0,i.jsx)(t.li,{children:"Une page de profil utilisateur pour afficher les informations utilisateur et le bouton de d\xe9connexion."}),"\n"]}),"\n",(0,i.jsxs)(t.p,{children:["Allez \xe0 la page ",(0,i.jsx)(t.code,{children:"App Settings"})," -> ",(0,i.jsx)(t.code,{children:"Authentication"})," et activez l'authentification personnalis\xe9e. Cela cr\xe9era une classe ",(0,i.jsx)(t.code,{children:"CustomAuthManager"})," dans votre projet FlutterFlow."]}),"\n",(0,i.jsx)("center",{children:(0,i.jsx)("img",{src:g,alt:"FlutterFlow custom authentication"})}),"\n",(0,i.jsxs)(t.p,{children:["Une fois que vous avez l'interface utilisateur pr\xeate, naviguez vers la page ",(0,i.jsx)(t.code,{children:"integrations"})," -> ",(0,i.jsx)(t.code,{children:"GitHub"})," et cliquez sur le bouton ",(0,i.jsx)(t.code,{children:"Push to Repository"})," pour pousser les modifications vers la branche ",(0,i.jsx)(t.code,{children:"flutterflow"}),"."]}),"\n",(0,i.jsx)("center",{children:(0,i.jsx)("img",{src:m,alt:"FlutterFlow GitHub push"})}),"\n",(0,i.jsx)(t.h2,{id:"customize-the-customauthmanager",children:"Personnaliser le CustomAuthManager"}),"\n",(0,i.jsxs)(t.p,{children:["Passez \xe0 la branche ",(0,i.jsx)(t.code,{children:"develop"})," dans votre d\xe9p\xf4t GitHub et fusionnez les derni\xe8res modifications de la branche ",(0,i.jsx)(t.code,{children:"flutterflow"}),". Y compris vos pages d'interface utilisateur et la classe ",(0,i.jsx)(t.code,{children:"CustomAuthManager"})," pr\xe9-construite."]}),"\n",(0,i.jsx)(t.h3,{id:"install-logto-sdk-dependency",children:"Installer la d\xe9pendance Logto SDK"}),"\n",(0,i.jsx)(t.p,{children:"Ajoutez la d\xe9pendance Logto SDK \xe0 votre projet."}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-bash",children:"  flutter pub add logto_dart_sdk\n"})}),"\n",(0,i.jsxs)(t.admonition,{type:"note",children:[(0,i.jsx)(t.p,{children:"Package Http optionnel :"}),(0,i.jsxs)(t.p,{children:["Le client Logto n\xe9cessite un client http pour effectuer des appels API. Vous pouvez utiliser le package ",(0,i.jsx)(t.code,{children:"http"})," ou tout autre package client http de votre choix."]}),(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-bash",children:"  flutter pub add http\n"})})]}),"\n",(0,i.jsx)(t.h3,{id:"update-the-userprovider",children:"Mettre \xe0 jour le UserProvider"}),"\n",(0,i.jsxs)(t.p,{children:["Ajoutez la classe ",(0,i.jsx)(t.code,{children:"OpenIdClaims"})," \xe0 la classe ",(0,i.jsx)(t.code,{children:"CustomAuthUserProvider"})," pour stocker les informations utilisateur."]}),"\n",(0,i.jsxs)(t.blockquote,{children:["\n",(0,i.jsxs)(t.p,{children:["La classe ",(0,i.jsx)(t.code,{children:"OpenIdClaims"})," fait partie du Logto SDK, qui fournira les revendications ",(0,i.jsx)(t.code,{children:"id_token"})," pour l'utilisateur authentifi\xe9."]}),"\n"]}),"\n",(0,i.jsx)(u,{}),"\n",(0,i.jsx)(t.h3,{id:"init-the-logto-client-in-customauthmanager",children:"Initialiser le client logto dans CustomAuthManager"}),"\n",(0,i.jsxs)(t.p,{children:["Initialisez le client Logto dans la classe ",(0,i.jsx)(t.code,{children:"CustomAuthManager"}),"."]}),"\n",(0,i.jsx)(a,{}),"\n",(0,i.jsxs)(t.p,{children:["La m\xe9thode ",(0,i.jsx)(t.code,{children:"initialize"})," initialisera le client Logto et mettra \xe0 jour le flux utilisateur actuel avec le statut d'authentification utilisateur persistant dans le stockage local."]}),"\n",(0,i.jsxs)(t.blockquote,{children:["\n",(0,i.jsxs)(t.p,{children:["Le Logto SDK utilise le package ",(0,i.jsx)(t.a,{href:"https://pub.dev/packages/flutter_secure_storage",children:"flutter_secure_storage"})," pour stocker les informations d'authentification utilisateur en toute s\xe9curit\xe9."]}),"\n"]}),"\n",(0,i.jsx)(t.h3,{id:"implement-the-sign-in-method",children:"Impl\xe9menter la m\xe9thode de connexion"}),"\n",(0,i.jsxs)(t.p,{children:["Appeler la m\xe9thode ",(0,i.jsx)(t.code,{children:"LogtoClient.signIn"})," initiera un flux d'authentification OIDC standard. La page de connexion Logto sera ouverte dans une webview en utilisant ",(0,i.jsx)(t.a,{href:"https://pub.dev/packages/flutter_web_auth",children:"flutter_web_auth"}),"."]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-dart",children:"// lib/auth/custom_auth/custom_auth_manager.dart\n\nFuture<FlutterFlowAuthAuthUser?> signIn(\n    String redirectUri,\n  ) async {\n    await logtoClient.signIn(redirectUri);\n\n    var idTokenClaims = await logtoClient.idTokenClaims;\n\n    return _updateCurrentUser(\n      loggedIn: idTokenClaims != null,\n      uid: idTokenClaims?.subject,\n      idToken: idTokenClaims,\n    );\n  }\n\n"})}),"\n",(0,i.jsxs)(t.p,{children:["LogtoClient g\xe9rera les \xe9tapes d'Autorisation (Authorization), d'\xe9change de jetons et de r\xe9cup\xe9ration d'informations utilisateur. Une fois l'utilisateur authentifi\xe9, les ",(0,i.jsx)(t.code,{children:"idTokenClaims"})," seront stock\xe9es dans le stockage local.\nR\xe9cup\xe9rez les ",(0,i.jsx)(t.code,{children:"idTokenClaims"})," du LogtoClient et mettez \xe0 jour le flux utilisateur actuel."]}),"\n",(0,i.jsx)(t.h3,{id:"implement-the-sign-out-method",children:"Impl\xe9menter la m\xe9thode de d\xe9connexion"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-dart",children:"// lib/auth/custom_auth/custom_auth_manager.dart\n\nFuture signOut() async {\n    await logtoClient.signOut();\n\n    flutterFlowAuthAuthUserSubject.add(\n      FlutterFlowAuthAuthUser(loggedIn: false),\n    );\n  }\n"})}),"\n",(0,i.jsx)(t.h3,{id:"update-the-auth-util-methods",children:"Mettre \xe0 jour les m\xe9thodes utilitaires d'authentification"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:["Ajoutez le getter ",(0,i.jsx)(t.code,{children:"authManager"})," pour acc\xe9der \xe0 l'instance ",(0,i.jsx)(t.code,{children:"CustomAuthManager"}),"."]}),"\n",(0,i.jsxs)(t.li,{children:["Ajoutez le getter ",(0,i.jsx)(t.code,{children:"currentUserUid"})," pour obtenir l'uid de l'utilisateur actuel."]}),"\n",(0,i.jsxs)(t.li,{children:["Ajoutez le getter ",(0,i.jsx)(t.code,{children:"currentUserData"})," pour obtenir les donn\xe9es de l'utilisateur actuel."]}),"\n",(0,i.jsxs)(t.li,{children:["Ajoutez le getter ",(0,i.jsx)(t.code,{children:"logtoClient"})," pour acc\xe9der \xe0 l'instance du client Logto."]}),"\n"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-dart",children:"// lib/auth/custom_auth/auth_util.dart\n\nimport 'package:logto_dart_sdk/logto_client.dart';\nimport 'package:logto_dart_sdk/src/modules/id_token.dart';\n\nimport 'custom_auth_manager.dart';\n\nexport 'custom_auth_manager.dart';\n\nfinal _authManager = CustomAuthManager();\nCustomAuthManager get authManager => _authManager;\nString get currentUserUid => currentUser?.uid ?? '';\nOpenIdClaims? get currentUserData => currentUser?.idToken;\nLogtoClient get logtoClient => _authManager.logtoClient;\n"})}),"\n",(0,i.jsx)(t.h2,{id:"integrate-the-custom-authentication-in-your-ui",children:"Int\xe9grer l'authentification personnalis\xe9e dans votre interface utilisateur"}),"\n",(0,i.jsx)(t.h3,{id:"home-page",children:"Page d'accueil"}),"\n",(0,i.jsxs)(t.p,{children:["Appelez la m\xe9thode ",(0,i.jsx)(t.code,{children:"authManager.signIn"})," pour initier le flux d'authentification lorsque l'utilisateur clique sur le bouton de connexion."]}),"\n",(0,i.jsxs)(t.blockquote,{children:["\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.code,{children:"redirectUri"})," est l'URL de rappel qui sera utilis\xe9e pour capturer le rappel d'autorisation depuis la page de connexion Logto.\nVoir le ",(0,i.jsx)(t.a,{href:"/fr/quick-starts/flutter#implement-sign-in",children:"Flutter SDK"})," pour plus de d\xe9tails sur le redirectUri."]}),"\n"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-dart",children:"// lib/pages/home_page/home_page_widget.dart\n\nfinal redirectUri = 'io.logto://callback';\n\n// ...\n\nFFButtonWidget(\n  onPressed: () async {\n    GoRouter.of(context).prepareAuthEvent();\n\n    await authManager.signIn(redirectUri);\n\n    context.replaceNamed('user');\n  },\n  text: 'Sign In',\n  // ...\n)\n"})}),"\n",(0,i.jsx)(t.h3,{id:"user-profile-page",children:"Page de profil utilisateur"}),"\n",(0,i.jsx)(t.p,{children:"Utilisez les getters utilitaires d'authentification pour acc\xe9der aux donn\xe9es de l'utilisateur actuel et \xe0 l'instance du client Logto."}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-dart",children:"// lib/pages/user/user_widget.dart\n\nimport '/auth/custom_auth/auth_util.dart';\n\n// ...\n\nchildren: [\n  Text(\n    'User ID: $currentUserUid',\n  ),\n  Text(\n    'Display Name: ${currentUserData?.name}',\n  ),\n  Text(\n    'Username: ${currentUserData?.username}',\n  ),\n  Text(\n    'Email: ${currentUserData?.emailVerified ?? currentUserData?.email}',\n  ),\n]\n\n"})}),"\n",(0,i.jsx)(t.p,{children:"Impl\xe9mentez la m\xe9thode de d\xe9connexion lorsque l'utilisateur clique sur le bouton de d\xe9connexion."}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-dart",children:"// lib/pages/user/user_widget.dart\n\nFFButtonWidget(\n  onPressed: () async {\n    await authManager.signOut();\n\n    context.replaceNamed('HomePage');\n  },\n  text: 'Sign Out',\n  // ...\n)\n"})}),"\n",(0,i.jsx)(t.h2,{id:"further-readings",children:"Lectures compl\xe9mentaires"}),"\n",(0,i.jsxs)(t.p,{children:["Le Logto SDK fournit plus de m\xe9thodes pour interagir avec l'API Logto. Vous pouvez personnaliser davantage la classe ",(0,i.jsx)(t.code,{children:"CustomAuthManager"})," pour impl\xe9menter plus de fonctionnalit\xe9s."]}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:(0,i.jsx)(t.a,{href:"/fr/quick-starts/flutter#get-user-information",children:"Profil utilisateur"})}),"\n",(0,i.jsx)(t.li,{children:(0,i.jsx)(t.a,{href:"/fr/quick-starts/flutter#api-resources-and-organizations",children:"Ressources API et organisations"})}),"\n"]}),"\n",(0,i.jsx)(t.h2,{id:"dependency-troubleshooting",children:"D\xe9pannage des d\xe9pendances"}),"\n",(0,i.jsx)(c,{}),"\n",(0,i.jsx)(h,{})]})}function k(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(b,{...e})}):b(e)}},79621:(e,t,n)=>{n.d(t,{R:()=>l,x:()=>a});var r=n(58101);const i={},o=r.createContext(i);function l(e){const t=r.useContext(o);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),r.createElement(o.Provider,{value:t},e.children)}}}]);