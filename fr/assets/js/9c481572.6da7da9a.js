"use strict";(self.webpackChunk_logto_docs=self.webpackChunk_logto_docs||[]).push([[9978],{75531:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>l,contentTitle:()=>a,default:()=>d,frontMatter:()=>r,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"developers/custom-token-claims/common-use-cases","title":"Cas d\u2019utilisation courants","description":"Dans cette section, nous vous proposons quelques exemples pour vous aider \xe0 comprendre certains sc\xe9narios o\xf9 les revendications personnalis\xe9es de jeton peuvent \xeatre utiles, en vous offrant quelques r\xe9f\xe9rences. Ainsi, lorsque vous rencontrez des difficult\xe9s dans la gestion des acc\xe8s, vous pourrez \xe9valuer si les revendications personnalis\xe9es de jeton peuvent vous apporter de la commodit\xe9.","source":"@site/i18n/fr/docusaurus-plugin-content-docs/current/developers/custom-token-claims/common-use-cases.mdx","sourceDirName":"developers/custom-token-claims","slug":"/developers/custom-token-claims/common-use-cases","permalink":"/fr/developers/custom-token-claims/common-use-cases","draft":false,"unlisted":false,"editUrl":"https://github.com/logto-io/docs/tree/master/i18n/fr/docusaurus-plugin-content-docs/current/developers/custom-token-claims/common-use-cases.mdx","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"id":"common-use-cases","title":"Cas d\u2019utilisation courants","sidebar_label":"Cas d\u2019utilisation courants","sidebar_position":2},"sidebar":"docsSidebar","previous":{"title":"Revendications personnalis\xe9es de jeton","permalink":"/fr/developers/custom-token-claims/"},"next":{"title":"Cr\xe9er un script de revendications personnalis\xe9es pour le jeton","permalink":"/fr/developers/custom-token-claims/create-script"}}');var o=n(25105),i=n(79621);const r={id:"common-use-cases",title:"Cas d\u2019utilisation courants",sidebar_label:"Cas d\u2019utilisation courants",sidebar_position:2},a="Cas d\u2019utilisation courants",l={},c=[{value:"Rendre possible le contr\xf4le d\u2019acc\xe8s bas\xe9 sur les attributs (ABAC)",id:"make-attribute-based-access-control-abac-possible",level:2},{value:"Bloquer manuellement l\u2019\xe9mission de jetons",id:"manually-block-token-issuance",level:2}];function u(e){const s={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(s.header,{children:(0,o.jsx)(s.h1,{id:"cas-dutilisation-courants",children:"Cas d\u2019utilisation courants"})}),"\n",(0,o.jsxs)(s.p,{children:["Dans cette section, nous vous proposons quelques exemples pour vous aider \xe0 comprendre certains sc\xe9narios o\xf9 les ",(0,o.jsx)(s.a,{href:"/developers/custom-token-claims",children:"revendications personnalis\xe9es de jeton"})," peuvent \xeatre utiles, en vous offrant quelques r\xe9f\xe9rences. Ainsi, lorsque vous rencontrez des difficult\xe9s dans la gestion des acc\xe8s, vous pourrez \xe9valuer si les revendications personnalis\xe9es de jeton peuvent vous apporter de la commodit\xe9."]}),"\n",(0,o.jsx)(s.h2,{id:"make-attribute-based-access-control-abac-possible",children:"Rendre possible le contr\xf4le d\u2019acc\xe8s bas\xe9 sur les attributs (ABAC)"}),"\n",(0,o.jsxs)(s.p,{children:["Le ",(0,o.jsx)(s.a,{href:"https://auth.wiki/abac",children:"contr\xf4le d\u2019acc\xe8s bas\xe9 sur les attributs (ABAC)"})," est un mod\xe8le de contr\xf4le d\u2019acc\xe8s qui utilise des attributs (tels que les r\xf4les des utilisateurs, les propri\xe9t\xe9s des ressources et les conditions environnementales) pour prendre des d\xe9cisions de contr\xf4le d\u2019acc\xe8s. Il s\u2019agit d\u2019une m\xe9thode flexible et dynamique pour g\xe9rer l\u2019acc\xe8s aux ressources prot\xe9g\xe9es."]}),"\n",(0,o.jsx)(s.p,{children:"Supposons que vous d\xe9veloppez une application, et que la sortie de l\u2019application se d\xe9roule en deux phases : b\xeata publique et lancement officiel. M\xeame apr\xe8s le lancement officiel de l\u2019application, vous souhaitez que les anciens utilisateurs ayant particip\xe9 \xe0 la b\xeata publique puissent continuer \xe0 utiliser les fonctionnalit\xe9s payantes."}),"\n",(0,o.jsxs)(s.p,{children:["Apr\xe8s le lancement officiel de l\u2019application, vous utilisez la fonctionnalit\xe9 de ",(0,o.jsx)(s.a,{href:"/authorization/role-based-access-control",children:"contr\xf4le d\u2019acc\xe8s bas\xe9 sur les r\xf4les (RBAC)"})," de Logto pour mettre en \u0153uvre le contr\xf4le d\u2019acc\xe8s \xe0 l\u2019utilisation des fonctionnalit\xe9s payantes. Pour v\xe9rifier facilement si un utilisateur utilisait d\xe9j\xe0 l\u2019application pendant la phase de b\xeata publique, vous pouvez utiliser la m\xe9thode ",(0,o.jsx)(s.code,{children:"getCustomJwtClaims()"})," pour ajouter une revendication ",(0,o.jsx)(s.code,{children:"createdAt"})," dans la charge utile du jeton."]}),"\n",(0,o.jsx)(s.p,{children:"Ensuite, lors du contr\xf4le d\u2019acc\xe8s dans vos API prot\xe9g\xe9es, vous devez autoriser les jetons d\u2019acc\xe8s qui remplissent l\u2019une des conditions suivantes :"}),"\n",(0,o.jsxs)(s.ol,{children:["\n",(0,o.jsx)(s.li,{children:"Dans le contexte RBAC, disposer de la port\xe9e pour acc\xe9der aux ressources payantes."}),"\n",(0,o.jsxs)(s.li,{children:["Le champ ",(0,o.jsx)(s.code,{children:"createdAt"})," est ant\xe9rieur \xe0 la date de fin de la phase de b\xeata publique."]}),"\n"]}),"\n",(0,o.jsxs)(s.p,{children:["S\u2019il n\u2019existait pas de fonctionnalit\xe9 de revendications personnalis\xe9es de jeton, lors de la v\xe9rification des permissions pour l\u2019",(0,o.jsx)(s.a,{href:"/authorization",children:"autorisation"}),", il serait n\xe9cessaire d\u2019appeler la Management API Logto pour v\xe9rifier si l\u2019utilisateur poss\xe9dant le jeton d\u2019acc\xe8s actuel dispose des permissions correspondant au r\xf4le requis par une certaine ressource API."]}),"\n",(0,o.jsxs)(s.p,{children:["Dans un sc\xe9nario similaire, supposons que votre application affiche des v\u0153ux d\u2019anniversaire sur la page de connexion si l\u2019anniversaire de l\u2019utilisateur approche. Vous pouvez utiliser les revendications personnalis\xe9es de jeton pour ajouter un champ anniversaire \xe0 la ",(0,o.jsx)(s.a,{href:"/user-management/personal-access-token#example-token-exchange",children:"charge utile du jeton"}),", qui pourra servir \xe0 d\xe9terminer s\u2019il faut afficher un message sp\xe9cifique."]}),"\n",(0,o.jsx)(s.h2,{id:"manually-block-token-issuance",children:"Bloquer manuellement l\u2019\xe9mission de jetons"}),"\n",(0,o.jsxs)(s.p,{children:["Supposons que Joe g\xe8re un jeu en ligne et utilise Logto comme syst\xe8me de ",(0,o.jsx)(s.a,{href:"https://auth.wiki/iam",children:"gestion des identit\xe9s et des acc\xe8s (IAM)"}),"."]}),"\n",(0,o.jsx)(s.p,{children:"Imaginons que ce jeu n\xe9cessite des recharges pour acheter du temps de jeu. Joe enregistre le solde de chaque utilisateur dans son service de jeu et le d\xe9duit continuellement au fur et \xe0 mesure que le temps de jeu s\u2019accumule. Joe souhaite forcer les joueurs \xe0 se d\xe9connecter lorsque leur solde est \xe9puis\xe9 afin de les inciter \xe0 recharger."}),"\n",(0,o.jsx)(s.p,{children:"\xc0 ce stade, Joe peut \xe9galement utiliser la fonctionnalit\xe9 de revendications personnalis\xe9es de jeton fournie par Logto pour atteindre cet objectif :"}),"\n",(0,o.jsxs)(s.ol,{children:["\n",(0,o.jsxs)(s.li,{children:["Dans le script, un appel API externe ",(0,o.jsx)(s.a,{href:"/developers/custom-token-claims/create-script/#step-3-fetch-external-data",children:"r\xe9cup\xe9rer des donn\xe9es externes"})," peut \xeatre utilis\xe9 pour obtenir le solde actuel du joueur depuis le serveur de jeu de Joe."]}),"\n",(0,o.jsxs)(s.li,{children:["Si le solde est inf\xe9rieur ou \xe9gal \xe0 0, la m\xe9thode ",(0,o.jsx)(s.a,{href:"/developers/custom-token-claims/create-script/#api",children:(0,o.jsx)(s.code,{children:"api.denyAccess()"})})," peut \xeatre utilis\xe9e pour bloquer l\u2019\xe9mission du jeton."]}),"\n"]}),"\n",(0,o.jsx)(s.p,{children:"\xc0 ce moment-l\xe0, puisqu\u2019il n\u2019est plus possible d\u2019obtenir un nouveau jeton d\u2019acc\xe8s valide, le joueur sera automatiquement d\xe9connect\xe9 du jeu."})]})}function d(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,o.jsx)(s,{...e,children:(0,o.jsx)(u,{...e})}):u(e)}},79621:(e,s,n)=>{n.d(s,{R:()=>r,x:()=>a});var t=n(58101);const o={},i=t.createContext(o);function r(e){const s=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),t.createElement(i.Provider,{value:s},e.children)}}}]);