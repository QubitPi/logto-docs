"use strict";(self.webpackChunk_logto_docs=self.webpackChunk_logto_docs||[]).push([[51275],{74099:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>a,contentTitle:()=>l,default:()=>c,frontMatter:()=>o,metadata:()=>i,toc:()=>u});const i=JSON.parse('{"id":"developers/signing-keys","title":"Cl\xe9s de signature","description":"Les cl\xe9s de signature OIDC de Logto, \xe9galement connues sous le nom de \\"cl\xe9s priv\xe9es OIDC\\" et \\"cl\xe9s de cookie OIDC\\", sont les cl\xe9s de signature utilis\xe9es pour signer les jetons JWT (jetons d\u2019acc\xe8s et jetons d\u2019identifiant) et les cookies de navigateur dans les sessions de connexion de Logto. Ces cl\xe9s de signature sont g\xe9n\xe9r\xe9es lors de l\'initialisation de la base de donn\xe9es Logto (open-source) ou lors de la cr\xe9ation d\'un nouveau locataire (Cloud) et peuvent \xeatre g\xe9r\xe9es via CLI (open-source), Management APIs ou Console UI.","source":"@site/i18n/fr/docusaurus-plugin-content-docs/current/developers/signing-keys.mdx","sourceDirName":"developers","slug":"/developers/signing-keys","permalink":"/fr/developers/signing-keys","draft":false,"unlisted":false,"editUrl":"https://github.com/logto-io/docs/tree/master/i18n/fr/docusaurus-plugin-content-docs/current/developers/signing-keys.mdx","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"id":"signing-keys","title":"Cl\xe9s de signature","sidebar_label":"Cl\xe9s de signature","sidebar_position":4},"sidebar":"docsSidebar","previous":{"title":"Usurpation d\u2019identit\xe9 utilisateur","permalink":"/fr/developers/user-impersonation"},"next":{"title":"Webhooks","permalink":"/fr/developers/webhooks/"}}');var t=n(25105),r=n(79621);const o={id:"signing-keys",title:"Cl\xe9s de signature",sidebar_label:"Cl\xe9s de signature",sidebar_position:4},l="Cl\xe9s de signature",a={},u=[{value:"Comment \xe7a fonctionne ?",id:"how-it-works",level:2},{value:"Faire tourner les cl\xe9s de signature depuis la Console UI",id:"rotate-signing-keys-from-console-ui",level:2},{value:"Ressources associ\xe9es",id:"related-resources",level:2}];function d(e){const s={a:"a",admonition:"admonition",br:"br",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components},{CloudLink:n,Url:i}=s;return n||p("CloudLink",!0),i||p("Url",!0),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.header,{children:(0,t.jsx)(s.h1,{id:"cl\xe9s-de-signature",children:"Cl\xe9s de signature"})}),"\n",(0,t.jsxs)(s.p,{children:["Les ",(0,t.jsx)(s.a,{href:"https://auth.wiki/signing-key",children:"cl\xe9s de signature OIDC"}),' de Logto, \xe9galement connues sous le nom de "cl\xe9s priv\xe9es OIDC" et "cl\xe9s de cookie OIDC", sont les cl\xe9s de signature utilis\xe9es pour signer les jetons JWT (',(0,t.jsx)(s.a,{href:"https://auth.wiki/access-token",children:"jetons d\u2019acc\xe8s"})," et ",(0,t.jsx)(s.a,{href:"https://auth.wiki/id-token",children:"jetons d\u2019identifiant"}),") et les cookies de navigateur dans les ",(0,t.jsx)(s.a,{href:"/end-user-flows/sign-out#sign-in-session",children:"sessions de connexion"})," de Logto. Ces cl\xe9s de signature sont g\xe9n\xe9r\xe9es lors de l'initialisation de la base de donn\xe9es Logto (",(0,t.jsx)(s.a,{href:"/logto-oss",children:"open-source"}),") ou lors de la cr\xe9ation d'un nouveau locataire (",(0,t.jsx)(s.a,{href:"/logto-cloud",children:"Cloud"}),") et peuvent \xeatre g\xe9r\xe9es via ",(0,t.jsx)(s.a,{href:"/logto-oss/using-cli",children:"CLI"})," (open-source), Management APIs ou Console UI."]}),"\n",(0,t.jsx)(s.p,{children:"Par d\xe9faut, Logto utilise l'algorithme de courbe elliptique (EC) pour g\xe9n\xe9rer des signatures num\xe9riques. Cependant, \xe9tant donn\xe9 que les utilisateurs doivent souvent v\xe9rifier les signatures JWT et que de nombreux anciens outils ne prennent pas en charge l'algorithme EC (ne prenant en charge que RSA), nous avons impl\xe9ment\xe9 la fonctionnalit\xe9 de rotation des cl\xe9s priv\xe9es et permettons aux utilisateurs de choisir l'algorithme de signature (y compris RSA et EC). Cela garantit la compatibilit\xe9 avec les services utilisant des outils de v\xe9rification de signature obsol\xe8tes."}),"\n",(0,t.jsx)(s.admonition,{type:"note",children:(0,t.jsx)(s.p,{children:"Th\xe9oriquement, les cl\xe9s de signature ne devraient pas \xeatre divulgu\xe9es et n'ont pas de date d'expiration, ce qui signifie qu'il n'est pas n\xe9cessaire de les faire tourner. Cependant, faire tourner p\xe9riodiquement la cl\xe9 de signature apr\xe8s une certaine p\xe9riode peut renforcer la s\xe9curit\xe9."})}),"\n",(0,t.jsx)(s.h2,{id:"how-it-works",children:"Comment \xe7a fonctionne ?"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Cl\xe9 priv\xe9e OIDC"}),(0,t.jsx)(s.br,{}),"\n","Lors de l'initialisation d'une instance Logto, une paire de cl\xe9 publique et cl\xe9 priv\xe9e est automatiquement g\xe9n\xe9r\xe9e et enregistr\xe9e dans le fournisseur OIDC sous-jacent. Ainsi, lorsque Logto \xe9met un nouveau jeton JWT (jeton d\u2019acc\xe8s ou jeton d\u2019identifiant), le jeton est sign\xe9 avec la cl\xe9 priv\xe9e. En m\xeame temps, toute application cliente qui re\xe7oit un jeton JWT peut utiliser la cl\xe9 publique associ\xe9e pour v\xe9rifier la signature du jeton, afin de s'assurer que le jeton n'est pas alt\xe9r\xe9 par un tiers. La cl\xe9 priv\xe9e est prot\xe9g\xe9e sur le serveur Logto. La cl\xe9 publique, cependant, comme son nom l'indique, est publique pour tout le monde et peut \xeatre acc\xe9d\xe9e via l'interface ",(0,t.jsx)(s.code,{children:"/oidc/jwks"})," du point de terminaison OIDC. Un algorithme de cl\xe9 de signature peut \xeatre sp\xe9cifi\xe9 lors de la g\xe9n\xe9ration de la cl\xe9 priv\xe9e, et Logto utilise par d\xe9faut l'algorithme EC (courbe elliptique). Les utilisateurs administrateurs peuvent changer l'algorithme par d\xe9faut en RSA (Rivest-Shamir-Adleman) en faisant tourner les cl\xe9s priv\xe9es."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Cl\xe9 de cookie OIDC"}),(0,t.jsx)(s.br,{}),"\n","Lorsqu'un utilisateur initie un flux de connexion ou d'inscription, une \"session OIDC\" sera cr\xe9\xe9e sur le serveur, ainsi qu'un ensemble de cookies de navigateur. Avec ces cookies, le navigateur peut demander \xe0 Logto Experience API d'effectuer une s\xe9rie d'interactions au nom de l'utilisateur, telles que la connexion, l'inscription et la r\xe9initialisation du mot de passe. Cependant, contrairement aux jetons JWT, les cookies sont uniquement sign\xe9s et v\xe9rifi\xe9s par le service OIDC de Logto lui-m\xeame, des mesures de cryptographie asym\xe9trique ne sont pas requises. Ainsi, nous n'avons pas de cl\xe9s publiques associ\xe9es pour les cl\xe9s de signature de cookie, ni d'algorithmes de cryptage asym\xe9trique."]}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"rotate-signing-keys-from-console-ui",children:"Faire tourner les cl\xe9s de signature depuis la Console UI"}),"\n",(0,t.jsx)(s.p,{children:'Logto introduit une fonctionnalit\xe9 de "Rotation des cl\xe9s de signature", qui vous permet de cr\xe9er une nouvelle cl\xe9 priv\xe9e OIDC et une cl\xe9 de cookie dans votre locataire.'}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["Acc\xe9dez \xe0 ",(0,t.jsx)(n,{to:"/signing-keys",children:"Console > Cl\xe9s de signature"}),". De l\xe0, vous pouvez g\xe9rer \xe0 la fois les cl\xe9s priv\xe9es OIDC et les cl\xe9s de cookie OIDC."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:'Pour faire tourner la cl\xe9 de signature, cliquez sur le bouton "Faire tourner les cl\xe9s priv\xe9es" ou "Faire tourner les cl\xe9s de cookie". Lors de la rotation des cl\xe9s priv\xe9es, vous avez la possibilit\xe9 de changer l\'algorithme de signature.'}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:"Et vous trouverez un tableau qui r\xe9pertorie toutes les cl\xe9s de signature en cours d'utilisation. Remarque : Vous pouvez supprimer la cl\xe9 pr\xe9c\xe9dente, mais vous ne pouvez pas supprimer la cl\xe9 actuelle."}),"\n",(0,t.jsxs)(s.table,{children:[(0,t.jsx)(s.thead,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.th,{children:"Statut"}),(0,t.jsx)(s.th,{children:"Description"})]})}),(0,t.jsxs)(s.tbody,{children:[(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"Actuelle"}),(0,t.jsx)(s.td,{children:"Cela indique que cette cl\xe9 est actuellement utilis\xe9e activement dans vos applications et APIs."})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"Pr\xe9c\xe9dente"}),(0,t.jsx)(s.td,{children:"Cela fait r\xe9f\xe9rence \xe0 une cl\xe9 qui \xe9tait pr\xe9c\xe9demment utilis\xe9e mais qui a \xe9t\xe9 remplac\xe9e. Les jetons existants avec cette cl\xe9 de signature restent valides."})]})]})]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:"Veuillez vous rappeler que la rotation implique les trois actions suivantes :"}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Cr\xe9er une nouvelle cl\xe9 de signature"})," : Cela n\xe9cessitera que toutes vos ",(0,t.jsx)(s.strong,{children:"applications"})," et ",(0,t.jsx)(s.strong,{children:"APIs"})," adoptent la nouvelle cl\xe9 de signature."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Faire tourner la cl\xe9 actuelle"}),' : La cl\xe9 existante sera d\xe9sign\xe9e comme "pr\xe9c\xe9dente" apr\xe8s la rotation et ne sera pas utilis\xe9e par les nouvelles applications et APIs cr\xe9\xe9es. Cependant, les jetons sign\xe9s avec cette cl\xe9 resteront valides.']}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Supprimer votre cl\xe9 pr\xe9c\xe9dente"}),' : Les cl\xe9s \xe9tiquet\xe9es comme "pr\xe9c\xe9dente" seront r\xe9voqu\xe9es et supprim\xe9es du tableau.']}),"\n"]}),"\n",(0,t.jsxs)(s.admonition,{type:"warning",children:[(0,t.jsx)(s.p,{children:"Ne faites jamais tourner les cl\xe9s de signature cons\xe9cutivement (deux fois ou plus), car cela pourrait invalider TOUS les jetons \xe9mis."}),(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"Pour les utilisateurs OSS, apr\xe8s avoir fait tourner la cl\xe9 de signature, un red\xe9marrage de l'instance Logto est n\xe9cessaire pour que la nouvelle cl\xe9 de signature prenne effet."}),"\n",(0,t.jsx)(s.li,{children:"Pour les utilisateurs Cloud, la nouvelle cl\xe9 de signature prend effet imm\xe9diatement apr\xe8s la rotation, mais veuillez vous assurer de ne pas faire tourner la cl\xe9 de signature plusieurs fois cons\xe9cutivement."}),"\n"]})]}),"\n",(0,t.jsx)(s.h2,{id:"related-resources",children:"Ressources associ\xe9es"}),"\n",(0,t.jsx)(i,{href:"https://blog.logto.io/introduction-to-ec-and-rsa-signing-algorithms-in-jwt",children:(0,t.jsx)(s.p,{children:"Introduction aux algorithmes de signature EC et RSA dans JWT"})})]})}function c(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}function p(e,s){throw new Error("Expected "+(s?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},79621:(e,s,n)=>{n.d(s,{R:()=>o,x:()=>l});var i=n(58101);const t={},r=i.createContext(t);function o(e){const s=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),i.createElement(r.Provider,{value:s},e.children)}}}]);