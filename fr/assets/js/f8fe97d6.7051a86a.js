"use strict";(self.webpackChunk_logto_docs=self.webpackChunk_logto_docs||[]).push([[8432],{12164:(e,n,i)=>{i.d(n,{Ay:()=>r,RM:()=>t});var s=i(25105),o=i(79621);const t=[];function a(e){const n={a:"a",admonition:"admonition",p:"p",...(0,o.R)(),...e.components};return(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsxs)(n.p,{children:["Ce guide suppose que vous avez une compr\xe9hension de base des Connecteurs Logto. Pour ceux qui ne sont pas familiers, veuillez vous r\xe9f\xe9rer au guide des ",(0,s.jsx)(n.a,{href:"/connectors",children:"Connecteurs"})," pour commencer."]})})}function r(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}},73153:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>u,frontMatter:()=>r,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"integrations/social/wechat-native/README","title":"Configurer la connexion sociale avec WeChat (Native)","description":"Le connecteur officiel Logto pour la connexion sociale WeChat dans les applications natives (iOS et Android).","source":"@site/i18n/fr/docusaurus-plugin-content-docs/current/integrations/social/wechat-native/README.mdx","sourceDirName":"integrations/social/wechat-native","slug":"/integrations/wechat-native","permalink":"/fr/integrations/wechat-native","draft":false,"unlisted":false,"editUrl":"https://github.com/logto-io/docs/tree/master/i18n/fr/docusaurus-plugin-content-docs/current/integrations/social/wechat-native/README.mdx","tags":[],"version":"current","frontMatter":{"slug":"/integrations/wechat-native","sidebar_label":"WeChat (Native)","sidebar_custom_props":{"description":"WeChat est une application de messagerie instantan\xe9e multiplateforme.","logoFilename":"wechat.svg"}},"sidebar":"integrationsSidebar","previous":{"title":"Slack","permalink":"/fr/integrations/slack"},"next":{"title":"WeChat (Web)","permalink":"/fr/integrations/wechat-web"}}');var o=i(25105),t=i(79621),a=i(12164);const r={slug:"/integrations/wechat-native",sidebar_label:"WeChat (Native)",sidebar_custom_props:{description:"WeChat est une application de messagerie instantan\xe9e multiplateforme.",logoFilename:"wechat.svg"}},l="Configurer la connexion sociale avec WeChat (Native)",c={},d=[...a.RM,{value:"Commencer",id:"get-started",level:2},{value:"Cr\xe9er une application mobile sur la plateforme ouverte WeChat",id:"create-a-mobile-app-in-the-wechat-open-platform",level:2},{value:"Cr\xe9er un compte",id:"create-an-account",level:3},{value:"Cr\xe9er une application mobile",id:"create-a-mobile-app",level:3},{value:"Informations de base",id:"basic-info",level:4},{value:"Informations sur la plateforme",id:"platform-info",level:4},{value:"Attente du r\xe9sultat de la r\xe9vision",id:"waiting-for-the-review-result",level:4},{value:"Activer la connexion native WeChat dans votre application",id:"enable-wechat-native-sign-in-in-your-app",level:2},{value:"iOS",id:"ios",level:3},{value:"Android",id:"android",level:3},{value:"Tester le connecteur natif WeChat",id:"test-wechat-native-connector",level:2}];function p(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"configurer-la-connexion-sociale-avec-wechat-native",children:"Configurer la connexion sociale avec WeChat (Native)"})}),"\n",(0,o.jsx)(n.p,{children:"Le connecteur officiel Logto pour la connexion sociale WeChat dans les applications natives (iOS et Android)."}),"\n",(0,o.jsx)(a.Ay,{}),"\n",(0,o.jsx)(n.h2,{id:"get-started",children:"Commencer"}),"\n",(0,o.jsxs)(n.p,{children:["Si vous ne connaissez pas le concept du connecteur ou ne savez pas comment ajouter ce connecteur \xe0 votre exp\xe9rience de connexion, veuillez consulter le ",(0,o.jsx)(n.a,{href:"/connectors/social-connectors",children:"tutoriel Logto"}),"."]}),"\n",(0,o.jsx)(n.p,{children:"Dans les applications natives, vous ne pouvez pas utiliser le web comme m\xe9thode de connexion de WeChat : la navigation vers l'application WeChat est requise, et cela n\xe9cessite \xe9galement l'utilisation de leur SDK."}),"\n",(0,o.jsx)(n.p,{children:"Nous savons que cela peut sembler effrayant, mais ne vous inqui\xe9tez pas. Nous allons le g\xe9rer facilement dans ce tutoriel."}),"\n",(0,o.jsx)(n.h2,{id:"create-a-mobile-app-in-the-wechat-open-platform",children:"Cr\xe9er une application mobile sur la plateforme ouverte WeChat"}),"\n",(0,o.jsx)(n.admonition,{type:"tip",children:(0,o.jsx)(n.p,{children:"Vous pouvez passer certaines sections si vous avez d\xe9j\xe0 termin\xe9."})}),"\n",(0,o.jsx)(n.h3,{id:"create-an-account",children:"Cr\xe9er un compte"}),"\n",(0,o.jsxs)(n.p,{children:["Ouvrez ",(0,o.jsx)(n.a,{href:"https://open.weixin.qq.com/",children:"https://open.weixin.qq.com/"}),', cliquez sur le bouton "Sign Up" dans le coin sup\xe9rieur droit, puis terminez le processus d\'inscription.']}),"\n",(0,o.jsx)(n.h3,{id:"create-a-mobile-app",children:"Cr\xe9er une application mobile"}),"\n",(0,o.jsx)(n.p,{children:'Connectez-vous avec le compte que vous venez de cr\xe9er. Dans l\'onglet "Application Mobile" (\u79fb\u52a8\u5e94\u7528), cliquez sur le grand bouton vert "Cr\xe9er une application mobile" (\u521b\u5efa\u79fb\u52a8\u5e94\u7528).'}),"\n",(0,o.jsx)("img",{src:"/img/assets/app-tabs.png",alt:"Onglets d'application"}),"\n",(0,o.jsx)(n.p,{children:"Remplissons les informations requises dans le formulaire de demande."}),"\n",(0,o.jsx)("img",{src:"/img/assets/create-mobile-app.png",alt:"Cr\xe9er une application mobile"}),"\n",(0,o.jsx)(n.h4,{id:"basic-info",children:"Informations de base"}),"\n",(0,o.jsx)(n.p,{children:"La plupart d'entre elles sont assez simples, et nous avons quelques conseils ici :"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:'Si vous souhaitez simplement tester la connexion WeChat et que l\'application n\'est pas sur l\'App Store, dans la section "L\'application est disponible", choisissez "Non" pour ignorer le "Lien de t\xe9l\xe9chargement de l\'application".'}),"\n",(0,o.jsx)(n.li,{children:"Le \"Diagramme de flux d'op\xe9ration de l'application\" semble compliqu\xe9. D'apr\xe8s notre exp\xe9rience, vous devez pr\xe9parer un simple organigramme et plusieurs captures d'\xe9cran de l'application pour am\xe9liorer la possibilit\xe9 de passer la r\xe9vision."}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:'Cliquez sur "\xc9tape suivante" pour continuer.'}),"\n",(0,o.jsx)(n.h4,{id:"platform-info",children:"Informations sur la plateforme"}),"\n",(0,o.jsx)(n.p,{children:"Vous pouvez configurer une ou les deux plateformes iOS et Android pour int\xe9grer Logto avec la connexion native WeChat."}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Application iOS"})}),"\n",(0,o.jsx)(n.p,{children:'Cochez "Application iOS" (iOS \u5e94\u7528), puis cochez le type d\'appareil cible de votre application en cons\xe9quence.'}),"\n",(0,o.jsx)("img",{src:"/img/assets/platform.png",alt:"Plateforme d'application"}),"\n",(0,o.jsx)(n.p,{children:'Si vous avez choisi "Non" pour la disponibilit\xe9 sur l\'App Store, vous pouvez ignorer le remplissage de "Adresse de t\xe9l\xe9chargement AppStore" ici.'}),"\n",(0,o.jsxs)(n.p,{children:["Remplissez ",(0,o.jsx)(n.em,{children:"Bundle ID"}),", ",(0,o.jsx)(n.em,{children:"Test version Bundle ID"}),", et ",(0,o.jsx)(n.em,{children:"Universal Links"})," (en fait, un seul lien est n\xe9cessaire \ud83d\ude02)."]}),"\n",(0,o.jsx)(n.admonition,{type:"note",children:(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.em,{children:"Bundle ID"})," et ",(0,o.jsx)(n.em,{children:"Test version Bundle ID"})," peuvent avoir la m\xeame valeur."]})}),"\n",(0,o.jsx)(n.admonition,{type:"tip",children:(0,o.jsxs)(n.p,{children:["WeChat n\xe9cessite un lien universel pour la connexion native. Si vous ne l'avez pas configur\xe9 ou ne le connaissez pas, veuillez vous r\xe9f\xe9rer \xe0 la ",(0,o.jsx)(n.a,{href:"https://developer.apple.com/ios/universal-links/",children:"documentation officielle d'Apple"}),"."]})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Application Android"})}),"\n",(0,o.jsx)(n.p,{children:'Cochez "Application Android" (Android \u5e94\u7528).'}),"\n",(0,o.jsx)("img",{src:"/img/assets/platform-android-app.png",alt:"Plateforme d'application Android"}),"\n",(0,o.jsxs)(n.p,{children:["Remplissez ",(0,o.jsx)(n.em,{children:"Signature de l'application"})," (\u5e94\u7528\u7b7e\u540d) et ",(0,o.jsx)(n.em,{children:"Nom du package de l'application"})," (\u5e94\u7528\u5305\u540d)."]}),"\n",(0,o.jsx)(n.admonition,{type:"note",children:(0,o.jsxs)(n.p,{children:["Vous devez signer votre application pour obtenir une signature. Consultez ",(0,o.jsx)(n.a,{href:"https://developer.android.com/studio/publish/app-signing",children:"Signer votre application"})," pour plus d'informations."]})}),"\n",(0,o.jsxs)(n.p,{children:["Apr\xe8s avoir termin\xe9 la signature, vous pouvez ex\xe9cuter la t\xe2che ",(0,o.jsx)(n.code,{children:"signingReport"})," pour obtenir la signature de signature."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"./gradlew your-android-project:signingReport\n"})}),"\n",(0,o.jsxs)(n.p,{children:["La valeur ",(0,o.jsx)(n.code,{children:"MD5"})," du rapport de la variante de build correspondante sera la ",(0,o.jsx)(n.em,{children:"Signature de l'application"})," (\u5e94\u7528\u7b7e\u540d), mais n'oubliez pas de supprimer tous les points-virgules de la valeur et de la mettre en minuscules."]}),"\n",(0,o.jsxs)(n.p,{children:["Par exemple, ",(0,o.jsx)(n.code,{children:"1A:2B:3C:4D"})," -> ",(0,o.jsx)(n.code,{children:"1a2b3c4d"}),"."]}),"\n",(0,o.jsx)(n.h4,{id:"waiting-for-the-review-result",children:"Attente du r\xe9sultat de la r\xe9vision"}),"\n",(0,o.jsx)(n.p,{children:'Apr\xe8s avoir compl\xe9t\xe9 les informations sur la plateforme, cliquez sur "Soumettre pour r\xe9vision" pour continuer. En g\xe9n\xe9ral, la r\xe9vision est rapide et se termine en 1 \xe0 2 jours.'}),"\n",(0,o.jsx)(n.p,{children:"Nous soup\xe7onnons que le r\xe9viseur est attribu\xe9 al\xe9atoirement \xe0 chaque soumission, car la norme est fluctuante. Vous pouvez \xeatre rejet\xe9 la premi\xe8re fois, mais ne vous d\xe9couragez pas ! Indiquez votre situation actuelle et demandez au r\xe9viseur comment la modifier."}),"\n",(0,o.jsx)(n.h2,{id:"enable-wechat-native-sign-in-in-your-app",children:"Activer la connexion native WeChat dans votre application"}),"\n",(0,o.jsx)(n.h3,{id:"ios",children:"iOS"}),"\n",(0,o.jsxs)(n.p,{children:["Nous supposons que vous avez int\xe9gr\xe9 le ",(0,o.jsx)(n.a,{href:"/quick-starts/swift",children:"Logto iOS SDK"})," dans votre application. Dans ce cas, les choses sont assez simples, et vous n'avez m\xeame pas besoin de lire la documentation du SDK WeChat :"]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"1. Configurez le lien universel et le sch\xe9ma d'URL dans votre projet Xcode"})}),"\n",(0,o.jsx)(n.p,{children:'Dans le projet Xcode -> onglet Signing & Capabilities, ajoutez la capacit\xe9 "Associated Domains" et le lien universel que vous avez configur\xe9 pr\xe9c\xe9demment.'}),"\n",(0,o.jsx)("img",{src:"/img/assets/universal-link.png",alt:"Lien universel"}),"\n",(0,o.jsxs)(n.p,{children:['Ensuite, allez dans l\'onglet "Info", ajoutez un ',(0,o.jsx)(n.a,{href:"https://developer.apple.com/documentation/xcode/defining-a-custom-url-scheme-for-your-app",children:"sch\xe9ma d'URL personnalis\xe9"})," avec l'ID d'application WeChat."]}),"\n",(0,o.jsx)("img",{src:"/img/assets/custom-url-scheme.png",alt:"Sch\xe9ma d'URL personnalis\xe9"}),"\n",(0,o.jsxs)(n.p,{children:["Enfin, ouvrez votre ",(0,o.jsx)(n.code,{children:"Info.plist"}),", ajoutez ",(0,o.jsx)(n.code,{children:"weixinULAPI"})," et ",(0,o.jsx)(n.code,{children:"weixin"})," sous ",(0,o.jsx)(n.code,{children:"LSApplicationQueriesSchemes"}),"."]}),"\n",(0,o.jsx)("img",{src:"/img/assets/plist.png",alt:"Plist"}),"\n",(0,o.jsx)(n.admonition,{type:"note",children:(0,o.jsxs)(n.p,{children:["Nous savons que ces actions ne sont pas tr\xe8s raisonnables, mais c'est la solution minimale fonctionnelle que nous avons trouv\xe9e. Consultez le ",(0,o.jsx)(n.a,{href:"https://developers.weixin.qq.com/doc/oplatform/en/Mobile_App/Access_Guide/iOS.html",children:"guide officiel magique"})," pour plus d'informations."]})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsxs)(n.strong,{children:["2. Ajoutez ",(0,o.jsx)(n.code,{children:"LogtoSocialPluginWechat"})," \xe0 votre projet Xcode"]})}),"\n",(0,o.jsx)(n.p,{children:"Ajoutez le framework :"}),"\n",(0,o.jsx)("img",{src:"/img/assets/add-framework.png",alt:"Ajouter un framework"}),"\n",(0,o.jsxs)(n.p,{children:["Et ajoutez ",(0,o.jsx)(n.code,{children:"-ObjC"})," \xe0 vos param\xe8tres de build > Linking > Other Linker Flags :"]}),"\n",(0,o.jsx)("img",{src:"/img/assets/linker-flags.png",alt:"Linker flags"}),"\n",(0,o.jsx)(n.admonition,{type:"note",children:(0,o.jsxs)(n.p,{children:["Le plugin inclut WeChat Open SDK 1.9.2. Vous pouvez directement utiliser ",(0,o.jsx)(n.code,{children:"import WechatOpenSDK"})," une fois le plugin import\xe9."]})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsxs)(n.strong,{children:["3. Ajoutez le plugin \xe0 vos options d'initialisation ",(0,o.jsx)(n.code,{children:"LogtoClient"})]})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-swift",children:"let logtoClient = LogtoClient(\n  useConfig: config,\n  socialPlugins: [LogtoSocialPluginWechat()]\n)\n"})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsxs)(n.strong,{children:["4. G\xe9rez ",(0,o.jsx)(n.code,{children:"onOpenURL"})," correctement"]})}),"\n",(0,o.jsx)(n.admonition,{type:"note",children:(0,o.jsxs)(n.p,{children:["La fonction ",(0,o.jsx)(n.code,{children:"LogtoClient.handle(url:)"})," g\xe9rera tous les connecteurs natifs que vous avez activ\xe9s. Vous n'avez besoin de l'appeler qu'une seule fois."]})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-swift",children:"// SwiftUI\nYourRootView()\n  .onOpenURL { url in\n      LogtoClient.handle(url: url)\n  }\n\n// ou AppDelegate\nfunc application(_ app: UIApplication, open url: URL, options: /*...*/) -> Bool {\n  LogtoClient.handle(url: url)\n}\n"})}),"\n",(0,o.jsx)(n.h3,{id:"android",children:"Android"}),"\n",(0,o.jsxs)(n.p,{children:["Nous supposons que vous avez int\xe9gr\xe9 le ",(0,o.jsx)(n.a,{href:"/quick-starts/android",children:"Logto Android SDK"})," dans votre application. Dans ce cas, les choses sont assez simples, et vous n'avez m\xeame pas besoin de lire la documentation du SDK WeChat :"]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsxs)(n.strong,{children:["1. Ajoutez ",(0,o.jsx)(n.code,{children:"Wechat Open SDK"})," \xe0 votre projet"]})}),"\n",(0,o.jsxs)(n.p,{children:["Assurez-vous que le d\xe9p\xf4t ",(0,o.jsx)(n.code,{children:"mavenCentral()"})," est dans les d\xe9p\xf4ts de votre projet Gradle :"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-kotlin",children:"repositories {\n  // ...\n  mavenCentral()\n}\n"})}),"\n",(0,o.jsx)(n.p,{children:"Ajoutez le Wechat Open SDK \xe0 vos d\xe9pendances :"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-kotlin",children:"dependencies {\n  // ...\n  api(\"com.tencent.mm.opensdk:wechat-sdk-android:6.8.0\")  // kotlin-script\n  // ou\n  api 'com.tencent.mm.opensdk:wechat-sdk-android:6.8.0'   // groovy-script\n}\n"})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsxs)(n.strong,{children:["2. Introduisez ",(0,o.jsx)(n.code,{children:"WXEntryActivity"})," dans votre projet"]})}),"\n",(0,o.jsxs)(n.p,{children:["Cr\xe9ez un package ",(0,o.jsx)(n.code,{children:"wxapi"})," sous la racine de votre package et ajoutez le ",(0,o.jsx)(n.code,{children:"WXEntryActivity"})," dans le package ",(0,o.jsx)(n.code,{children:"wxapi"})," (Prenons ",(0,o.jsx)(n.code,{children:"com.sample.app"})," comme exemple) :"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-kotlin",children:"// WXEntryActivity.kt\npackage com.sample.app.wxapi\n\nimport io.logto.sdk.android.auth.social.wechat.WechatSocialResultActivity\n\nclass WXEntryActivity: WechatSocialResultActivity()\n"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:"// WXEntryActivity.java\npackage com.sample.app.wxapi\n\nimport io.logto.sdk.android.auth.social.wechat.WechatSocialResultActivity\n\npublic class WXEntryActivity extends WechatSocialResultActivity {}\n"})}),"\n",(0,o.jsxs)(n.p,{children:["La position finale du ",(0,o.jsx)(n.code,{children:"WXEntryActivity"})," sous le projet devrait ressembler \xe0 ceci (Prenons Kotlin comme exemple) :"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"src/main/kotlin/com/sample/app/wxapi/WXEntryActivity.kt\n"})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsxs)(n.strong,{children:["3. Modifiez le ",(0,o.jsx)(n.code,{children:"AndroidManifest.xml"})]})}),"\n",(0,o.jsxs)(n.p,{children:["Ajoutez la ligne suivante \xe0 votre ",(0,o.jsx)(n.code,{children:"AndroidManifest.xml"})," :"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-xml",children:'\\<?xml version="1.0" encoding="utf-8"?>\n\\<manifest xmlns:android="http://schemas.android.com/apk/res/android"\n  package="com.sample.app">\n\n  \\<application>\n    \\\x3c!-- ligne \xe0 ajouter --\x3e\n    \\<activity android:name=".wxapi.WXEntryActivity" android:exported="true"/>\n  \\</application>\n\n\\</manifest>\n'})}),"\n",(0,o.jsx)(n.h2,{id:"test-wechat-native-connector",children:"Tester le connecteur natif WeChat"}),"\n",(0,o.jsxs)(n.p,{children:["C'est tout. N'oubliez pas d'",(0,o.jsx)(n.a,{href:"/connectors/social-connectors/#enable-social-sign-in",children:"activer le connecteur social dans l'exp\xe9rience de connexion"}),"."]}),"\n",(0,o.jsx)(n.p,{children:"Une fois le connecteur natif WeChat activ\xe9, vous pouvez construire et ex\xe9cuter votre application pour voir si cela fonctionne."}),"\n",(0,o.jsx)(n.admonition,{type:"caution",children:(0,o.jsxs)(n.p,{children:["WeChat n'a pas de plan pour les appareils sans l'application WeChat install\xe9e. Logto masquera ce connecteur lors de la connexion dans ce cas (ce qui est la m\xe9thode recommand\xe9e par le ",(0,o.jsx)(n.a,{href:"https://developers.weixin.qq.com/doc/oplatform/en/Mobile_App/WeChat_Login/Development_Guide.html",children:"guide de d\xe9veloppement officiel"}),")."]})})]})}function u(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(p,{...e})}):p(e)}},79621:(e,n,i)=>{i.d(n,{R:()=>a,x:()=>r});var s=i(58101);const o={},t=s.createContext(o);function a(e){const n=s.useContext(t);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:a(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);