"use strict";(self.webpackChunk_logto_docs=self.webpackChunk_logto_docs||[]).push([[48272],{57381:(e,s,r)=>{r.r(s),r.d(s,{assets:()=>u,contentTitle:()=>a,default:()=>c,frontMatter:()=>i,metadata:()=>n,toc:()=>l});const n=JSON.parse('{"id":"user-management/user-migration","title":"Migration des utilisateurs","description":"Logto prend en charge la migration manuelle des utilisateurs existants depuis une autre plateforme. Ce guide vous montrera comment importer des utilisateurs existants via Management API et abordera les \xe9l\xe9ments \xe0 consid\xe9rer avant de migrer.","source":"@site/i18n/fr/docusaurus-plugin-content-docs/current/user-management/user-migration.mdx","sourceDirName":"user-management","slug":"/user-management/user-migration","permalink":"/fr/user-management/user-migration","draft":false,"unlisted":false,"editUrl":"https://github.com/logto-io/docs/tree/master/i18n/fr/docusaurus-plugin-content-docs/current/user-management/user-migration.mdx","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_position":5},"sidebar":"docsSidebar","previous":{"title":"Jeton d\u2019acc\xe8s personnel","permalink":"/fr/user-management/personal-access-token"},"next":{"title":"Gestion des utilisateurs","permalink":"/fr/user-management/"}}');var t=r(25105),o=r(79621);const i={sidebar_position:5},a="Migration des utilisateurs",u={},l=[{value:"Sch\xe9ma utilisateur",id:"user-schema",level:2},{value:"Hachage des mots de passe",id:"password-hashing",level:2},{value:"\xc9tapes pour migrer",id:"steps-to-migrate",level:2},{value:"Ressources connexes",id:"related-resources",level:2}];function d(e){const s={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,o.R)(),...e.components},{Url:r}=s;return r||function(e,s){throw new Error("Expected "+(s?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Url",!0),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.header,{children:(0,t.jsx)(s.h1,{id:"migration-des-utilisateurs",children:"Migration des utilisateurs"})}),"\n",(0,t.jsx)(s.p,{children:"Logto prend en charge la migration manuelle des utilisateurs existants depuis une autre plateforme. Ce guide vous montrera comment importer des utilisateurs existants via Management API et abordera les \xe9l\xe9ments \xe0 consid\xe9rer avant de migrer."}),"\n",(0,t.jsx)(s.h2,{id:"user-schema",children:"Sch\xe9ma utilisateur"}),"\n",(0,t.jsxs)(s.p,{children:["Avant de commencer, examinons le ",(0,t.jsx)(s.a,{href:"/user-management/user-data/#user-profile",children:"sch\xe9ma utilisateur"})," dans Logto. Il y a 3 parties du sch\xe9ma utilisateur dont vous devez \xeatre conscient :"]}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Donn\xe9es de base"})," : ce sont les informations de base du profil utilisateur, vous pouvez faire correspondre les donn\xe9es de votre profil utilisateur existant."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Donn\xe9es personnalis\xe9es"})," : stocke des informations utilisateur suppl\xe9mentaires, vous pouvez utiliser cela pour stocker des fichiers qui ne peuvent pas correspondre aux donn\xe9es de base."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Identit\xe9s sociales"})," : stocke les informations utilisateur r\xe9cup\xe9r\xe9es lors de la connexion sociale."]}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:["Vous pouvez cr\xe9er une correspondance pour faire correspondre les informations utilisateur de votre profil utilisateur existant aux ",(0,t.jsx)(s.strong,{children:"donn\xe9es de base"})," et aux ",(0,t.jsx)(s.strong,{children:"donn\xe9es personnalis\xe9es"}),". Pour la connexion sociale, vous aurez besoin d'\xe9tapes suppl\xe9mentaires pour importer les identit\xe9s sociales, veuillez vous r\xe9f\xe9rer \xe0 l'API de ",(0,t.jsx)(s.a,{href:"https://openapi.logto.io/operation/operation-createuseridentity",children:"Lier une identit\xe9 sociale \xe0 un utilisateur"}),"."]}),"\n",(0,t.jsx)(s.h2,{id:"password-hashing",children:"Hachage des mots de passe"}),"\n",(0,t.jsxs)(s.p,{children:["Logto utilise ",(0,t.jsx)(s.a,{href:"https://en.wikipedia.org/wiki/Argon2",children:"Argon2"})," pour hacher le mot de passe de l'utilisateur, et prend \xe9galement en charge d'autres algorithmes comme ",(0,t.jsx)(s.code,{children:"MD5"}),", ",(0,t.jsx)(s.code,{children:"SHA1"}),", ",(0,t.jsx)(s.code,{children:"SHA256"})," et ",(0,t.jsx)(s.code,{children:"Bcrypt"})," pour faciliter la migration. Ces algorithmes sont consid\xe9r\xe9s comme non s\xe9curis\xe9s, les hachages de mots de passe correspondants seront migr\xe9s vers Argon2 lors de la premi\xe8re connexion r\xe9ussie de l'utilisateur."]}),"\n",(0,t.jsxs)(s.p,{children:["Si vous avez besoin de support pour un algorithme de hachage particulier, ",(0,t.jsx)(s.a,{href:"https://logto.io/contact",children:"veuillez nous le faire savoir"}),"."]}),"\n",(0,t.jsx)(s.h2,{id:"steps-to-migrate",children:"\xc9tapes pour migrer"}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Pr\xe9parer les donn\xe9es utilisateur"}),"\nVous devez d'abord exporter les donn\xe9es utilisateur de votre plateforme existante, puis faire correspondre les informations utilisateur au sch\xe9ma utilisateur de Logto. Nous vous recommandons de pr\xe9parer les donn\xe9es mapp\xe9es au format JSON. Voici un exemple de donn\xe9es utilisateur :"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-json",children:'[\n  {\n    "username": "user1",\n    "passwordDigest": "password-encrypted",\n    "passwordAlgorithm": "SHA256"\n  },\n  {\n    "username": "user2",\n    "passwordDigest": "password-encrypted",\n    "passwordAlgorithm": "SHA256"\n  }\n]\n'})}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Cr\xe9er un locataire Logto"}),"\nVous devrez configurer un locataire dans Logto. Vous pouvez utiliser soit Logto Cloud, soit Logto OSS. Si vous ne l'avez pas encore fait, veuillez vous r\xe9f\xe9rer au guide ",(0,t.jsx)(s.a,{href:"/introduction/set-up-logto-cloud/#create-logto-tenant",children:"Configurer Logto cloud"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Configurer la connexion de Management API"}),"\nNous utiliserons Management API pour importer les donn\xe9es utilisateur, vous pouvez vous r\xe9f\xe9rer \xe0 ",(0,t.jsx)(s.a,{href:"/integrate-logto/interact-with-management-api",children:"Management API"})," pour apprendre comment configurer la connexion dans votre environnement de d\xe9veloppement."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Importer les donn\xe9es utilisateur"}),"\nIl est recommand\xe9 de pr\xe9parer un script pour importer les donn\xe9es utilisateur une par une, nous appellerons l'API ",(0,t.jsx)(s.a,{href:"https://openapi.logto.io/operation/operation-createuser",children:"create user"})," pour importer les donn\xe9es utilisateur. Voici un exemple de script :"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-jsx",children:"const users = require('./users.json');\n\nconst importUsers = async () => {\n  for (const user of users) {\n    try {\n      await fetch('https://[tenant_id].logto.app/api/users', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: 'Bearer [your-access-token]',\n        },\n        body: JSON.stringify(user),\n      });\n      // Pausez un moment pour \xe9viter la limite de d\xe9bit\n      await new Promise((resolve) => setTimeout(resolve, 200));\n    } catch (error) {\n      console.error(\n        `\xc9chec de l'importation de l'utilisateur ${user.username} : ${error.message}`\n      );\n    }\n  }\n};\n\nimportUsers();\n"})}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:["Veuillez noter que le point API est soumis \xe0 une limite de d\xe9bit, vous devez ajouter une pause entre chaque requ\xeate pour \xe9viter la limite de d\xe9bit. Veuillez consulter notre page sur les ",(0,t.jsx)(s.a,{href:"/integrate-logto/interact-with-management-api/#rate-limit",children:"limites de d\xe9bit"})," pour plus de d\xe9tails."]}),"\n",(0,t.jsxs)(s.p,{children:["Si vous avez une grande quantit\xe9 de donn\xe9es utilisateur (100k+ utilisateurs), vous pouvez ",(0,t.jsx)(s.a,{href:"https://logto.io/contact",children:"nous contacter"})," pour augmenter la limite de d\xe9bit."]}),"\n",(0,t.jsx)(s.h2,{id:"related-resources",children:"Ressources connexes"}),"\n",(0,t.jsx)(r,{href:"https://blog.logto.io/general-migration-guide",children:(0,t.jsx)(s.p,{children:"Un guide g\xe9n\xe9ral pour migrer votre base de donn\xe9es utilisateur existante vers Logto"})})]})}function c(e={}){const{wrapper:s}={...(0,o.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},79621:(e,s,r)=>{r.d(s,{R:()=>i,x:()=>a});var n=r(58101);const t={},o=n.createContext(t);function i(e){const s=n.useContext(o);return n.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),n.createElement(o.Provider,{value:s},e.children)}}}]);