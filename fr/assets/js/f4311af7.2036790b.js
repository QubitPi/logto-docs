"use strict";(self.webpackChunk_logto_docs=self.webpackChunk_logto_docs||[]).push([[874],{6627:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>u,contentTitle:()=>l,default:()=>c,frontMatter:()=>r,metadata:()=>o,toc:()=>d});const o=JSON.parse('{"id":"developers/webhooks/README","title":"Webhooks","description":"Les Webhooks Logto fournissent des notifications en temps r\xe9el pour divers \xe9v\xe9nements, notamment les modifications des comptes utilisateurs, r\xf4les, permissions, organisations, r\xf4les d\'organisation, permissions d\'organisation, et interactions utilisateur.","source":"@site/i18n/fr/docusaurus-plugin-content-docs/current/developers/webhooks/README.mdx","sourceDirName":"developers/webhooks","slug":"/developers/webhooks/","permalink":"/fr/developers/webhooks/","draft":false,"unlisted":false,"editUrl":"https://github.com/logto-io/docs/tree/master/i18n/fr/docusaurus-plugin-content-docs/current/developers/webhooks/README.mdx","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_position":5},"sidebar":"docsSidebar","previous":{"title":"Cl\xe9s de signature","permalink":"/fr/developers/signing-keys"},"next":{"title":"Configurer les Webhooks","permalink":"/fr/developers/webhooks/configure-webhooks"}}');var i=n(25105),t=n(79621);const r={sidebar_position:5},l="Webhooks",u={},d=[{value:"Pourquoi utiliser un Webhook ?",id:"why-use-webhook",level:2},{value:"Termes",id:"terms",level:2},{value:"FAQ",id:"faqs",level:2},{value:"Logto prend-il en charge les webhooks synchrones ?",id:"does-logto-support-synced-webhooks",level:3},{value:"Comment g\xe9rer le changement de permission utilisateur ?",id:"how-to-deal-with-user-permission-change",level:3},{value:"Comment d\xe9boguer un timeout de webhook ?",id:"how-to-debug-webhook-timeout",level:3},{value:"Puis-je obtenir l&#39;adresse IP du client depuis les webhooks <code>PostSignIn</code> ?",id:"can-i-get-the-client-ip-address-from-postsignin-webhooks",level:3},{value:"Ressources associ\xe9es",id:"related-resources",level:2}];function a(e){const s={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",mermaid:"mermaid",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components},{Details:n,Url:o}=s;return n||h("Details",!0),o||h("Url",!0),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.header,{children:(0,i.jsx)(s.h1,{id:"webhooks",children:"Webhooks"})}),"\n",(0,i.jsxs)(s.p,{children:["Les ",(0,i.jsx)(s.a,{href:"https://auth.wiki/webhook",children:"Webhooks"})," Logto fournissent des notifications en temps r\xe9el pour divers \xe9v\xe9nements, notamment les modifications des comptes utilisateurs, r\xf4les, permissions, organisations, r\xf4les d'organisation, permissions d'organisation, et ",(0,i.jsx)(s.a,{href:"/end-user-flows",children:"interactions utilisateur"}),"."]}),"\n",(0,i.jsxs)(s.p,{children:["Lorsqu'un \xe9v\xe9nement est d\xe9clench\xe9, Logto envoie une requ\xeate HTTP \xe0 l'URL de point de terminaison que vous fournissez, contenant des informations d\xe9taill\xe9es sur l'\xe9v\xe9nement, telles que l'ID utilisateur, le nom d'utilisateur, l'e-mail et d'autres d\xe9tails pertinents (pour plus d'informations sur les donn\xe9es incluses dans la charge utile et l'en-t\xeate, consultez ",(0,i.jsx)(s.a,{href:"/developers/webhooks/webhooks-request",children:"Requ\xeate Webhook"}),"). Votre application peut traiter cette requ\xeate et effectuer des actions personnalis\xe9es, comme envoyer un e-mail ou mettre \xe0 jour des donn\xe9es dans une base de donn\xe9es."]}),"\n",(0,i.jsx)(s.p,{children:"Nous ajoutons continuellement de nouveaux \xe9v\xe9nements en fonction des besoins des utilisateurs. Si vous avez des besoins sp\xe9cifiques pour votre entreprise, n'h\xe9sitez pas \xe0 nous le faire savoir."}),"\n",(0,i.jsx)(s.h2,{id:"why-use-webhook",children:"Pourquoi utiliser un Webhook ?"}),"\n",(0,i.jsx)(s.p,{children:"Les Webhooks offrent une communication en temps r\xe9el entre les applications, \xe9liminant le besoin de scruter et permettant des mises \xe0 jour imm\xe9diates des donn\xe9es. Ils simplifient l'int\xe9gration des applications et l'automatisation des flux de travail sans code complexe ni API propri\xe9taire."}),"\n",(0,i.jsx)(s.p,{children:"Voici quelques exemples d'utilisations courantes des Webhooks pour le CIAM :"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Envoyer des e-mails :"})," Configurez un Webhook pour envoyer un e-mail de bienvenue aux nouveaux utilisateurs lors de l'inscription ou pour notifier les administrateurs lorsqu'un utilisateur se connecte depuis un nouvel appareil ou une nouvelle localisation."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Envoyer des notifications :"})," Configurez un Webhook pour d\xe9clencher un assistant virtuel avec votre syst\xe8me CRM afin de fournir une assistance client en temps r\xe9el lors de l'inscription des utilisateurs."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Effectuer des appels API suppl\xe9mentaires"})," : Configurez un Webhook pour v\xe9rifier l'acc\xe8s utilisateur en contr\xf4lant leur domaine e-mail ou adresse IP, puis utilisez la Management API Logto pour attribuer les r\xf4les appropri\xe9s avec les permissions de ressources."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Synchronisation des donn\xe9es :"})," Configurez un Webhook pour tenir l'application inform\xe9e des changements tels que la suspension ou la suppression de comptes utilisateurs."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"G\xe9n\xe9rer des rapports :"})," Configurez un Webhook pour recevoir les donn\xe9es d'activit\xe9 de connexion des utilisateurs et les exploiter pour cr\xe9er des rapports sur l'engagement ou les habitudes d'utilisation."]}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"terms",children:"Termes"}),"\n",(0,i.jsxs)(s.table,{children:[(0,i.jsx)(s.thead,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.th,{children:"\xc9l\xe9ment"}),(0,i.jsx)(s.th,{children:"Description"})]})}),(0,i.jsxs)(s.tbody,{children:[(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"\xc9v\xe9nement (Event)"}),(0,i.jsx)(s.td,{children:"Lorsqu'une action sp\xe9cifique est effectu\xe9e, elle d\xe9clenche un \xe9v\xe9nement hook d'un type sp\xe9cifique. Par exemple, Logto \xe9mettra un \xe9v\xe9nement hook PostRegister lorsque l'utilisateur termine le processus d'inscription et cr\xe9e un nouveau compte."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"Hook"}),(0,i.jsx)(s.td,{children:"Une ou plusieurs actions qui s'accrochent \xe0 un \xe9v\xe9nement sp\xe9cifique. L'action peut consister \xe0 appeler une API, ex\xe9cuter des extraits de code, etc."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"Webhook"}),(0,i.jsx)(s.td,{children:"Un sous-type de hook qui consiste \xe0 appeler une API avec la charge utile de l'\xe9v\xe9nement."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"Supposons qu'un d\xe9veloppeur souhaite envoyer une notification lorsqu'un utilisateur se connecte via un nouvel appareil, il peut ajouter un webhook qui appelle son API de service de s\xe9curit\xe9 \xe0 l'\xe9v\xe9nement PostSignIn."}),(0,i.jsx)(s.td,{})]})]})]}),"\n",(0,i.jsxs)(s.p,{children:["Voici un exemple d'activation de deux webhooks pour l'\xe9v\xe9nement ",(0,i.jsx)(s.code,{children:"PostSignIn"})," dans Logto :"]}),"\n",(0,i.jsx)(s.mermaid,{value:"graph LR\n  subgraph Logto\n    SF(Connexion termin\xe9e)\n    PS(Post connexion)\n    WH2(Web hook 2)\n    WH1(Web hook 1)\n  end\n\n  subgraph Service 2\n    E2(Point de terminaison)\n  end\n\n  subgraph Service 1\n    E1(Point de terminaison)\n  end\n\n  SF --\x3e|D\xe9clencheur| PS\n  PS --\x3e WH1\n  PS --\x3e WH2\n  WH1 ---\x3e|Appel API POST| E1\n  WH2 ---\x3e|Appel API POST| E2\n"}),"\n",(0,i.jsx)(s.h2,{id:"faqs",children:"FAQ"}),"\n",(0,i.jsxs)(n,{children:[(0,i.jsx)("summary",{children:(0,i.jsx)(s.h3,{id:"does-logto-support-synced-webhooks",children:"Logto prend-il en charge les webhooks synchrones ?"})}),(0,i.jsx)(s.p,{children:"Bien que les webhooks synchrones rendraient le flux de connexion utilisateur plus fluide, nous ne les prenons pas encore en charge (cela viendra \xe0 l'avenir). Par cons\xe9quent, les sc\xe9narios qui reposent actuellement sur des webhooks synchrones n\xe9cessitent tous des solutions alternatives. Si vous avez des questions, n'h\xe9sitez pas \xe0 nous contacter."})]}),"\n",(0,i.jsxs)(n,{children:[(0,i.jsx)("summary",{children:(0,i.jsx)(s.h3,{id:"how-to-deal-with-user-permission-change",children:"Comment g\xe9rer le changement de permission utilisateur ?"})}),(0,i.jsxs)(s.p,{children:["Voir le guide ",(0,i.jsx)(s.a,{href:"/authorization/global-api-resources/#optional-handle-user-permission-change",children:"G\xe9rer le changement de permission utilisateur"}),"."]})]}),"\n",(0,i.jsxs)(n,{children:[(0,i.jsx)("summary",{children:(0,i.jsx)(s.h3,{id:"how-to-debug-webhook-timeout",children:"Comment d\xe9boguer un timeout de webhook ?"})}),(0,i.jsx)(s.p,{children:"Pour le point de terminaison recevant les Webhooks, il doit retourner une r\xe9ponse 2xx aussi rapidement que possible pour indiquer \xe0 Logto que le Webhook a bien \xe9t\xe9 re\xe7u. Comme chaque utilisateur a une logique de traitement tr\xe8s diff\xe9rente pour les Webhooks, des t\xe2ches trop complexes peuvent prendre plusieurs secondes, provoquant un timeout du Webhook Logto. La meilleure pratique consiste \xe0 maintenir votre propre file d'attente d'\xe9v\xe9nements ; d\xe8s r\xe9ception du Webhook Logto, ins\xe9rez l'\xe9v\xe9nement dans la file d'attente et retournez une r\xe9ponse 2xx \xe0 Logto. Ensuite, laissez votre propre worker traiter les t\xe2ches dans la file d'attente \xe9tape par \xe9tape. Si le worker rencontre une erreur, g\xe9rez-la sur votre propre serveur."})]}),"\n",(0,i.jsxs)(n,{children:[(0,i.jsx)("summary",{children:(0,i.jsxs)(s.h3,{id:"can-i-get-the-client-ip-address-from-postsignin-webhooks",children:["Puis-je obtenir l'adresse IP du client depuis les webhooks ",(0,i.jsx)(s.code,{children:"PostSignIn"})," ?"]})}),(0,i.jsx)(s.p,{children:"Oui, vous pouvez obtenir l'adresse IP, les user agents, etc. dans la charge utile du Webhook. Si vous avez besoin d'informations qui ne sont pas encore prises en charge, vous pouvez cr\xe9er une demande de fonctionnalit\xe9 sur GitHub issues, ou nous contacter."})]}),"\n",(0,i.jsx)(s.h2,{id:"related-resources",children:"Ressources associ\xe9es"}),"\n",(0,i.jsx)(o,{href:"https://blog.logto.io/webhooks-vs-polling",children:"Webhooks vs. polling"})]})}function c(e={}){const{wrapper:s}={...(0,t.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}function h(e,s){throw new Error("Expected "+(s?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},79621:(e,s,n)=>{n.d(s,{R:()=>r,x:()=>l});var o=n(58101);const i={},t=o.createContext(i);function r(e){const s=o.useContext(t);return o.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),o.createElement(t.Provider,{value:s},e.children)}}}]);