"use strict";(self.webpackChunk_logto_docs=self.webpackChunk_logto_docs||[]).push([[1174],{29268:(e,n,r)=>{r.d(n,{Ay:()=>i,RM:()=>s});var a=r(25105),t=r(79621);const s=[];function o(e){const n={a:"a",li:"li",ol:"ol",p:"p",...(0,t.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.p,{children:"En el fondo, una aplicaci\xf3n de terceros es simplemente un cliente est\xe1ndar de OAuth 2.0 / OIDC. Esto significa que t\xfa (o el desarrollador de terceros) puedes usar cualquier biblioteca o framework de OAuth 2.0 / OIDC para integrarte con Logto."}),"\n",(0,a.jsx)(n.p,{children:"Si no est\xe1s familiarizado con OAuth 2.0 o OIDC, puedes comenzar siguiendo una de nuestras gu\xedas r\xe1pidas de \u201cWeb tradicional\u201d."}),"\n",(0,a.jsx)(n.p,{children:"Algunas cosas a tener en cuenta:"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsx)(n.li,{children:"Logto actualmente requiere que las aplicaciones de terceros sean aplicaciones de \u201cWeb tradicional\u201d. En otras palabras, la aplicaci\xf3n necesita un servidor backend (o backend-for-frontend) para almacenar de forma segura el secreto del cliente."}),"\n",(0,a.jsx)(n.li,{children:"La mayor\xeda de nuestras gu\xedas r\xe1pidas est\xe1n escritas para aplicaciones de primera parte, pero a\xfan puedes usarlas como referencia para la integraci\xf3n de aplicaciones de terceros."}),"\n",(0,a.jsx)(n.li,{children:"La principal diferencia es que las aplicaciones de terceros mostrar\xe1n una pantalla de consentimiento (Consent screen), solicitando a los usuarios permiso expl\xedcito para acceder a sus datos."}),"\n"]}),"\n",(0,a.jsxs)(n.p,{children:["Puedes encontrar m\xe1s informaci\xf3n en nuestras ",(0,a.jsx)(n.a,{href:"/quick-starts",children:"gu\xedas r\xe1pidas"}),"."]})]})}function i(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(o,{...e})}):o(e)}},47755:(e,n,r)=>{r.d(n,{Ay:()=>c,RM:()=>o});var a=r(25105),t=r(79621),s=r(29268);const o=[{value:"Configura un agente de IA de terceros en Logto",id:"configure-third-party-ai-agent-in-logto",level:2},{value:"Permitir que los desarrolladores creen aplicaciones de terceros en Logto",id:"allow-developers-to-create-third-party-apps-in-logto",level:3},{value:"Crear manualmente una aplicaci\xf3n de terceros en Logto",id:"manually-create-a-third-party-app-in-logto",level:3},...s.RM];function i(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",hr:"hr",li:"li",mermaid:"mermaid",ol:"ol",p:"p",strong:"strong",...(0,t.R)(),...e.components},{CloudLink:r}=n;return r||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("CloudLink",!0),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.h2,{id:"configure-third-party-ai-agent-in-logto",children:"Configura un agente de IA de terceros en Logto"}),"\n",(0,a.jsxs)(n.p,{children:["Para permitir que el agente de IA de terceros acceda a ",e.serviceName??"tu servicio",", necesitas configurar una ",(0,a.jsx)(n.strong,{children:"aplicaci\xf3n de terceros"})," en Logto. Esta aplicaci\xf3n se utilizar\xe1 para representar al agente de IA y obtener las credenciales necesarias para la autenticaci\xf3n y autorizaci\xf3n."]}),"\n",(0,a.jsx)(n.h3,{id:"allow-developers-to-create-third-party-apps-in-logto",children:"Permitir que los desarrolladores creen aplicaciones de terceros en Logto"}),"\n",(0,a.jsxs)(n.p,{children:["Si est\xe1s construyendo un marketplace o deseas permitir que los desarrolladores creen aplicaciones de terceros en Logto, puedes aprovechar la ",(0,a.jsx)(n.a,{href:"/integrate-logto/interact-with-management-api",children:"Logto Management API"})," para crear aplicaciones de terceros de forma program\xe1tica. Esto permite a los desarrolladores registrar sus aplicaciones y obtener las credenciales necesarias para la autenticaci\xf3n."]}),"\n",(0,a.jsx)(n.p,{children:"Necesitar\xe1s alojar tu propio servicio para gestionar el proceso de registro de clientes. Este servicio interactuar\xe1 con la Logto Management API para crear aplicaciones de terceros en nombre de los desarrolladores."}),"\n",(0,a.jsx)(n.mermaid,{value:"sequenceDiagram\n  actor Developer\n  participant Server as Tu servicio de registro de aplicaciones\n  participant Logto as Logto Management API\n  Developer->>Server: Registrar aplicaci\xf3n\n  Server->>Logto: Crear aplicaci\xf3n\n  Logto->>Server: ID de la app, secreto, etc.\n  Server->>Developer: ID de la app, secreto, etc."}),"\n",(0,a.jsx)(n.p,{children:"Alternativamente, puedes crear manualmente aplicaciones de terceros en Logto Console para familiarizarte con el proceso."}),"\n",(0,a.jsx)(n.h3,{id:"manually-create-a-third-party-app-in-logto",children:"Crear manualmente una aplicaci\xf3n de terceros en Logto"}),"\n",(0,a.jsx)(n.p,{children:"Puedes crear manualmente una aplicaci\xf3n de terceros en Logto Console para prop\xf3sitos de prueba o integraciones puntuales. Esto es \xfatil cuando deseas probar r\xe1pidamente la integraci\xf3n sin implementar un flujo completo de registro de clientes."}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"Inicia sesi\xf3n en tu Logto Console."}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:["Ve a ",(0,a.jsx)(r,{to:"/applications",children:(0,a.jsx)(n.strong,{children:"Aplicaciones"})})," \u2192 ",(0,a.jsx)(n.strong,{children:"Crear aplicaci\xf3n"})," \u2192 ",(0,a.jsx)(n.strong,{children:"Aplicaci\xf3n de terceros"})," -> ",(0,a.jsx)(n.strong,{children:"OIDC"}),"."]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:["Rellena el nombre de la aplicaci\xf3n y otros campos requeridos, luego haz clic en ",(0,a.jsx)(n.strong,{children:"Crear aplicaci\xf3n"}),"."]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:["Haz clic en la pesta\xf1a ",(0,a.jsx)(n.strong,{children:"Permisos"}),", en la secci\xf3n ",(0,a.jsx)(n.strong,{children:"Usuario"}),', haz clic en "Agregar".']}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:["En el di\xe1logo que se abre -> ",(0,a.jsx)(n.strong,{children:"Datos de usuario"})," -> selecciona los permisos ",(0,a.jsx)(n.strong,{children:(0,a.jsx)(n.code,{children:"profile"})}),", ",(0,a.jsx)(n.strong,{children:(0,a.jsx)(n.code,{children:"email"})}),", luego haz clic en ",(0,a.jsx)(n.strong,{children:"Guardar"}),"."]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:["En la aplicaci\xf3n de terceros, configura los alcances (scopes) para solicitar los permisos (alcances) ",(0,a.jsx)(n.code,{children:"openid profile email"}),"."]}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Nota"}),": ",(0,a.jsx)(n.code,{children:"openid"})," es obligatorio para OIDC, y ",(0,a.jsx)(n.code,{children:"profile"})," y ",(0,a.jsx)(n.code,{children:"email"})," son los permisos que agregaste en el paso anterior."]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:["Configura el ",(0,a.jsx)(n.strong,{children:"redirect URI"})," de tu aplicaci\xf3n de terceros seg\xfan corresponda. Recuerda actualizar tambi\xe9n el redirect URI en Logto."]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)("img",{src:"/img/assets/third-party-app-permissions.png",alt:"Permisos de la aplicaci\xf3n de terceros",style:{maxWidth:"800px",width:"100%"}}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(s.Ay,{})]})}function c(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(i,{...e})}):i(e)}},98347:(e,n,r)=>{r.d(n,{Ay:()=>c,RM:()=>o});var a=r(25105),t=r(79621),s=r(27519);const o=[{value:"Requisitos previos",id:"prerequisites",level:2},{value:"Comprendiendo la arquitectura",id:"understanding-the-architecture",level:3}];function i(e){const n={a:"a",admonition:"admonition",h2:"h2",h3:"h3",li:"li",p:"p",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.h2,{id:"prerequisites",children:"Requisitos previos"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["Un tenant de ",(0,a.jsx)(n.a,{href:"https://cloud.logto.io",children:"Logto Cloud"})," (o autogestionado)"]}),"\n",(0,a.jsx)(n.li,{children:"Entorno Node.js o Python"}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"understanding-the-architecture",children:"Comprendiendo la arquitectura"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Servidor MCP"}),": El servidor que expone herramientas y recursos a los clientes MCP."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Cliente MCP"}),": Un cliente utilizado para iniciar el flujo de autenticaci\xf3n y probar la integraci\xf3n. ",(0,a.jsx)("b",{children:e.isThirdParty?"El agente de IA de terceros se usar\xe1 como cliente en esta gu\xeda.":"Usaremos el MCP Inspector como cliente en esta gu\xeda."})]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Logto"}),": Act\xfaa como el proveedor de OpenID Connect (servidor de autorizaci\xf3n) y gestiona las identidades de los usuarios."]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"Un diagrama de secuencia no normativo ilustra el flujo general del proceso:"}),"\n",(0,a.jsx)(s.A,{value:`sequenceDiagram\n  participant Client as Cliente MCP<br/>${e.isThirdParty?"(agente de IA de terceros)":"(MCP Inspector)"}\n  participant Server as Servidor MCP\n  participant Logto\n\n  Server->>Logto: Solicita configuraci\xf3n de OpenID Connect\n  Logto->>Server: Devuelve configuraci\xf3n\n  Note over Server: Almacena en cach\xe9 la configuraci\xf3n\n  Client->>Server: Solicita acceso a una herramienta\n  Server->>Client: No autenticado (401 No autorizado)\n  Client->>Server: Solicita metadatos del servidor de autorizaci\xf3n OAuth 2.0\n  Note over Server: En este contexto, \u201cconfiguraci\xf3n de OpenID Connect\u201d y<br/>\u201cmetadatos del servidor de autorizaci\xf3n OAuth 2.0\u201d<br/>se refieren a lo mismo.\n  Server->>Client: Devuelve configuraci\xf3n de OpenID Connect obtenida de Logto\n  Client->>Logto: Redirige a Logto para autenticaci\xf3n\n  Logto->>Logto: El usuario se autentica\n  ${e.isThirdParty?"Logto->>Logto: El usuario autoriza (consiente) alcances<br/>a la aplicaci\xf3n de terceros":""}\n  Logto->>Client: Redirige de vuelta al servidor MCP con el c\xf3digo de autorizaci\xf3n\n  Client->>Logto: Solicita token de acceso usando el c\xf3digo de autorizaci\xf3n\n  Logto->>Client: Devuelve token de acceso\n  Client->>Server: Solicita herramienta con token de acceso\n  Server->>Logto: Solicita informaci\xf3n del usuario usando el token de acceso\n  Logto->>Server: Devuelve informaci\xf3n del usuario\n  Server->>Client: Devuelve respuesta de la herramienta`}),"\n",(0,a.jsx)(n.admonition,{type:"note",children:(0,a.jsxs)(n.p,{children:["Debido a que MCP est\xe1 evolucionando r\xe1pidamente, el diagrama anterior puede no estar completamente actualizado. Por favor, consulta la documentaci\xf3n de ",(0,a.jsx)(n.a,{href:"https://mcp-auth.dev",children:"mcp-auth"})," para la informaci\xf3n m\xe1s reciente."]})})]})}function c(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(i,{...e})}):i(e)}},37182:(e,n,r)=>{r.d(n,{Ay:()=>l,RM:()=>i});var a=r(25105),t=r(79621),s=r(38552),o=r(22002);const i=[];function c(e){const n={a:"a",p:"p",...(0,t.R)(),...e.components};return(0,a.jsxs)(o.A,{groupId:"sdk",children:[(0,a.jsx)(s.A,{value:"python",label:"Python",children:(0,a.jsxs)(n.p,{children:["El c\xf3digo completo del servidor MCP se puede encontrar en el repositorio ",(0,a.jsx)(n.a,{href:"https://github.com/mcp-auth/python",children:"mcp-auth/python"}),"."]})}),(0,a.jsx)(s.A,{value:"node",label:"Node.js",children:(0,a.jsxs)(n.p,{children:["El c\xf3digo completo del servidor MCP se puede encontrar en el repositorio ",(0,a.jsx)(n.a,{href:"https://github.com/mcp-auth/js",children:"mcp-auth/js"}),"."]})})]})}function l(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}},8196:(e,n,r)=>{r.d(n,{Ay:()=>l,RM:()=>i});var a=r(25105),t=r(79621),s=r(38552),o=r(22002);const i=[{value:"Configura el servidor MCP",id:"set-up-the-mcp-server",level:2},{value:"Crea el proyecto e instala las dependencias",id:"create-project-and-install-dependencies",level:3},{value:"Configura la autenticaci\xf3n MCP con Logto",id:"configure-mcp-auth-with-logto",level:3},{value:"Implementa la verificaci\xf3n de tokens",id:"implement-token-verification",level:3},{value:"Implementa la herramienta &quot;whoami&quot;",id:"implement-the-whoami-tool",level:3}];function c(e){const n={admonition:"admonition",code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",strong:"strong",...(0,t.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.h2,{id:"set-up-the-mcp-server",children:"Configura el servidor MCP"}),"\n",(0,a.jsx)(n.h3,{id:"create-project-and-install-dependencies",children:"Crea el proyecto e instala las dependencias"}),"\n",(0,a.jsxs)(o.A,{groupId:"sdk",children:[(0,a.jsx)(s.A,{value:"python",label:"Python",children:(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'mkdir mcp-server\ncd mcp-server\nuv init # O utiliza tu propia estructura de proyecto\nuv add "mcp[cli]" starlette uvicorn mcpauth # O utiliza cualquier gestor de paquetes preferido\n'})})}),(0,a.jsx)(s.A,{value:"node",label:"Node.js",children:(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"mkdir mcp-server\ncd mcp-server\nnpm init -y\nnpm install @modelcontextprotocol/sdk express mcp-auth # O utiliza cualquier gestor de paquetes preferido\n"})})})]}),"\n",(0,a.jsx)(n.h3,{id:"configure-mcp-auth-with-logto",children:"Configura la autenticaci\xf3n MCP con Logto"}),"\n",(0,a.jsxs)(n.p,{children:["Recuerda reemplazar ",(0,a.jsx)(n.code,{children:"<your-logto-issuer-endpoint>"})," por el endpoint del emisor que copiaste anteriormente."]}),"\n",(0,a.jsxs)(o.A,{groupId:"sdk",children:[(0,a.jsxs)(s.A,{value:"python",label:"Python",children:[(0,a.jsx)(n.p,{children:(0,a.jsxs)(n.strong,{children:["En ",(0,a.jsx)(n.code,{children:"whoami.py"}),":"]})}),(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:"from mcpauth import MCPAuth\nfrom mcpauth.config import AuthServerType\nfrom mcpauth.utils import fetch_server_config\n\nauth_issuer = '<your-logto-issuer-endpoint>'\nauth_server_config = fetch_server_config(auth_issuer, type=AuthServerType.OIDC)\nmcp_auth = MCPAuth(server=auth_server_config)\n"})})]}),(0,a.jsxs)(s.A,{value:"node",label:"Node.js",children:[(0,a.jsx)(n.p,{children:(0,a.jsxs)(n.strong,{children:["En ",(0,a.jsx)(n.code,{children:"whoami.js"}),":"]})}),(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-js",children:"import { MCPAuth, fetchServerConfig } from 'mcp-auth';\n\nconst authIssuer = '<your-logto-issuer-endpoint>';\nconst mcpAuth = new MCPAuth({\n  server: await fetchServerConfig(authIssuer, { type: 'oidc' }),\n});\n"})})]})]}),"\n",(0,a.jsx)(n.h3,{id:"implement-token-verification",children:"Implementa la verificaci\xf3n de tokens"}),"\n",(0,a.jsx)(n.p,{children:"Como vamos a verificar el token de acceso (Access token) y obtener la informaci\xf3n del usuario, necesitamos implementar la verificaci\xf3n del token de acceso de la siguiente manera:"}),"\n",(0,a.jsxs)(o.A,{groupId:"sdk",children:[(0,a.jsx)(s.A,{value:"python",label:"Python",children:(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'import requests\nfrom mcpauth.types import AuthInfo\n\ndef verify_access_token(token: str) -> AuthInfo:\n    endpoint = auth_server_config.metadata.userinfo_endpoint\n    response = requests.get(\n        endpoint,\n        headers={"Authorization": f"Bearer {token}"},\n    )\n    response.raise_for_status()\n    data = response.json()\n    return AuthInfo(\n        token=token,\n        subject=data.get("sub"),\n        issuer=auth_server_config.metadata.issuer,\n        claims=data,\n    )\n'})})}),(0,a.jsx)(s.A,{value:"node",label:"Node.js",children:(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-js",children:"const verifyToken = async (token) => {\n  const { userinfoEndpoint, issuer } = mcpAuth.config.server.metadata;\n  const response = await fetch(userinfoEndpoint, {\n    headers: { Authorization: `Bearer ${token}` },\n  });\n  if (!response.ok) throw new Error('Token verification failed');\n  const userInfo = await response.json();\n  return {\n    token,\n    issuer,\n    subject: userInfo.sub,\n    claims: userInfo,\n  };\n};\n"})})})]}),"\n",(0,a.jsx)(n.h3,{id:"implement-the-whoami-tool",children:'Implementa la herramienta "whoami"'}),"\n",(0,a.jsx)(n.p,{children:'Ahora, vamos a implementar la herramienta "whoami" que devuelve los reclamos de identidad del usuario actual solicitando el endpoint userinfo con el token de acceso enviado por el cliente.'}),"\n",(0,a.jsx)(n.admonition,{type:"note",children:(0,a.jsx)(n.p,{children:"Estamos usando el transporte SSE para el ejemplo debido a la falta de soporte oficial para el transporte HTTP Streamable en la versi\xf3n actual del SDK. Te\xf3ricamente, puedes usar cualquier transporte compatible con HTTP."})}),"\n",(0,a.jsxs)(o.A,{groupId:"sdk",children:[(0,a.jsxs)(s.A,{value:"python",label:"Python",children:[(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'from mcp.server.fastmcp import FastMCP\nfrom starlette.applications import Starlette\nfrom starlette.routing import Mount\nfrom starlette.middleware import Middleware\n\nmcp = FastMCP("WhoAmI")\n\n@mcp.tool()\ndef whoami() -> dict:\n    """\n    Devuelve la informaci\xf3n de identidad del usuario actual.\n    """\n    return (\n        mcp_auth.auth_info.claims\n        if mcp_auth.auth_info\n        else {"error": "Not authenticated"}\n    )\n\nbearer_auth = Middleware(mcp_auth.bearer_auth_middleware(verify_access_token))\napp = Starlette(\n    routes=[\n        mcp_auth.metadata_route(),  # Sirve metadatos OIDC para descubrimiento\n        Mount(\'/\', app=mcp.sse_app(), middleware=[bearer_auth]),\n    ],\n)\n'})}),(0,a.jsx)(n.p,{children:"Ejecuta el servidor con:"}),(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"uvicorn whoami:app --host 0.0.0.0 --port 3001\n"})})]}),(0,a.jsxs)(s.A,{value:"node",label:"Node.js",children:[(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-js",children:"import { McpServer } from '@modelcontextprotocol/sdk/server/mcp.js';\nimport express from 'express';\n\n// Crea el servidor MCP y registra la herramienta whoami\nconst server = new McpServer({ name: 'WhoAmI', version: '0.0.0' });\nserver.tool('whoami', ({ authInfo }) => ({\n  content: [\n    { type: 'text', text: JSON.stringify(authInfo?.claims ?? { error: 'Not authenticated' }) },\n  ],\n}));\n\n// Aplicaci\xf3n Express y middleware de MCP Auth\nconst app = express();\napp.use(mcpAuth.delegatedRouter());\napp.use(mcpAuth.bearerAuth(verifyToken));\n\n// Transporte SSE (como en la documentaci\xf3n del SDK)\nconst transports = {};\napp.get('/sse', async (_req, res) => {\n  const transport = new SSEServerTransport('/messages', res);\n  transports[transport.sessionId] = transport;\n  res.on('close', () => delete transports[transport.sessionId]);\n  await server.connect(transport);\n});\napp.post('/messages', async (req, res) => {\n  const sessionId = String(req.query.sessionId);\n  const transport = transports[sessionId];\n  if (transport) await transport.handlePostMessage(req, res, req.body);\n  else res.status(400).send('No transport found for sessionId');\n});\n\napp.listen(3001);\n"})}),(0,a.jsx)(n.p,{children:"Ejecuta el servidor con:"}),(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"node whoami.js\n"})})]})]})]})}function l(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}},53020:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>p,contentTitle:()=>u,default:()=>g,frontMatter:()=>d,metadata:()=>a,toc:()=>h});const a=JSON.parse('{"id":"use-cases/ai/mcp-server-enable-third-party-ai-agent-access","title":"Habilitar el acceso de agentes de IA de terceros a tu servidor MCP","description":"Esta gu\xeda te gu\xeda paso a paso para integrar Logto con tu servidor MCP usando mcp-auth, permiti\xe9ndote autenticar usuarios y recuperar de forma segura su informaci\xf3n de identidad utilizando el flujo est\xe1ndar de OpenID Connect.","source":"@site/i18n/es/docusaurus-plugin-content-docs/current/use-cases/ai/mcp-server-enable-third-party-ai-agent-access.mdx","sourceDirName":"use-cases/ai","slug":"/use-cases/ai/mcp-server-enable-third-party-ai-agent-access","permalink":"/es/use-cases/ai/mcp-server-enable-third-party-ai-agent-access","draft":false,"unlisted":false,"editUrl":"https://github.com/logto-io/docs/tree/master/i18n/es/docusaurus-plugin-content-docs/current/use-cases/ai/mcp-server-enable-third-party-ai-agent-access.mdx","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2,"sidebar_label":"Habilitar el acceso de agentes de IA de terceros al servidor MCP"},"sidebar":"useCasesSidebar","previous":{"title":"Habilitar autenticaci\xf3n para apps con MCP","permalink":"/es/use-cases/ai/mcp-server-add-auth"},"next":{"title":"Habilitar acceso de agentes de IA de terceros a la app","permalink":"/es/use-cases/ai/enable-third-party-ai-agent-access"}}');var t=r(25105),s=r(79621),o=r(47755),i=r(98347),c=r(37182),l=r(8196);const d={sidebar_position:2,sidebar_label:"Habilitar el acceso de agentes de IA de terceros al servidor MCP"},u="Habilitar el acceso de agentes de IA de terceros a tu servidor MCP",p={},h=[{value:"Diferencia entre agente de IA de terceros (cliente MCP) y tu propio cliente MCP",id:"difference-between-third-party-ai-agent-mcp-client-and-your-own-mcp-client",level:2},...i.RM,...o.RM,...l.RM,{value:"Probar la integraci\xf3n",id:"test-the-integration",level:2},...c.RM];function m(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"habilitar-el-acceso-de-agentes-de-ia-de-terceros-a-tu-servidor-mcp",children:"Habilitar el acceso de agentes de IA de terceros a tu servidor MCP"})}),"\n",(0,t.jsxs)(n.p,{children:["Esta gu\xeda te gu\xeda paso a paso para integrar Logto con tu servidor MCP usando ",(0,t.jsx)(n.a,{href:"https://mcp-auth.dev",children:"mcp-auth"}),", permiti\xe9ndote autenticar usuarios y recuperar de forma segura su informaci\xf3n de identidad utilizando el flujo est\xe1ndar de OpenID Connect."]}),"\n",(0,t.jsx)(n.p,{children:"Aprender\xe1s a:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Configurar Logto como el servidor de autorizaci\xf3n para tu servidor MCP."}),"\n",(0,t.jsx)(n.li,{children:"Configurar una herramienta \u201cwhoami\u201d en tu servidor MCP para devolver los reclamos de identidad del usuario actual."}),"\n",(0,t.jsx)(n.li,{children:"Probar el flujo con un agente de IA de terceros (cliente MCP)."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Despu\xe9s de este tutorial, tu servidor MCP podr\xe1:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Autenticar usuarios en tu tenant de Logto."}),"\n",(0,t.jsxs)(n.li,{children:["Devolver reclamos de identidad (",(0,t.jsx)(n.code,{children:"sub"}),", ",(0,t.jsx)(n.code,{children:"username"}),", ",(0,t.jsx)(n.code,{children:"name"}),", ",(0,t.jsx)(n.code,{children:"email"}),', etc.) para la invocaci\xf3n de la herramienta "whoami".']}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"difference-between-third-party-ai-agent-mcp-client-and-your-own-mcp-client",children:"Diferencia entre agente de IA de terceros (cliente MCP) y tu propio cliente MCP"}),"\n",(0,t.jsx)(n.p,{children:"Veamos un ejemplo. Imagina que eres un desarrollador que ejecuta un servidor MCP para gestionar el acceso y la automatizaci\xf3n del correo electr\xf3nico."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Aplicaci\xf3n de correo oficial (Tu propio cliente MCP)"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Proporcionas una aplicaci\xf3n de correo oficial para que los usuarios lean y gestionen sus correos electr\xf3nicos."}),"\n",(0,t.jsx)(n.li,{children:"C\xf3mo funciona: La aplicaci\xf3n de correo oficial se conecta a tu servidor MCP usando Logto para autenticar a los usuarios. Cuando Alice inicia sesi\xf3n, obtiene acceso autom\xe1ticamente a sus correos electr\xf3nicos, sin pantallas de permisos adicionales, ya que es tu aplicaci\xf3n de confianza."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Agente de IA de terceros (Cliente MCP de terceros)"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Est\xe1s construyendo un ecosistema alrededor de tu servidor MCP, as\xed que otro desarrollador crea \u201cSmartMail AI\u201d (un asistente de IA que puede resumir correos y programar reuniones autom\xe1ticamente) integr\xe1ndolo como cliente de terceros."}),"\n",(0,t.jsxs)(n.li,{children:["C\xf3mo funciona: SmartMail AI (cliente MCP de terceros) quiere acceder a los correos electr\xf3nicos de los usuarios a trav\xe9s de tu servidor MCP. Cuando Alice inicia sesi\xf3n en SmartMail AI usando su cuenta:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Se le muestra una pantalla de consentimiento, solicitando permiso para que SmartMail AI lea sus correos electr\xf3nicos y calendario."}),"\n",(0,t.jsx)(n.li,{children:"Alice puede permitir o denegar este acceso."}),"\n",(0,t.jsx)(n.li,{children:"Solo los datos a los que ella consiente son compartidos con SmartMail AI, y SmartMail AI no puede acceder a ning\xfan dato adicional sin un nuevo consentimiento expl\xedcito."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Este control de acceso (permiso) garantiza la seguridad de los datos del usuario, incluso aunque tu servidor MCP gestione todos los datos, las aplicaciones de terceros como SmartMail AI solo pueden acceder a lo que el usuario ha permitido expl\xedcitamente. No pueden eludir este proceso, ya que est\xe1 reforzado por tu implementaci\xf3n de control de acceso en el servidor MCP."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Resumen"})}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Tipo de cliente"}),(0,t.jsx)(n.th,{children:"Ejemplo"}),(0,t.jsx)(n.th,{children:"\xbfRequiere consentimiento?"}),(0,t.jsx)(n.th,{children:"\xbfQui\xe9n lo controla?"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Aplicaci\xf3n de correo oficial"}),(0,t.jsx)(n.td,{children:"Tu propia aplicaci\xf3n de correo"}),(0,t.jsx)(n.td,{children:"No"}),(0,t.jsx)(n.td,{children:"T\xfa (el desarrollador)"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Agente de IA de terceros"}),(0,t.jsx)(n.td,{children:"Asistente SmartMail AI"}),(0,t.jsx)(n.td,{children:"S\xed"}),(0,t.jsx)(n.td,{children:"Otro desarrollador"})]})]})]}),"\n",(0,t.jsx)(n.admonition,{type:"note",children:(0,t.jsxs)(n.p,{children:["Si deseas integrar tu servidor MCP con tu propio agente de IA o aplicaci\xf3n, consulta la gu\xeda ",(0,t.jsx)(n.a,{href:"./mcp-server-add-auth",children:"Habilita autenticaci\xf3n para tus apps impulsadas por MCP con Logto"}),"."]})}),"\n",(0,t.jsx)(i.Ay,{isThirdParty:!0}),"\n",(0,t.jsx)(o.Ay,{serviceName:"servidor MCP"}),"\n",(0,t.jsx)(l.Ay,{}),"\n",(0,t.jsx)(n.h2,{id:"test-the-integration",children:"Probar la integraci\xf3n"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Inicia el servidor MCP."}),"\n",(0,t.jsx)(n.li,{children:"Inicia el agente de IA."}),"\n",(0,t.jsxs)(n.li,{children:["En el cliente, invoca la herramienta ",(0,t.jsx)(n.code,{children:"whoami"})," para recuperar los reclamos de identidad del usuario actual."]}),"\n",(0,t.jsx)(n.li,{children:"El cliente debe manejar la respuesta 401 No autorizado y redirigir al usuario a Logto para autenticaci\xf3n."}),"\n",(0,t.jsx)(n.li,{children:"Tras la autenticaci\xf3n exitosa, el cliente debe recibir un token de acceso y usarlo para hacer solicitudes al servidor MCP."}),"\n",(0,t.jsx)(n.li,{children:"El cliente debe poder recuperar los reclamos de identidad del servidor MCP usando el token de acceso."}),"\n"]}),"\n",(0,t.jsx)(c.Ay,{})]})}function g(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(m,{...e})}):m(e)}},38552:(e,n,r)=>{r.d(n,{A:()=>o});r(58101);var a=r(13526);const t={tabItem:"tabItem_dgSZ"};var s=r(25105);function o(e){let{children:n,hidden:r,className:o}=e;return(0,s.jsx)("div",{role:"tabpanel",className:(0,a.A)(t.tabItem,o),hidden:r,children:n})}},22002:(e,n,r)=>{r.d(n,{A:()=>C});var a=r(58101),t=r(13526),s=r(60755),o=r(55234),i=r(6635),c=r(4100),l=r(35661),d=r(42752);function u(e){return a.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,a.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function p(e){const{values:n,children:r}=e;return(0,a.useMemo)((()=>{const e=n??function(e){return u(e).map((e=>{let{props:{value:n,label:r,attributes:a,default:t}}=e;return{value:n,label:r,attributes:a,default:t}}))}(r);return function(e){const n=(0,l.XI)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,r])}function h(e){let{value:n,tabValues:r}=e;return r.some((e=>e.value===n))}function m(e){let{queryString:n=!1,groupId:r}=e;const t=(0,o.W6)(),s=function(e){let{queryString:n=!1,groupId:r}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!r)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return r??null}({queryString:n,groupId:r});return[(0,c.aZ)(s),(0,a.useCallback)((e=>{if(!s)return;const n=new URLSearchParams(t.location.search);n.set(s,e),t.replace({...t.location,search:n.toString()})}),[s,t])]}function g(e){const{defaultValue:n,queryString:r=!1,groupId:t}=e,s=p(e),[o,c]=(0,a.useState)((()=>function(e){let{defaultValue:n,tabValues:r}=e;if(0===r.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!h({value:n,tabValues:r}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${r.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const a=r.find((e=>e.default))??r[0];if(!a)throw new Error("Unexpected error: 0 tabValues");return a.value}({defaultValue:n,tabValues:s}))),[l,u]=m({queryString:r,groupId:t}),[g,j]=function(e){let{groupId:n}=e;const r=function(e){return e?`docusaurus.tab.${e}`:null}(n),[t,s]=(0,d.Dv)(r);return[t,(0,a.useCallback)((e=>{r&&s.set(e)}),[r,s])]}({groupId:t}),x=(()=>{const e=l??g;return h({value:e,tabValues:s})?e:null})();(0,i.A)((()=>{x&&c(x)}),[x]);return{selectedValue:o,selectValue:(0,a.useCallback)((e=>{if(!h({value:e,tabValues:s}))throw new Error(`Can't select invalid tab value=${e}`);c(e),u(e),j(e)}),[u,j,s]),tabValues:s}}var j=r(21929);const x={tabList:"tabList_osvQ",tabItem:"tabItem_dc4O"};var v=r(25105);function f(e){let{className:n,block:r,selectedValue:a,selectValue:o,tabValues:i}=e;const c=[],{blockElementScrollPositionUntilNextRender:l}=(0,s.a_)(),d=e=>{const n=e.currentTarget,r=c.indexOf(n),t=i[r].value;t!==a&&(l(n),o(t))},u=e=>{let n=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const r=c.indexOf(e.currentTarget)+1;n=c[r]??c[0];break}case"ArrowLeft":{const r=c.indexOf(e.currentTarget)-1;n=c[r]??c[c.length-1];break}}n?.focus()};return(0,v.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,t.A)("tabs",{"tabs--block":r},n),children:i.map((e=>{let{value:n,label:r,attributes:s}=e;return(0,v.jsx)("li",{role:"tab",tabIndex:a===n?0:-1,"aria-selected":a===n,ref:e=>{c.push(e)},onKeyDown:u,onClick:d,...s,className:(0,t.A)("tabs__item",x.tabItem,s?.className,{"tabs__item--active":a===n}),children:r??n},n)}))})}function b(e){let{lazy:n,children:r,selectedValue:s}=e;const o=(Array.isArray(r)?r:[r]).filter(Boolean);if(n){const e=o.find((e=>e.props.value===s));return e?(0,a.cloneElement)(e,{className:(0,t.A)("margin-top--md",e.props.className)}):null}return(0,v.jsx)("div",{className:"margin-top--md",children:o.map(((e,n)=>(0,a.cloneElement)(e,{key:n,hidden:e.props.value!==s})))})}function y(e){const n=g(e);return(0,v.jsxs)("div",{className:(0,t.A)("tabs-container",x.tabList),children:[(0,v.jsx)(f,{...n,...e}),(0,v.jsx)(b,{...n,...e})]})}function C(e){const n=(0,j.A)();return(0,v.jsx)(y,{...e,children:u(e.children)},String(n))}},79621:(e,n,r)=>{r.d(n,{R:()=>o,x:()=>i});var a=r(58101);const t={},s=a.createContext(t);function o(e){const n=a.useContext(s);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),a.createElement(s.Provider,{value:n},e.children)}}}]);