"use strict";(self.webpackChunk_logto_docs=self.webpackChunk_logto_docs||[]).push([[9109],{10696:(e,o,n)=>{n.r(o),n.d(o,{assets:()=>c,contentTitle:()=>t,default:()=>p,frontMatter:()=>r,metadata:()=>a,toc:()=>d});const a=JSON.parse('{"id":"developers/custom-token-claims/README","title":"Reclamos personalizados de token","description":"Logto proporciona la flexibilidad de a\xf1adir reclamos personalizados dentro de los tokens de acceso (JWT / Token opaco (Opaque token)). Con esta funci\xf3n, puedes incluir informaci\xf3n adicional para tu l\xf3gica de negocio, todo transmitido de forma segura en los tokens y recuperable mediante introspecci\xf3n en el caso de los tokens opacos.","source":"@site/i18n/es/docusaurus-plugin-content-docs/current/developers/custom-token-claims/README.mdx","sourceDirName":"developers/custom-token-claims","slug":"/developers/custom-token-claims/","permalink":"/es/developers/custom-token-claims/","draft":false,"unlisted":false,"editUrl":"https://github.com/logto-io/docs/tree/master/i18n/es/docusaurus-plugin-content-docs/current/developers/custom-token-claims/README.mdx","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"docsSidebar","previous":{"title":"Desarrollador","permalink":"/es/developers/"},"next":{"title":"Casos de uso comunes","permalink":"/es/developers/custom-token-claims/common-use-cases"}}');var s=n(25105),i=n(79621);const r={sidebar_position:2},t="Reclamos personalizados de token",c={},d=[{value:"Introducci\xf3n",id:"introduction",level:2},{value:"\xbfC\xf3mo funcionan los reclamos personalizados de token?",id:"how-do-custom-token-claims-work",level:2},{value:"Recursos relacionados",id:"related-resources",level:2}];function l(e){const o={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",mermaid:"mermaid",p:"p",strong:"strong",ul:"ul",...(0,i.R)(),...e.components},{Url:n}=o;return n||function(e,o){throw new Error("Expected "+(o?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Url",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.header,{children:(0,s.jsx)(o.h1,{id:"reclamos-personalizados-de-token",children:"Reclamos personalizados de token"})}),"\n",(0,s.jsx)(o.p,{children:"Logto proporciona la flexibilidad de a\xf1adir reclamos personalizados dentro de los tokens de acceso (JWT / Token opaco (Opaque token)). Con esta funci\xf3n, puedes incluir informaci\xf3n adicional para tu l\xf3gica de negocio, todo transmitido de forma segura en los tokens y recuperable mediante introspecci\xf3n en el caso de los tokens opacos."}),"\n",(0,s.jsx)(o.h2,{id:"introduction",children:"Introducci\xf3n"}),"\n",(0,s.jsxs)(o.p,{children:["Los ",(0,s.jsx)(o.a,{href:"https://auth.wiki/access-token",children:"tokens de acceso (Access tokens)"})," juegan un papel fundamental en el proceso de autenticaci\xf3n (Authentication) y autorizaci\xf3n (Authorization), transportando la informaci\xf3n de identidad y permisos del sujeto, y se transmiten entre el ",(0,s.jsx)(o.a,{href:"/concepts/core-service",children:"servidor Logto"})," (sirve como servidor de autenticaci\xf3n o proveedor de identidad, IdP), tu servidor de servicios web (proveedor de recursos), y las aplicaciones cliente (clientes)."]}),"\n",(0,s.jsxs)(o.p,{children:["Los ",(0,s.jsx)(o.a,{href:"https://auth.wiki/claim",children:"reclamos de token (Token claims)"})," son los pares clave-valor que proporcionan informaci\xf3n sobre una entidad o el propio token. Los reclamos pueden incluir informaci\xf3n del usuario, tiempo de expiraci\xf3n del token, permisos y otros metadatos relevantes para el proceso de autenticaci\xf3n (Authentication) y autorizaci\xf3n (Authorization)."]}),"\n",(0,s.jsx)(o.p,{children:"Hay dos tipos de tokens de acceso en Logto:"}),"\n",(0,s.jsxs)(o.ul,{children:["\n",(0,s.jsxs)(o.li,{children:[(0,s.jsx)(o.strong,{children:"JSON Web Token:"})," ",(0,s.jsx)(o.a,{href:"https://auth.wiki/jwt",children:"JSON Web Token (JWT)"})," es un formato popular que codifica los reclamos de manera segura y legible por los clientes. Reclamos comunes como ",(0,s.jsx)(o.code,{children:"sub"}),", ",(0,s.jsx)(o.code,{children:"iss"}),", ",(0,s.jsx)(o.code,{children:"aud"}),", etc., se utilizan en l\xednea con el protocolo OAuth 2.0 (Consulta ",(0,s.jsx)(o.a,{href:"https://datatracker.ietf.org/doc/html/rfc7519#section-4",children:"este enlace"})," para m\xe1s detalles). Los JWT permiten a los consumidores acceder directamente a los reclamos sin pasos de validaci\xf3n adicionales. En Logto, los tokens de acceso se emiten en formato JWT por defecto cuando un cliente inicia solicitudes de autorizaci\xf3n de recursos o organizaciones espec\xedficas."]}),"\n",(0,s.jsxs)(o.li,{children:[(0,s.jsx)(o.strong,{children:"Token opaco (Opaque token):"})," Un ",(0,s.jsx)(o.a,{href:"http://localhost:3000/concepts/opaque-token",children:"token opaco (opaque token)"})," no es autocontenido y siempre requiere un paso de validaci\xf3n adicional a trav\xe9s del endpoint de ",(0,s.jsx)(o.a,{href:"https://auth.wiki/token-introspection",children:"introspecci\xf3n de token (token introspection)"}),". A pesar de su formato no transparente, los tokens opacos pueden ayudar a obtener reclamos y transmitirse de forma segura entre las partes. Los reclamos de token se almacenan de forma segura en el servidor Logto y son accedidos por las aplicaciones cliente a trav\xe9s del endpoint de introspecci\xf3n de token. Los tokens de acceso se emiten en formato opaco cuando no se incluye un recurso u organizaci\xf3n espec\xedfica en la solicitud de autorizaci\xf3n. Estos tokens se utilizan principalmente para acceder al endpoint OIDC ",(0,s.jsx)(o.code,{children:"userinfo"})," y otros prop\xf3sitos generales."]}),"\n"]}),"\n",(0,s.jsx)(o.p,{children:"En muchos casos, los reclamos est\xe1ndar no son suficientes para satisfacer las necesidades espec\xedficas de tus aplicaciones, ya sea que utilices JWT o tokens opacos. Para abordar esto, Logto proporciona la flexibilidad de a\xf1adir reclamos personalizados dentro de los tokens de acceso. Con esta funci\xf3n, puedes incluir informaci\xf3n adicional para tu l\xf3gica de negocio, todo transmitido de forma segura en los tokens y recuperable mediante introspecci\xf3n en el caso de los tokens opacos."}),"\n",(0,s.jsx)(o.h2,{id:"how-do-custom-token-claims-work",children:"\xbfC\xf3mo funcionan los reclamos personalizados de token?"}),"\n",(0,s.jsxs)(o.p,{children:["Logto te permite insertar reclamos personalizados en el ",(0,s.jsx)(o.code,{children:"token de acceso (access token)"})," a trav\xe9s de una funci\xf3n de callback ",(0,s.jsx)(o.code,{children:"getCustomJwtClaims"}),". Puedes proporcionar tu propia implementaci\xf3n de la funci\xf3n ",(0,s.jsx)(o.code,{children:"getCustomJwtClaims"})," para devolver un objeto de reclamos personalizados. El valor de retorno se fusionar\xe1 con la carga \xfatil original del token y se firmar\xe1 para generar el token de acceso final."]}),"\n",(0,s.jsx)(o.mermaid,{value:"sequenceDiagram\n  participant U as Usuario o agente de usuario\n  participant IdP as Logto (proveedor de identidad)\n  participant SP as Proveedor de servicios\n\n  autonumber\n  U ->> IdP: Solicitud de autenticaci\xf3n (con credenciales)\n  activate IdP\n  IdP--\x3e>IdP: Validar credenciales y<br/>generar carga \xfatil bruta del token de acceso\n  rect var(--mermaid-rect-fill)\n  note over IdP: Reclamos personalizados de token\n  IdP->>IdP: Ejecutar script de reclamos personalizados de token (`getCustomJwtClaims`) y<br/>obtener reclamos adicionales de token\n  end\n  IdP--\x3e>IdP: Fusionar carga \xfatil bruta del token de acceso y reclamos adicionales\n  IdP--\x3e>IdP: Firmar y cifrar la carga \xfatil para obtener el token de acceso\n  deactivate IdP\n  IdP--\x3e>U: Emitir token de acceso en formato JWT\n  par Obtener servicio v\xeda API\n  U->>SP: solicitud de servicio (con token de acceso JWT)\n  SP--\x3e>U: respuesta del servicio\n  end"}),"\n",(0,s.jsx)(o.admonition,{type:"warning",children:(0,s.jsx)(o.p,{children:"Los reclamos integrados de Logto NO pueden ser sobrescritos ni modificados. Los reclamos personalizados se a\xf1adir\xe1n al token como reclamos adicionales. Si alg\xfan reclamo personalizado entra en conflicto con los reclamos integrados, esos reclamos personalizados ser\xe1n ignorados."})}),"\n",(0,s.jsx)(o.h2,{id:"related-resources",children:"Recursos relacionados"}),"\n",(0,s.jsx)(n,{href:"https://blog.logto.io/glance-on-custom-jwt-access-token-claims",children:(0,s.jsx)(o.p,{children:"A\xf1ade reclamos personalizados para tokens de acceso JWT con Logto para potenciar tu autorizaci\xf3n\n(Authorization)"})})]})}function p(e={}){const{wrapper:o}={...(0,i.R)(),...e.components};return o?(0,s.jsx)(o,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},79621:(e,o,n)=>{n.d(o,{R:()=>r,x:()=>t});var a=n(58101);const s={},i=a.createContext(s);function r(e){const o=a.useContext(i);return a.useMemo((function(){return"function"==typeof e?e(o):{...o,...e}}),[o,e])}function t(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),a.createElement(i.Provider,{value:o},e.children)}}}]);