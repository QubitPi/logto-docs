"use strict";(self.webpackChunk_logto_docs=self.webpackChunk_logto_docs||[]).push([[40622],{30046:(e,n,s)=>{s.d(n,{Ay:()=>c,RM:()=>o});var r=s(25105),i=s(79621);const o=[];function t(e){const n={a:"a",p:"p",...(0,i.R)(),...e.components};return(0,r.jsxs)(n.p,{children:["Recomendamos leer primero ",(0,r.jsx)(n.a,{href:"/authorization/role-based-access-control",children:"\ud83d\udd10 Control de acceso basado en roles (RBAC)"})," para entender los conceptos b\xe1sicos de Logto RBAC y c\xf3mo configurar correctamente los recursos de API."]})}function c(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(t,{...e})}):t(e)}},27817:(e,n,s)=>{s.d(n,{Ay:()=>c,RM:()=>o});var r=s(25105),i=s(79621);const o=[{value:"Punto de control: Prueba tu aplicaci\xf3n",id:"checkpoint-test-your-application",level:3}];function t(e){const n={h3:"h3",li:"li",ol:"ol",p:"p",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h3,{id:"checkpoint-test-your-application",children:"Punto de control: Prueba tu aplicaci\xf3n"}),"\n",(0,r.jsx)(n.p,{children:"Ahora, puedes probar tu aplicaci\xf3n:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Ejecuta tu aplicaci\xf3n, ver\xe1s el bot\xf3n de inicio de sesi\xf3n."}),"\n",(0,r.jsx)(n.li,{children:"Haz clic en el bot\xf3n de inicio de sesi\xf3n, el SDK iniciar\xe1 el proceso de inicio de sesi\xf3n y te redirigir\xe1 a la p\xe1gina de inicio de sesi\xf3n de Logto."}),"\n",(0,r.jsx)(n.li,{children:"Despu\xe9s de iniciar sesi\xf3n, ser\xe1s redirigido de vuelta a tu aplicaci\xf3n y ver\xe1s el bot\xf3n de cierre de sesi\xf3n."}),"\n",(0,r.jsx)(n.li,{children:"Haz clic en el bot\xf3n de cierre de sesi\xf3n para limpiar el almacenamiento local y cerrar sesi\xf3n."}),"\n"]})]})}function c(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(t,{...e})}):t(e)}},21322:(e,n,s)=>{s.d(n,{Ay:()=>c,RM:()=>o});var r=s(25105),i=s(79621);const o=[];function t(e){const n={a:"a",admonition:"admonition",code:"code",p:"p",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"Una vez que hayas configurado los recursos de API, puedes agregarlos al configurar Logto en tu aplicaci\xf3n:"}),"\n",e.configResourcesCode,"\n",(0,r.jsx)(n.p,{children:"Cada recurso de API tiene sus propios permisos (alcances)."}),"\n",(0,r.jsxs)(n.p,{children:["Por ejemplo, el recurso ",(0,r.jsx)(n.code,{children:"https://shopping.your-app.com/api"})," tiene los permisos ",(0,r.jsx)(n.code,{children:"shopping:read"})," y ",(0,r.jsx)(n.code,{children:"shopping:write"}),", y el recurso ",(0,r.jsx)(n.code,{children:"https://store.your-app.com/api"})," tiene los permisos ",(0,r.jsx)(n.code,{children:"store:read"})," y ",(0,r.jsx)(n.code,{children:"store:write"}),"."]}),"\n",(0,r.jsx)(n.p,{children:"Para solicitar estos permisos, puedes agregarlos al configurar Logto en tu aplicaci\xf3n:"}),"\n",e.configResourcesWithScopesCode,"\n",(0,r.jsxs)(n.p,{children:["Puedes notar que los alcances se definen por separado de los recursos de API. Esto se debe a que ",(0,r.jsx)(n.a,{href:"https://www.rfc-editor.org/rfc/rfc8707.html",children:"Resource Indicators for OAuth 2.0"})," especifica que los alcances finales para la solicitud ser\xe1n el producto cartesiano de todos los alcances en todos los servicios objetivo."]}),"\n",e.configResourcesWithSharedScopesCode&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("p",{children:["As\xed, en el caso anterior, los alcances se pueden simplificar desde la definici\xf3n en Logto, ambos recursos de API pueden tener alcances ",(0,r.jsx)("code",{children:"read"})," y ",(0,r.jsx)("code",{children:"write"})," sin el prefijo. Luego, en la configuraci\xf3n de Logto:"]}),e.configResourcesWithSharedScopesCode,(0,r.jsxs)("p",{children:["Para cada recurso de API, se solicitar\xe1n tanto los alcances ",(0,r.jsx)("code",{children:"read"})," como"," ",(0,r.jsx)("code",{children:"write"}),"."]})]}),"\n",(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsxs)(n.p,{children:["Est\xe1 bien solicitar alcances que no est\xe1n definidos en los recursos de API. Por ejemplo, puedes solicitar el alcance ",(0,r.jsx)(n.code,{children:"email"})," incluso si los recursos de API no tienen el alcance ",(0,r.jsx)(n.code,{children:"email"})," disponible. Los alcances no disponibles ser\xe1n ignorados de manera segura."]})}),"\n",(0,r.jsx)(n.p,{children:"Despu\xe9s de un inicio de sesi\xf3n exitoso, Logto emitir\xe1 los alcances apropiados a los recursos de API de acuerdo con los roles del usuario."})]})}function c(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(t,{...e})}):t(e)}},97760:(e,n,s)=>{s.d(n,{Ay:()=>c,RM:()=>o});var r=s(25105),i=s(79621);const o=[];function t(e){const n={p:"p",...(0,i.R)(),...e.components};return(0,r.jsxs)(n.p,{children:["Es posible que encuentres que falta alguna informaci\xf3n del usuario en el objeto devuelto desde ",(0,r.jsx)("code",{children:e.method}),". Esto se debe a que OAuth 2.0 y OpenID Connect (OIDC) est\xe1n dise\xf1ados para seguir el principio de privilegio m\xednimo (PoLP), y Logto est\xe1 construido sobre estos est\xe1ndares."]})}function c(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(t,{...e})}):t(e)}},57813:(e,n,s)=>{s.d(n,{Ay:()=>c,RM:()=>o});var r=s(25105),i=s(79621);const o=[];function t(e){const{Url:n}={...(0,i.R)(),...e.components};return n||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Url",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n,{href:"/end-user-flows",children:" Flujos de usuario final: flujos de autenticaci\xf3n, flujos de cuenta y flujos de organizaci\xf3n "}),"\n",(0,r.jsx)(n,{href:"/connectors",children:" Configurar conectores "}),"\n",(0,r.jsx)(n,{href:"/authorization/api-resources/protect-your-api",children:" Protege tu API "})]})}function c(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(t,{...e})}):t(e)}},39339:(e,n,s)=>{s.d(n,{Ay:()=>c,RM:()=>o});var r=s(25105),i=s(79621);const o=[{value:"Sobre el inicio de sesi\xf3n basado en redirecci\xf3n",id:"regarding-redirect-based-sign-in",level:3}];function t(e){const n={a:"a",h3:"h3",li:"li",ol:"ol",p:"p",...(0,i.R)(),...e.components},{Details:s}=n;return s||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,r.jsxs)(s,{children:[(0,r.jsx)("summary",{children:(0,r.jsx)(n.h3,{id:"regarding-redirect-based-sign-in",children:"Sobre el inicio de sesi\xf3n basado en redirecci\xf3n"})}),(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Este proceso de autenticaci\xf3n sigue el protocolo ",(0,r.jsx)(n.a,{href:"https://openid.net/specs/openid-connect-core-1_0.html",children:"OpenID Connect (OIDC)"}),", y Logto aplica medidas de seguridad estrictas para proteger el inicio de sesi\xf3n del usuario."]}),"\n",(0,r.jsx)(n.li,{children:"Si tienes m\xfaltiples aplicaciones, puedes usar el mismo proveedor de identidad (Logto). Una vez que el usuario inicia sesi\xf3n en una aplicaci\xf3n, Logto completar\xe1 autom\xe1ticamente el proceso de inicio de sesi\xf3n cuando el usuario acceda a otra aplicaci\xf3n."}),"\n"]}),(0,r.jsxs)(n.p,{children:["Para aprender m\xe1s sobre la l\xf3gica y los beneficios del inicio de sesi\xf3n basado en redirecci\xf3n, consulta ",(0,r.jsx)(n.a,{href:"/concepts/sign-in-experience",children:"Experiencia de inicio de sesi\xf3n de Logto explicada"}),"."]})]})}function c(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(t,{...e})}):t(e)}},95429:(e,n,s)=>{s.d(n,{Ay:()=>c,RM:()=>o});var r=s(25105),i=s(79621);const o=[];function t(e){const n={a:"a",admonition:"admonition",code:"code",hr:"hr",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"Aqu\xed est\xe1 la lista de alcances (Scopes) soportados y los reclamos (Claims) correspondientes:"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"openid"})})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Nombre del reclamo"}),(0,r.jsx)(n.th,{children:"Tipo"}),(0,r.jsx)(n.th,{children:"Descripci\xf3n"}),(0,r.jsx)(n.th,{children:"\xbfNecesita userinfo?"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"sub"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"string"})}),(0,r.jsx)(n.td,{children:"El identificador \xfanico del usuario"}),(0,r.jsx)(n.td,{children:"No"})]})})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"profile"})})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Nombre del reclamo"}),(0,r.jsx)(n.th,{children:"Tipo"}),(0,r.jsx)(n.th,{children:"Descripci\xf3n"}),(0,r.jsx)(n.th,{children:"\xbfNecesita userinfo?"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"name"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"string"})}),(0,r.jsx)(n.td,{children:"El nombre completo del usuario"}),(0,r.jsx)(n.td,{children:"No"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"username"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"string"})}),(0,r.jsx)(n.td,{children:"El nombre de usuario del usuario"}),(0,r.jsx)(n.td,{children:"No"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"picture"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"string"})}),(0,r.jsx)(n.td,{children:"URL de la foto de perfil del usuario final. Esta URL DEBE referirse a un archivo de imagen (por ejemplo, un archivo de imagen PNG, JPEG o GIF), en lugar de a una p\xe1gina web que contenga una imagen. Ten en cuenta que esta URL DEBER\xcdA referirse espec\xedficamente a una foto de perfil del usuario final adecuada para mostrar al describir al usuario final, en lugar de una foto arbitraria tomada por el usuario final."}),(0,r.jsx)(n.td,{children:"No"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"created_at"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"number"})}),(0,r.jsx)(n.td,{children:"Momento en que se cre\xf3 el usuario final. El tiempo se representa como el n\xfamero de milisegundos desde la \xe9poca Unix (1970-01-01T00:00:00Z)."}),(0,r.jsx)(n.td,{children:"No"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"updated_at"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"number"})}),(0,r.jsx)(n.td,{children:"Momento en que se actualiz\xf3 por \xfaltima vez la informaci\xf3n del usuario final. El tiempo se representa como el n\xfamero de milisegundos desde la \xe9poca Unix (1970-01-01T00:00:00Z)."}),(0,r.jsx)(n.td,{children:"No"})]})]})]}),"\n",(0,r.jsxs)(n.p,{children:["Otros ",(0,r.jsx)(n.a,{href:"https://openid.net/specs/openid-connect-core-1_0.html#StandardClaims",children:"reclamos est\xe1ndar"})," incluyen ",(0,r.jsx)(n.code,{children:"family_name"}),", ",(0,r.jsx)(n.code,{children:"given_name"}),", ",(0,r.jsx)(n.code,{children:"middle_name"}),", ",(0,r.jsx)(n.code,{children:"nickname"}),", ",(0,r.jsx)(n.code,{children:"preferred_username"}),", ",(0,r.jsx)(n.code,{children:"profile"}),", ",(0,r.jsx)(n.code,{children:"website"}),", ",(0,r.jsx)(n.code,{children:"gender"}),", ",(0,r.jsx)(n.code,{children:"birthdate"}),", ",(0,r.jsx)(n.code,{children:"zoneinfo"})," y ",(0,r.jsx)(n.code,{children:"locale"})," tambi\xe9n se incluir\xe1n en el alcance ",(0,r.jsx)(n.code,{children:"profile"})," sin necesidad de solicitar el endpoint de userinfo. Una diferencia en comparaci\xf3n con los reclamos anteriores es que estos reclamos solo se devolver\xe1n cuando sus valores no est\xe9n vac\xedos, mientras que los reclamos anteriores devolver\xe1n ",(0,r.jsx)(n.code,{children:"null"})," si los valores est\xe1n vac\xedos."]}),"\n",(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsxs)(n.p,{children:["A diferencia de los reclamos est\xe1ndar, los reclamos ",(0,r.jsx)(n.code,{children:"created_at"})," y ",(0,r.jsx)(n.code,{children:"updated_at"})," utilizan milisegundos en lugar de segundos."]})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"email"})})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Nombre del reclamo"}),(0,r.jsx)(n.th,{children:"Tipo"}),(0,r.jsx)(n.th,{children:"Descripci\xf3n"}),(0,r.jsx)(n.th,{children:"\xbfNecesita userinfo?"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"email"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"string"})}),(0,r.jsx)(n.td,{children:"La direcci\xf3n de correo electr\xf3nico del usuario"}),(0,r.jsx)(n.td,{children:"No"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"email_verified"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"boolean"})}),(0,r.jsx)(n.td,{children:"Si la direcci\xf3n de correo electr\xf3nico ha sido verificada"}),(0,r.jsx)(n.td,{children:"No"})]})]})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"phone"})})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Nombre del reclamo"}),(0,r.jsx)(n.th,{children:"Tipo"}),(0,r.jsx)(n.th,{children:"Descripci\xf3n"}),(0,r.jsx)(n.th,{children:"\xbfNecesita userinfo?"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"phone_number"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"string"})}),(0,r.jsx)(n.td,{children:"El n\xfamero de tel\xe9fono del usuario"}),(0,r.jsx)(n.td,{children:"No"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"phone_number_verified"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"boolean"})}),(0,r.jsx)(n.td,{children:"Si el n\xfamero de tel\xe9fono ha sido verificado"}),(0,r.jsx)(n.td,{children:"No"})]})]})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"address"})})}),"\n",(0,r.jsxs)(n.p,{children:["Por favor, consulta el ",(0,r.jsx)(n.a,{href:"https://openid.net/specs/openid-connect-core-1_0.html#AddressClaim",children:"OpenID Connect Core 1.0"})," para los detalles del reclamo de direcci\xf3n."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"custom_data"})})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Nombre del reclamo"}),(0,r.jsx)(n.th,{children:"Tipo"}),(0,r.jsx)(n.th,{children:"Descripci\xf3n"}),(0,r.jsx)(n.th,{children:"\xbfNecesita userinfo?"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"custom_data"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"object"})}),(0,r.jsx)(n.td,{children:"Los datos personalizados del usuario"}),(0,r.jsx)(n.td,{children:"S\xed"})]})})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"identities"})})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Nombre del reclamo"}),(0,r.jsx)(n.th,{children:"Tipo"}),(0,r.jsx)(n.th,{children:"Descripci\xf3n"}),(0,r.jsx)(n.th,{children:"\xbfNecesita userinfo?"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"identities"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"object"})}),(0,r.jsx)(n.td,{children:"Las identidades vinculadas del usuario"}),(0,r.jsx)(n.td,{children:"S\xed"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"sso_identities"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"array"})}),(0,r.jsx)(n.td,{children:"Las identidades SSO vinculadas del usuario"}),(0,r.jsx)(n.td,{children:"S\xed"})]})]})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"urn:logto:scope:organizations"})})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Nombre del reclamo"}),(0,r.jsx)(n.th,{children:"Tipo"}),(0,r.jsx)(n.th,{children:"Descripci\xf3n"}),(0,r.jsx)(n.th,{children:"\xbfNecesita userinfo?"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"organizations"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"string[]"})}),(0,r.jsx)(n.td,{children:"Los IDs de las organizaciones a las que pertenece el usuario"}),(0,r.jsx)(n.td,{children:"No"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"organization_data"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"object[]"})}),(0,r.jsx)(n.td,{children:"Los datos de las organizaciones a las que pertenece el usuario"}),(0,r.jsx)(n.td,{children:"S\xed"})]})]})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"urn:logto:scope:organization_roles"})})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Nombre del reclamo"}),(0,r.jsx)(n.th,{children:"Tipo"}),(0,r.jsx)(n.th,{children:"Descripci\xf3n"}),(0,r.jsx)(n.th,{children:"\xbfNecesita userinfo?"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"organization_roles"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"string[]"})}),(0,r.jsxs)(n.td,{children:["Los roles de organizaci\xf3n a los que pertenece el usuario con el formato ",(0,r.jsx)(n.code,{children:"<organization_id>:<role_name>"})]}),(0,r.jsx)(n.td,{children:"No"})]})})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsxs)(n.p,{children:['Considerando el rendimiento y el tama\xf1o de los datos, si "\xbfNecesita userinfo?" es "S\xed", significa que el reclamo no aparecer\xe1 en el Token de ID, pero se devolver\xe1 en la respuesta del ',(0,r.jsx)(n.a,{href:"https://openid.net/specs/openid-connect-core-1_0.html#UserInfo",children:"endpoint de userinfo"}),"."]})]})}function c(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(t,{...e})}):t(e)}},5376:(e,n,s)=>{s.d(n,{Ay:()=>a,RM:()=>t});var r=s(25105),i=s(79621),o=s(95429);const t=[...o.RM];function c(e){const n={a:"a",p:"p",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.p,{children:["Logto utiliza las ",(0,r.jsx)(n.a,{href:"https://openid.net/specs/openid-connect-core-1_0.html#Claims",children:"convenciones de alcances y reclamos (scopes and claims)"})," de OIDC para definir los alcances y reclamos para obtener informaci\xf3n del usuario del Token de ID y del ",(0,r.jsx)("a",{href:"https://openid.net/specs/openid-connect-core-1_0.html#UserInfo",children:"endpoint userinfo"}),' de OIDC. Tanto "alcance" como "reclamo" son t\xe9rminos de las especificaciones de OAuth 2.0 y OpenID Connect (OIDC).']}),"\n","\n",e.configScopesCode&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{children:"En resumen, cuando solicitas un alcance, obtendr\xe1s los reclamos correspondientes en la informaci\xf3n del usuario. Por ejemplo, si solicitas el alcance `email`, obtendr\xe1s los datos `email` y `email_verified` del usuario."}),(0,r.jsx)("p",{children:"Por defecto, Logto SDK siempre solicitar\xe1 tres alcances: `openid`, `profile` y `offline_access`, y no hay forma de eliminar estos alcances predeterminados. Pero puedes a\xf1adir m\xe1s alcances al configurar Logto:"}),e.configScopesCode]}),"\n",(0,r.jsx)(o.Ay,{})]})}function a(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},70001:(e,n,s)=>{s.d(n,{Ay:()=>c,RM:()=>o});var r=s(25105),i=s(79621);const o=[];function t(e){const n={admonition:"admonition",code:"code",mermaid:"mermaid",p:"p",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"De forma predeterminada, se devuelven reclamos limitados. Si necesitas m\xe1s informaci\xf3n, puedes solicitar alcances adicionales para acceder a m\xe1s reclamos."}),"\n",(0,r.jsx)(n.admonition,{type:"info",children:(0,r.jsx)(n.p,{children:'Un "reclamo (Claim)" es una afirmaci\xf3n hecha sobre un sujeto; un "alcance (Scope)" es un grupo de reclamos. En el caso actual, un reclamo es una pieza de informaci\xf3n sobre el usuario.'})}),"\n",(0,r.jsx)(n.p,{children:"Aqu\xed tienes un ejemplo no normativo de la relaci\xf3n alcance - reclamo:"}),"\n",(0,r.jsx)(n.mermaid,{value:"classDiagram\n  class openid {\n    +sub\n  }\n\n  class profile {\n    +name\n    +username\n    +picture\n    +...\n  }\n\n  class email {\n    +email\n    +email_verified\n  }\n\n  class phone {\n    +phone_number\n    +phone_number_verified\n  }"}),"\n",(0,r.jsx)(n.admonition,{type:"tip",children:(0,r.jsx)(n.p,{children:'El reclamo "sub" significa "sujeto", que es el identificador \xfanico del usuario (es decir, el ID del usuario).'})}),"\n",(0,r.jsxs)(n.p,{children:["El SDK de Logto siempre solicitar\xe1 tres alcances: ",(0,r.jsx)(n.code,{children:"openid"}),", ",(0,r.jsx)(n.code,{children:"profile"})," y ",(0,r.jsx)(n.code,{children:"offline_access"}),"."]})]})}function c(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(t,{...e})}):t(e)}},5795:(e,n,s)=>{s.d(n,{Ay:()=>a,Ip:()=>o,RM:()=>t});var r=s(25105),i=s(79621);const o="http://localhost:3000/",t=[];function c(e){const n={admonition:"admonition",p:"p",...(0,i.R)(),...e.components};return(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsxs)(n.p,{children:["En los siguientes fragmentos de c\xf3digo, asumimos que tu aplicaci\xf3n est\xe1 ejecut\xe1ndose en ",(0,r.jsx)("code",{children:o}),"."]})})}function a(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},57460:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>L,contentTitle:()=>S,default:()=>N,frontMatter:()=>k,metadata:()=>r,toc:()=>P});const r=JSON.parse('{"id":"quick-starts/framework/dotnet-blazor-server/README","title":"A\xf1ade autenticaci\xf3n a tu aplicaci\xf3n .NET Core (Blazor Server)","description":"Prerrequisitos \\\\","source":"@site/i18n/es/docusaurus-plugin-content-docs/current/quick-starts/framework/dotnet-blazor-server/README.mdx","sourceDirName":"quick-starts/framework/dotnet-blazor-server","slug":"/quick-starts/dotnet-core/blazor-server","permalink":"/es/quick-starts/dotnet-core/blazor-server","draft":false,"unlisted":false,"editUrl":"https://github.com/logto-io/docs/tree/master/i18n/es/docusaurus-plugin-content-docs/current/quick-starts/framework/dotnet-blazor-server/README.mdx","tags":[],"version":"current","frontMatter":{"slug":"/quick-starts/dotnet-core/blazor-server","sidebar_label":".NET Core (Blazor Server)","sidebar_custom_props":{"logoFilename":"dotnet-blazor.svg","description":"Integra Logto en tu aplicaci\xf3n .NET Core Blazor Server."}},"sidebar":"quickStartSidebar","previous":{"title":"Extensi\xf3n de Chrome","permalink":"/es/quick-starts/chrome-extension"},"next":{"title":".NET Core (Blazor WASM)","permalink":"/es/quick-starts/dotnet-core/blazor-wasm"}}');var i=s(25105),o=s(79621),t=s(30046),c=s(27817),a=s(57813),d=s(40698),l=s(8565),u=s(20425),h=s(62137),p=s(1094),x=s(50020),j=s(67338),m=s(88213);function g(e){const n={code:"code",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"Dado que Blazor Server utiliza SignalR para comunicarse entre el servidor y el cliente, esto significa que los m\xe9todos que manipulan directamente el contexto HTTP (como emitir desaf\xedos o redirecciones) no funcionan como se espera cuando se llaman desde un componente de Blazor."}),"\n",(0,i.jsx)(n.p,{children:"Para hacerlo correctamente, necesitamos agregar expl\xedcitamente dos endpoints para las redirecciones de inicio y cierre de sesi\xf3n:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",metastring:'title="Program.cs"',children:'app.MapGet("/SignIn", async context =>\n{\n    if (!(context.User?.Identity?.IsAuthenticated ?? false))\n    {\n        await context.ChallengeAsync(new AuthenticationProperties { RedirectUri = "/" });\n    } else {\n        context.Response.Redirect("/");\n    }\n});\n\napp.MapGet("/SignOut", async context =>\n{\n    if (context.User?.Identity?.IsAuthenticated ?? false)\n    {\n        await context.SignOutAsync(new AuthenticationProperties { RedirectUri = "/" });\n    } else {\n        context.Response.Redirect("/");\n    }\n});\n'})}),"\n",(0,i.jsx)(n.p,{children:"Ahora podemos redirigir a estos endpoints para activar el inicio y cierre de sesi\xf3n."})]})}function f(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(g,{...e})}):g(e)}function b(e){const n={code:"code",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.p,{children:["Alternativamente, puedes usar el componente ",(0,i.jsx)(n.code,{children:"AuthorizeView"})," para renderizar contenido condicionalmente basado en el estado de autenticaci\xf3n del usuario. Este componente es \xfatil cuando deseas mostrar contenido diferente a usuarios autenticados y no autenticados."]}),"\n",(0,i.jsx)(n.p,{children:"En tu componente Razor, a\xf1ade el siguiente c\xf3digo:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cshtml",metastring:'title="Components/Pages/Index.razor"',children:"@using Microsoft.AspNetCore.Components.Authorization\n\n@* ... *@\n\n<AuthorizeView>\n    <Authorized>\n        <p>Nombre: @User?.Identity?.Name</p>\n        @* Contenido para usuarios autenticados *@\n    </Authorized>\n    <NotAuthorized>\n        @* Contenido para usuarios no autenticados *@\n    </NotAuthorized>\n</AuthorizeView>\n\n@* ... *@\n"})}),"\n",(0,i.jsxs)(n.p,{children:["El componente ",(0,i.jsx)(n.code,{children:"AuthorizeView"})," requiere un par\xe1metro en cascada de tipo ",(0,i.jsx)(n.code,{children:"Task<AuthenticationState>"}),". Una forma directa de obtener este par\xe1metro es a\xf1adir el componente ",(0,i.jsx)(n.code,{children:"<CascadingAuthenticationState>"}),". Sin embargo, debido a la naturaleza de Blazor Server, no podemos simplemente a\xf1adir el componente al dise\xf1o o al componente ra\xedz (puede que no funcione como se espera). En su lugar, podemos a\xf1adir el siguiente c\xf3digo al constructor (",(0,i.jsx)(n.code,{children:"Program.cs"})," o ",(0,i.jsx)(n.code,{children:"Startup.cs"}),") para proporcionar el par\xe1metro en cascada:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",metastring:'title="Program.cs"',children:"builder.Services.AddCascadingAuthenticationState();\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Luego puedes usar el componente ",(0,i.jsx)(n.code,{children:"AuthorizeView"})," en cada componente que lo necesite."]})]})}function v(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(b,{...e})}):b(e)}function A(e){const n={code:"code",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.p,{children:["Dado que no podemos acceder directamente a ",(0,i.jsx)(n.code,{children:"HttpContext"})," en los componentes Razor, necesitamos inyectar el ",(0,i.jsx)(n.code,{children:"HttpContextAccessor"})," en el componente y usarlo para obtener los tokens. El siguiente c\xf3digo demuestra c\xf3mo obtener el token de acceso para el recurso de API en un componente Razor:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cshtml",metastring:'title="Components/Pages/Index.razor"',children:'@using Microsoft.AspNetCore.Components.Authorization\n@using System.Security.Claims\n@using Logto.AspNetCore.Authentication\n@using Microsoft.AspNetCore.Authentication\n@inject AuthenticationStateProvider AuthenticationStateProvider\n@inject IHttpContextAccessor HttpContextAccessor\n\n@* ... *@\n\n<p><b>Recurso:</b> @(Resource ?? "(null)")</p>\n<p><b>Token de acceso:</b> @(AccessToken ?? "(null)")</p>\n\n@* ... *@\n\n@code {\n    private ClaimsPrincipal? User { get; set; }\n    private string? AccessToken { get; set; }\n    private string? Resource { get; set; }\n\n    protected override async Task OnInitializedAsync()\n    {\n        var authState = await AuthenticationStateProvider.GetAuthenticationStateAsync();\n        User = authState.User;\n\n        if (User?.Identity?.IsAuthenticated == true)\n        {\n            await FetchTokenAsync();\n        }\n    }\n\n    private async Task FetchTokenAsync()\n    {\n        var httpContext = HttpContextAccessor.HttpContext;\n        if (httpContext == null)\n        {\n            return;\n        }\n\n        var logtoOptions = httpContext.GetLogtoOptions();\n        Resource = logtoOptions?.Resource;\n        // Reemplazar con otros tipos de token si es necesario\n        AccessToken = await httpContext.GetTokenAsync(LogtoParameters.Tokens.AccessTokenForResource);\n    }\n}\n'})})]})}function y(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(A,{...e})}):A(e)}function R(e){const n={code:"code",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"En el componente Razor, a\xf1ade el siguiente c\xf3digo:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cshtml",metastring:'title="Components/Pages/Index.razor"',children:'@using Microsoft.AspNetCore.Components.Authorization\n@using System.Security.Claims\n@inject AuthenticationStateProvider AuthenticationStateProvider\n@inject NavigationManager NavigationManager\n\n@* ... *@\n\n<p>Est\xe1 autenticado: @User.Identity?.IsAuthenticated</p>\n@if (User.Identity?.IsAuthenticated == true)\n{\n    <button @onclick="SignOut">Cerrar sesi\xf3n</button>\n}\nelse\n{\n    <button @onclick="SignIn">Iniciar sesi\xf3n</button>\n}\n\n@* ... *@\n\n@code {\n    private ClaimsPrincipal? User { get; set; }\n\n    protected override async Task OnInitializedAsync()\n    {\n        var authState = await AuthenticationStateProvider.GetAuthenticationStateAsync();\n        User = authState.User;\n    }\n\n    private void SignIn()\n    {\n        NavigationManager.NavigateTo("/SignIn", forceLoad: true);\n    }\n\n    private void SignOut()\n    {\n        NavigationManager.NavigateTo("/SignOut", forceLoad: true);\n    }\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Explicaci\xf3n"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["El ",(0,i.jsx)(n.code,{children:"AuthenticationStateProvider"})," inyectado se utiliza para obtener el estado de autenticaci\xf3n del usuario actual y poblar la propiedad ",(0,i.jsx)(n.code,{children:"User"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Los m\xe9todos ",(0,i.jsx)(n.code,{children:"SignIn"})," y ",(0,i.jsx)(n.code,{children:"SignOut"})," se utilizan para redirigir al usuario a los puntos de acceso de inicio y cierre de sesi\xf3n respectivamente. Debido a la naturaleza de Blazor Server, necesitamos usar ",(0,i.jsx)(n.code,{children:"NavigationManager"})," con carga forzada para activar la redirecci\xf3n."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:'La p\xe1gina mostrar\xe1 el bot\xf3n "Iniciar sesi\xf3n" si el usuario no est\xe1 autenticado, y mostrar\xe1 el bot\xf3n "Cerrar sesi\xf3n" si el usuario est\xe1 autenticado.'})]})}function C(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(R,{...e})}):R(e)}const k={slug:"/quick-starts/dotnet-core/blazor-server",sidebar_label:".NET Core (Blazor Server)",sidebar_custom_props:{logoFilename:"dotnet-blazor.svg",description:"Integra Logto en tu aplicaci\xf3n .NET Core Blazor Server."}},S="A\xf1ade autenticaci\xf3n a tu aplicaci\xf3n .NET Core (Blazor Server)",L={},P=[...p.RM,{value:"Prerrequisitos",id:"prerequisites",level:2},{value:"Instalaci\xf3n",id:"installation",level:2},...x.RM,{value:"Integraci\xf3n",id:"integration",level:2},{value:"A\xf1adir autenticaci\xf3n de Logto",id:"add-logto-authentication",level:3},...d.RM,{value:"Flujos de inicio y cierre de sesi\xf3n",id:"sign-in-and-sign-out-flows",level:3},...j.RM,{value:"Configurar URIs de redirecci\xf3n",id:"configure-redirect-uris",level:3},...l.RM,{value:"A\xf1adir rutas",id:"add-routes",level:3},{value:"Implementar botones de inicio y cierre de sesi\xf3n",id:"implement-sign-in-and-sign-out-buttons",level:3},{value:"El componente <code>&lt;AuthorizeView /&gt;</code>",id:"the-authorizeview--component",level:3},...c.RM,{value:"Obtener informaci\xf3n del usuario",id:"get-user-information",level:2},...h.RM,{value:"Recursos de API",id:"api-resources",level:2},...t.RM,{value:"Configurar recurso de API en tu aplicaci\xf3n",id:"configure-api-resource-in-your-app",level:3},...m.RM,{value:"Obtener tokens",id:"fetch-tokens",level:2},{value:"Obtener token a trav\xe9s de <code>HttpContext</code>",id:"fetch-token-via-httpcontext",level:3},...u.RM,{value:"Obtener token en componentes Razor",id:"fetch-token-in-razor-components",level:3},{value:"Lecturas adicionales",id:"further-readings",level:2},...a.RM];function I(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"a\xf1ade-autenticaci\xf3n-a-tu-aplicaci\xf3n-net-core-blazor-server",children:"A\xf1ade autenticaci\xf3n a tu aplicaci\xf3n .NET Core (Blazor Server)"})}),"\n",(0,i.jsx)(p.Ay,{}),"\n",(0,i.jsx)(n.h2,{id:"prerequisites",children:"Prerrequisitos"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Una cuenta de ",(0,i.jsx)(n.a,{href:"https://cloud.logto.io",children:"Logto Cloud"})," o un ",(0,i.jsx)(n.a,{href:"/introduction/set-up-logto-oss",children:"Logto autoalojado"}),"."]}),"\n",(0,i.jsx)(n.li,{children:"Una aplicaci\xf3n web tradicional de Logto creada."}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"installation",children:"Instalaci\xf3n"}),"\n",(0,i.jsx)(x.Ay,{}),"\n",(0,i.jsx)(n.h2,{id:"integration",children:"Integraci\xf3n"}),"\n",(0,i.jsx)(n.h3,{id:"add-logto-authentication",children:"A\xf1adir autenticaci\xf3n de Logto"}),"\n",(0,i.jsx)(d.Ay,{}),"\n",(0,i.jsx)(n.h3,{id:"sign-in-and-sign-out-flows",children:"Flujos de inicio y cierre de sesi\xf3n"}),"\n",(0,i.jsx)(j.Ay,{}),"\n",(0,i.jsx)(n.h3,{id:"configure-redirect-uris",children:"Configurar URIs de redirecci\xf3n"}),"\n",(0,i.jsx)(l.Ay,{}),"\n",(0,i.jsx)(n.h3,{id:"add-routes",children:"A\xf1adir rutas"}),"\n",(0,i.jsx)(f,{}),"\n",(0,i.jsx)(n.h3,{id:"implement-sign-in-and-sign-out-buttons",children:"Implementar botones de inicio y cierre de sesi\xf3n"}),"\n",(0,i.jsx)(C,{}),"\n",(0,i.jsxs)(n.h3,{id:"the-authorizeview--component",children:["El componente ",(0,i.jsx)(n.code,{children:"<AuthorizeView />"})]}),"\n",(0,i.jsx)(v,{}),"\n",(0,i.jsx)(c.Ay,{}),"\n",(0,i.jsx)(n.h2,{id:"get-user-information",children:"Obtener informaci\xf3n del usuario"}),"\n",(0,i.jsx)(h.Ay,{}),"\n",(0,i.jsx)(n.h2,{id:"api-resources",children:"Recursos de API"}),"\n",(0,i.jsx)(t.Ay,{}),"\n",(0,i.jsx)(n.h3,{id:"configure-api-resource-in-your-app",children:"Configurar recurso de API en tu aplicaci\xf3n"}),"\n",(0,i.jsx)(m.Ay,{}),"\n",(0,i.jsx)(n.h2,{id:"fetch-tokens",children:"Obtener tokens"}),"\n",(0,i.jsxs)(n.h3,{id:"fetch-token-via-httpcontext",children:["Obtener token a trav\xe9s de ",(0,i.jsx)(n.code,{children:"HttpContext"})]}),"\n",(0,i.jsx)(u.Ay,{}),"\n",(0,i.jsx)(n.h3,{id:"fetch-token-in-razor-components",children:"Obtener token en componentes Razor"}),"\n",(0,i.jsx)(y,{}),"\n",(0,i.jsx)(n.h2,{id:"further-readings",children:"Lecturas adicionales"}),"\n",(0,i.jsx)(a.Ay,{})]})}function N(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(I,{...e})}):I(e)}},40698:(e,n,s)=>{s.d(n,{Ay:()=>c,RM:()=>o});var r=s(25105),i=s(79621);const o=[];function t(e){const n={code:"code",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.p,{children:["Abre ",(0,r.jsx)(n.code,{children:"Startup.cs"})," (o ",(0,r.jsx)(n.code,{children:"Program.cs"}),") y a\xf1ade el siguiente c\xf3digo para registrar los servicios de autenticaci\xf3n de Logto:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",metastring:'title="Program.cs"',children:'using Logto.AspNetCore.Authentication;\n\nvar builder = WebApplication.CreateBuilder(args);\n\nbuilder.Services.AddLogtoAuthentication(options =>\n{\n  options.Endpoint = builder.Configuration["Logto:Endpoint"]!;\n  options.AppId = builder.Configuration["Logto:AppId"]!;\n  options.AppSecret = builder.Configuration["Logto:AppSecret"];\n});\n'})}),"\n",(0,r.jsxs)(n.p,{children:["El m\xe9todo ",(0,r.jsx)(n.code,{children:"AddLogtoAuthentication"})," har\xe1 lo siguiente:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Establecer el esquema de autenticaci\xf3n predeterminado en ",(0,r.jsx)(n.code,{children:"LogtoDefaults.CookieScheme"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Establecer el esquema de desaf\xedo predeterminado en ",(0,r.jsx)(n.code,{children:"LogtoDefaults.AuthenticationScheme"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Establecer el esquema de cierre de sesi\xf3n predeterminado en ",(0,r.jsx)(n.code,{children:"LogtoDefaults.AuthenticationScheme"}),"."]}),"\n",(0,r.jsx)(n.li,{children:"A\xf1adir manejadores de autenticaci\xf3n de cookies y OpenID Connect al esquema de autenticaci\xf3n."}),"\n"]})]})}function c(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(t,{...e})}):t(e)}},8565:(e,n,s)=>{s.d(n,{Ay:()=>d,RM:()=>c});var r=s(25105),i=s(79621),o=s(65113),t=s(5795);const c=[...t.RM,{value:"Cambiar las rutas predeterminadas",id:"change-the-default-paths",level:4}];function a(e){const n={code:"code",h4:"h4",p:"p",pre:"pre",strong:"strong",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.Ay,{}),"\n",(0,r.jsxs)(n.p,{children:["Primero, configuremos el ",(0,r.jsx)(n.strong,{children:"URI de redirecci\xf3n de Logto"}),'. Agrega el siguiente URI a la lista de "URIs de redirecci\xf3n" en la p\xe1gina de detalles de la aplicaci\xf3n Logto:']}),"\n",(0,r.jsx)(o.A,{children:`http://${t.Ip}/Callback`}),"\n",(0,r.jsxs)(n.p,{children:["Para configurar el ",(0,r.jsx)(n.strong,{children:"URI de redirecci\xf3n posterior al cierre de sesi\xf3n de Logto"}),', agrega el siguiente URI a la lista de "URIs de redirecci\xf3n posterior al cierre de sesi\xf3n" en la p\xe1gina de detalles de la aplicaci\xf3n Logto:']}),"\n",(0,r.jsx)(o.A,{children:`http://${t.Ip}/SignedOutCallback`}),"\n",(0,r.jsx)(n.h4,{id:"change-the-default-paths",children:"Cambiar las rutas predeterminadas"}),"\n",(0,r.jsxs)(n.p,{children:["El ",(0,r.jsx)(n.strong,{children:"URI de redirecci\xf3n de Logto"})," tiene una ruta predeterminada de ",(0,r.jsx)(n.code,{children:"/Callback"}),", y el ",(0,r.jsx)(n.strong,{children:"URI de redirecci\xf3n posterior al cierre de sesi\xf3n de Logto"})," tiene una ruta predeterminada de ",(0,r.jsx)(n.code,{children:"/SignedOutCallback"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:["Puedes dejarlos tal como est\xe1n si no hay un requisito especial. Si deseas cambiarlo, puedes establecer la propiedad ",(0,r.jsx)(n.code,{children:"CallbackPath"})," y ",(0,r.jsx)(n.code,{children:"SignedOutCallbackPath"})," para ",(0,r.jsx)(n.code,{children:"LogtoOptions"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",metastring:'title="Program.cs"',children:'builder.Services.AddLogtoAuthentication(options =>\n{\n  // Otras configuraciones...\n  // highlight-start\n  options.CallbackPath = "/Foo";\n  options.SignedOutCallbackPath = "/Bar";\n  // highlight-end\n});\n'})}),"\n",(0,r.jsx)(n.p,{children:"Recuerda actualizar el valor en la p\xe1gina de detalles de la aplicaci\xf3n Logto en consecuencia."})]})}function d(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},20425:(e,n,s)=>{s.d(n,{Ay:()=>c,RM:()=>o});var r=s(25105),i=s(79621);const o=[];function t(e){const n={admonition:"admonition",code:"code",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.p,{children:["A veces puede que necesites obtener el token de acceso o el token de ID para llamadas de API. Puedes usar el m\xe9todo ",(0,r.jsx)(n.code,{children:"GetTokenAsync"})," para obtener los tokens:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:"var accessToken = await HttpContext.GetTokenAsync(LogtoParameters.Tokens.AccessToken);\nvar idToken = await HttpContext.GetTokenAsync(LogtoParameters.Tokens.IdToken);\n"})}),"\n",(0,r.jsx)(n.p,{children:"No necesitas preocuparte por la expiraci\xf3n del token, el middleware de autenticaci\xf3n actualizar\xe1 autom\xe1ticamente los tokens cuando sea necesario."}),"\n",(0,r.jsx)(n.admonition,{type:"caution",children:(0,r.jsx)(n.p,{children:"Aunque el middleware de autenticaci\xf3n actualizar\xe1 autom\xe1ticamente los tokens, los reclamos en el objeto de usuario no se actualizar\xe1n debido a la limitaci\xf3n del controlador de autenticaci\xf3n subyacente de OpenID Connect.\nEsto se puede resolver una vez que escribamos nuestro propio controlador de autenticaci\xf3n."})}),"\n",(0,r.jsxs)(n.p,{children:["Ten en cuenta que el token de acceso mencionado es un token opaco para el endpoint de userinfo en OpenID Connect, que no es un token JWT. Si has especificado el recurso de API, necesitas usar ",(0,r.jsx)(n.code,{children:"LogtoParameters.Tokens.AccessTokenForResource"})," para obtener el token de acceso para el recurso de API:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:"var accessToken = await HttpContext.GetTokenAsync(LogtoParameters.Tokens.AccessTokenForResource);\n"})}),"\n",(0,r.jsx)(n.p,{children:"Este token ser\xe1 un token JWT con el recurso de API como la audiencia."})]})}function c(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(t,{...e})}):t(e)}},62137:(e,n,s)=>{s.d(n,{Ay:()=>l,RM:()=>a});var r=s(25105),i=s(79621),o=s(97760),t=s(5376),c=s(70001);const a=[{value:"Mostrar informaci\xf3n del usuario",id:"display-user-information",level:3},{value:"Solicitar reclamos adicionales",id:"request-additional-claims",level:3},...o.RM,...c.RM,{value:"Reclamos que necesitan solicitud de red",id:"claims-that-need-network-request",level:3},{value:"Alcances y reclamos",id:"scopes-and-claims",level:3},...t.RM];function d(e){const n={a:"a",code:"code",h3:"h3",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h3,{id:"display-user-information",children:"Mostrar informaci\xf3n del usuario"}),"\n",(0,r.jsxs)(n.p,{children:["Para saber si el usuario est\xe1 autenticado, puedes verificar la propiedad ",(0,r.jsx)(n.code,{children:"User.Identity?.IsAuthenticated"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:["Para obtener los reclamos del perfil del usuario, puedes usar la propiedad ",(0,r.jsx)(n.code,{children:"User.Claims"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",metastring:'title="Controllers/HomeController.cs"',children:"var claims = User.Claims;\n\n// Obtener el ID del usuario\nvar userId = claims.FirstOrDefault(c => c.Type == LogtoParameters.Claims.Subject)?.Value;\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Consulta ",(0,r.jsx)(n.a,{href:"https://github.com/logto-io/csharp/blob/master/src/Logto.AspNetCore.Authentication/LogtoParameters.cs",children:(0,r.jsx)(n.code,{children:"LogtoParameters.Claims"})})," para la lista de nombres de reclamos y sus significados."]}),"\n",(0,r.jsx)(n.h3,{id:"request-additional-claims",children:"Solicitar reclamos adicionales"}),"\n",(0,r.jsx)(o.Ay,{method:"User.Claims"}),"\n",(0,r.jsx)(c.Ay,{}),"\n",(0,r.jsxs)(n.p,{children:["Para solicitar alcances adicionales, puedes configurar la propiedad ",(0,r.jsx)(n.code,{children:"Scopes"})," en el objeto ",(0,r.jsx)(n.code,{children:"options"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",metastring:'title="Program.cs"',children:"builder.Services.AddLogtoAuthentication(options =>\n{\n  // ...\n  // highlight-start\n  options.Scopes = new string[] {\n    LogtoParameters.Scopes.Email,\n    LogtoParameters.Scopes.Phone\n  }\n  // highlight-end\n});\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Luego puedes acceder a los reclamos adicionales a trav\xe9s de ",(0,r.jsx)(n.code,{children:"User.Claims"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",metastring:'title="Controllers/HomeController.cs"',children:"var claims = User.Claims;\n\n// Obtener el correo electr\xf3nico del usuario\nvar email = claims.FirstOrDefault(c => c.Type == LogtoParameters.Claims.Email)?.Value;\n"})}),"\n",(0,r.jsx)(n.h3,{id:"claims-that-need-network-request",children:"Reclamos que necesitan solicitud de red"}),"\n",(0,r.jsxs)(n.p,{children:["Para evitar sobrecargar el objeto de usuario, algunos reclamos requieren solicitudes de red para ser obtenidos. Por ejemplo, el reclamo custom_data no se incluye en el objeto de usuario incluso si se solicita en los alcances. Para obtener estos reclamos, puedes establecer ",(0,r.jsx)(n.code,{children:"GetClaimsFromUserInfoEndpoint"})," en ",(0,r.jsx)(n.code,{children:"true"})," en el objeto ",(0,r.jsx)(n.code,{children:"options"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",metastring:'title="Program.cs"',children:"builder.Services.AddLogtoAuthentication(options =>\n{\n  // ...\n  // highlight-next-line\n  options.GetClaimsFromUserInfoEndpoint = true;\n});\n"})}),"\n",(0,r.jsx)(n.h3,{id:"scopes-and-claims",children:"Alcances y reclamos"}),"\n",(0,r.jsx)(t.Ay,{})]})}function l(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},1094:(e,n,s)=>{s.d(n,{Ay:()=>c,RM:()=>o});var r=s(25105),i=s(79621);const o=[];function t(e){const n={a:"a",admonition:"admonition",li:"li",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsx)(n.admonition,{type:"tip",children:(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"La siguiente demostraci\xf3n est\xe1 construida sobre .NET Core 8.0. El SDK es compatible con .NET 6.0 o superior."}),"\n",(0,r.jsxs)(n.li,{children:["Los proyectos de ejemplo de .NET Core est\xe1n disponibles en el ",(0,r.jsx)(n.a,{href:"https://github.com/logto-io/csharp",children:"repositorio de GitHub"}),"."]}),"\n"]})})}function c(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(t,{...e})}):t(e)}},50020:(e,n,s)=>{s.d(n,{Ay:()=>c,RM:()=>o});var r=s(25105),i=s(79621);const o=[];function t(e){const n={code:"code",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"A\xf1ade el paquete NuGet a tu proyecto:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"dotnet add package Logto.AspNetCore.Authentication\n"})})]})}function c(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(t,{...e})}):t(e)}},67338:(e,n,s)=>{s.d(n,{Ay:()=>a,RM:()=>t});var r=s(25105),i=s(79621),o=s(39339);const t=[...o.RM];function c(e){const n={li:"li",mermaid:"mermaid",ol:"ol",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"Antes de continuar, hay dos t\xe9rminos confusos en el middleware de autenticaci\xf3n de .NET Core que necesitamos aclarar:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"CallbackPath"}),': El URI al que Logto redirigir\xe1 al usuario despu\xe9s de que haya iniciado sesi\xf3n (el "URI de redirecci\xf3n" en Logto)']}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"RedirectUri"}),": El URI al que se redirigir\xe1 despu\xe9s de que se hayan realizado las acciones necesarias en el middleware de autenticaci\xf3n de Logto."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"El proceso de inicio de sesi\xf3n se puede ilustrar de la siguiente manera:"}),"\n",(0,r.jsx)(n.mermaid,{value:"graph LR\n  subgraph Tu aplicaci\xf3n\n    A\n    C\n    D\n  end\n  subgraph Logto\n    B\n  end\n  A(Ruta de inicio de sesi\xf3n) --\x3e|Redirigir a| B(Logto)\n  B --\x3e|Redirigir a| C(CallbackPath)\n  C --\x3e|Redirigir a| D(RedirectUri)"}),"\n",(0,r.jsx)("br",{}),"\n",(0,r.jsxs)(n.p,{children:["De manera similar, .NET Core tambi\xe9n tiene ",(0,r.jsx)(n.strong,{children:"SignedOutCallbackPath"})," y ",(0,r.jsx)(n.strong,{children:"RedirectUri"})," para el flujo de cierre de sesi\xf3n."]}),"\n",(0,r.jsx)(n.p,{children:"Para mayor claridad, nos referiremos a ellos de la siguiente manera:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"T\xe9rmino que usamos"}),(0,r.jsx)(n.th,{children:"T\xe9rmino de .NET Core"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"URI de redirecci\xf3n de Logto"}),(0,r.jsx)(n.td,{children:"CallbackPath"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"URI de redirecci\xf3n post cierre de sesi\xf3n de Logto"}),(0,r.jsx)(n.td,{children:"SignedOutCallbackPath"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"URI de redirecci\xf3n de la aplicaci\xf3n"}),(0,r.jsx)(n.td,{children:"RedirectUri"})]})]})]}),"\n",(0,r.jsx)(o.Ay,{})]})}function a(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},88213:(e,n,s)=>{s.d(n,{Ay:()=>h,RM:()=>l});var r=s(25105),i=s(79621),o=s(21322);function t(e){const n={code:"code",pre:"pre",...(0,i.R)(),...e.components};return(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",metastring:'title="Program.cs"',children:'builder.Services.AddLogtoAuthentication(options =>\n{\n  // ...\n  // highlight-next-line\n  options.Resource = "https://<your-api-resource-indicator>";\n});\n'})})}function c(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(t,{...e})}):t(e)}function a(e){const n={code:"code",pre:"pre",...(0,i.R)(),...e.components};return(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",metastring:'title="Program.cs"',children:'builder.Services.AddLogtoAuthentication(options =>\n{\n  // ...\n  // highlight-start\n  options.Resource = "https://shopping.your-app.com/api";\n  options.Scopes = new string[] {\n    "openid",\n    "profile",\n    "offline_access",\n    "read",\n    "write"\n  };\n  // highlight-end\n});\n'})})}function d(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}const l=[...o.RM];function u(e){return(0,r.jsx)(o.Ay,{configResourcesCode:(0,r.jsx)(c,{}),configResourcesWithScopesCode:(0,r.jsx)(d,{})})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(u,{...e})}):u()}},48564:(e,n,s)=>{s.d(n,{A:()=>j});var r=s(8859),i=s(9545),o=s(83702),t=s(1391),c=s(9743),a=s(45247),d=s(86686),l=s(85601),u=s(13526),h=s(57850);const p={codeBlockContent:"codeBlockContent_m3Ux",codeBlockTitle:"codeBlockTitle_P25_",codeBlock:"codeBlock_qGQc",codeBlockStandalone:"codeBlockStandalone_zC50",codeBlockLines:"codeBlockLines_p187",codeBlockLinesWithNumbering:"codeBlockLinesWithNumbering_OFgW",buttonGroup:"buttonGroup_6DOT"};var x=s(25105);function j(e){let{children:n,className:s="",metastring:j,title:m,showLineNumbers:g,language:f}=e;const{prism:{defaultLanguage:b,magicComments:v}}=(0,r.p)(),A=function(e){return e?.toLowerCase()}(f??(0,o.Op)(s)??b),y=(0,i.A)(),R=(0,t.f)(),C=(0,o.wt)(j)||m,{lineClassNames:k,code:S}=(0,o.Li)(n,{metastring:j,language:A,magicComments:v}),L=g??(0,o._u)(j);return(0,x.jsxs)(c.A,{as:"div",className:(0,u.A)(s,A&&!s.includes(`language-${A}`)&&`language-${A}`),children:[C&&(0,x.jsx)("div",{className:p.codeBlockTitle,children:C}),(0,x.jsxs)("div",{className:p.codeBlockContent,children:[(0,x.jsx)(h.f4,{theme:y,code:S,language:A??"text",children:e=>{let{className:n,style:s,tokens:r,getLineProps:i,getTokenProps:o}=e;return(0,x.jsx)("pre",{ref:R.codeBlockRef,tabIndex:0,className:(0,u.A)(n,p.codeBlock,"thin-scrollbar"),style:s,children:(0,x.jsx)("code",{className:(0,u.A)(p.codeBlockLines,L&&p.codeBlockLinesWithNumbering),children:r.map(((e,n)=>(0,x.jsx)(d.A,{line:e,getLineProps:i,getTokenProps:o,classNames:k[n],showLineNumbers:L},n)))})})}}),(0,x.jsxs)("div",{className:p.buttonGroup,children:[(R.isEnabled||R.isCodeScrollable)&&(0,x.jsx)(l.A,{className:p.codeButton,isEnabled:R.isEnabled,onClick:()=>{R.toggle()}}),(0,x.jsx)(a.A,{className:p.codeButton,code:S})]})]})]})}}}]);