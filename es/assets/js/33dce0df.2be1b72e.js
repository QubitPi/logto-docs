"use strict";(self.webpackChunk_logto_docs=self.webpackChunk_logto_docs||[]).push([[3375],{20646:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>h,frontMatter:()=>o,metadata:()=>r,toc:()=>t});const r=JSON.parse('{"id":"developers/sdk-conventions/platform-sdk-convention","title":"Convenci\xf3n del SDK de Plataforma","description":"El SDK de Plataforma proporciona una forma est\xe1ndar de integrar el cliente con el servicio Logto en la plataforma espec\xedfica y acelera el proceso de integraci\xf3n.","source":"@site/i18n/es/docusaurus-plugin-content-docs/current/developers/sdk-conventions/platform-sdk-conventions.mdx","sourceDirName":"developers/sdk-conventions","slug":"/developers/sdk-conventions/platform-sdk-convention","permalink":"/es/developers/sdk-conventions/platform-sdk-convention","draft":false,"unlisted":false,"editUrl":"https://github.com/logto-io/docs/tree/master/i18n/es/docusaurus-plugin-content-docs/current/developers/sdk-conventions/platform-sdk-conventions.mdx","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"id":"platform-sdk-convention","title":"Convenci\xf3n del SDK de Plataforma","sidebar_label":"Convenci\xf3n del SDK de Plataforma","sidebar_position":4},"sidebar":"docsSidebar","previous":{"title":"Convenci\xf3n del Core SDK","permalink":"/es/developers/sdk-conventions/core-sdk-convention"},"next":{"title":"Desarrollador","permalink":"/es/developers/"}}');var i=s(25105),d=s(79621);const o={id:"platform-sdk-convention",title:"Convenci\xf3n del SDK de Plataforma",sidebar_label:"Convenci\xf3n del SDK de Plataforma",sidebar_position:4},c="Convenci\xf3n del SDK de Plataforma",l={},t=[{value:"Tipos b\xe1sicos",id:"basic-types",level:2},{value:"LogtoConfig",id:"logtoconfig",level:3},{value:"AccessToken",id:"accesstoken",level:3},{value:"LogtoClient",id:"logtoclient",level:2},{value:"Propiedades",id:"properties",level:3},{value:"logtoConfig",id:"logtoconfig-1",level:3},{value:"oidcConfig",id:"oidcconfig",level:3},{value:"accessTokenMap",id:"accesstokenmap",level:3},{value:"refreshToken",id:"refreshtoken",level:3},{value:"idToken",id:"idtoken",level:3},{value:"M\xe9todos",id:"methods",level:3},{value:"constructor",id:"constructor",level:3},{value:"isAuthenticated",id:"isauthenticated",level:3},{value:"SignIn",id:"signin",level:3},{value:"SignOut",id:"signout",level:3},{value:"getAccessToken",id:"getaccesstoken",level:3},{value:"getIdTokenClaims",id:"getidtokenclaims",level:3}];function a(e){const n={a:"a",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,d.R)(),...e.components},{Details:s}=n;return s||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"convenci\xf3n-del-sdk-de-plataforma",children:"Convenci\xf3n del SDK de Plataforma"})}),"\n",(0,i.jsx)(n.p,{children:"El SDK de Plataforma proporciona una forma est\xe1ndar de integrar el cliente con el servicio Logto en la plataforma espec\xedfica y acelera el proceso de integraci\xf3n."}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["El SDK de Plataforma encapsula ",(0,i.jsx)(n.a,{href:"/developers/sdk-conventions/core-sdk-convention",children:"el n\xfacleo"})," con una implementaci\xf3n espec\xedfica de la plataforma."]}),"\n",(0,i.jsx)(n.li,{children:"El SDK de Plataforma debe proporcionar tipos b\xe1sicos que faciliten el uso del SDK."}),"\n",(0,i.jsxs)(n.li,{children:["El SDK de Plataforma debe exportarse como una clase llamada ",(0,i.jsx)(n.code,{children:"LogtoClient"}),"."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"basic-types",children:"Tipos b\xe1sicos"}),"\n",(0,i.jsxs)(s,{children:[(0,i.jsx)("summary",{children:(0,i.jsx)(n.h3,{id:"logtoconfig",children:"LogtoConfig"})}),(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Nombre"}),(0,i.jsx)(n.th,{children:"Tipo"}),(0,i.jsx)(n.th,{children:"Requerido"}),(0,i.jsx)(n.th,{children:"Valor por defecto"}),(0,i.jsx)(n.th,{children:"Notas"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"endpoint"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"string"})}),(0,i.jsx)(n.td,{children:"\u2705"}),(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{children:"El endpoint del servicio OIDC."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"appId"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"string"})}),(0,i.jsx)(n.td,{children:"\u2705"}),(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{children:"El ID de la aplicaci\xf3n proviene de la aplicaci\xf3n que registramos en Logto Service."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"scopes"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"string[]"})}),(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"[openid, offline_access, profile]"})}),(0,i.jsxs)(n.td,{children:["Este campo siempre contiene ",(0,i.jsx)(n.code,{children:"openid"}),", ",(0,i.jsx)(n.code,{children:"offline_access"})," y ",(0,i.jsx)(n.code,{children:"profile"}),"."]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"resources"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"string[]"})}),(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{children:"Los indicadores de recursos protegidos que queremos usar."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"prompt"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"string"})}),(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"consent"})}),(0,i.jsxs)(n.td,{children:["El valor de prompt utilizado en ",(0,i.jsx)(n.code,{children:"generateSignInUri"}),"."]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"usingPersistStorage"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"boolean"})}),(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"true"})}),(0,i.jsx)(n.td,{children:"Decide si almacenar credenciales en la m\xe1quina local o no."})]})]})]}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"*Notas"})}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Puedes extender este ",(0,i.jsx)(n.code,{children:"LogtoConfig"})," si lo necesitas."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"usingPersistStorage"})," solo se proporciona en SDKs de cliente. Por ejemplo, iOS, Android y SPA."]}),"\n"]})]}),"\n",(0,i.jsxs)(s,{children:[(0,i.jsx)("summary",{children:(0,i.jsx)(n.h3,{id:"accesstoken",children:"AccessToken"})}),(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Nombre"}),(0,i.jsx)(n.th,{children:"Tipo"}),(0,i.jsx)(n.th,{children:"Notas"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"token"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"string"})}),(0,i.jsx)(n.td,{})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"scope"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"string"})}),(0,i.jsx)(n.td,{})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"expiresAt"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"number"})}),(0,i.jsx)(n.td,{children:"Marca de tiempo en segundos"})]})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"logtoclient",children:"LogtoClient"}),"\n",(0,i.jsx)(n.h3,{id:"properties",children:"Propiedades"}),"\n",(0,i.jsxs)(s,{children:[(0,i.jsx)("summary",{children:(0,i.jsx)(n.h3,{id:"logtoconfig-1",children:"logtoConfig"})}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Tipo"})}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"LogtoConfig"})})]}),"\n",(0,i.jsxs)(s,{children:[(0,i.jsx)("summary",{children:(0,i.jsx)(n.h3,{id:"oidcconfig",children:"oidcConfig"})}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Tipo"})}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"OidcConfigResponse?"})})]}),"\n",(0,i.jsxs)(s,{children:[(0,i.jsx)("summary",{children:(0,i.jsx)(n.h3,{id:"accesstokenmap",children:"accessTokenMap"})}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Tipo"})}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"Map<string, AccessToken>"})}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Clave"})}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["La clave debe construirse con ",(0,i.jsx)(n.code,{children:"scope"})," y ",(0,i.jsx)(n.code,{children:"resource"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Los valores en ",(0,i.jsx)(n.code,{children:"scope"})," deben ordenarse alfab\xe9ticamente y unirse con un espacio."]}),"\n",(0,i.jsxs)(n.li,{children:["La clave debe construirse en el patr\xf3n: ",(0,i.jsx)(n.code,{children:"${scope}@${resource}"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Si el ",(0,i.jsx)(n.code,{children:"scope"})," o ",(0,i.jsx)(n.code,{children:"resource"})," es nulo o est\xe1 vac\xedo, su valor debe tratarse como vac\xedo."]}),"\n"]}),(0,i.jsxs)(n.p,{children:["Por ejemplo, ",(0,i.jsx)(n.code,{children:'"offline_access openid read:usr@https://logto.dev/api"'}),", ",(0,i.jsx)(n.code,{children:'"@https://logto.dev/api"'}),", ",(0,i.jsx)(n.code,{children:'"openid@"'}),", ",(0,i.jsx)(n.code,{children:'"@"'}),"."]}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Valor"})}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"AccessToken"}),", que utiliza la propiedad ",(0,i.jsx)(n.code,{children:"expiresAt"})," para indicar el momento exacto en que un token de acceso expira."]}),"\n"]}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Notas"})}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["El ",(0,i.jsx)(n.code,{children:"scope"})," siempre ser\xe1 un valor nulo porque no admitimos alcances personalizados en Logto V1."]}),"\n",(0,i.jsxs)(n.li,{children:["Al construir la clave del token de acceso para almacenar un token de acceso:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"scope"})," siempre ser\xe1 un valor nulo."]}),"\n",(0,i.jsxs)(n.li,{children:["si el token de acceso no es un jwt, trata el ",(0,i.jsx)(n.code,{children:"resource"})," como un valor nulo."]}),"\n",(0,i.jsxs)(n.li,{children:["si el token de acceso es un jwt, decodifica el token de acceso y usa el valor del reclamo ",(0,i.jsx)(n.code,{children:"aud"})," del payload como la parte ",(0,i.jsx)(n.code,{children:"resource"})," de la clave del token de acceso."]}),"\n"]}),"\n"]}),"\n"]})]}),"\n",(0,i.jsxs)(s,{children:[(0,i.jsx)("summary",{children:(0,i.jsx)(n.h3,{id:"refreshtoken",children:"refreshToken"})}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Tipo"})}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"string?"})}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Notas"})}),(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"refreshToken"})," se establecer\xe1 o actualizar\xe1 en las siguientes circunstancias:"]}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Cargar ",(0,i.jsx)(n.code,{children:"refreshToken"})," desde el almacenamiento."]}),"\n",(0,i.jsxs)(n.li,{children:["El servidor devuelve un ",(0,i.jsx)(n.code,{children:"refreshToken"})," en la respuesta al obtener el token con \xe9xito."]}),"\n",(0,i.jsxs)(n.li,{children:["Cerrar sesi\xf3n (se establecer\xe1 en ",(0,i.jsx)(n.code,{children:"null"}),")."]}),"\n"]})]}),"\n",(0,i.jsxs)(s,{children:[(0,i.jsx)("summary",{children:(0,i.jsx)(n.h3,{id:"idtoken",children:"idToken"})}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Tipo"})}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"string?"})}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Notas"})}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"idToken"})," debe verificarse si proviene del backend."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"idToken"})," se establecer\xe1 o actualizar\xe1 en las siguientes circunstancias:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Cargar ",(0,i.jsx)(n.code,{children:"idToken"})," desde el almacenamiento."]}),"\n",(0,i.jsxs)(n.li,{children:["El servidor devuelve un ",(0,i.jsx)(n.code,{children:"idToken"})," en la respuesta al obtener el token con \xe9xito."]}),"\n",(0,i.jsxs)(n.li,{children:["Cerrar sesi\xf3n (se establecer\xe1 en ",(0,i.jsx)(n.code,{children:"null"}),")."]}),"\n"]}),"\n"]}),"\n"]})]}),"\n",(0,i.jsx)(n.h3,{id:"methods",children:"M\xe9todos"}),"\n",(0,i.jsxs)(s,{children:[(0,i.jsx)("summary",{children:(0,i.jsx)(n.h3,{id:"constructor",children:"constructor"})}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Par\xe1metros"})}),(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Par\xe1metro"}),(0,i.jsx)(n.th,{children:"Tipo"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"logtoConfig"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"LogtoConfig"})})]})})]}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Tipo de retorno"})}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"LogtoClient"})}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Notas"})}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Puedes agregar par\xe1metros adicionales si lo necesitas."}),"\n",(0,i.jsxs)(n.li,{children:["Si el uso de almacenamiento persistente est\xe1 habilitado en logtoConfig, el SDK de plataforma proporcionar\xe1 las siguientes funcionalidades:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Almacenar datos persistentes con una clave \xfanica basada en ",(0,i.jsx)(n.code,{children:"clientId"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Cargar ",(0,i.jsx)(n.code,{children:"refreshToken"})," y ",(0,i.jsx)(n.code,{children:"idToken"})," desde la m\xe1quina local al inicializar."]}),"\n",(0,i.jsxs)(n.li,{children:["Almacenar ",(0,i.jsx)(n.code,{children:"refreshToken"})," y ",(0,i.jsx)(n.code,{children:"idToken"})," localmente en ",(0,i.jsx)(n.code,{children:"Core.fetchTokenByAuthorizationCode"})," y ",(0,i.jsx)(n.code,{children:"Core.fetchTokenByRefreshToken"}),"."]}),"\n"]}),"\n"]}),"\n"]})]}),"\n",(0,i.jsxs)(s,{children:[(0,i.jsx)("summary",{children:(0,i.jsx)(n.h3,{id:"isauthenticated",children:"isAuthenticated"})}),(0,i.jsxs)(n.p,{children:["Para saber si un usuario est\xe1 autenticado o no.",(0,i.jsx)(n.br,{}),"\n","Esto tambi\xe9n se puede definir como un getter."]}),(0,i.jsx)(n.p,{children:"Un usuario se considera autenticado cuando:"}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Hemos obtenido un token de ID con \xe9xito."}),"\n",(0,i.jsx)(n.li,{children:"Hemos cargado un token de ID desde la m\xe1quina local."}),"\n"]}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Par\xe1metros"})}),(0,i.jsx)(n.p,{children:"Ninguno."}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Tipo de retorno"})}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"boolean"})})]}),"\n",(0,i.jsxs)(s,{children:[(0,i.jsx)("summary",{children:(0,i.jsx)(n.h3,{id:"signin",children:"SignIn"})}),(0,i.jsx)(n.p,{children:"Este m\xe9todo debe iniciar un flujo de inicio de sesi\xf3n y el SDK de plataforma debe encargarse de todos los pasos que una autorizaci\xf3n necesita completar, incluido el proceso de redirecci\xf3n de inicio de sesi\xf3n."}),(0,i.jsx)(n.p,{children:"El usuario estar\xe1 autenticado despu\xe9s de que este m\xe9todo se haya llamado con \xe9xito."}),(0,i.jsx)(n.p,{children:"El proceso de inicio de sesi\xf3n depender\xe1 de las funciones del Core SDK:"}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"generateSignInUri"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"verifyAndParseCodeFromCallbackUri"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"fetchTokenByAuthorizationCode"})}),"\n"]}),(0,i.jsx)(n.p,{children:"Notas:"}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Debido a que generateSignInUri incluye los recursos que necesitamos, no necesitamos pasar el recurso a la funci\xf3n fetchTokenByAuthorizationCode."}),"\n"]}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Par\xe1metros"})}),(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Par\xe1metro"}),(0,i.jsx)(n.th,{children:"Tipo"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"redirectUri"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"string"})})]})})]}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Tipo de retorno"})}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"void"})}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Lanza"})}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Cualquier error que ocurra durante este proceso de inicio de sesi\xf3n."}),"\n"]})]}),"\n",(0,i.jsxs)(s,{children:[(0,i.jsx)("summary",{children:(0,i.jsx)(n.h3,{id:"signout",children:"SignOut"})}),(0,i.jsx)(n.p,{children:"El proceso de cierre de sesi\xf3n debe seguir los pasos:"}),(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Limpiar el almacenamiento local, cookies, datos persistentes u otra cosa."}),"\n",(0,i.jsxs)(n.li,{children:["Revocar el token de actualizaci\xf3n obtenido a trav\xe9s de ",(0,i.jsx)(n.code,{children:"Core.revoke"})," (el servicio Logto revocar\xe1 todos los tokens relacionados si el token de actualizaci\xf3n es revocado)."]}),"\n",(0,i.jsx)(n.li,{children:"Redirigir al usuario al endpoint de cierre de sesi\xf3n de Logto a menos que el paso 1 borre la sesi\xf3n de la p\xe1gina de inicio de sesi\xf3n."}),"\n"]}),(0,i.jsx)(n.p,{children:"Notas:"}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["En el paso 2, ",(0,i.jsx)(n.code,{children:"Core.revoke"})," es una llamada asincr\xf3nica y no bloquear\xe1 el proceso de cierre de sesi\xf3n incluso si falla."]}),"\n",(0,i.jsxs)(n.li,{children:["El paso 3 se basa en ",(0,i.jsx)(n.code,{children:"Core.generateSignOutUri"})," para generar el endpoint de cierre de sesi\xf3n de Logto."]}),"\n"]}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Par\xe1metros"})}),(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Par\xe1metro"}),(0,i.jsx)(n.th,{children:"Tipo"}),(0,i.jsx)(n.th,{children:"Requerido"}),(0,i.jsx)(n.th,{children:"Valor por defecto"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"postLogoutRedirectUri"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"string"})}),(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"null"})})]})})]}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Tipo de retorno"})}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"void"})}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Lanza"})}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Cualquier error que ocurra durante este proceso de cierre de sesi\xf3n."}),"\n"]})]}),"\n",(0,i.jsxs)(s,{children:[(0,i.jsx)("summary",{children:(0,i.jsx)(n.h3,{id:"getaccesstoken",children:"getAccessToken"})}),(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"getAccessToken"})," recupera un ",(0,i.jsx)(n.code,{children:"AccessToken"})," por ",(0,i.jsx)(n.code,{children:"resource"})," y ",(0,i.jsx)(n.code,{children:"scope"})," de ",(0,i.jsx)(n.code,{children:"accessTokenMap"})," y luego devuelve el valor ",(0,i.jsx)(n.code,{children:"token"})," de ese ",(0,i.jsx)(n.code,{children:"AccessToken"}),"."]}),(0,i.jsxs)(n.p,{children:["Establecemos el ",(0,i.jsx)(n.code,{children:"scope"})," en ",(0,i.jsx)(n.code,{children:"null"})," al construir la clave del ",(0,i.jsx)(n.code,{children:"accessTokenMap"})," porque no admitimos alcances personalizados en Logto V1."]}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Notas"})}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Si no se puede encontrar un ",(0,i.jsx)(n.code,{children:"AccessToken"})," correspondiente, entonces realiza una acci\xf3n ",(0,i.jsx)(n.code,{children:"Core.fetchTokenByRefreshToken"})," para obtener el token necesario."]}),"\n",(0,i.jsxs)(n.li,{children:["Si el ",(0,i.jsx)(n.code,{children:"accessToken"})," no ha expirado, entonces devuelve el valor ",(0,i.jsx)(n.code,{children:"token"})," dentro."]}),"\n",(0,i.jsxs)(n.li,{children:["Si el ",(0,i.jsx)(n.code,{children:"accessToken"})," ha expirado, entonces realiza una acci\xf3n ",(0,i.jsx)(n.code,{children:"Core.fetchTokenByRefreshToken"})," para obtener un nuevo ",(0,i.jsx)(n.code,{children:"accessToken"}),", actualiza el ",(0,i.jsx)(n.code,{children:"accessTokenMap"})," local y devuelve el nuevo valor ",(0,i.jsx)(n.code,{children:"token"})," dentro."]}),"\n",(0,i.jsxs)(n.li,{children:["Si ",(0,i.jsx)(n.code,{children:"Core.fetchTokenByRefreshToken"})," falla, entonces informa al usuario con la excepci\xf3n ocurrida."]}),"\n",(0,i.jsx)(n.li,{children:"Si no se puede encontrar el refreshToken, entonces informa al usuario de una excepci\xf3n no autorizada."}),"\n",(0,i.jsxs)(n.li,{children:["Solo al obtener un ",(0,i.jsx)(n.code,{children:"refreshToken"})," despu\xe9s de iniciar sesi\xf3n podemos realizar una acci\xf3n ",(0,i.jsx)(n.code,{children:"Core.fetchTokenByRefreshToken"}),"."]}),"\n"]}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Par\xe1metros"})}),(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Par\xe1metro"}),(0,i.jsx)(n.th,{children:"Tipo"}),(0,i.jsx)(n.th,{children:"Requerido"}),(0,i.jsx)(n.th,{children:"Valor por defecto"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"resource"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"string"})}),(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"null"})})]})})]}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Tipo de retorno"})}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"string"})}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Lanza"})}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"El usuario no est\xe1 autenticado."}),"\n",(0,i.jsxs)(n.li,{children:["El ",(0,i.jsx)(n.code,{children:"resource"})," de entrada no est\xe1 establecido en el ",(0,i.jsx)(n.code,{children:"logtoConfig"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["No se encontr\xf3 ning\xfan token de actualizaci\xf3n antes de ",(0,i.jsx)(n.code,{children:"Core.fetchTokenByRefreshToken"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"Core.fetchTokenByRefreshToken"})," fall\xf3."]}),"\n"]})]}),"\n",(0,i.jsxs)(s,{children:[(0,i.jsx)("summary",{children:(0,i.jsx)(n.h3,{id:"getidtokenclaims",children:"getIdTokenClaims"})}),(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"getIdTokenClaims"})," devuelve un objeto que lleva los reclamos de la propiedad ",(0,i.jsx)(n.code,{children:"idToken"}),"."]}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Par\xe1metros"})}),(0,i.jsx)(n.p,{children:"Ninguno."}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Tipo de retorno"})}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"IdTokenClaims"})}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Lanza"})}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"El usuario no est\xe1 autenticado."}),"\n"]})]})]})}function h(e={}){const{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},79621:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>c});var r=s(58101);const i={},d=r.createContext(i);function o(e){const n=r.useContext(d);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),r.createElement(d.Provider,{value:n},e.children)}}}]);