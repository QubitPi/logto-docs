"use strict";(self.webpackChunk_logto_docs=self.webpackChunk_logto_docs||[]).push([[1957],{25853:(e,n,o)=>{o.d(n,{Ay:()=>t,RM:()=>r});var i=o(25105),a=o(79621);const r=[];function s(e){const n={admonition:"admonition",code:"code",p:"p",...(0,a.R)(),...e.components};return(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsxs)(n.p,{children:["Inspecciona el reclamo ",(0,i.jsx)(n.code,{children:"organizations"})," en el token de ID (ID token) para obtener una lista de los IDs de las organizaciones a las que pertenece el usuario. Este reclamo enumera todas las organizaciones de las que el usuario es miembro, lo que facilita enumerar o cambiar de organizaci\xf3n en tu aplicaci\xf3n."]})})}function t(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(s,{...e})}):s(e)}},23405:(e,n,o)=>{o.d(n,{Ay:()=>t,RM:()=>r});var i=o(25105),a=o(79621);const r=[];function s(e){const n={admonition:"admonition",p:"p",...(0,a.R)(),...e.components};return(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsx)(n.p,{children:"Por el momento, Logto no admite la obtenci\xf3n de tokens de organizaci\xf3n (Organization tokens) directamente desde el flujo de c\xf3digo de autorizaci\xf3n. Deber\xe1s utilizar el flujo de token de actualizaci\xf3n (Refresh token) para obtener un token de organizaci\xf3n (Organization token)."})})}function t(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(s,{...e})}):s(e)}},44055:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>j,contentTitle:()=>m,default:()=>f,frontMatter:()=>h,metadata:()=>i,toc:()=>x});const i=JSON.parse('{"id":"authorization/organization-permissions","title":"Protege los permisos de organizaci\xf3n (no API)","description":"Utiliza la plantilla de organizaci\xf3n para gestionar y aplicar roles y permisos a nivel de organizaci\xf3n en Logto, controlando el acceso a funciones y flujos dentro de una organizaci\xf3n.","source":"@site/i18n/es/docusaurus-plugin-content-docs/current/authorization/organization-permissions.mdx","sourceDirName":"authorization","slug":"/authorization/organization-permissions","permalink":"/es/authorization/organization-permissions","draft":false,"unlisted":false,"editUrl":"https://github.com/logto-io/docs/tree/master/i18n/es/docusaurus-plugin-content-docs/current/authorization/organization-permissions.mdx","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4},"sidebar":"docsSidebar","previous":{"title":"Protege recursos globales de API","permalink":"/es/authorization/global-api-resources"},"next":{"title":"Protege recursos de API a nivel de organizaci\xf3n","permalink":"/es/authorization/organization-level-api-resources"}}');var a=o(25105),r=o(79621),s=o(93855),t=o(39088),l=o(78506),c=o(42372),d=o(38552),u=o(22002),p=o(25853),g=o(23405);const h={sidebar_position:4},m="Protege los permisos de organizaci\xf3n (no API)",j={},x=[{value:"\xbfQu\xe9 son los permisos de organizaci\xf3n (no API)?",id:"what-are-organization-non-api-permissions",level:2},{value:"C\xf3mo funciona en Logto",id:"how-it-works-in-logto",level:2},{value:"Resumen de la implementaci\xf3n",id:"implementation-overview",level:3},{value:"Flujo de autorizaci\xf3n: autenticando y asegurando permisos de organizaci\xf3n",id:"authorization-flow-authenticating-and-securing-organization-permissions",level:3},{value:"Pasos de implementaci\xf3n",id:"implementation-steps",level:2},{value:"Registra permisos de organizaci\xf3n",id:"register-organization-permissions",level:3},{value:"Configura roles de organizaci\xf3n",id:"set-up-organization-roles",level:3},{value:"Obt\xe9n tokens de organizaci\xf3n (no API)",id:"obtain-organization-tokens-non-api",level:3},{value:"Flujo de refresh token",id:"refresh-token-flow",level:4},...p.RM,...g.RM,...p.RM,{value:"Flujo de client credentials",id:"client-credentials-flow",level:4},{value:"Valida los tokens de organizaci\xf3n",id:"validate-organization-tokens",level:3},{value:"Mejores pr\xe1cticas y consejos de seguridad",id:"best-practices-and-security-tips",level:2},{value:"Preguntas frecuentes",id:"faqs",level:2},{value:"\xbfPuedo mezclar permisos de organizaci\xf3n y no organizaci\xf3n en un solo rol?",id:"can-i-mix-organization-and-non-organization-permissions-in-a-single-role",level:3},{value:"\xbfD\xf3nde debo aplicar los permisos no API?",id:"where-should-i-enforce-non-api-permissions",level:3},{value:"M\xe1s informaci\xf3n",id:"further-reading",level:2}];function z(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",mermaid:"mermaid",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,r.R)(),...e.components},{CloudLink:o,Details:i,Url:h}=n;return o||b("CloudLink",!0),i||b("Details",!0),h||b("Url",!0),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"protege-los-permisos-de-organizaci\xf3n-no-api",children:"Protege los permisos de organizaci\xf3n (no API)"})}),"\n",(0,a.jsx)(n.p,{children:"Utiliza la plantilla de organizaci\xf3n para gestionar y aplicar roles y permisos a nivel de organizaci\xf3n en Logto, controlando el acceso a funciones y flujos dentro de una organizaci\xf3n."}),"\n",(0,a.jsx)(n.h2,{id:"what-are-organization-non-api-permissions",children:"\xbfQu\xe9 son los permisos de organizaci\xf3n (no API)?"}),"\n",(0,a.jsxs)(n.p,{children:["Los permisos de organizaci\xf3n (no API) controlan lo que los usuarios pueden hacer ",(0,a.jsx)(n.strong,{children:"dentro del contexto de una organizaci\xf3n"}),", pero no se ",(0,a.jsx)(n.strong,{children:"aplican a nivel de API"}),". En cambio, gobiernan el acceso a funciones de la aplicaci\xf3n, elementos de la interfaz, flujos de trabajo o acciones de negocio, en lugar de APIs de backend."]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Casos de uso incluyen"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Invitar o gestionar miembros dentro de una organizaci\xf3n"}),"\n",(0,a.jsx)(n.li,{children:"Asignar o cambiar roles de organizaci\xf3n"}),"\n",(0,a.jsx)(n.li,{children:"Gestionar la facturaci\xf3n, configuraciones o funciones administrativas de una organizaci\xf3n"}),"\n",(0,a.jsx)(n.li,{children:"Acceso a paneles, anal\xedticas o herramientas internas que no tienen endpoints de API"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"Logto te permite asegurar estos permisos de organizaci\xf3n usando OAuth 2.1 y control de acceso basado en roles (RBAC), mientras soporta arquitecturas SaaS multi-tenant."}),"\n",(0,a.jsxs)(n.p,{children:["Estos permisos se gestionan a trav\xe9s de ",(0,a.jsx)(n.strong,{children:"roles de organizaci\xf3n"})," definidos en la ",(0,a.jsx)(n.a,{href:"/authorization/organization-template",children:"plantilla de organizaci\xf3n"}),". Cada organizaci\xf3n utiliza la misma plantilla, asegurando un modelo de permisos consistente en todas las organizaciones."]}),"\n",(0,a.jsx)(n.h2,{id:"how-it-works-in-logto",children:"C\xf3mo funciona en Logto"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"RBAC a nivel de organizaci\xf3n:"})," Los roles y permisos se definen en la plantilla de organizaci\xf3n. Cuando un usuario se une a una organizaci\xf3n, se le asignan uno o m\xe1s roles, otorgando permisos espec\xedficos."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Aplicaci\xf3n no API:"})," Los permisos se verifican y aplican en la interfaz de tu app, flujo de trabajo o l\xf3gica de backend, no necesariamente por un gateway de API."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Separaci\xf3n de la protecci\xf3n de API:"})," Los permisos de organizaci\xf3n (no API) son distintos de los permisos de recursos de API. Puedes combinar ambos para escenarios avanzados."]}),"\n"]}),"\n",(0,a.jsx)("center",{children:(0,a.jsx)("img",{src:s.A,alt:"Permisos de organizaci\xf3n RBAC",style:{maxWidth:"800px",width:"100%"}})}),"\n",(0,a.jsx)(n.h3,{id:"implementation-overview",children:"Resumen de la implementaci\xf3n"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Define los permisos de organizaci\xf3n"})," en Logto bajo la plantilla de organizaci\xf3n."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Crea roles de organizaci\xf3n"})," que agrupen los permisos necesarios para tus acciones espec\xedficas de organizaci\xf3n."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Asigna roles"})," a usuarios o clientes dentro de cada organizaci\xf3n."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Obt\xe9n un token de organizaci\xf3n (JWT)"})," para la organizaci\xf3n actual usando el refresh token o el flujo de client credentials."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Valida los tokens de acceso"})," en la interfaz o backend de tu app para aplicar los permisos de organizaci\xf3n."]}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"authorization-flow-authenticating-and-securing-organization-permissions",children:"Flujo de autorizaci\xf3n: autenticando y asegurando permisos de organizaci\xf3n"}),"\n",(0,a.jsx)(n.p,{children:"El siguiente flujo muestra c\xf3mo un cliente (web, m\xf3vil o backend) obtiene y utiliza tokens de organizaci\xf3n para la aplicaci\xf3n de permisos no API."}),"\n",(0,a.jsx)(n.p,{children:"Ten en cuenta que el flujo no incluye detalles exhaustivos sobre los par\xe1metros o encabezados requeridos, sino que se centra en los pasos clave involucrados. Contin\xfaa leyendo para ver c\xf3mo funciona el flujo en la pr\xe1ctica."}),"\n",(0,a.jsx)(n.mermaid,{value:"sequenceDiagram\n    participant Cliente\n    participant Logto\n    participant App as App/UI/backend\n\n    alt Autenticaci\xf3n de usuario\n        Cliente->>Logto: GET /oidc/auth\n        Logto->>Logto: Redirige al usuario a la p\xe1gina de inicio de sesi\xf3n\n        Logto->>Cliente: Redirige de vuelta con `authorization_code`\n        Cliente->>Logto: POST /oidc/token con `grant_type=authorization_code`\n        Logto->>Cliente: Devuelve refresh token\n        Cliente->>Logto: POST /oidc/token con `grant_type=refresh_token` + par\xe1metros de organizaci\xf3n\n    else Autenticaci\xf3n de cliente M2M\n        Cliente->>Logto: POST /oidc/token con `grant_type=client_credentials` + par\xe1metros de organizaci\xf3n\n    end\n\n    Logto->>Cliente: Devuelve token de organizaci\xf3n (JWT)\n    Cliente->>App: Solicitud con Bearer token\n    App->>App: Valida token de organizaci\xf3n, verifica contexto y permisos de organizaci\xf3n\n\n    alt El token es v\xe1lido\n        App->>Cliente: Permite acciones/datos espec\xedficos de la organizaci\xf3n\n    else El token no es v\xe1lido\n        App->>Cliente: 401 No autorizado o deniega acceso en la interfaz\n    end"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.em,{children:"Autenticaci\xf3n de usuario = navegador/app. M2M = servicio de backend o script usando client credentials + contexto de organizaci\xf3n."})}),"\n",(0,a.jsx)(n.h2,{id:"implementation-steps",children:"Pasos de implementaci\xf3n"}),"\n",(0,a.jsx)(n.h3,{id:"register-organization-permissions",children:"Registra permisos de organizaci\xf3n"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:["Ve a ",(0,a.jsx)(o,{to:"/organization-template/organization-permissions",children:"Consola \u2192 Plantilla de organizaci\xf3n \u2192 Permisos de organizaci\xf3n"}),"."]}),"\n",(0,a.jsxs)(n.li,{children:["Define los permisos de organizaci\xf3n que necesitas (por ejemplo, ",(0,a.jsx)(n.code,{children:"invite:member"}),", ",(0,a.jsx)(n.code,{children:"manage:billing"}),", ",(0,a.jsx)(n.code,{children:"view:analytics"}),")."]}),"\n"]}),"\n",(0,a.jsxs)(n.p,{children:["Para ver los pasos completos de configuraci\xf3n, consulta ",(0,a.jsx)(n.a,{href:"/authorization/role-based-access-control#define-organization-permissions",children:"Definir permisos de organizaci\xf3n"}),"."]}),"\n",(0,a.jsx)(n.h3,{id:"set-up-organization-roles",children:"Configura roles de organizaci\xf3n"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:["Ve a ",(0,a.jsx)(o,{to:"/organization-template/organization-roles",children:"Consola \u2192 Plantilla de organizaci\xf3n \u2192 Roles de organizaci\xf3n"}),"."]}),"\n",(0,a.jsxs)(n.li,{children:["Crea roles que agrupen los permisos de organizaci\xf3n que definiste antes (por ejemplo, ",(0,a.jsx)(n.code,{children:"admin"}),", ",(0,a.jsx)(n.code,{children:"member"}),", ",(0,a.jsx)(n.code,{children:"billing"}),")."]}),"\n",(0,a.jsx)(n.li,{children:"Asigna estos roles a usuarios o clientes dentro de cada organizaci\xf3n."}),"\n"]}),"\n",(0,a.jsxs)(n.p,{children:["Para ver los pasos completos de configuraci\xf3n, consulta ",(0,a.jsx)(n.a,{href:"/authorization/role-based-access-control#configure-organization-roles",children:"Usar roles de organizaci\xf3n"}),"."]}),"\n",(0,a.jsx)(n.h3,{id:"obtain-organization-tokens-non-api",children:"Obt\xe9n tokens de organizaci\xf3n (no API)"}),"\n",(0,a.jsxs)(n.p,{children:["Tu cliente/app debe obtener un token de organizaci\xf3n (no API) para acceder a los permisos de organizaci\xf3n. Logto emite tokens de organizaci\xf3n como ",(0,a.jsx)(n.a,{href:"https://auth.wiki/jwt",children:"JSON Web Tokens (JWTs)"}),". Puedes obtenerlos usando el ",(0,a.jsx)(n.a,{href:"https://auth.wiki/refresh-token",children:"refresh token flow"})," o el ",(0,a.jsx)(n.a,{href:"https://auth.wiki/client-credentials-flow",children:"client credentials flow"}),"."]}),"\n",(0,a.jsx)(n.h4,{id:"refresh-token-flow",children:"Flujo de refresh token"}),"\n",(0,a.jsx)(n.p,{children:"Casi todos los SDK oficiales de Logto admiten la obtenci\xf3n de tokens de organizaci\xf3n usando el flujo de refresh token de forma nativa. Tambi\xe9n puedes usar una librer\xeda est\xe1ndar de cliente OAuth 2.0 / OIDC para implementar este flujo."}),"\n",(0,a.jsxs)(u.A,{groupId:"user-client",children:[(0,a.jsxs)(d.A,{value:"logto-sdk",label:"Logto SDK",children:[(0,a.jsxs)(n.p,{children:["Al inicializar el SDK de Logto, a\xf1ade ",(0,a.jsx)(n.code,{children:"urn:logto:scope:organizations"})," y los permisos de organizaci\xf3n deseados (alcances) al par\xe1metro ",(0,a.jsx)(n.code,{children:"scopes"}),"."]}),(0,a.jsxs)(n.p,{children:["Algunos SDK de Logto tienen un alcance predefinido para organizaciones, como ",(0,a.jsx)(n.code,{children:"UserScope.Organizations"})," en los SDK de JavaScript."]}),(0,a.jsx)(p.Ay,{}),(0,a.jsxs)(n.p,{children:["Utiliza ",(0,a.jsx)(n.code,{children:"getOrganizationToken"})," o un m\xe9todo similar (como ",(0,a.jsx)(n.code,{children:"getAccessToken"})," con un ID de organizaci\xf3n) para solicitar un token de organizaci\xf3n para una organizaci\xf3n espec\xedfica."]}),(0,a.jsxs)(n.p,{children:["Para detalles sobre cada SDK, consulta ",(0,a.jsx)(n.a,{href:"/quick-starts",children:"Gu\xedas r\xe1pidas"}),"."]})]}),(0,a.jsxs)(d.A,{value:"oauth-client",label:"OAuth 2.0 / OIDC client library",children:[(0,a.jsx)(n.p,{children:"Al configurar tu cliente OAuth 2.0 o inicializar el flujo de c\xf3digo de autorizaci\xf3n, aseg\xfarate de incluir los siguientes par\xe1metros:"}),(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"resource"}),": Establece en ",(0,a.jsx)(n.code,{children:"urn:logto:resource:organizations"})," para indicar que deseas un token de organizaci\xf3n."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"scope"}),": Incluye el alcance predefinido de organizaci\xf3n (",(0,a.jsx)(n.code,{children:"urn:logto:scope:organizations"}),"), ",(0,a.jsx)(n.code,{children:"offline_access"})," (para obtener refresh tokens) y cualquier permiso espec\xedfico de organizaci\xf3n que necesites (por ejemplo, ",(0,a.jsx)(n.code,{children:"invite:member"}),", ",(0,a.jsx)(n.code,{children:"manage:billing"}),")."]}),"\n"]}),(0,a.jsxs)(n.p,{children:["Algunas librer\xedas pueden no soportar el par\xe1metro ",(0,a.jsx)(n.code,{children:"resource"})," de forma nativa, pero normalmente permiten pasar par\xe1metros adicionales en la solicitud de autorizaci\xf3n. Consulta la documentaci\xf3n de tu librer\xeda para m\xe1s detalles."]}),(0,a.jsx)(n.p,{children:"Aqu\xed tienes un ejemplo no normativo de c\xf3mo podr\xeda verse la solicitud de autorizaci\xf3n:"}),(0,a.jsx)(t.A,{scope:"urn:logto:scope:organizations invite:member manage:billing",resource:"urn:logto:resource:organizations"}),(0,a.jsxs)(n.p,{children:["Una vez que el usuario est\xe9 autenticado, recibir\xe1s un authorization code. Usa este c\xf3digo haciendo una solicitud POST al endpoint ",(0,a.jsx)(n.code,{children:"/oidc/token"})," de Logto."]}),(0,a.jsx)(n.p,{children:"Aqu\xed tienes un ejemplo no normativo de la solicitud de token:"}),(0,a.jsx)(c.A,{grantType:"authorization_code"}),(0,a.jsx)(g.Ay,{}),(0,a.jsx)(n.p,{children:"Recibir\xe1s un refresh token que puede usarse para obtener tokens de organizaci\xf3n."}),(0,a.jsx)(p.Ay,{}),(0,a.jsxs)(n.p,{children:["Finalmente, usa el refresh token para obtener un token de organizaci\xf3n haciendo una solicitud POST al endpoint ",(0,a.jsx)(n.code,{children:"/oidc/token"})," de Logto. Recuerda incluir:"]}),(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["El par\xe1metro ",(0,a.jsx)(n.code,{children:"organization_id"})," establecido al ID de la organizaci\xf3n deseada."]}),"\n",(0,a.jsxs)(n.li,{children:["(Opcional) El par\xe1metro ",(0,a.jsx)(n.code,{children:"scope"})," para reducir a\xfan m\xe1s los permisos que necesitas (por ejemplo, ",(0,a.jsx)(n.code,{children:"manage:members view:reports"}),")."]}),"\n"]}),(0,a.jsx)(n.p,{children:"Aqu\xed tienes un ejemplo no normativo de c\xf3mo podr\xeda verse la solicitud de token:"}),(0,a.jsx)(c.A,{grantType:"refresh_token",organizationId:"your-organization-id"})]})]}),"\n",(0,a.jsx)(n.h4,{id:"client-credentials-flow",children:"Flujo de client credentials"}),"\n",(0,a.jsxs)(n.p,{children:["Para escenarios m\xe1quina a m\xe1quina (M2M), puedes usar el flujo de client credentials para obtener un token de acceso para permisos de organizaci\xf3n. Haciendo una solicitud POST al endpoint ",(0,a.jsx)(n.code,{children:"/oidc/token"})," de Logto con par\xe1metros de organizaci\xf3n, puedes solicitar un token de organizaci\xf3n usando tu client ID y secret."]}),"\n",(0,a.jsx)(n.p,{children:"Estos son los par\xe1metros clave a incluir en la solicitud:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"organization_id"}),": El ID de la organizaci\xf3n para la que deseas el token."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"scope"}),": Los permisos de organizaci\xf3n que deseas solicitar (por ejemplo, ",(0,a.jsx)(n.code,{children:"invite:member"}),", ",(0,a.jsx)(n.code,{children:"manage:billing"}),")."]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"Aqu\xed tienes un ejemplo no normativo de la solicitud de token usando el tipo de grant client credentials:"}),"\n",(0,a.jsx)(l.A,{organizationId:"your-organization-id",scope:"invite:member manage:billing"}),"\n",(0,a.jsx)(n.h3,{id:"validate-organization-tokens",children:"Valida los tokens de organizaci\xf3n"}),"\n",(0,a.jsx)(n.p,{children:"Los tokens de organizaci\xf3n emitidos por Logto (JWTs) contienen reclamos que tu app/interfaz/backend puede usar para aplicar el control de acceso a nivel de organizaci\xf3n."}),"\n",(0,a.jsx)(n.p,{children:"Cuando tu app reciba un token de organizaci\xf3n, deber\xedas:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Verificar la firma del token (usando los JWKs de Logto)."}),"\n",(0,a.jsxs)(n.li,{children:["Confirmar que el token no ha expirado (reclamo ",(0,a.jsx)(n.code,{children:"exp"}),")."]}),"\n",(0,a.jsxs)(n.li,{children:["Comprobar que el ",(0,a.jsx)(n.code,{children:"iss"})," (emisor) coincide con tu endpoint de Logto."]}),"\n",(0,a.jsxs)(n.li,{children:["Asegurarte de que el ",(0,a.jsx)(n.code,{children:"aud"})," (audiencia) coincide con el identificador de organizaci\xf3n formateado (por ejemplo, ",(0,a.jsx)(n.code,{children:"urn:logto:organization:{organization_id}"}),")."]}),"\n",(0,a.jsxs)(n.li,{children:["Separar el reclamo ",(0,a.jsx)(n.code,{children:"scope"})," (separado por espacios) y comprobar los permisos requeridos."]}),"\n"]}),"\n",(0,a.jsxs)(n.p,{children:["Para gu\xedas paso a paso y espec\xedficas por lenguaje, consulta ",(0,a.jsx)(n.a,{href:"/authorization/validate-access-tokens",children:"C\xf3mo validar tokens de acceso"}),"."]}),"\n",(0,a.jsx)(n.h2,{id:"best-practices-and-security-tips",children:"Mejores pr\xe1cticas y consejos de seguridad"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Nunca conf\xedes solo en la aplicaci\xf3n en la interfaz:"})," Siempre valida los permisos en el backend para acciones cr\xedticas."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Usa restricciones de audiencia:"})," Comprueba siempre el reclamo ",(0,a.jsx)(n.code,{children:"aud"})," para asegurarte de que el token es para la organizaci\xf3n prevista."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Mant\xe9n los permisos orientados al negocio:"})," Usa nombres claros que correspondan a acciones reales; concede solo lo necesario para cada rol de organizaci\xf3n."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Separa permisos de API y no API"})," cuando sea posible (pero ambos pueden estar en un solo rol)."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Revisa la plantilla de organizaci\xf3n regularmente"})," a medida que evoluciona tu producto."]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"faqs",children:"Preguntas frecuentes"}),"\n",(0,a.jsxs)(i,{children:[(0,a.jsx)("summary",{children:(0,a.jsx)(n.h3,{id:"can-i-mix-organization-and-non-organization-permissions-in-a-single-role",children:"\xbfPuedo mezclar permisos de organizaci\xf3n y no organizaci\xf3n en un solo rol?"})}),(0,a.jsx)(n.p,{children:"No, los permisos de organizaci\xf3n (incluidos los permisos de API a nivel de organizaci\xf3n) se definen por la plantilla de organizaci\xf3n y no pueden mezclarse con permisos globales de API. Sin embargo, puedes crear roles que incluyan tanto permisos de organizaci\xf3n como permisos de API a nivel de organizaci\xf3n."})]}),"\n",(0,a.jsxs)(i,{children:[(0,a.jsx)("summary",{children:(0,a.jsx)(n.h3,{id:"where-should-i-enforce-non-api-permissions",children:"\xbfD\xf3nde debo aplicar los permisos no API?"})}),(0,a.jsx)(n.p,{children:"Verifica los permisos no API tanto en la interfaz (para limitar funciones) como en la l\xf3gica del servidor para acciones sensibles."})]}),"\n",(0,a.jsx)(n.h2,{id:"further-reading",children:"M\xe1s informaci\xf3n"}),"\n",(0,a.jsx)(h,{href:"/authorization/validate-access-tokens",children:"C\xf3mo validar tokens de acceso"}),"\n",(0,a.jsx)(h,{href:"/developers/custom-token-claims",children:"Personalizaci\xf3n de reclamos de tokens"}),"\n",(0,a.jsx)(h,{href:"/use-cases/multi-tenancy/build-multi-tenant-saas-application",children:(0,a.jsx)(n.p,{children:"Caso de uso: Construir una aplicaci\xf3n SaaS multi-tenant"})})]})}function f(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(z,{...e})}):z(e)}function b(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},39088:(e,n,o)=>{o.d(n,{A:()=>r});var i=o(80173),a=o(25105);const r=e=>{let{resource:n,scope:o}=e;return(0,a.jsx)(i.A,{language:"http",children:`GET /oidc/auth?response_type=code\n&client_id=your-client-id\n&redirect_uri=https://your-app.com/callback\n&scope=openid profile offline_access ${o}\n&resource=${n}\n&code_challenge=abc123\n&code_challenge_method=S256\n&state=xyz\nHTTP/1.1\nHost: your.logto.endpoint\n`})}},78506:(e,n,o)=>{o.d(n,{A:()=>r});var i=o(80173),a=o(25105);const r=e=>{let{resource:n,organizationId:o,scope:r}=e;return(0,a.jsxs)(i.A,{language:"http",children:["POST /oidc/token HTTP/1.1\nHost: your.logto.endpoint\nContent-Type: application/x-www-form-urlencoded\nAuthorization: Basic base64(client_id:client_secret)\n\ngrant_type=client_credentials\n",n&&`&resource=${n}\n`,o&&`&organization_id=${o}\n`,`&scope=${r}\n`]})}},42372:(e,n,o)=>{o.d(n,{A:()=>r});var i=o(80173),a=o(25105);const r=e=>{let{grantType:n,resource:o,organizationId:r}=e;const s=[`grant_type=${n}`,"authorization_code"===n&&"code=authorization-code-received","authorization_code"===n&&"redirect_uri=https://your-app.com/callback","refresh_token"===n&&"refresh_token=your-refresh-token",o&&`resource=${o}`,r&&`organization_id=${r}`].filter(Boolean);return(0,a.jsx)(i.A,{language:"http",children:`POST /oidc/token HTTP/1.1\nHost: your.logto.endpoint\nContent-Type: application/x-www-form-urlencoded\nAuthorization: Basic base64(client_id:client_secret)\n\n${s.join("\n&")}`})}},38552:(e,n,o)=>{o.d(n,{A:()=>s});o(58101);var i=o(13526);const a={tabItem:"tabItem_dgSZ"};var r=o(25105);function s(e){let{children:n,hidden:o,className:s}=e;return(0,r.jsx)("div",{role:"tabpanel",className:(0,i.A)(a.tabItem,s),hidden:o,children:n})}},22002:(e,n,o)=>{o.d(n,{A:()=>k});var i=o(58101),a=o(13526),r=o(60755),s=o(55234),t=o(6635),l=o(4100),c=o(35661),d=o(42752);function u(e){return i.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,i.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function p(e){const{values:n,children:o}=e;return(0,i.useMemo)((()=>{const e=n??function(e){return u(e).map((e=>{let{props:{value:n,label:o,attributes:i,default:a}}=e;return{value:n,label:o,attributes:i,default:a}}))}(o);return function(e){const n=(0,c.XI)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,o])}function g(e){let{value:n,tabValues:o}=e;return o.some((e=>e.value===n))}function h(e){let{queryString:n=!1,groupId:o}=e;const a=(0,s.W6)(),r=function(e){let{queryString:n=!1,groupId:o}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!o)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return o??null}({queryString:n,groupId:o});return[(0,l.aZ)(r),(0,i.useCallback)((e=>{if(!r)return;const n=new URLSearchParams(a.location.search);n.set(r,e),a.replace({...a.location,search:n.toString()})}),[r,a])]}function m(e){const{defaultValue:n,queryString:o=!1,groupId:a}=e,r=p(e),[s,l]=(0,i.useState)((()=>function(e){let{defaultValue:n,tabValues:o}=e;if(0===o.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!g({value:n,tabValues:o}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${o.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const i=o.find((e=>e.default))??o[0];if(!i)throw new Error("Unexpected error: 0 tabValues");return i.value}({defaultValue:n,tabValues:r}))),[c,u]=h({queryString:o,groupId:a}),[m,j]=function(e){let{groupId:n}=e;const o=function(e){return e?`docusaurus.tab.${e}`:null}(n),[a,r]=(0,d.Dv)(o);return[a,(0,i.useCallback)((e=>{o&&r.set(e)}),[o,r])]}({groupId:a}),x=(()=>{const e=c??m;return g({value:e,tabValues:r})?e:null})();(0,t.A)((()=>{x&&l(x)}),[x]);return{selectedValue:s,selectValue:(0,i.useCallback)((e=>{if(!g({value:e,tabValues:r}))throw new Error(`Can't select invalid tab value=${e}`);l(e),u(e),j(e)}),[u,j,r]),tabValues:r}}var j=o(21929);const x={tabList:"tabList_osvQ",tabItem:"tabItem_dc4O"};var z=o(25105);function f(e){let{className:n,block:o,selectedValue:i,selectValue:s,tabValues:t}=e;const l=[],{blockElementScrollPositionUntilNextRender:c}=(0,r.a_)(),d=e=>{const n=e.currentTarget,o=l.indexOf(n),a=t[o].value;a!==i&&(c(n),s(a))},u=e=>{let n=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const o=l.indexOf(e.currentTarget)+1;n=l[o]??l[0];break}case"ArrowLeft":{const o=l.indexOf(e.currentTarget)-1;n=l[o]??l[l.length-1];break}}n?.focus()};return(0,z.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,a.A)("tabs",{"tabs--block":o},n),children:t.map((e=>{let{value:n,label:o,attributes:r}=e;return(0,z.jsx)("li",{role:"tab",tabIndex:i===n?0:-1,"aria-selected":i===n,ref:e=>{l.push(e)},onKeyDown:u,onClick:d,...r,className:(0,a.A)("tabs__item",x.tabItem,r?.className,{"tabs__item--active":i===n}),children:o??n},n)}))})}function b(e){let{lazy:n,children:o,selectedValue:r}=e;const s=(Array.isArray(o)?o:[o]).filter(Boolean);if(n){const e=s.find((e=>e.props.value===r));return e?(0,i.cloneElement)(e,{className:(0,a.A)("margin-top--md",e.props.className)}):null}return(0,z.jsx)("div",{className:"margin-top--md",children:s.map(((e,n)=>(0,i.cloneElement)(e,{key:n,hidden:e.props.value!==r})))})}function v(e){const n=m(e);return(0,z.jsxs)("div",{className:(0,a.A)("tabs-container",x.tabList),children:[(0,z.jsx)(f,{...n,...e}),(0,z.jsx)(b,{...n,...e})]})}function k(e){const n=(0,j.A)();return(0,z.jsx)(v,{...e,children:u(e.children)},String(n))}},55138:(e,n,o)=>{o.d(n,{A:()=>m});var i=o(28259),a=o(6097),r=o(58574),s=o(9484),t=o(76566),l=o(26346),c=o(17867),d=o(17510),u=o(13526),p=o(72355);const g={codeBlockContent:"codeBlockContent_m3Ux",codeBlockTitle:"codeBlockTitle_P25_",codeBlock:"codeBlock_qGQc",codeBlockStandalone:"codeBlockStandalone_zC50",codeBlockLines:"codeBlockLines_p187",codeBlockLinesWithNumbering:"codeBlockLinesWithNumbering_OFgW",buttonGroup:"buttonGroup_6DOT"};var h=o(25105);function m(e){let{children:n,className:o="",metastring:m,title:j,showLineNumbers:x,language:z}=e;const{prism:{defaultLanguage:f,magicComments:b}}=(0,i.p)(),v=function(e){return e?.toLowerCase()}(z??(0,r.Op)(o)??f),k=(0,a.A)(),A=(0,s.f)(),y=(0,r.wt)(m)||j,{lineClassNames:P,code:I}=(0,r.Li)(n,{metastring:m,language:v,magicComments:b}),w=x??(0,r._u)(m);return(0,h.jsxs)(t.A,{as:"div",className:(0,u.A)(o,v&&!o.includes(`language-${v}`)&&`language-${v}`),children:[y&&(0,h.jsx)("div",{className:g.codeBlockTitle,children:y}),(0,h.jsxs)("div",{className:g.codeBlockContent,children:[(0,h.jsx)(p.f4,{theme:k,code:I,language:v??"text",children:e=>{let{className:n,tokens:o,getLineProps:i,getTokenProps:a}=e;return(0,h.jsx)("pre",{ref:A.codeBlockRef,tabIndex:0,className:(0,u.A)(n,g.codeBlock,"thin-scrollbar"),children:(0,h.jsx)("code",{className:(0,u.A)(g.codeBlockLines,w&&g.codeBlockLinesWithNumbering),children:o.map(((e,n)=>(0,h.jsx)(c.A,{line:e,getLineProps:i,getTokenProps:a,classNames:P[n],showLineNumbers:w},n)))})})}}),(0,h.jsxs)("div",{className:g.buttonGroup,children:[(A.isEnabled||A.isCodeScrollable)&&(0,h.jsx)(d.A,{className:g.codeButton,isEnabled:A.isEnabled,onClick:()=>{A.toggle()}}),(0,h.jsx)(l.A,{className:g.codeButton,code:I})]})]})]})}},93855:(e,n,o)=>{o.d(n,{A:()=>i});const i=o.p+"assets/images/rbac-organization-permissions-3302be06221b4399f73ddceac8ca17e3.png"}}]);