"use strict";(self.webpackChunk_logto_docs=self.webpackChunk_logto_docs||[]).push([[89109],{77452:(e,o,n)=>{n.r(o),n.d(o,{assets:()=>c,contentTitle:()=>t,default:()=>u,frontMatter:()=>i,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"developers/custom-token-claims/README","title":"Reclamos de token personalizados","description":"Introducci\xf3n \\\\","source":"@site/i18n/es/docusaurus-plugin-content-docs/current/developers/custom-token-claims/README.mdx","sourceDirName":"developers/custom-token-claims","slug":"/developers/custom-token-claims/","permalink":"/es/developers/custom-token-claims/","draft":false,"unlisted":false,"editUrl":"https://github.com/logto-io/docs/tree/master/i18n/es/docusaurus-plugin-content-docs/current/developers/custom-token-claims/README.mdx","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"docsSidebar","previous":{"title":"Desarrollador","permalink":"/es/developers/"},"next":{"title":"Casos de uso comunes","permalink":"/es/developers/custom-token-claims/common-use-cases"}}');var a=n(25105),r=n(79621);const i={sidebar_position:2},t="Reclamos de token personalizados",c={},d=[{value:"Introducci\xf3n",id:"introduction",level:2},{value:"\xbfC\xf3mo funcionan los reclamos de token personalizados?",id:"how-do-custom-token-claims-work",level:2},{value:"Recursos relacionados",id:"related-resources",level:2}];function l(e){const o={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",mermaid:"mermaid",p:"p",strong:"strong",ul:"ul",...(0,r.R)(),...e.components},{Url:n}=o;return n||function(e,o){throw new Error("Expected "+(o?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Url",!0),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.header,{children:(0,a.jsx)(o.h1,{id:"reclamos-de-token-personalizados",children:"Reclamos de token personalizados"})}),"\n",(0,a.jsx)(o.h2,{id:"introduction",children:"Introducci\xf3n"}),"\n",(0,a.jsxs)(o.p,{children:["Los ",(0,a.jsx)(o.a,{href:"https://auth.wiki/access-token",children:"tokens de acceso"})," juegan un papel cr\xedtico en el proceso de autenticaci\xf3n y autorizaci\xf3n, llevando la informaci\xf3n de identidad del sujeto y permisos, y se pasan entre el ",(0,a.jsx)(o.a,{href:"/concepts/core-service",children:"servidor Logto"})," (sirve como servidor de autenticaci\xf3n o proveedor de identidad, IdP), tu servidor de servicio web (proveedor de recursos) y aplicaciones cliente (clientes)."]}),"\n",(0,a.jsxs)(o.p,{children:["Los ",(0,a.jsx)(o.a,{href:"https://auth.wiki/claim",children:"reclamos de token"})," son los pares clave-valor que proporcionan informaci\xf3n sobre una entidad o el propio token. Los reclamos pueden incluir informaci\xf3n del usuario, tiempo de expiraci\xf3n del token, permisos y otros metadatos que son relevantes para el proceso de autenticaci\xf3n (enlace a auth.wiki) y autorizaci\xf3n (enlace a auth.wiki)."]}),"\n",(0,a.jsx)(o.p,{children:"Hay dos tipos de tokens de acceso en Logto:"}),"\n",(0,a.jsxs)(o.ul,{children:["\n",(0,a.jsxs)(o.li,{children:[(0,a.jsx)(o.strong,{children:"JSON Web Token:"})," ",(0,a.jsx)(o.a,{href:"https://auth.wiki/jwt",children:"JSON Web Token (JWT)"})," es un formato popular que codifica reclamos de una manera que es segura y legible por los clientes. Reclamos comunes como ",(0,a.jsx)(o.code,{children:"sub"}),", ",(0,a.jsx)(o.code,{children:"iss"}),", ",(0,a.jsx)(o.code,{children:"aud"}),", etc., se utilizan de acuerdo con el protocolo OAuth 2.0 (Consulta ",(0,a.jsx)(o.a,{href:"https://datatracker.ietf.org/doc/html/rfc7519#section-4",children:"este enlace"})," para m\xe1s detalles). Los tokens JWT permiten a los consumidores acceder directamente a los reclamos sin pasos de validaci\xf3n adicionales. En Logto, los tokens de acceso se emiten en formato JWT por defecto cuando un cliente inicia solicitudes de autorizaci\xf3n de recursos o organizaciones espec\xedficas."]}),"\n",(0,a.jsxs)(o.li,{children:[(0,a.jsx)(o.strong,{children:"Token opaco (Opaque token):"})," Un ",(0,a.jsx)(o.a,{href:"http://localhost:3000/concepts/opaque-token",children:"token opaco"})," no es aut\xf3nomo y siempre requiere un paso de validaci\xf3n adicional a trav\xe9s del endpoint de ",(0,a.jsx)(o.a,{href:"https://auth.wiki/token-introspection",children:"introspecci\xf3n de token"}),". A pesar de su formato no transparente, los tokens opacos pueden ayudar a obtener reclamos y transmitirse de manera segura entre las partes. Los reclamos de token se almacenan de manera segura en el servidor Logto y son accesibles por las aplicaciones cliente a trav\xe9s del endpoint de introspecci\xf3n de token. Los tokens de acceso se emiten en formato opaco cuando no se incluye un recurso o una organizaci\xf3n espec\xedfica en la solicitud de autorizaci\xf3n. Estos tokens se utilizan principalmente para acceder al endpoint ",(0,a.jsx)(o.code,{children:"userinfo"})," de OIDC y otros prop\xf3sitos generales."]}),"\n"]}),"\n",(0,a.jsx)(o.p,{children:"En muchos casos, los reclamos est\xe1ndar no son suficientes para satisfacer las necesidades espec\xedficas de tus aplicaciones, ya sea que est\xe9s utilizando JWT o tokens opacos. Para abordar esto, Logto proporciona la flexibilidad de agregar reclamos personalizados dentro de los tokens de acceso. Con esta funci\xf3n, puedes incluir informaci\xf3n adicional para tu l\xf3gica de negocio, todo transmitido de manera segura en los tokens y recuperable a trav\xe9s de la introspecci\xf3n en el caso de los tokens opacos."}),"\n",(0,a.jsx)(o.h2,{id:"how-do-custom-token-claims-work",children:"\xbfC\xf3mo funcionan los reclamos de token personalizados?"}),"\n",(0,a.jsxs)(o.p,{children:["Logto te permite insertar reclamos personalizados en el ",(0,a.jsx)(o.code,{children:"token de acceso"})," a trav\xe9s de una funci\xf3n de callback ",(0,a.jsx)(o.code,{children:"getCustomJwtClaims"}),". Puedes proporcionar tu implementaci\xf3n de la funci\xf3n ",(0,a.jsx)(o.code,{children:"getCustomJwtClaims"})," para devolver un objeto de reclamos personalizados. El valor de retorno se fusionar\xe1 con la carga \xfatil original del token y se firmar\xe1 para generar el token de acceso final."]}),"\n",(0,a.jsx)(o.mermaid,{value:"sequenceDiagram\n  participant U as Usuario o agente de usuario\n  participant IdP as Logto (proveedor de identidad)\n  participant SP as Proveedor de Servicios\n\n  autonumber\n  U ->> IdP: Solicitud de autenticaci\xf3n (con credenciales)\n  activate IdP\n  IdP--\x3e>IdP: Validar credenciales y<br/>generar carga \xfatil de token de acceso en bruto\n  rect var(--mermaid-rect-fill)\n  note over IdP: Reclamos de token personalizados\n  IdP->>IdP: Ejecutar script de reclamos de token personalizados (`getCustomJwtClaims`) y<br/>obtener reclamos de token adicionales\n  end\n  IdP--\x3e>IdP: Fusionar carga \xfatil de token de acceso en bruto y reclamos de token adicionales\n  IdP--\x3e>IdP: Firmar y cifrar carga \xfatil para obtener token de acceso\n  deactivate IdP\n  IdP--\x3e>U: Emitir token de acceso en formato JWT\n  par Obtener servicio v\xeda API\n  U->>SP: solicitud de servicio (con token de acceso JWT)\n  SP--\x3e>U: respuesta de servicio\n  end"}),"\n",(0,a.jsx)(o.admonition,{type:"warning",children:(0,a.jsx)(o.p,{children:"Los reclamos de token integrados de Logto NO pueden ser sobrescritos o modificados. Los reclamos personalizados se agregar\xe1n al token como reclamos adicionales. Si alg\xfan reclamo personalizado entra en conflicto con los reclamos integrados, esos reclamos personalizados ser\xe1n ignorados."})}),"\n",(0,a.jsx)(o.h2,{id:"related-resources",children:"Recursos relacionados"}),"\n",(0,a.jsx)(n,{href:"https://blog.logto.io/glance-on-custom-jwt-access-token-claims",children:(0,a.jsx)(o.p,{children:"A\xf1ade reclamos personalizados para tokens de acceso JWT con Logto para mejorar tu autorizaci\xf3n"})})]})}function u(e={}){const{wrapper:o}={...(0,r.R)(),...e.components};return o?(0,a.jsx)(o,{...e,children:(0,a.jsx)(l,{...e})}):l(e)}},79621:(e,o,n)=>{n.d(o,{R:()=>i,x:()=>t});var s=n(58101);const a={},r=s.createContext(a);function i(e){const o=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(o):{...o,...e}}),[o,e])}function t(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),s.createElement(r.Provider,{value:o},e.children)}}}]);