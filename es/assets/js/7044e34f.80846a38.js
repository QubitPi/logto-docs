"use strict";(self.webpackChunk_logto_docs=self.webpackChunk_logto_docs||[]).push([[4],{53077:(e,o,s)=>{s.r(o),s.d(o,{assets:()=>d,contentTitle:()=>t,default:()=>u,frontMatter:()=>r,metadata:()=>n,toc:()=>c});const n=JSON.parse('{"id":"developers/webhooks/README","title":"Webhooks","description":"Logto Webhook proporciona notificaciones en tiempo real para varios eventos, incluyendo cambios en cuentas de usuario, roles, permisos, organizaciones, roles de organizaci\xf3n, permisos de organizaci\xf3n e interacciones de usuario.","source":"@site/i18n/es/docusaurus-plugin-content-docs/current/developers/webhooks/README.mdx","sourceDirName":"developers/webhooks","slug":"/developers/webhooks/","permalink":"/es/developers/webhooks/","draft":false,"unlisted":false,"editUrl":"https://github.com/logto-io/docs/tree/master/i18n/es/docusaurus-plugin-content-docs/current/developers/webhooks/README.mdx","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_position":5},"sidebar":"docsSidebar","previous":{"title":"Claves de firma","permalink":"/es/developers/signing-keys"},"next":{"title":"Configurar Webhooks","permalink":"/es/developers/webhooks/configure-webhooks"}}');var i=s(25105),a=s(79621);const r={sidebar_position:5},t="Webhooks",d={},c=[{value:"\xbfPor qu\xe9 usar Webhook?",id:"why-use-webhook",level:2},{value:"T\xe9rminos",id:"terms",level:2},{value:"Preguntas frecuentes",id:"faqs",level:2},{value:"\xbfLogto admite webhooks sincronizados?",id:"does-logto-support-synced-webhooks",level:3},{value:"\xbfC\xf3mo manejar el cambio de permisos de usuario?",id:"how-to-deal-with-user-permission-change",level:3},{value:"\xbfC\xf3mo depurar el timeout de un webhook?",id:"how-to-debug-webhook-timeout",level:3},{value:"\xbfPuedo obtener la direcci\xf3n IP del cliente desde los webhooks <code>PostSignIn</code>?",id:"can-i-get-the-client-ip-address-from-postsignin-webhooks",level:3},{value:"Recursos relacionados",id:"related-resources",level:2}];function l(e){const o={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",mermaid:"mermaid",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...e.components},{Details:s,Url:n}=o;return s||h("Details",!0),n||h("Url",!0),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.header,{children:(0,i.jsx)(o.h1,{id:"webhooks",children:"Webhooks"})}),"\n",(0,i.jsxs)(o.p,{children:["Logto ",(0,i.jsx)(o.a,{href:"https://auth.wiki/webhook",children:"Webhook"})," proporciona notificaciones en tiempo real para varios eventos, incluyendo cambios en cuentas de usuario, roles, permisos, organizaciones, roles de organizaci\xf3n, permisos de organizaci\xf3n e ",(0,i.jsx)(o.a,{href:"/end-user-flows",children:"interacciones de usuario"}),"."]}),"\n",(0,i.jsxs)(o.p,{children:["Cuando se activa un evento, Logto env\xeda una solicitud HTTP a la URL del endpoint que proporciones, conteniendo informaci\xf3n detallada sobre el evento, como el ID de usuario, nombre de usuario, correo electr\xf3nico y otros detalles relevantes (para m\xe1s informaci\xf3n sobre los datos incluidos en el payload y la cabecera, consulta ",(0,i.jsx)(o.a,{href:"/developers/webhooks/webhooks-request",children:"Solicitud de Webhook"}),"). Tu aplicaci\xf3n puede procesar esta solicitud y tomar acciones personalizadas, como enviar un correo electr\xf3nico o actualizar datos en la base de datos."]}),"\n",(0,i.jsx)(o.p,{children:"Continuamente a\xf1adimos m\xe1s eventos seg\xfan las necesidades de los usuarios. Si tienes requisitos espec\xedficos para tu negocio, por favor h\xe1znoslo saber."}),"\n",(0,i.jsx)(o.h2,{id:"why-use-webhook",children:"\xbfPor qu\xe9 usar Webhook?"}),"\n",(0,i.jsx)(o.p,{children:"Los Webhooks ofrecen comunicaci\xf3n en tiempo real entre aplicaciones, eliminando la necesidad de sondeo y permitiendo actualizaciones de datos inmediatas. Simplifican la integraci\xf3n de aplicaciones y la automatizaci\xf3n de flujos de trabajo sin c\xf3digo complejo ni APIs propietarias."}),"\n",(0,i.jsx)(o.p,{children:"Aqu\xed tienes algunos ejemplos de casos de uso comunes de Webhook para CIAM:"}),"\n",(0,i.jsxs)(o.ul,{children:["\n",(0,i.jsxs)(o.li,{children:[(0,i.jsx)(o.strong,{children:"Enviar correos electr\xf3nicos:"})," Configura un Webhook para enviar un correo de bienvenida a los nuevos usuarios al registrarse o notificar a los administradores cuando un usuario inicia sesi\xf3n desde un nuevo dispositivo o ubicaci\xf3n."]}),"\n",(0,i.jsxs)(o.li,{children:[(0,i.jsx)(o.strong,{children:"Enviar notificaciones:"})," Configura un Webhook para activar un asistente virtual con tu sistema CRM y proporcionar soporte al cliente en tiempo real cuando los usuarios se registran."]}),"\n",(0,i.jsxs)(o.li,{children:[(0,i.jsx)(o.strong,{children:"Realizar llamadas adicionales a API"}),": Configura un Webhook para verificar el acceso del usuario comprobando su dominio de correo electr\xf3nico o direcci\xf3n IP y luego utiliza la Management API de Logto para asignar los roles apropiados con permisos de recursos."]}),"\n",(0,i.jsxs)(o.li,{children:[(0,i.jsx)(o.strong,{children:"Sincronizaci\xf3n de datos:"})," Configura Webhook para mantener la aplicaci\xf3n actualizada sobre cambios como suspensiones o eliminaciones de cuentas de usuario."]}),"\n",(0,i.jsxs)(o.li,{children:[(0,i.jsx)(o.strong,{children:"Generar informes"}),": Configura un Webhook para recibir datos de actividad de inicio de sesi\xf3n de usuarios y util\xedzalos para crear informes sobre la participaci\xf3n o patrones de uso de los usuarios."]}),"\n"]}),"\n",(0,i.jsx)(o.h2,{id:"terms",children:"T\xe9rminos"}),"\n",(0,i.jsxs)(o.table,{children:[(0,i.jsx)(o.thead,{children:(0,i.jsxs)(o.tr,{children:[(0,i.jsx)(o.th,{children:"\xcdtem"}),(0,i.jsx)(o.th,{children:"Descripci\xf3n"})]})}),(0,i.jsxs)(o.tbody,{children:[(0,i.jsxs)(o.tr,{children:[(0,i.jsx)(o.td,{children:"Evento (Event)"}),(0,i.jsx)(o.td,{children:"Cuando se realiza una acci\xf3n espec\xedfica, se activar\xe1 un evento hook con un tipo espec\xedfico. Por ejemplo, Logto emitir\xe1 un evento hook PostRegister cuando el usuario finalice el proceso de registro y cree una nueva cuenta."})]}),(0,i.jsxs)(o.tr,{children:[(0,i.jsx)(o.td,{children:"Hook"}),(0,i.jsx)(o.td,{children:"Una o varias acciones que se enganchan a un evento espec\xedfico. La acci\xf3n puede ser llamar a una API, ejecutar fragmentos de c\xf3digo, etc."})]}),(0,i.jsxs)(o.tr,{children:[(0,i.jsx)(o.td,{children:"Webhook"}),(0,i.jsx)(o.td,{children:"Un subtipo de hook que indica llamar a una API con el payload del evento."})]}),(0,i.jsxs)(o.tr,{children:[(0,i.jsx)(o.td,{children:"Por ejemplo, si un desarrollador quiere enviar una notificaci\xf3n cuando un usuario inicia sesi\xf3n desde un nuevo dispositivo, puede a\xf1adir un webhook que llame a su API de servicio de seguridad en el evento PostSignIn."}),(0,i.jsx)(o.td,{})]})]})]}),"\n",(0,i.jsxs)(o.p,{children:["Aqu\xed tienes un ejemplo de c\xf3mo habilitar dos webhooks para el evento ",(0,i.jsx)(o.code,{children:"PostSignIn"})," en Logto:"]}),"\n",(0,i.jsx)(o.mermaid,{value:"graph LR\n  subgraph Logto\n    SF(Finalizaci\xf3n de inicio de sesi\xf3n)\n    PS(Post inicio de sesi\xf3n)\n    WH2(Web hook 2)\n    WH1(Web hook 1)\n  end\n\n  subgraph Servicio 2\n    E2(Endpoint)\n  end\n\n  subgraph Servicio 1\n    E1(Endpoint)\n  end\n\n  SF --\x3e|Disparar| PS\n  PS --\x3e WH1\n  PS --\x3e WH2\n  WH1 ---\x3e|Llamada POST a API| E1\n  WH2 ---\x3e|Llamada POST a API| E2\n"}),"\n",(0,i.jsx)(o.h2,{id:"faqs",children:"Preguntas frecuentes"}),"\n",(0,i.jsxs)(s,{children:[(0,i.jsx)("summary",{children:(0,i.jsx)(o.h3,{id:"does-logto-support-synced-webhooks",children:"\xbfLogto admite webhooks sincronizados?"})}),(0,i.jsx)(o.p,{children:"Aunque los webhooks sincronizados har\xedan que el flujo de inicio de sesi\xf3n del usuario fuera m\xe1s fluido, a\xfan no los admitimos (lo haremos en el futuro). Por lo tanto, los escenarios que dependen de webhooks sincronizados actualmente requieren diferentes soluciones alternativas. Si tienes alguna pregunta, no dudes en contactarnos."})]}),"\n",(0,i.jsxs)(s,{children:[(0,i.jsx)("summary",{children:(0,i.jsx)(o.h3,{id:"how-to-deal-with-user-permission-change",children:"\xbfC\xf3mo manejar el cambio de permisos de usuario?"})}),(0,i.jsxs)(o.p,{children:["Consulta la gu\xeda ",(0,i.jsx)(o.a,{href:"/authorization/global-api-resources/#optional-handle-user-permission-change",children:"Gestionar el cambio de permisos de usuario"}),"."]})]}),"\n",(0,i.jsxs)(s,{children:[(0,i.jsx)("summary",{children:(0,i.jsx)(o.h3,{id:"how-to-debug-webhook-timeout",children:"\xbfC\xf3mo depurar el timeout de un webhook?"})}),(0,i.jsx)(o.p,{children:"El endpoint que recibe los Webhooks debe devolver una respuesta 2xx lo m\xe1s r\xe1pido posible para indicar a Logto que el Webhook se ha recibido correctamente. Dado que los diferentes usuarios tienen l\xf3gicas de procesamiento muy distintas para los Webhooks, las tareas excesivamente complejas pueden tardar varios segundos, provocando que el Webhook de Logto agote el tiempo de espera. La mejor pr\xe1ctica es mantener tu propia cola de eventos; al recibir el Webhook de Logto, inserta el evento en la cola y devuelve una respuesta 2xx a Logto. Luego, deja que tu propio worker procese las tareas en la cola paso a paso. Si el worker encuentra un error, man\xe9jalo en tu propio servidor."})]}),"\n",(0,i.jsxs)(s,{children:[(0,i.jsx)("summary",{children:(0,i.jsxs)(o.h3,{id:"can-i-get-the-client-ip-address-from-postsignin-webhooks",children:["\xbfPuedo obtener la direcci\xf3n IP del cliente desde los webhooks ",(0,i.jsx)(o.code,{children:"PostSignIn"}),"?"]})}),(0,i.jsx)(o.p,{children:"S\xed, puedes obtener la direcci\xf3n IP, agentes de usuario, etc. en el payload del Webhook. Si necesitas informaci\xf3n que actualmente no est\xe1 soportada, puedes crear solicitudes de caracter\xedsticas en los issues de GitHub o contactarnos."})]}),"\n",(0,i.jsx)(o.h2,{id:"related-resources",children:"Recursos relacionados"}),"\n",(0,i.jsx)(n,{href:"https://blog.logto.io/webhooks-vs-polling",children:"Webhooks vs. polling"})]})}function u(e={}){const{wrapper:o}={...(0,a.R)(),...e.components};return o?(0,i.jsx)(o,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}function h(e,o){throw new Error("Expected "+(o?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},79621:(e,o,s)=>{s.d(o,{R:()=>r,x:()=>t});var n=s(58101);const i={},a=n.createContext(i);function r(e){const o=n.useContext(a);return n.useMemo((function(){return"function"==typeof e?e(o):{...o,...e}}),[o,e])}function t(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),n.createElement(a.Provider,{value:o},e.children)}}}]);