"use strict";(self.webpackChunk_logto_docs=self.webpackChunk_logto_docs||[]).push([[76741],{28818:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>t,contentTitle:()=>c,default:()=>u,frontMatter:()=>s,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"end-user-flows/organization-experience/invite-organization-members","title":"Invitar a miembros de la organizaci\xf3n","description":"Como una aplicaci\xf3n de m\xfaltiples organizaciones, un requisito com\xfan es invitar a miembros a tu organizaci\xf3n. En esta gu\xeda, te guiaremos a trav\xe9s de los pasos y detalles t\xe9cnicos para implementar esta funci\xf3n en tu aplicaci\xf3n.","source":"@site/i18n/es/docusaurus-plugin-content-docs/current/end-user-flows/organization-experience/invite-organization-members.mdx","sourceDirName":"end-user-flows/organization-experience","slug":"/end-user-flows/organization-experience/invite-organization-members","permalink":"/es/end-user-flows/organization-experience/invite-organization-members","draft":false,"unlisted":false,"editUrl":"https://github.com/logto-io/docs/tree/master/i18n/es/docusaurus-plugin-content-docs/current/end-user-flows/organization-experience/invite-organization-members.mdx","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"docsSidebar","previous":{"title":"Crear organizaci\xf3n","permalink":"/es/end-user-flows/organization-experience/create-organization"},"next":{"title":"Gesti\xf3n de organizaciones","permalink":"/es/end-user-flows/organization-experience/organization-management"}}');var o=a(25105),r=a(79621);const s={sidebar_position:2},c="Invitar a miembros de la organizaci\xf3n",t={},l=[{value:"Resumen del flujo",id:"flow-overview",level:2},{value:"Crear roles de organizaci\xf3n",id:"create-organization-roles",level:2},{value:"Configurar tu conector de correo electr\xf3nico",id:"configure-your-email-connector",level:2},{value:"Manejar invitaciones con Logto Management API",id:"handle-invitations-with-logto-management-api",level:2},{value:"Usar control de acceso basado en roles de organizaci\xf3n (RBAC) para gestionar permisos de usuario",id:"use-organization-role-based-access-control-rbac-to-manage-user-permissions",level:2},{value:"Manejar actualizaciones de alcance en tokens de organizaci\xf3n",id:"handle-scope-updates-in-organization-tokens",level:2},{value:"Revocar alcances existentes",id:"revoking-existing-scopes",level:3},{value:"Otorgar nuevos alcances",id:"granting-new-scopes",level:3},{value:"Otorgar nuevos alcances que ya est\xe1n definidos en tu sistema de autenticaci\xf3n",id:"grant-new-scopes-that-already-defined-in-your-auth-system",level:4},{value:"Otorgar nuevos alcances que se introducen recientemente en tu sistema de autenticaci\xf3n",id:"grant-new-scopes-that-are-newly-introduced-your-auth-system",level:4},{value:"Implementar verificaci\xf3n de permisos en tiempo real y actualizar el token de organizaci\xf3n",id:"implement-real-time-permission-check-and-update-organization-token",level:3},{value:"Recursos relacionados",id:"related-resources",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",mermaid:"mermaid",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components},{Url:a}=n;return a||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Url",!0),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"invitar-a-miembros-de-la-organizaci\xf3n",children:"Invitar a miembros de la organizaci\xf3n"})}),"\n",(0,o.jsx)(n.p,{children:"Como una aplicaci\xf3n de m\xfaltiples organizaciones, un requisito com\xfan es invitar a miembros a tu organizaci\xf3n. En esta gu\xeda, te guiaremos a trav\xe9s de los pasos y detalles t\xe9cnicos para implementar esta funci\xf3n en tu aplicaci\xf3n."}),"\n",(0,o.jsx)(n.h2,{id:"flow-overview",children:"Resumen del flujo"}),"\n",(0,o.jsx)(n.p,{children:"El proceso general se ilustra en el siguiente diagrama:"}),"\n",(0,o.jsx)(n.mermaid,{value:"sequenceDiagram\n\tParticipant U as Usuario final\n  Participant A as Administrador de la organizaci\xf3n\n  Participant C as Tu aplicaci\xf3n de m\xfaltiples organizaciones\n\tParticipant L as Logto\n\n  A ->> C: Introducir correo electr\xf3nico del invitado y rol\n  C ->> L: Crear invitaci\xf3n de organizaci\xf3n con Management API\n  L --\x3e> C: Devolver ID de invitaci\xf3n\n  C ->> C: Componer enlace de invitaci\xf3n con ID de invitaci\xf3n\n  C ->> L: Solicitar env\xedo de correo electr\xf3nico de invitaci\xf3n con enlace de invitaci\xf3n\n  L --\x3e> U: Enviar correo electr\xf3nico de invitaci\xf3n con enlace de invitaci\xf3n\n  U ->> C: Hacer clic en el enlace de invitaci\xf3n y navegar a tu p\xe1gina de destino,<br /> aceptar o rechazar la invitaci\xf3n\n  C ->> L: Actualizar estado de la invitaci\xf3n con Management API"}),"\n",(0,o.jsx)(n.h2,{id:"create-organization-roles",children:"Crear roles de organizaci\xf3n"}),"\n",(0,o.jsxs)(n.p,{children:["Antes de invitar a miembros a tu organizaci\xf3n, necesitas crear roles de organizaci\xf3n. Consulta la gu\xeda ",(0,o.jsx)(n.a,{href:"/authorization/organization-template/configure-organization-template",children:"Configurar plantilla de organizaci\xf3n"})," para obtener instrucciones detalladas."]}),"\n",(0,o.jsxs)(n.p,{children:["En esta gu\xeda, vamos a crear dos roles t\xedpicos de organizaci\xf3n: ",(0,o.jsx)(n.code,{children:"admin"})," y ",(0,o.jsx)(n.code,{children:"member"}),"."]}),"\n",(0,o.jsxs)(n.p,{children:["El rol ",(0,o.jsx)(n.code,{children:"admin"})," tiene acceso completo a todos los recursos de la organizaci\xf3n, mientras que el rol ",(0,o.jsx)(n.code,{children:"member"})," tiene acceso limitado. Por ejemplo, cada rol puede tener un conjunto de permisos como sigue:"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Rol ",(0,o.jsx)(n.code,{children:"admin"}),":","\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"read:data"})," - Acceso de lectura a todos los recursos de datos de la organizaci\xf3n."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"write:data"})," - Acceso de escritura a todos los recursos de datos de la organizaci\xf3n."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"delete:data"})," - Acceso de eliminaci\xf3n a todos los recursos de datos de la organizaci\xf3n."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"invite:member"})," - Invitar a miembros a la organizaci\xf3n."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"manage:member"})," - Gestionar miembros en la organizaci\xf3n."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"delete:member"})," - Eliminar miembros de la organizaci\xf3n."]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["Rol ",(0,o.jsx)(n.code,{children:"member"}),":","\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"read:data"})," - Acceso de lectura a todos los recursos de datos de la organizaci\xf3n."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"write:data"})," - Acceso de escritura a todos los recursos de datos de la organizaci\xf3n."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"invite:member"})," - Invitar a miembros a la organizaci\xf3n."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:["Esto se puede hacer f\xe1cilmente en el ",(0,o.jsx)(n.a,{href:"https://cloud.logto.io/",children:"Logto Console"}),". Tambi\xe9n puedes usar el ",(0,o.jsx)(n.a,{href:"https://openapi.logto.io/operation/operation-createorganizationrole",children:"Logto Management API"})," para crear roles de organizaci\xf3n program\xe1ticamente."]}),"\n",(0,o.jsx)(n.h2,{id:"configure-your-email-connector",children:"Configurar tu conector de correo electr\xf3nico"}),"\n",(0,o.jsxs)(n.p,{children:["Dado que las invitaciones se env\xedan por correo electr\xf3nico, aseg\xfarate de que tu ",(0,o.jsx)(n.a,{href:"/connectors/email-connectors",children:"conector de correo electr\xf3nico"})," est\xe9 configurado correctamente. Para enviar invitaciones, necesitas configurar un nuevo tipo de uso de ",(0,o.jsx)(n.a,{href:"/connectors/email-connectors/email-templates#email-template-types",children:"plantilla de correo electr\xf3nico"})," - ",(0,o.jsx)(n.code,{children:"OrganizationInvitation"}),"."]}),"\n",(0,o.jsxs)(n.p,{children:["A continuaci\xf3n se muestra una plantilla de correo electr\xf3nico de ejemplo para el tipo de uso ",(0,o.jsx)(n.code,{children:"OrganizationInvitation"}),":"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-json",children:'{\n  "subject": "Bienvenido a mi organizaci\xf3n",\n  "content": "<p>\xdanete a mi organizaci\xf3n mediante este <a href=\\"{{link}}\\" target=\\"_blank\\">enlace</a>.</p>",\n  "usageType": "OrganizationInvitation",\n  "type": "text/html"\n}\n'})}),"\n",(0,o.jsxs)(n.p,{children:["El marcador ",(0,o.jsx)(n.code,{children:"{{link}}"})," en el contenido del correo electr\xf3nico ser\xe1 reemplazado con el enlace de invitaci\xf3n real al enviar el correo electr\xf3nico. En esta gu\xeda, digamos que ser\xeda ",(0,o.jsx)(n.code,{children:"https://your-app.com/invitation/accept/{your-invitation-id}"}),"."]}),"\n",(0,o.jsx)(n.admonition,{type:"note",children:(0,o.jsxs)(n.p,{children:['El "servicio de correo electr\xf3nico de Logto" incorporado en Logto Cloud no admite el tipo de uso ',(0,o.jsx)(n.code,{children:"OrganizationInvitation"})," en este momento. En su lugar, necesitas configurar tu conector de correo electr\xf3nico (por ejemplo, Sendgrid) y configurar la plantilla ",(0,o.jsx)(n.code,{children:"OrganizationInvitation"}),"."]})}),"\n",(0,o.jsx)(n.h2,{id:"handle-invitations-with-logto-management-api",children:"Manejar invitaciones con Logto Management API"}),"\n",(0,o.jsx)(n.admonition,{type:"note",children:(0,o.jsxs)(n.p,{children:["Si a\xfan no has configurado el Logto Management API, consulta ",(0,o.jsx)(n.a,{href:"/integrate-logto/interact-with-management-api",children:"Interactuar con Management API"})," para obtener detalles."]})}),"\n",(0,o.jsx)(n.p,{children:"Hemos proporcionado un conjunto de APIs de Management relacionadas con invitaciones en la funci\xf3n de organizaciones. Con estas APIs, puedes:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"POST /api/organization-invitations"})," crear una invitaci\xf3n de organizaci\xf3n con un rol de organizaci\xf3n asignado."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"POST /api/organization-invitations/{id}/message"})," enviar la invitaci\xf3n de organizaci\xf3n al invitado por correo electr\xf3nico.\nNota: Esta carga \xfatil de la API admite una propiedad ",(0,o.jsx)(n.code,{children:"link"}),", puedes componer tu enlace de invitaci\xf3n basado en el ID de invitaci\xf3n. Por ejemplo:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-json",children:'{\n  "link": "https://your-app.com/invitation/accept/{your-invitation-id}"\n}\n'})}),"\n",(0,o.jsx)(n.p,{children:"En consecuencia, necesitas implementar una p\xe1gina de destino cuando tu invitado navegue a trav\xe9s del enlace de invitaci\xf3n a tu aplicaci\xf3n."}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"GET /api/organization-invitations"})," & ",(0,o.jsx)(n.code,{children:"GET /api/organization-invitations/{id}"})," obtener todas tus invitaciones o una espec\xedfica por ID.\nEn tu p\xe1gina de destino, usa estas APIs para listar todas las invitaciones o los detalles de una invitaci\xf3n que un usuario ha recibido."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"PUT /api/organization-invitations/{id}/status"})," aceptar o rechazar la invitaci\xf3n actualizando el estado de la invitaci\xf3n.\nUsa esta API para manejar la respuesta del usuario a la invitaci\xf3n."]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:['Ten en cuenta que todas las APIs listadas arriba requieren un "token de organizaci\xf3n" v\xe1lido. ',(0,o.jsx)(n.a,{href:"/authorization/organization-template/protect-organization-resources#step-2-fetch-organization-token",children:"Consulta esta gu\xeda"})," para aprender c\xf3mo obtener el token de organizaci\xf3n."]}),"\n",(0,o.jsx)(n.h2,{id:"use-organization-role-based-access-control-rbac-to-manage-user-permissions",children:"Usar control de acceso basado en roles de organizaci\xf3n (RBAC) para gestionar permisos de usuario"}),"\n",(0,o.jsx)(n.p,{children:"Con las configuraciones anteriores, ahora puedes enviar invitaciones por correo electr\xf3nico, y los invitados pueden unirse a la organizaci\xf3n con el rol asignado."}),"\n",(0,o.jsx)(n.p,{children:"Los usuarios con diferentes roles de organizaci\xf3n tendr\xe1n diferentes alcances (permisos) en sus tokens de organizaci\xf3n. Por lo tanto, tanto tu aplicaci\xf3n cliente como los servicios de backend deben verificar estos alcances para determinar las caracter\xedsticas visibles y las acciones permitidas."}),"\n",(0,o.jsx)(n.h2,{id:"handle-scope-updates-in-organization-tokens",children:"Manejar actualizaciones de alcance en tokens de organizaci\xf3n"}),"\n",(0,o.jsx)(n.admonition,{type:"note",children:(0,o.jsxs)(n.p,{children:["Aseg\xfarate de haber integrado la organizaci\xf3n con tu aplicaci\xf3n. Consulta la ",(0,o.jsx)(n.a,{href:"/authorization/organization-template/protect-organization-resources",children:"gu\xeda de integraci\xf3n"})," para obtener m\xe1s detalles."]})}),"\n",(0,o.jsx)(n.p,{children:"Gestionar actualizaciones de alcance en tokens de organizaci\xf3n implica:"}),"\n",(0,o.jsx)(n.h3,{id:"revoking-existing-scopes",children:"Revocar alcances existentes"}),"\n",(0,o.jsx)(n.p,{children:"Por ejemplo, degradar a un administrador a un miembro no administrador deber\xeda eliminar alcances del usuario. En tal caso, puedes simplemente borrar el token de organizaci\xf3n en cach\xe9 y obtener uno nuevo con el token de actualizaci\xf3n. Los alcances reducidos se reflejar\xe1n inmediatamente en el nuevo token de organizaci\xf3n emitido."}),"\n",(0,o.jsx)(n.h3,{id:"granting-new-scopes",children:"Otorgar nuevos alcances"}),"\n",(0,o.jsx)(n.p,{children:"Esto se puede dividir en dos escenarios:"}),"\n",(0,o.jsx)(n.h4,{id:"grant-new-scopes-that-already-defined-in-your-auth-system",children:"Otorgar nuevos alcances que ya est\xe1n definidos en tu sistema de autenticaci\xf3n"}),"\n",(0,o.jsx)(n.p,{children:"Similar a revocar alcances, si el nuevo alcance otorgado ya est\xe1 registrado con el servidor de autenticaci\xf3n, puedes simplemente emitir un nuevo token de organizaci\xf3n, y los nuevos alcances se reflejar\xe1n inmediatamente."}),"\n",(0,o.jsx)(n.h4,{id:"grant-new-scopes-that-are-newly-introduced-your-auth-system",children:"Otorgar nuevos alcances que se introducen recientemente en tu sistema de autenticaci\xf3n"}),"\n",(0,o.jsxs)(n.p,{children:["En este caso, necesitas desencadenar un proceso de re-inicio de sesi\xf3n o re-consentimiento para actualizar el token de organizaci\xf3n del usuario. Por ejemplo, llamando al m\xe9todo ",(0,o.jsx)(n.code,{children:"signIn"})," en Logto SDK."]}),"\n",(0,o.jsxs)(n.p,{children:["Aprende m\xe1s sobre ",(0,o.jsx)(n.a,{href:"/authorization/organization-template/protect-organization-resources/#fetch-the-organization-token",children:"emitir un token de organizaci\xf3n"}),"."]}),"\n",(0,o.jsx)(n.h3,{id:"implement-real-time-permission-check-and-update-organization-token",children:"Implementar verificaci\xf3n de permisos en tiempo real y actualizar el token de organizaci\xf3n"}),"\n",(0,o.jsx)(n.p,{children:"Logto proporciona Management API para obtener permisos de usuario en tiempo real en la organizaci\xf3n."}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"GET /api/organizations/{id}/users/{userId}/scopes"})," (",(0,o.jsx)(n.a,{href:"https://openapi.logto.io/operation/operation-listorganizationuserscopes",children:"Referencias de API"}),")"]}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"Luego puedes comparar los alcances en el token de organizaci\xf3n del usuario con los permisos en tiempo real para determinar si el usuario ha sido promovido o degradado."}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Si es degradado, puedes simplemente borrar el token de organizaci\xf3n en cach\xe9 y el SDK emitir\xe1 autom\xe1ticamente uno nuevo con los alcances actualizados."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"const { clearAccessToken } = useLogto();\n\n...\n// Si los alcances en tiempo real obtenidos tienen menos alcances que los alcances del token de organizaci\xf3n\nawait clearAccessToken();\n"})}),"\n",(0,o.jsx)(n.p,{children:"Esto no requiere un proceso de re-inicio de sesi\xf3n o re-consentimiento. Los nuevos tokens de organizaci\xf3n se emitir\xe1n autom\xe1ticamente por el Logto SDK."}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Si se introduce un nuevo alcance en tu sistema de autenticaci\xf3n, desencadena un proceso de re-inicio de sesi\xf3n o re-consentimiento para actualizar el token de organizaci\xf3n del usuario. Tomemos el SDK de React como ejemplo:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"const { clearAllTokens, signIn } = useLogto();\n\n...\n// Si los alcances en tiempo real obtenidos tienen alcances reci\xe9n asignados que los alcances del token de organizaci\xf3n\nawait clearAllTokens();\nsignIn({\n  redirectUri: '<your-sign-in-redirect-uri>',\n  prompt: 'consent',\n});\n"})}),"\n",(0,o.jsx)(n.p,{children:"El c\xf3digo anterior desencadenar\xe1 una navegaci\xf3n de p\xe1gina a la pantalla de consentimiento y redirigir\xe1 autom\xe1ticamente de regreso a tu aplicaci\xf3n, con los alcances actualizados en el token de organizaci\xf3n del usuario."}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"related-resources",children:"Recursos relacionados"}),"\n",(0,o.jsx)(a,{href:"https://blog.logto.io/implement-user-collaboration-in-your-app",children:(0,o.jsx)(n.p,{children:"C\xf3mo implementamos la colaboraci\xf3n de usuarios dentro de una aplicaci\xf3n multi-tenant"})})]})}function u(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},79621:(e,n,a)=>{a.d(n,{R:()=>s,x:()=>c});var i=a(58101);const o={},r=i.createContext(o);function s(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);