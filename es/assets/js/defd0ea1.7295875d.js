"use strict";(self.webpackChunk_logto_docs=self.webpackChunk_logto_docs||[]).push([[3915],{85713:(e,n,i)=>{i.d(n,{Ay:()=>t,RM:()=>o});var r=i(25105),s=i(79621);const o=[];function a(e){const n={p:"p",...(0,s.R)(),...e.components};return(0,r.jsxs)(n.p,{children:["Es posible que encuentres que falta alguna informaci\xf3n del usuario en el objeto devuelto desde ",(0,r.jsx)("code",{children:e.method}),". Esto se debe a que OAuth 2.0 y OpenID Connect (OIDC) est\xe1n dise\xf1ados para seguir el principio de privilegio m\xednimo (PoLP), y Logto est\xe1 construido sobre estos est\xe1ndares."]})}function t(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},75846:(e,n,i)=>{i.d(n,{Ay:()=>t,RM:()=>o});var r=i(25105),s=i(79621);const o=[];function a(e){const{Url:n}={...(0,s.R)(),...e.components};return n||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Url",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n,{href:"/end-user-flows",children:" Flujos de usuario final: flujos de autenticaci\xf3n, flujos de cuenta y flujos de organizaci\xf3n "}),"\n",(0,r.jsx)(n,{href:"/connectors",children:" Configurar conectores "}),"\n",(0,r.jsx)(n,{href:"/authorization",children:" Autorizaci\xf3n (Authorization) "})]})}function t(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},8358:(e,n,i)=>{i.d(n,{Ay:()=>t,RM:()=>o});var r=i(25105),s=i(79621);const o=[{value:"Sobre el inicio de sesi\xf3n basado en redirecci\xf3n",id:"regarding-redirect-based-sign-in",level:3}];function a(e){const n={a:"a",h3:"h3",li:"li",ol:"ol",p:"p",...(0,s.R)(),...e.components},{Details:i,MainSiteUrl:o}=n;return i||c("Details",!0),o||c("MainSiteUrl",!0),(0,r.jsxs)(i,{children:[(0,r.jsx)("summary",{children:(0,r.jsx)(n.h3,{id:"regarding-redirect-based-sign-in",children:"Sobre el inicio de sesi\xf3n basado en redirecci\xf3n"})}),(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Este proceso de autenticaci\xf3n sigue el protocolo ",(0,r.jsx)(n.a,{href:"https://openid.net/specs/openid-connect-core-1_0.html",children:"OpenID Connect (OIDC)"}),", y Logto aplica medidas de seguridad estrictas para proteger el inicio de sesi\xf3n del usuario."]}),"\n",(0,r.jsx)(n.li,{children:"Si tienes m\xfaltiples aplicaciones, puedes usar el mismo proveedor de identidad (Logto). Una vez que el usuario inicia sesi\xf3n en una aplicaci\xf3n, Logto completar\xe1 autom\xe1ticamente el proceso de inicio de sesi\xf3n cuando el usuario acceda a otra aplicaci\xf3n."}),"\n"]}),(0,r.jsxs)(n.p,{children:["Para aprender m\xe1s sobre la l\xf3gica y los beneficios del inicio de sesi\xf3n basado en redirecci\xf3n, consulta ",(0,r.jsx)(o,{href:"/concepts/sign-in-experience",children:"Experiencia de inicio de sesi\xf3n de Logto explicada"}),"."]})]})}function t(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}function c(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},76818:(e,n,i)=>{i.d(n,{Ay:()=>t,RM:()=>o});var r=i(25105),s=i(79621);const o=[];function a(e){const n={a:"a",admonition:"admonition",code:"code",hr:"hr",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"Aqu\xed est\xe1 la lista de alcances (Scopes) soportados y los reclamos (Claims) correspondientes:"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"openid"})})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Nombre del reclamo"}),(0,r.jsx)(n.th,{children:"Tipo"}),(0,r.jsx)(n.th,{children:"Descripci\xf3n"}),(0,r.jsx)(n.th,{children:"\xbfNecesita userinfo?"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"sub"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"string"})}),(0,r.jsx)(n.td,{children:"El identificador \xfanico del usuario"}),(0,r.jsx)(n.td,{children:"No"})]})})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"profile"})})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Nombre del reclamo"}),(0,r.jsx)(n.th,{children:"Tipo"}),(0,r.jsx)(n.th,{children:"Descripci\xf3n"}),(0,r.jsx)(n.th,{children:"\xbfNecesita userinfo?"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"name"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"string"})}),(0,r.jsx)(n.td,{children:"El nombre completo del usuario"}),(0,r.jsx)(n.td,{children:"No"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"username"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"string"})}),(0,r.jsx)(n.td,{children:"El nombre de usuario del usuario"}),(0,r.jsx)(n.td,{children:"No"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"picture"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"string"})}),(0,r.jsx)(n.td,{children:"URL de la foto de perfil del Usuario Final. Esta URL DEBE referirse a un archivo de imagen (por ejemplo, un archivo de imagen PNG, JPEG o GIF), en lugar de a una p\xe1gina web que contenga una imagen. Ten en cuenta que esta URL DEBER\xcdA referirse espec\xedficamente a una foto de perfil del Usuario Final adecuada para mostrar al describir al Usuario Final, en lugar de una foto arbitraria tomada por el Usuario Final."}),(0,r.jsx)(n.td,{children:"No"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"created_at"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"number"})}),(0,r.jsx)(n.td,{children:"Momento en que se cre\xf3 el Usuario Final. El tiempo se representa como el n\xfamero de milisegundos desde la \xe9poca Unix (1970-01-01T00:00:00Z)."}),(0,r.jsx)(n.td,{children:"No"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"updated_at"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"number"})}),(0,r.jsx)(n.td,{children:"Momento en que la informaci\xf3n del Usuario Final fue actualizada por \xfaltima vez. El tiempo se representa como el n\xfamero de milisegundos desde la \xe9poca Unix (1970-01-01T00:00:00Z)."}),(0,r.jsx)(n.td,{children:"No"})]})]})]}),"\n",(0,r.jsxs)(n.p,{children:["Otros ",(0,r.jsx)(n.a,{href:"https://openid.net/specs/openid-connect-core-1_0.html#StandardClaims",children:"reclamos est\xe1ndar"})," incluyen ",(0,r.jsx)(n.code,{children:"family_name"}),", ",(0,r.jsx)(n.code,{children:"given_name"}),", ",(0,r.jsx)(n.code,{children:"middle_name"}),", ",(0,r.jsx)(n.code,{children:"nickname"}),", ",(0,r.jsx)(n.code,{children:"preferred_username"}),", ",(0,r.jsx)(n.code,{children:"profile"}),", ",(0,r.jsx)(n.code,{children:"website"}),", ",(0,r.jsx)(n.code,{children:"gender"}),", ",(0,r.jsx)(n.code,{children:"birthdate"}),", ",(0,r.jsx)(n.code,{children:"zoneinfo"}),", y ",(0,r.jsx)(n.code,{children:"locale"})," tambi\xe9n se incluir\xe1n en el alcance ",(0,r.jsx)(n.code,{children:"profile"})," sin la necesidad de solicitar el endpoint de userinfo. Una diferencia en comparaci\xf3n con los reclamos anteriores es que estos reclamos solo se devolver\xe1n cuando sus valores no est\xe9n vac\xedos, mientras que los reclamos anteriores devolver\xe1n ",(0,r.jsx)(n.code,{children:"null"})," si los valores est\xe1n vac\xedos."]}),"\n",(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsxs)(n.p,{children:["A diferencia de los reclamos est\xe1ndar, los reclamos ",(0,r.jsx)(n.code,{children:"created_at"})," y ",(0,r.jsx)(n.code,{children:"updated_at"})," utilizan milisegundos en lugar de segundos."]})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"email"})})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Nombre del reclamo"}),(0,r.jsx)(n.th,{children:"Tipo"}),(0,r.jsx)(n.th,{children:"Descripci\xf3n"}),(0,r.jsx)(n.th,{children:"\xbfNecesita userinfo?"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"email"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"string"})}),(0,r.jsx)(n.td,{children:"La direcci\xf3n de correo electr\xf3nico del usuario"}),(0,r.jsx)(n.td,{children:"No"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"email_verified"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"boolean"})}),(0,r.jsx)(n.td,{children:"Si la direcci\xf3n de correo electr\xf3nico ha sido verificada"}),(0,r.jsx)(n.td,{children:"No"})]})]})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"phone"})})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Nombre del reclamo"}),(0,r.jsx)(n.th,{children:"Tipo"}),(0,r.jsx)(n.th,{children:"Descripci\xf3n"}),(0,r.jsx)(n.th,{children:"\xbfNecesita userinfo?"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"phone_number"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"string"})}),(0,r.jsx)(n.td,{children:"El n\xfamero de tel\xe9fono del usuario"}),(0,r.jsx)(n.td,{children:"No"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"phone_number_verified"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"boolean"})}),(0,r.jsx)(n.td,{children:"Si el n\xfamero de tel\xe9fono ha sido verificado"}),(0,r.jsx)(n.td,{children:"No"})]})]})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"address"})})}),"\n",(0,r.jsxs)(n.p,{children:["Por favor, consulta el ",(0,r.jsx)(n.a,{href:"https://openid.net/specs/openid-connect-core-1_0.html#AddressClaim",children:"OpenID Connect Core 1.0"})," para los detalles del reclamo de direcci\xf3n."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"custom_data"})})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Nombre del reclamo"}),(0,r.jsx)(n.th,{children:"Tipo"}),(0,r.jsx)(n.th,{children:"Descripci\xf3n"}),(0,r.jsx)(n.th,{children:"\xbfNecesita userinfo?"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"custom_data"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"object"})}),(0,r.jsx)(n.td,{children:"Los datos personalizados del usuario"}),(0,r.jsx)(n.td,{children:"S\xed"})]})})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"identities"})})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Nombre del reclamo"}),(0,r.jsx)(n.th,{children:"Tipo"}),(0,r.jsx)(n.th,{children:"Descripci\xf3n"}),(0,r.jsx)(n.th,{children:"\xbfNecesita userinfo?"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"identities"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"object"})}),(0,r.jsx)(n.td,{children:"Las identidades vinculadas del usuario"}),(0,r.jsx)(n.td,{children:"S\xed"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"sso_identities"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"array"})}),(0,r.jsx)(n.td,{children:"Las identidades SSO vinculadas del usuario"}),(0,r.jsx)(n.td,{children:"S\xed"})]})]})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"roles"})})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Nombre del reclamo"}),(0,r.jsx)(n.th,{children:"Tipo"}),(0,r.jsx)(n.th,{children:"Descripci\xf3n"}),(0,r.jsx)(n.th,{children:"\xbfNecesita userinfo?"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"roles"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"string[]"})}),(0,r.jsx)(n.td,{children:"Los roles del usuario"}),(0,r.jsx)(n.td,{children:"No"})]})})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"urn:logto:scope:organizations"})})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Nombre del reclamo"}),(0,r.jsx)(n.th,{children:"Tipo"}),(0,r.jsx)(n.th,{children:"Descripci\xf3n"}),(0,r.jsx)(n.th,{children:"\xbfNecesita userinfo?"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"organizations"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"string[]"})}),(0,r.jsx)(n.td,{children:"Los IDs de las organizaciones a las que pertenece el usuario"}),(0,r.jsx)(n.td,{children:"No"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"organization_data"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"object[]"})}),(0,r.jsx)(n.td,{children:"Los datos de las organizaciones a las que pertenece el usuario"}),(0,r.jsx)(n.td,{children:"S\xed"})]})]})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"urn:logto:scope:organization_roles"})})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Nombre del reclamo"}),(0,r.jsx)(n.th,{children:"Tipo"}),(0,r.jsx)(n.th,{children:"Descripci\xf3n"}),(0,r.jsx)(n.th,{children:"\xbfNecesita userinfo?"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"organization_roles"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"string[]"})}),(0,r.jsxs)(n.td,{children:["Los roles de las organizaciones a las que pertenece el usuario con el formato ",(0,r.jsx)(n.code,{children:"<organization_id>:<role_name>"})]}),(0,r.jsx)(n.td,{children:"No"})]})})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsxs)(n.p,{children:['Considerando el rendimiento y el tama\xf1o de los datos, si "\xbfNecesita userinfo?" es "S\xed", significa que el reclamo no aparecer\xe1 en el token de ID, pero se devolver\xe1 en la respuesta del ',(0,r.jsx)(n.a,{href:"https://openid.net/specs/openid-connect-core-1_0.html#UserInfo",children:"endpoint de userinfo"}),"."]})]})}function t(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},16118:(e,n,i)=>{i.d(n,{Ay:()=>t,RM:()=>o});var r=i(25105),s=i(79621);const o=[];function a(e){const n={admonition:"admonition",code:"code",mermaid:"mermaid",p:"p",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"De forma predeterminada, se devuelven reclamos limitados. Si necesitas m\xe1s informaci\xf3n, puedes solicitar alcances adicionales para acceder a m\xe1s reclamos."}),"\n",(0,r.jsx)(n.admonition,{type:"info",children:(0,r.jsx)(n.p,{children:'Un "reclamo (Claim)" es una afirmaci\xf3n hecha sobre un sujeto; un "alcance (Scope)" es un grupo de reclamos. En el caso actual, un reclamo es una pieza de informaci\xf3n sobre el usuario.'})}),"\n",(0,r.jsx)(n.p,{children:"Aqu\xed tienes un ejemplo no normativo de la relaci\xf3n alcance - reclamo:"}),"\n",(0,r.jsx)(n.mermaid,{value:"classDiagram\n  class openid {\n    +sub\n  }\n\n  class profile {\n    +name\n    +username\n    +picture\n    +...\n  }\n\n  class email {\n    +email\n    +email_verified\n  }\n\n  class phone {\n    +phone_number\n    +phone_number_verified\n  }"}),"\n",(0,r.jsx)(n.admonition,{type:"tip",children:(0,r.jsx)(n.p,{children:'El reclamo "sub" significa "sujeto", que es el identificador \xfanico del usuario (es decir, el ID del usuario).'})}),"\n",(0,r.jsxs)(n.p,{children:["El SDK de Logto siempre solicitar\xe1 tres alcances: ",(0,r.jsx)(n.code,{children:"openid"}),", ",(0,r.jsx)(n.code,{children:"profile"})," y ",(0,r.jsx)(n.code,{children:"offline_access"}),"."]})]})}function t(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},57726:(e,n,i)=>{i.d(n,{Ay:()=>l,Ip:()=>o,RM:()=>t,YF:()=>a});var r=i(25105),s=i(79621);const o="http://localhost:3000/",a=`${o}callback`,t=[{value:"Configurar URIs de redirecci\xf3n",id:"configure-redirect-uris",level:4}];function c(e){const n={h4:"h4",p:"p",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:["\n","\n",(0,r.jsx)(n.h4,{id:"configure-redirect-uris",children:"Configurar URIs de redirecci\xf3n"}),"\n",(0,r.jsxs)(n.p,{children:["Cambia a la p\xe1gina de detalles de la aplicaci\xf3n en Logto Console. A\xf1ade una URI de redirecci\xf3n ",(0,r.jsx)("code",{children:e.redirectUri??"http://localhost:3000/callback"}),"."]}),"\n",(0,r.jsx)("img",{alt:"URI de redirecci\xf3n en Logto Console",src:"/img/assets/web-redirect-uri.png",width:"600px"}),"\n",(0,r.jsxs)(n.p,{children:["Al igual que al iniciar sesi\xf3n, los usuarios deben ser redirigidos a Logto para cerrar la sesi\xf3n de la sesi\xf3n compartida. Una vez terminado, ser\xeda ideal redirigir al usuario de vuelta a tu sitio web. Por ejemplo, a\xf1ade ",(0,r.jsx)("code",{children:o})," como la secci\xf3n de URI de redirecci\xf3n posterior al cierre de sesi\xf3n."]}),"\n",(0,r.jsx)(n.p,{children:'Luego haz clic en "Guardar" para guardar los cambios.'})]})}function l(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},37220:(e,n,i)=>{i.d(n,{Ay:()=>c,RM:()=>a});var r=i(25105),s=i(79621),o=i(8358);const a=[...o.RM];function t(e){const n={hr:"hr",li:"li",mermaid:"mermaid",ol:"ol",p:"p",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"Antes de profundizar en los detalles, aqu\xed tienes una visi\xf3n general r\xe1pida de la experiencia del usuario final. El proceso de inicio de sesi\xf3n se puede simplificar de la siguiente manera:"}),"\n",(0,r.jsx)(n.mermaid,{value:"graph LR\n    A(Tu aplicaci\xf3n) --\x3e|1. Invocar inicio de sesi\xf3n| B(Logto)\n    B --\x3e|2. Finalizar inicio de sesi\xf3n| A"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Tu aplicaci\xf3n invoca el m\xe9todo de inicio de sesi\xf3n."}),"\n",(0,r.jsx)(n.li,{children:"El usuario es redirigido a la p\xe1gina de inicio de sesi\xf3n de Logto. Para aplicaciones nativas, se abre el navegador del sistema."}),"\n",(0,r.jsx)(n.li,{children:"El usuario inicia sesi\xf3n y es redirigido de vuelta a tu aplicaci\xf3n (configurada como el URI de redirecci\xf3n)."}),"\n"]}),"\n",(0,r.jsx)(o.Ay,{}),"\n",(0,r.jsx)(n.hr,{})]})}function c(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(t,{...e})}):t(e)}},82535:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>x,contentTitle:()=>m,default:()=>v,frontMatter:()=>j,metadata:()=>r,toc:()=>f});const r=JSON.parse('{"id":"quick-starts/framework/java-spring-boot/README","title":"A\xf1ade autenticaci\xf3n a tu aplicaci\xf3n Java Spring Boot","description":"Esta gu\xeda te mostrar\xe1 c\xf3mo integrar Logto en tu aplicaci\xf3n Java Spring Boot.","source":"@site/i18n/es/docusaurus-plugin-content-docs/current/quick-starts/framework/java-spring-boot/README.mdx","sourceDirName":"quick-starts/framework/java-spring-boot","slug":"/quick-starts/java-spring-boot","permalink":"/es/quick-starts/java-spring-boot","draft":false,"unlisted":false,"editUrl":"https://github.com/logto-io/docs/tree/master/i18n/es/docusaurus-plugin-content-docs/current/quick-starts/framework/java-spring-boot/README.mdx","tags":[],"version":"current","frontMatter":{"slug":"/quick-starts/java-spring-boot","sidebar_label":"Java Spring Boot","sidebar_custom_props":{"description":"Spring Boot es un framework web para Java que permite a los desarrolladores construir aplicaciones de servidor seguras, r\xe1pidas y escalables con el lenguaje de programaci\xf3n Java.","logoFilename":"spring-boot.svg"}},"sidebar":"quickStartSidebar","previous":{"title":"Go","permalink":"/es/quick-starts/go"},"next":{"title":"Next.js (Pages Router)","permalink":"/es/quick-starts/next"}}');var s=i(25105),o=i(79621),a=i(85713),t=i(75846),c=i(16118),l=i(57726),d=i(37220),u=i(76818);const p=[...u.RM];function h(e){const n={a:"a",code:"code",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.p,{children:["Logto utiliza las ",(0,s.jsx)(n.a,{href:"https://openid.net/specs/openid-connect-core-1_0.html#Claims",children:"convenciones de alcances y reclamos (scopes and claims)"})," de OIDC para definir los alcances y reclamos para obtener informaci\xf3n del usuario del Token de ID y del ",(0,s.jsx)("a",{href:"https://openid.net/specs/openid-connect-core-1_0.html#UserInfo",children:"endpoint de userinfo"}),' de OIDC. Tanto "alcance" como "reclamo" son t\xe9rminos de las especificaciones de OAuth 2.0 y OpenID Connect (OIDC).']}),"\n",(0,s.jsxs)(n.p,{children:["En resumen, cuando solicitas un alcance, obtendr\xe1s los reclamos correspondientes en la informaci\xf3n del usuario. Por ejemplo, si solicitas el alcance ",(0,s.jsx)(n.code,{children:"email"}),", obtendr\xe1s los datos ",(0,s.jsx)(n.code,{children:"email"})," y ",(0,s.jsx)(n.code,{children:"email_verified"})," del usuario."]}),"\n",(0,s.jsx)(u.Ay,{}),"\n",(0,s.jsxs)(n.p,{children:["Agrega alcances y reclamos adicionales en el archivo ",(0,s.jsx)(n.code,{children:"application.properties"})," para solicitar m\xe1s informaci\xf3n del usuario. Por ejemplo, para solicitar el alcance ",(0,s.jsx)(n.code,{children:"urn:logto:scope:organizations"}),", a\xf1ade la siguiente l\xednea al archivo ",(0,s.jsx)(n.code,{children:"application.properties"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-properties",metastring:'title="application.properties"',children:"spring.security.oauth2.client.registration.logto.scope=openid,profile,offline_access,urn:logto:scope:organizations\n"})}),"\n",(0,s.jsx)(n.p,{children:"Los reclamos de la organizaci\xf3n del usuario se incluir\xe1n en el token de autorizaci\xf3n."})]})}function g(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}const j={slug:"/quick-starts/java-spring-boot",sidebar_label:"Java Spring Boot",sidebar_custom_props:{description:"Spring Boot es un framework web para Java que permite a los desarrolladores construir aplicaciones de servidor seguras, r\xe1pidas y escalables con el lenguaje de programaci\xf3n Java.",logoFilename:"spring-boot.svg"}},m="A\xf1ade autenticaci\xf3n a tu aplicaci\xf3n Java Spring Boot",x={},f=[{value:"Prerrequisitos",id:"prerequisites",level:2},{value:"Configura tu aplicaci\xf3n Java Spring Boot",id:"configure-your-java-spring-boot-application",level:2},{value:"A\xf1adiendo dependencias",id:"adding-dependencies",level:3},{value:"Configuraci\xf3n del Cliente OAuth2",id:"oauth2-client-configuration",level:3},{value:"Implementaci\xf3n",id:"implementation",level:2},...d.RM,...l.RM,{value:"Implementa el WebSecurityConfig",id:"implement-the-websecurityconfig",level:3},{value:"Crea una nueva clase <code>WebSecurityConfig</code> en tu proyecto",id:"create-a-new-class-websecurityconfig-in-your-project",level:4},{value:"Crea un bean <code>idTokenDecoderFactory</code>",id:"create-a-idtokendecoderfactory-bean",level:4},{value:"Crea una clase LoginSuccessHandler para manejar el evento de \xe9xito de inicio de sesi\xf3n",id:"create-a-loginsuccesshandler-class-to-handle-the-login-success-event",level:4},{value:"Crea una clase LogoutSuccessHandler para manejar el evento de \xe9xito de cierre de sesi\xf3n",id:"create-a-logoutsuccesshandler-class-to-handle-the-logout-success-event",level:4},{value:"Actualiza la clase <code>WebSecurityConfig</code> con un <code>securityFilterChain</code>",id:"update-the-websecurityconfig-class-with-a-securityfilterchain",level:4},{value:"Crea una p\xe1gina de inicio",id:"create-a-home-page",level:3},{value:"Crea una p\xe1gina de usuario",id:"create-a-user-page",level:3},{value:"Solicitar reclamos adicionales",id:"request-additional-claims",level:4},...a.RM,...c.RM,{value:"Ejecuta y prueba la aplicaci\xf3n",id:"run-and-test-the-application",level:3},{value:"Alcances y Reclamos",id:"scopes-and-claims",level:2},...p,{value:"Lecturas adicionales",id:"further-readings",level:2},...t.RM];function b(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"a\xf1ade-autenticaci\xf3n-a-tu-aplicaci\xf3n-java-spring-boot",children:"A\xf1ade autenticaci\xf3n a tu aplicaci\xf3n Java Spring Boot"})}),"\n",(0,s.jsx)(n.p,{children:"Esta gu\xeda te mostrar\xe1 c\xf3mo integrar Logto en tu aplicaci\xf3n Java Spring Boot."}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Puedes encontrar el c\xf3digo de ejemplo para esta gu\xeda en nuestro repositorio de github ",(0,s.jsx)(n.a,{href:"https://github.com/logto-io/spring-boot-sample",children:"spring-boot-sample"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["No se requiere un SDK oficial para integrar Logto con tu aplicaci\xf3n Java Spring Boot. Usaremos las bibliotecas ",(0,s.jsx)(n.a,{href:"https://spring.io/projects/spring-security",children:"Spring Security"})," y ",(0,s.jsx)(n.a,{href:"https://spring.io/guides/tutorials/spring-boot-oauth2",children:"Spring Security OAuth2"})," para manejar el flujo de autenticaci\xf3n OIDC con Logto."]}),"\n"]})}),"\n",(0,s.jsx)(n.h2,{id:"prerequisites",children:"Prerrequisitos"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Una cuenta de ",(0,s.jsx)(n.a,{href:"https://cloud.logto.io",children:"Logto Cloud"})," o un ",(0,s.jsx)(n.a,{href:"/introduction/set-up-logto-oss",children:"Logto autoalojado"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["Nuestro c\xf3digo de ejemplo fue creado usando el ",(0,s.jsx)(n.a,{href:"https://spring.io/guides/gs/securing-web",children:"securing web starter"})," de Spring Boot. Sigue las instrucciones para iniciar una nueva aplicaci\xf3n web si no tienes una."]}),"\n",(0,s.jsxs)(n.li,{children:["En esta gu\xeda, usaremos las bibliotecas ",(0,s.jsx)(n.a,{href:"https://spring.io/projects/spring-security",children:"Spring Security"})," y ",(0,s.jsx)(n.a,{href:"https://spring.io/guides/tutorials/spring-boot-oauth2",children:"Spring Security OAuth2"})," para manejar el flujo de autenticaci\xf3n OIDC con Logto. Aseg\xfarate de revisar la documentaci\xf3n oficial para entender los conceptos."]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"configure-your-java-spring-boot-application",children:"Configura tu aplicaci\xf3n Java Spring Boot"}),"\n",(0,s.jsx)(n.h3,{id:"adding-dependencies",children:"A\xf1adiendo dependencias"}),"\n",(0,s.jsxs)(n.p,{children:["Para los usuarios de ",(0,s.jsx)(n.a,{href:"https://spring.io/guides/gs/gradle",children:"gradle"}),", a\xf1ade las siguientes dependencias a tu archivo ",(0,s.jsx)(n.code,{children:"build.gradle"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-groovy",metastring:'title="build.gradle"',children:"dependencies {\n  implementation 'org.springframework.boot:spring-boot-starter-thymeleaf'\n\timplementation 'org.springframework.boot:spring-boot-starter-web'\n  implementation 'org.springframework.boot:spring-boot-starter-security'\n\timplementation 'org.springframework.boot:spring-boot-starter-oauth2-client'\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Para los usuarios de ",(0,s.jsx)(n.a,{href:"https://spring.io/guides/gs/maven",children:"maven"}),", a\xf1ade las siguientes dependencias a tu archivo ",(0,s.jsx)(n.code,{children:"pom.xml"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-xml",metastring:'title="pom.xml"',children:"<dependency>\n  <groupId>org.springframework.boot</groupId>\n  <artifactId>spring-boot-starter-thymeleaf</artifactId>\n</dependency>\n<dependency>\n  <groupId>org.springframework.boot</groupId>\n  <artifactId>spring-boot-starter-web</artifactId>\n</dependency>\n<dependency>\n  <groupId>org.springframework.boot</groupId>\n  <artifactId>spring-boot-starter-security</artifactId>\n</dependency>\n<dependency>\n  <groupId>org.springframework.boot</groupId>\n  <artifactId>spring-boot-starter-oauth2-client</artifactId>\n</dependency>\n"})}),"\n",(0,s.jsx)(n.h3,{id:"oauth2-client-configuration",children:"Configuraci\xf3n del Cliente OAuth2"}),"\n",(0,s.jsxs)(n.p,{children:["Registra una nueva aplicaci\xf3n ",(0,s.jsx)(n.code,{children:"Java Spring Boot"})," en Logto Console y obt\xe9n las credenciales del cliente y las configuraciones de IdP para tu aplicaci\xf3n web."]}),"\n",(0,s.jsxs)(n.p,{children:["A\xf1ade la siguiente configuraci\xf3n a tu archivo ",(0,s.jsx)(n.code,{children:"application.properties"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-properties",metastring:'title="application.properties"',children:"spring.security.oauth2.client.registration.logto.client-name=logto\nspring.security.oauth2.client.registration.logto.client-id={{YOUR_CLIENT_ID}}\nspring.security.oauth2.client.registration.logto.client-secret={{YOUR_CLIENT_ID}}\nspring.security.oauth2.client.registration.logto.redirect-uri={baseUrl}/login/oauth2/code/{registrationId}\nspring.security.oauth2.client.registration.logto.authorization-grant-type=authorization_code\nspring.security.oauth2.client.registration.logto.scope=openid,profile,offline_access\nspring.security.oauth2.client.registration.logto.provider=logto\n\nspring.security.oauth2.client.provider.logto.issuer-uri={{LOGTO_ENDPOINT}}/oidc\nspring.security.oauth2.client.provider.logto.authorization-uri={{LOGTO_ENDPOINT}}/oidc/auth\nspring.security.oauth2.client.provider.logto.jwk-set-uri={{LOGTO_ENDPOINT}}/oidc/jwks\n"})}),"\n",(0,s.jsx)(n.h2,{id:"implementation",children:"Implementaci\xf3n"}),"\n",(0,s.jsx)(d.Ay,{}),"\n",(0,s.jsxs)(n.p,{children:["Para redirigir a los usuarios de vuelta a tu aplicaci\xf3n despu\xe9s de que inicien sesi\xf3n, necesitas establecer el URI de redirecci\xf3n usando la propiedad ",(0,s.jsx)(n.code,{children:"client.registration.logto.redirect-uri"})," en el paso anterior."]}),"\n",(0,s.jsx)(l.Ay,{}),"\n",(0,s.jsx)(n.h3,{id:"implement-the-websecurityconfig",children:"Implementa el WebSecurityConfig"}),"\n",(0,s.jsxs)(n.h4,{id:"create-a-new-class-websecurityconfig-in-your-project",children:["Crea una nueva clase ",(0,s.jsx)(n.code,{children:"WebSecurityConfig"})," en tu proyecto"]}),"\n",(0,s.jsxs)(n.p,{children:["La clase ",(0,s.jsx)(n.code,{children:"WebSecurityConfig"})," se utilizar\xe1 para configurar los ajustes de seguridad de tu aplicaci\xf3n. Es la clase clave que manejar\xe1 el flujo de autenticaci\xf3n y autorizaci\xf3n. Por favor, consulta la ",(0,s.jsx)(n.a,{href:"https://spring.io/guides/topicals/spring-security-architecture",children:"documentaci\xf3n de Spring Security"})," para m\xe1s detalles."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",metastring:'title="WebSecurityConfig.java"',children:"package com.example.securingweb;\n\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\n\n@Configuration\n@EnableWebSecurity\n\npublic class WebSecurityConfig {\n // ...\n}\n"})}),"\n",(0,s.jsxs)(n.h4,{id:"create-a-idtokendecoderfactory-bean",children:["Crea un bean ",(0,s.jsx)(n.code,{children:"idTokenDecoderFactory"})]}),"\n",(0,s.jsxs)(n.p,{children:["Esto es necesario porque Logto usa ",(0,s.jsx)(n.code,{children:"ES384"})," como el algoritmo predeterminado, necesitamos sobrescribir el ",(0,s.jsx)(n.code,{children:"OidcIdTokenDecoderFactory"})," predeterminado para usar el mismo algoritmo."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",metastring:'title="WebSecurityConfig.java"',children:"import org.springframework.context.annotation.Bean;\nimport org.springframework.security.oauth2.client.oidc.authentication.OidcIdTokenDecoderFactory;\nimport org.springframework.security.oauth2.client.registration.ClientRegistration;\nimport org.springframework.security.oauth2.jose.jws.SignatureAlgorithm;\nimport org.springframework.security.oauth2.jwt.JwtDecoderFactory;\n\npublic class WebSecurityConfig {\n  // ...\n\n  @Bean\n  public JwtDecoderFactory<ClientRegistration> idTokenDecoderFactory() {\n    OidcIdTokenDecoderFactory idTokenDecoderFactory = new OidcIdTokenDecoderFactory();\n    idTokenDecoderFactory.setJwsAlgorithmResolver(clientRegistration -> SignatureAlgorithm.ES384);\n    return idTokenDecoderFactory;\n  }\n}\n"})}),"\n",(0,s.jsx)(n.h4,{id:"create-a-loginsuccesshandler-class-to-handle-the-login-success-event",children:"Crea una clase LoginSuccessHandler para manejar el evento de \xe9xito de inicio de sesi\xf3n"}),"\n",(0,s.jsxs)(n.p,{children:["Redirigiremos al usuario a la p\xe1gina ",(0,s.jsx)(n.code,{children:"/user"})," despu\xe9s de un inicio de sesi\xf3n exitoso."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",metastring:'title="CustomSuccessHandler.java"',children:'package com.example.securingweb;\n\nimport java.io.IOException;\n\nimport org.springframework.security.core.Authentication;\nimport org.springframework.security.web.authentication.AuthenticationSuccessHandler;\n\nimport jakarta.servlet.ServletException;\nimport jakarta.servlet.http.HttpServletRequest;\nimport jakarta.servlet.http.HttpServletResponse;\n\npublic class CustomSuccessHandler implements AuthenticationSuccessHandler {\n  @Override\n  public void onAuthenticationSuccess(HttpServletRequest request, HttpServletResponse response,\n      Authentication authentication) throws IOException, ServletException {\n    response.sendRedirect("/user");\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h4,{id:"create-a-logoutsuccesshandler-class-to-handle-the-logout-success-event",children:"Crea una clase LogoutSuccessHandler para manejar el evento de \xe9xito de cierre de sesi\xf3n"}),"\n",(0,s.jsx)(n.p,{children:"Limpia la sesi\xf3n y redirige al usuario a la p\xe1gina de inicio."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",metastring:'title="CustomLogoutHandler.java"',children:'package com.example.securingweb;\n\nimport java.io.IOException;\n\nimport org.springframework.security.core.Authentication;\nimport org.springframework.security.web.authentication.logout.LogoutSuccessHandler;\n\nimport jakarta.servlet.ServletException;\nimport jakarta.servlet.http.HttpServletRequest;\nimport jakarta.servlet.http.HttpServletResponse;\nimport jakarta.servlet.http.HttpSession;\n\npublic class CustomLogoutHandler implements LogoutSuccessHandler {\n  @Override\n  public void onLogoutSuccess(HttpServletRequest request, HttpServletResponse response, Authentication authentication)\n      throws IOException, ServletException {\n    HttpSession session = request.getSession();\n\n    if (session != null) {\n      session.invalidate();\n    }\n\n    response.sendRedirect("/home");\n  }\n}\n'})}),"\n",(0,s.jsxs)(n.h4,{id:"update-the-websecurityconfig-class-with-a-securityfilterchain",children:["Actualiza la clase ",(0,s.jsx)(n.code,{children:"WebSecurityConfig"})," con un ",(0,s.jsx)(n.code,{children:"securityFilterChain"})]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.a,{href:"https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/web/DefaultSecurityFilterChain.html",children:"securityFilterChain"})," es una cadena de filtros que son responsables de procesar las solicitudes y respuestas entrantes."]}),"\n",(0,s.jsxs)(n.p,{children:["Configuraremos el ",(0,s.jsx)(n.code,{children:"securityFilterChain"})," para permitir el acceso a la p\xe1gina de inicio y requerir autenticaci\xf3n para todas las dem\xe1s solicitudes. Usa el ",(0,s.jsx)(n.code,{children:"CustomSuccessHandler"})," y el ",(0,s.jsx)(n.code,{children:"CustomLogoutHandler"})," para manejar los eventos de inicio y cierre de sesi\xf3n."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",metastring:'title="WebSecurityConfig.java"',children:'import org.springframework.context.annotation.Bean;\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\nimport org.springframework.security.web.DefaultSecurityFilterChain;\n\npublic class WebSecurityConfig {\n  // ...\n\n  @Bean\n  public DefaultSecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\n    http\n      .authorizeRequests(authorizeRequests ->\n        authorizeRequests\n          .antMatchers("/", "/home").permitAll() // Permitir acceso a la p\xe1gina de inicio\n          .anyRequest().authenticated() // Todas las dem\xe1s solicitudes requieren autenticaci\xf3n\n      )\n      .oauth2Login(oauth2Login ->\n        oauth2Login\n          .successHandler(new CustomSuccessHandler())\n      )\n      .logout(logout ->\n        logout\n          .logoutSuccessHandler(new CustomLogoutHandler())\n      );\n    return http.build();\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"create-a-home-page",children:"Crea una p\xe1gina de inicio"}),"\n",(0,s.jsx)(n.p,{children:"(Puedes omitir este paso si ya tienes una p\xe1gina de inicio en tu proyecto)"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",metastring:'title="HomeController.java"',children:'package com.example.securingweb;\n\nimport java.security.Principal;\n\nimport org.springframework.stereotype.Controller;\nimport org.springframework.web.bind.annotation.GetMapping;\n\n@Controller\npublic class HomeController {\n  @GetMapping({ "/", "/home" })\n  public String home(Principal principal) {\n    return principal != null ? "redirect:/user" : "home";\n  }\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:"Este controlador redirigir\xe1 al usuario a la p\xe1gina de usuario si el usuario est\xe1 autenticado, de lo contrario, mostrar\xe1 la p\xe1gina de inicio. A\xf1ade un enlace de inicio de sesi\xf3n a la p\xe1gina de inicio."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-html",metastring:'title="resources/templates/home.html"',children:'<body>\n  <h1>\xa1Bienvenido!</h1>\n\n  <p><a th:href="@{/oauth2/authorization/logto}">Iniciar sesi\xf3n con Logto</a></p>\n</body>\n'})}),"\n",(0,s.jsx)(n.h3,{id:"create-a-user-page",children:"Crea una p\xe1gina de usuario"}),"\n",(0,s.jsx)(n.p,{children:"Crea un nuevo controlador para manejar la p\xe1gina de usuario:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",metastring:'title="UserController.java"',children:'package com.example.securingweb;\n\nimport java.security.Principal;\nimport java.util.Map;\n\nimport org.springframework.security.oauth2.client.authentication.OAuth2AuthenticationToken;\nimport org.springframework.security.oauth2.core.user.OAuth2User;\nimport org.springframework.stereotype.Controller;\nimport org.springframework.ui.Model;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.RequestMapping;\n\n@Controller\n@RequestMapping("/user")\npublic class UserController {\n\n  @GetMapping\n  public String user(Model model, Principal principal) {\n    if (principal instanceof OAuth2AuthenticationToken) {\n      OAuth2AuthenticationToken token = (OAuth2AuthenticationToken) principal;\n      OAuth2User oauth2User = token.getPrincipal();\n      Map<String, Object> attributes = oauth2User.getAttributes();\n\n      model.addAttribute("username", attributes.get("username"));\n      model.addAttribute("email", attributes.get("email"));\n      model.addAttribute("sub", attributes.get("sub"));\n    }\n\n    return "user";\n  }\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:["Una vez que el usuario est\xe1 autenticado, recuperaremos los datos del ",(0,s.jsx)(n.code,{children:"OAuth2User"})," del objeto principal autenticado. Por favor, consulta ",(0,s.jsx)(n.a,{href:"https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/oauth2/client/authentication/OAuth2AuthenticationToken.html",children:"OAuth2AuthenticationToken"})," y ",(0,s.jsx)(n.a,{href:"https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/oauth2/core/user/OAuth2User.html",children:"OAuth2User"})," para m\xe1s detalles."]}),"\n",(0,s.jsxs)(n.p,{children:["Lee los datos del usuario y p\xe1salos a la plantilla ",(0,s.jsx)(n.code,{children:"user.html"}),"."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-html",metastring:'title="resources/templates/user.html"',children:'<body>\n  <h1>Detalles del Usuario</h1>\n  <div>\n    <p>\n    <div><strong>nombre:</strong> <span th:text="${username}"></span></div>\n    <div><strong>correo electr\xf3nico:</strong> <span th:text="${email}"></span></div>\n    <div><strong>id:</strong> <span th:text="${sub}"></span></div>\n    </p>\n  </div>\n\n  <form th:action="@{/logout}" method="post">\n    <input type="submit" value="Cerrar sesi\xf3n" />\n  </form>\n</body>\n'})}),"\n",(0,s.jsx)(n.h4,{id:"request-additional-claims",children:"Solicitar reclamos adicionales"}),"\n",(0,s.jsx)(a.Ay,{method:"principal (OAuth2AuthenticationToken)"}),"\n",(0,s.jsx)(c.Ay,{}),"\n",(0,s.jsxs)(n.p,{children:["Para recuperar informaci\xf3n adicional del usuario, puedes a\xf1adir alcances extra al archivo ",(0,s.jsx)(n.code,{children:"application.properties"}),". Por ejemplo, para solicitar el alcance ",(0,s.jsx)(n.code,{children:"email"}),", ",(0,s.jsx)(n.code,{children:"phone"}),", y ",(0,s.jsx)(n.code,{children:"urn:logto:scope:organizations"}),", a\xf1ade la siguiente l\xednea al archivo ",(0,s.jsx)(n.code,{children:"application.properties"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-properties",metastring:'title="application.properties"',children:"  spring.security.oauth2.client.registration.logto.scope=openid,profile,offline_access,email,phone,urn:logto:scope:organizations\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Luego puedes acceder a los reclamos adicionales en el objeto ",(0,s.jsx)(n.code,{children:"OAuth2User"}),"."]}),"\n",(0,s.jsx)(n.h3,{id:"run-and-test-the-application",children:"Ejecuta y prueba la aplicaci\xf3n"}),"\n",(0,s.jsxs)(n.p,{children:["Ejecuta la aplicaci\xf3n y navega a ",(0,s.jsx)(n.code,{children:"http://localhost:8080"}),"."]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Ver\xe1s la p\xe1gina de inicio con un enlace de inicio de sesi\xf3n."}),"\n",(0,s.jsx)(n.li,{children:"Haz clic en el enlace para iniciar sesi\xf3n con Logto."}),"\n",(0,s.jsx)(n.li,{children:"Despu\xe9s de una autenticaci\xf3n exitosa, ser\xe1s redirigido a la p\xe1gina de usuario con los detalles de tu usuario."}),"\n",(0,s.jsx)(n.li,{children:"Haz clic en el bot\xf3n de cerrar sesi\xf3n para salir. Ser\xe1s redirigido de vuelta a la p\xe1gina de inicio."}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"scopes-and-claims",children:"Alcances y Reclamos"}),"\n",(0,s.jsx)(g,{}),"\n",(0,s.jsx)(n.h2,{id:"further-readings",children:"Lecturas adicionales"}),"\n",(0,s.jsx)(t.Ay,{})]})}function v(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(b,{...e})}):b(e)}},79621:(e,n,i)=>{i.d(n,{R:()=>a,x:()=>t});var r=i(58101);const s={},o=r.createContext(s);function a(e){const n=r.useContext(o);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),r.createElement(o.Provider,{value:n},e.children)}}}]);