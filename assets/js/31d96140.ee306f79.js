"use strict";(self.webpackChunk_logto_docs=self.webpackChunk_logto_docs||[]).push([[84569],{10381:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>s,default:()=>h,frontMatter:()=>r,metadata:()=>a,toc:()=>l});const a=JSON.parse('{"id":"end-user-flows/organization-experience/create-organization","title":"Create organization","description":"Imagine you are building a multi-tenant app (e.g., multi-tenant SaaS app) that servers numerous customers, and each customer owns a dedicated tenant. When a new customer arrives, they create a new account, as well as a new tenant for their own business.","source":"@site/docs/end-user-flows/organization-experience/create-organization.mdx","sourceDirName":"end-user-flows/organization-experience","slug":"/end-user-flows/organization-experience/create-organization","permalink":"/end-user-flows/organization-experience/create-organization","draft":false,"unlisted":false,"editUrl":"https://github.com/logto-io/docs/tree/master/docs/end-user-flows/organization-experience/create-organization.mdx","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"docsSidebar","previous":{"title":"Organization experience","permalink":"/end-user-flows/organization-experience/"},"next":{"title":"Invite organization members","permalink":"/end-user-flows/organization-experience/invite-organization-members"}}');var o=t(25105),i=t(79621);const r={sidebar_position:1},s="Create organization",c={},l=[{value:"Create your organizations",id:"create-your-organizations",level:2},{value:"Create via Logto Console",id:"create-via-logto-console",level:3},{value:"Create via Logto Management API",id:"create-via-logto-management-api",level:3},{value:"Validating organization token in user request",id:"validating-organization-token-in-user-request",level:2},{value:"Related resources",id:"related-resources",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",strong:"strong",...(0,i.R)(),...e.components},{CloudLink:t,Url:a}=n;return t||g("CloudLink",!0),a||g("Url",!0),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"create-organization",children:"Create organization"})}),"\n",(0,o.jsxs)(n.p,{children:["Imagine you are building a ",(0,o.jsx)(n.a,{href:"https://auth.wiki/multi-tenancy",children:"multi-tenant app"})," (e.g., multi-tenant SaaS app) that servers numerous customers, and each customer owns a dedicated tenant. When a new customer arrives, they create a new account, as well as a new tenant for their own business."]}),"\n",(0,o.jsxs)(n.p,{children:["Just like how you registered your ",(0,o.jsx)(n.a,{href:"https://cloud.logto.io/",children:"Logto Cloud"})," account and have your own Logto tenant. You can implement the very same architecture in your app as well, using Logto's \"",(0,o.jsx)(n.a,{href:"/organizations",children:"organization"}),'" feature.']}),"\n",(0,o.jsx)(n.h2,{id:"create-your-organizations",children:"Create your organizations"}),"\n",(0,o.jsx)(n.p,{children:"There are two ways to create organizations for your app."}),"\n",(0,o.jsx)(n.h3,{id:"create-via-logto-console",children:"Create via Logto Console"}),"\n",(0,o.jsxs)(n.p,{children:["Manually create your organizations through Logto Console UI. Go to ",(0,o.jsx)(t,{to:"/organizations",children:"Console > Organizations"})," to create organization, assign members and roles, and customize organization sign-in experience UI."]}),"\n",(0,o.jsxs)(n.p,{children:['Create an "',(0,o.jsx)(n.a,{href:"/authorization/organization-template",children:"organization template"}),'" if you want to batch create similar organizations that share the same ',(0,o.jsx)(n.a,{href:"/authorization/organization-template/configure-organization-template#create-organization-role",children:"role"})," and",(0,o.jsx)(n.a,{href:"/authorization/organization-template/configure-organization-template#create-organization-permission",children:"permission"})," settings."]}),"\n",(0,o.jsx)(n.h3,{id:"create-via-logto-management-api",children:"Create via Logto Management API"}),"\n",(0,o.jsxs)(n.p,{children:["Clicking buttons on the Console UI works great, but we really want to have the end-users self-serve and create organizations, manage the organizations themselves In ",(0,o.jsx)(n.strong,{children:"YOUR App"}),". Thus, you\u2019ll have to implement these features in your app, with the help of Logto Management API."]}),"\n",(0,o.jsxs)(n.admonition,{type:"note",children:[(0,o.jsx)(n.p,{children:"If you are not familiar with Logto Management API, please make sure you read these docs first."}),(0,o.jsx)(a,{href:"/concepts/core-service/#management-api",children:"Management API"}),(0,o.jsx)(a,{href:"/integrate-logto/interact-with-management-api",children:"Interact with Management API"})]}),"\n",(0,o.jsx)(n.p,{children:"Assuming you have already connected your API backend server to Logto Management API endpoint through the Machine-to-Machine (M2M) mechanism, and acquired the M2M access token."}),"\n",(0,o.jsxs)(n.p,{children:["Create an organization with Management API (",(0,o.jsx)(n.a,{href:"https://openapi.logto.io/operation/operation-createorganization",children:"API references"}),"):"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:'curl \\\n -X POST https://[tenant_id].logto.app/api/organizations \\\n -H "Authorization: Bearer $M2M_ACCESS_TOKEN" \\\n -H "Content-Type: application/json" \\\n -d \'{"tenantId":"string","name":"string","description":"string","customData":{},"isMfaRequired":false,"branding":{"logoUrl":"string","darkLogoUrl":"string","favicon":"string","darkFavicon":"string"},"createdAt":1234567890}\'\n'})}),"\n",(0,o.jsx)(n.p,{children:"Response example (201)"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-json",children:'{\n  "tenantId": "string",\n  "id": "string",\n  "name": "string",\n  "description": "string",\n  "customData": {},\n  "isMfaRequired": false,\n  "branding": {\n    "logoUrl": "string",\n    "darkLogoUrl": "string",\n    "favicon": "string",\n    "darkFavicon": "string"\n  },\n  "createdAt": 1234567890\n}\n'})}),"\n",(0,o.jsx)(n.p,{children:'Next, you can implement your own API for your app. So when your users perform the "create organization" action in your app, you can validate the request by checking their permissions, and then call Logto Management API to do the rest of the job.'}),"\n",(0,o.jsx)(n.h2,{id:"validating-organization-token-in-user-request",children:"Validating organization token in user request"}),"\n",(0,o.jsxs)(n.p,{children:["In your app, when users perform actions in the context of an organization, they need to use the organization token instead of the regular access token. The organization token is a special kind of ",(0,o.jsx)(n.a,{href:"https://auth.wiki/jwt",children:"JWT"})," that contains organization permissions. And just like any JWT ",(0,o.jsx)(n.a,{href:"https://auth.wiki/access-token",children:"access tokens"}),', you can decode the token claims and verify the "scope" claim for permission check.']}),"\n",(0,o.jsx)(n.p,{children:"Check these documentations for more details:"}),"\n",(0,o.jsx)(a,{href:"/authorization/organization-template/protect-organization-resources",children:(0,o.jsx)(n.p,{children:"Verify organization tokens"})}),"\n",(0,o.jsx)(a,{href:"/authorization/api-resources/protect-your-api",children:"Protect your API"}),"\n",(0,o.jsx)(n.h2,{id:"related-resources",children:"Related resources"}),"\n",(0,o.jsx)(a,{href:"https://blog.logto.io/implement-multi-tenancy",children:(0,o.jsx)(n.p,{children:"Multi-tenancy implementation with Postgres"})})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}function g(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},79621:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>s});var a=t(58101);const o={},i=a.createContext(o);function r(e){const n=a.useContext(i);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),a.createElement(i.Provider,{value:n},e.children)}}}]);