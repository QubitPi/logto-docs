"use strict";(self.webpackChunk_logto_docs=self.webpackChunk_logto_docs||[]).push([[3274],{76302:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"end-user-flows/sign-up-and-sign-in/disable-user-registration","title":"No public registration & Invitation-only","description":"In some circumstances, you may want to restrict user registration for your application. Logto allows you to disable anonymous user registration and restrict user sign-in to only users invited by an administrator.","source":"@site/docs/end-user-flows/sign-up-and-sign-in/disable-user-registration.mdx","sourceDirName":"end-user-flows/sign-up-and-sign-in","slug":"/end-user-flows/sign-up-and-sign-in/disable-user-registration","permalink":"/end-user-flows/sign-up-and-sign-in/disable-user-registration","draft":false,"unlisted":false,"editUrl":"https://github.com/logto-io/docs/tree/master/docs/end-user-flows/sign-up-and-sign-in/disable-user-registration.mdx","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"sidebar_position":6,"sidebar_label":"Disable user registration"},"sidebar":"docsSidebar","previous":{"title":"Terms and privacy","permalink":"/end-user-flows/sign-up-and-sign-in/terms-and-privacy"},"next":{"title":"Error pages","permalink":"/end-user-flows/sign-up-and-sign-in/error-pages"}}');var s=i(25105),r=i(79621);const o={sidebar_position:6,sidebar_label:"Disable user registration"},a="No public registration & Invitation-only",l={},c=[{value:"Disable user registration",id:"disable-user-registration",level:2},{value:"Implement an invitation-only sign-up flow",id:"implement-an-invitation-only-sign-up-flow",level:2},{value:"Option 1: Invite user with magic link (Recommended)",id:"option-1-invite-user-with-magic-link-recommended",level:3},{value:"Option 2: Invite and create users via management API",id:"option-2-invite-and-create-users-via-management-api",level:3},{value:"Option 3: Notify users on manual registration",id:"option-3-notify-users-on-manual-registration",level:3},{value:"User experience for pre-registered accounts",id:"user-experience-for-pre-registered-accounts",level:2},{value:"Related resources",id:"related-resources",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components},{CloudLink:i,Url:t}=n;return i||u("CloudLink",!0),t||u("Url",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"no-public-registration--invitation-only",children:"No public registration & Invitation-only"})}),"\n",(0,s.jsx)(n.p,{children:"In some circumstances, you may want to restrict user registration for your application. Logto allows you to disable anonymous user registration and restrict user sign-in to only users invited by an administrator."}),"\n",(0,s.jsx)(n.h2,{id:"disable-user-registration",children:"Disable user registration"}),"\n",(0,s.jsx)(n.p,{children:"To disable end-user registration, follow these steps:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Navigate to the ",(0,s.jsx)(i,{to:"/sign-in-experience/sign-up-and-sign-in",children:"Console > Sign-in experience > Sign-up and sign-in"})," page."]}),"\n",(0,s.jsxs)(n.li,{children:["Under the ",(0,s.jsx)(n.strong,{children:"Advanced options"})," section, toggle of the ",(0,s.jsx)(n.strong,{children:"Enable user registration"})," switch to disable user registration. (Enabled by default)"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Once user registration is disabled:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:'The "Create account" link is removed from the sign-in page.'}),"\n",(0,s.jsx)(n.li,{children:"The sign-up page is disabled, and users who visit it are redirected to the sign-in page."}),"\n",(0,s.jsx)(n.li,{children:'The social and enterprise SSO sign-up flow is also disabled. Users with unregistered social accounts will receive an "account not found" error after social authentication.'}),"\n",(0,s.jsx)(n.li,{children:"The social link account feature is still available for users who have a matching email address or phone number account in the system."}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"implement-an-invitation-only-sign-up-flow",children:"Implement an invitation-only sign-up flow"}),"\n",(0,s.jsx)(n.p,{children:"Logto does not provide a built-in invitation flow. However, you can easily implement an invite-only sign-up flow by utilizing the users Management API in Logto."}),"\n",(0,s.jsx)(n.h3,{id:"option-1-invite-user-with-magic-link-recommended",children:"Option 1: Invite user with magic link (Recommended)"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Disable user registration in the ",(0,s.jsx)(i,{to:"/sign-in-experience/sign-up-and-sign-in",children:"Console > Sign-in-experience"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Go to ",(0,s.jsx)(i,{to:"/sign-in-experience/sign-up-and-sign-in",children:"Console > Sign-in-experience"}),', and toggle off "Enable user registration" to close public registration.']}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Collect the email addresses of the users you want to invite (e.g., via your website or recommendations from existing users)."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Create and send the ",(0,s.jsx)(n.strong,{children:"magic invitation link"})," ",(0,s.jsx)(n.a,{href:"/end-user-flows/one-time-token#implementation-guide",children:"following the guide"})," (request the one-time token, compose the magic link, trigger authentication via Logto SDK).",(0,s.jsx)("br",{}),"\n",(0,s.jsx)(n.strong,{children:"Note"}),": Set an expiration time for the invitation link. It\u2019s recommended to make the link valid for at least one day. Use the following request body to generate the one-time token:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "email": "user@example.com",\n  "expiresIn": 172800 // Optional. Defaults to 600 (10 mins)\n}\n'})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Send the magic link to the user\u2019s email (e.g., ",(0,s.jsx)(n.code,{children:"https://yourapp.com/landing-page?type=registrationInvitation&token=YHwbXSXxQfL02IoxFqr1hGvkB13uTqcd&email=user@example.com"}),"). Customize the email template, such as:"]}),"\n",(0,s.jsx)("img",{src:"/img/assets/invitation-only-registration-email-template.png",alt:"Invitation-only registration email template"}),"\n",(0,s.jsx)(n.p,{children:'When users click "Accept the invitation", they will automatically register for your service, even with public registration disabled. This is referred to as "Targeted user invitation".'}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"option-2-invite-and-create-users-via-management-api",children:"Option 2: Invite and create users via management API"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Disable user registration in the ",(0,s.jsx)(i,{to:"/sign-in-experience/sign-up-and-sign-in",children:"Console > Sign-in-experience"}),"."]}),"\n",(0,s.jsx)(n.li,{children:"Create a custom invitation-based user registration form in your application."}),"\n",(0,s.jsx)(n.li,{children:"Send an invitation email to the user with a unique invitation link."}),"\n",(0,s.jsxs)(n.li,{children:["When the user clicks the registration link, have your application call the ",(0,s.jsx)(n.a,{href:"https://openapi.logto.io/operation/operation-createuser",children:"Logto Management API > Create user"})," to create the user account."]}),"\n",(0,s.jsxs)(n.li,{children:["After the user account is created, redirect them to the Logto sign-in or reset-password page to complete registration. See ",(0,s.jsx)(n.a,{href:"/end-user-flows/authentication-parameters/",children:"Authentication parameters"})," for guidance on customizing the first-screen and pre-filling the user\u2019s email to streamline the sign-in process."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"option-3-notify-users-on-manual-registration",children:"Option 3: Notify users on manual registration"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Disable user registration in the Logto Console."}),"\n",(0,s.jsxs)(n.li,{children:["Manually create user accounts in the ",(0,s.jsx)(i,{to:"/users",children:"Console > User management"})," or via the ",(0,s.jsx)(n.a,{href:"https://openapi.logto.io/operation/operation-createuser",children:"Management API"}),"."]}),"\n",(0,s.jsx)(n.li,{children:"Notify users via email that their account has been created."}),"\n",(0,s.jsxs)(n.li,{children:["Redirect users to the Logto sign-in or reset-password page to complete registration. See ",(0,s.jsx)(n.a,{href:"/end-user-flows/authentication-parameters/",children:"Authentication parameters"})," for guidance on customizing the first-screen and pre-filling the user\u2019s email to streamline the sign-in process."]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"user-experience-for-pre-registered-accounts",children:"User experience for pre-registered accounts"}),"\n",(0,s.jsx)(n.p,{children:"Pre-registered accounts (also known as provisioned users). In both Option 2 and Option 3, user accounts are created in advance via the Management API. The end users then sign in to your product for the first time."}),"\n",(0,s.jsx)(n.p,{children:"When user registration is disabled, users who visit the sign-up page will be redirected to the sign-in page. If a user account has been created by an administrator or through the Management API (as in Option 2 or 3), the user\u2019s sign-in experience may vary depending on the sign-in and sign-up methods you\u2019ve configured:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Sign-in with email or phone number via verification code"}),": Create the user account with a ",(0,s.jsx)(n.strong,{children:"Email address"})," or ",(0,s.jsx)(n.strong,{children:"Phone number"}),". Enable the email or phone number verification code sign-in method. Once the user is created, they can sign in directly with their email or phone number using the verification code authentication method."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Social sign-in with specific email or phone number"}),": Create the user account with a ",(0,s.jsx)(n.strong,{children:"Email address"})," or ",(0,s.jsx)(n.strong,{children:"Phone number"})," associated with their social account. Create and enable the social connection for the specific social provider. Enable the ",(0,s.jsx)(n.a,{href:"/end-user-flows/sign-up-and-sign-in/social-sign-in#account-linking",children:(0,s.jsx)(n.strong,{children:"Automatic account linking"})})," feature to automatically link the social identity with the user account based on the matching email or phone number. Once the user is created, they can sign in directly with their social account that matches the email or phone number."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Username/Email/Phone number with Password"}),": Create a user account with a ",(0,s.jsx)(n.strong,{children:"Username"}),", ",(0,s.jsx)(n.strong,{children:"Email address"}),", or ",(0,s.jsx)(n.strong,{children:"Phone number"}),", and enable the corresponding identifier for password-based sign-in.","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"With a pre-set password: Set a password during account creation, then share it securely with the user. The user can then sign in directly using their username, email, or phone number along with the pre-set password, and reset the password if desired."}),"\n",(0,s.jsxs)(n.li,{children:["Without a pre-set password: Create the account without a password, and prompt the user to set one upon account activation. (An ",(0,s.jsx)(n.strong,{children:"Email address"})," or ",(0,s.jsx)(n.strong,{children:"Phone number"})," is required for the password reset flow.) After creating the user, redirect them to the password reset page with their email or phone number pre-filled. For guidance on redirecting users to the reset password page with pre-filled details, refer to the ",(0,s.jsx)(n.a,{href:"/end-user-flows/authentication-parameters/",children:"Authentication parameters"}),". Once the user sets a new password, they can sign in directly with their username, email, or phone number and the new password."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"related-resources",children:"Related resources"}),"\n",(0,s.jsx)(t,{href:"/end-user-flows/one-time-token",children:"Magic link (One-time token)"})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}function u(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},79621:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>a});var t=i(58101);const s={},r=t.createContext(s);function o(e){const n=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);