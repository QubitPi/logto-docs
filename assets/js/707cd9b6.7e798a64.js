"use strict";(self.webpackChunk_logto_docs=self.webpackChunk_logto_docs||[]).push([[6213],{38421:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>u,frontMatter:()=>r,metadata:()=>o,toc:()=>l});const o=JSON.parse('{"id":"customization/bring-your-ui/upload-custom-ui-assets-using-cli","title":"Upload custom UI assets using CLI","description":"After developing your custom sign-in UI, you can deploy it to Logto Cloud to server your tenant users.","source":"@site/docs/customization/bring-your-ui/upload-custom-ui-assets-using-cli.mdx","sourceDirName":"customization/bring-your-ui","slug":"/customization/bring-your-ui/upload-custom-ui-assets-using-cli","permalink":"/customization/bring-your-ui/upload-custom-ui-assets-using-cli","draft":false,"unlisted":false,"editUrl":"https://github.com/logto-io/docs/tree/master/docs/customization/bring-your-ui/upload-custom-ui-assets-using-cli.mdx","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"docsSidebar","previous":{"title":"Debug and test your custom UI locally","permalink":"/customization/bring-your-ui/debug-and-test-your-custom-ui-locally"},"next":{"title":"Localized languages","permalink":"/customization/localized-languages"}}');var i=t(25105),s=t(79621);const r={sidebar_position:2},a="Upload custom UI assets using CLI",d={},l=[{value:"Instructions",id:"instructions",level:2},{value:"Prerequisites",id:"prerequisites",level:3},{value:"Command options",id:"command-options",level:3},{value:"Run the command",id:"run-the-command",level:3},{value:"Supported environment variables",id:"supported-environment-variables",level:3},{value:"Use environment variables",id:"use-environment-variables",level:3}];function c(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"upload-custom-ui-assets-using-cli",children:"Upload custom UI assets using CLI"})}),"\n",(0,i.jsxs)(n.p,{children:["After developing your custom sign-in UI, you can deploy it to Logto Cloud to server your tenant users.\nAs we've already introduced in the \"",(0,i.jsx)(n.a,{href:"/customization/bring-your-ui/",children:"Bring your UI"}),'" documentation, you can achieve this by uploading the zipped UI assets in Logto Console.']}),"\n",(0,i.jsx)(n.p,{children:"Here we provide another option to deploy your UI assets to Cloud using the CLI command, which will be useful when you want to integrate the deployment process into an NPM script or CI/CD pipeline."}),"\n",(0,i.jsx)(n.h2,{id:"instructions",children:"Instructions"}),"\n",(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsxs)(n.p,{children:["Assuming you have your custom sign-in UI assets built in the ",(0,i.jsx)(n.code,{children:"/path/to/your/custom/ui/dist"})," directory."]})}),"\n",(0,i.jsx)(n.p,{children:"The deploy command will automatically zip your UI assets, upload them to Logto Cloud, and set the custom UI as the sign-in experience for your tenant users."}),"\n",(0,i.jsx)(n.h3,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,i.jsxs)(n.p,{children:["Since this command interacts with the Logto Management API, a machine-to-machine app is required to authenticate the request.\nRefer to ",(0,i.jsx)(n.a,{href:"/integrate-logto/interact-with-management-api/",children:"this documentation"})," to learn what Logto Management API is and how to create a machine-to-machine app with required permissions."]}),"\n",(0,i.jsx)(n.h3,{id:"command-options",children:"Command options"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"--help                                 Show help\n--version                              Print CLI version\n--auth                                 Auth credentials of your Logto M2M a pplication. E.g.: <app-id>:<app-secret>\n--endpoint                             Logto endpoint URI that points to your Logto Cloud instance. E.g.: https://<tenant-id>.logto.app/\n--path, --experience-path              The local folder path of your custom sign-in experience assets.\n--resource, --management-api-resource  Logto Management API resource indicator. Required if using custom domain.\n--verbose                              Show verbose output. [default: false]\n"})}),"\n",(0,i.jsx)(n.h3,{id:"run-the-command",children:"Run the command"}),"\n",(0,i.jsxs)(n.p,{children:["Assuming your app ID is ",(0,i.jsx)(n.code,{children:"foo"}),", app secret is ",(0,i.jsx)(n.code,{children:"bar"}),", and your tenant ID is ",(0,i.jsx)(n.code,{children:"baz"}),"."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"npx @logto/tunnel deploy --auth foo:bar --endpoint https://baz.logto.app --experience-path /path/to/your/custom/ui/dist\n"})}),"\n",(0,i.jsxs)(n.p,{children:["If you are using custom domain for your Logto endpoint, an additional option ",(0,i.jsx)(n.code,{children:"--management-api-resource"})," (or ",(0,i.jsx)(n.code,{children:"--resource"}),") must be specified."]}),"\n",(0,i.jsxs)(n.p,{children:["Given the fact that Logto Management API resource is always fixed to ",(0,i.jsx)(n.code,{children:"https://<tenant-id>.logto.app/api"}),". You can run the command as follows:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"npx @logto/tunnel deploy --resource https://baz.logto.app/api --auth foo:bar --endpoint https://your.custom.domain --experience-path /path/to/your/custom/ui/dist\n"})}),"\n",(0,i.jsx)(n.p,{children:"Note:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"This option can be omitted when using the default Logto domain, since the CLI can infer the resource automatically."}),"\n",(0,i.jsx)(n.li,{children:"Using either custom domain or default Logto domain as the endpoint will yield identical results."}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Alternatively, if you have an existing zip and prefer to use it directly, you can specify the ",(0,i.jsx)(n.code,{children:"--zip-path"})," option."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"npx @logto/tunnel deploy --auth foo:bar --endpoint https://baz.logto.app --zip-path /path/to/your/custom/ui/dist.zip\n"})}),"\n",(0,i.jsx)(n.h3,{id:"supported-environment-variables",children:"Supported environment variables"}),"\n",(0,i.jsx)(n.p,{children:"The deploy command also supports environment variables and will automatically map them to the corresponding options."}),"\n",(0,i.jsxs)(n.p,{children:["All supported environment variables are listed below, prefixed with ",(0,i.jsx)(n.code,{children:"LOGTO_"}),"."]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Environment variable"}),(0,i.jsx)(n.th,{children:"CLI option"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"LOGTO_AUTH"}),(0,i.jsx)(n.td,{children:"--auth"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"LOGTO_ENDPOINT"}),(0,i.jsx)(n.td,{children:"--endpoint"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"LOGTO_EXPERIENCE_PATH"}),(0,i.jsx)(n.td,{children:"--experience-path"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"LOGTO_PATH"}),(0,i.jsx)(n.td,{children:"--path"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"LOGTO_MANAGEMENT_API_RESOURCE"}),(0,i.jsx)(n.td,{children:"--management-api-resource"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"LOGTO_RESOURCE"}),(0,i.jsx)(n.td,{children:"--resource"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"LOGTO_ZIP_PATH"}),(0,i.jsx)(n.td,{children:"--zip-path"})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"use-environment-variables",children:"Use environment variables"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["You can create a ",(0,i.jsx)(n.code,{children:".env"})," file in the CLI root directory, or any parent directory where the CLI is located."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",metastring:'title=".env"',children:"LOGTO_AUTH=foo:bar\nLOGTO_ENDPOINT=https://your.custom.domain\nLOGTO_EXPERIENCE_PATH=/path/to/your/custom/ui/dist\nLOGTO_RESOURCE=https://baz.logto.app/api\n"})}),"\n",(0,i.jsx)(n.p,{children:"Then run the command without specifying the options."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"npx @logto/tunnel deploy\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsx)(n.li,{children:"Alternatively, specify these environment variables directly when running the command."}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"LOGTO_AUTH=foo:bar LOGTO_ENDPOINT=https://your.custom.domain LOGTO_EXPERIENCE_PATH=/path/to/your/custom/ui/dist LOGTO_RESOURCE=https://baz.logto.app/api npx @logto/tunnel deploy\n"})})]})}function u(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},79621:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>a});var o=t(58101);const i={},s=o.createContext(i);function r(e){const n=o.useContext(s);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),o.createElement(s.Provider,{value:n},e.children)}}}]);